(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var yd={exports:{}},ja={},vd={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function yE(){if(Sg)return De;Sg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function k(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,B={};function M(D,K,_e){this.props=D,this.context=K,this.refs=B,this.updater=_e||P}M.prototype.isReactComponent={},M.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function G(){}G.prototype=M.prototype;function X(D,K,_e){this.props=D,this.context=K,this.refs=B,this.updater=_e||P}var Y=X.prototype=new G;Y.constructor=X,W(Y,M.prototype),Y.isPureReactComponent=!0;var se=Array.isArray,fe=Object.prototype.hasOwnProperty,ce={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function S(D,K,_e){var le,Ie={},oe=null,Pe=null;if(K!=null)for(le in K.ref!==void 0&&(Pe=K.ref),K.key!==void 0&&(oe=""+K.key),K)fe.call(K,le)&&!A.hasOwnProperty(le)&&(Ie[le]=K[le]);var je=arguments.length-2;if(je===1)Ie.children=_e;else if(1<je){for(var Ke=Array(je),Kt=0;Kt<je;Kt++)Ke[Kt]=arguments[Kt+2];Ie.children=Ke}if(D&&D.defaultProps)for(le in je=D.defaultProps,je)Ie[le]===void 0&&(Ie[le]=je[le]);return{$$typeof:r,type:D,key:oe,ref:Pe,props:Ie,_owner:ce.current}}function x(D,K){return{$$typeof:r,type:D.type,key:K,ref:D.ref,props:D.props,_owner:D._owner}}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function N(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(_e){return K[_e]})}var j=/\/+/g;function R(D,K){return typeof D=="object"&&D!==null&&D.key!=null?N(""+D.key):K.toString(36)}function Ue(D,K,_e,le,Ie){var oe=typeof D;(oe==="undefined"||oe==="boolean")&&(D=null);var Pe=!1;if(D===null)Pe=!0;else switch(oe){case"string":case"number":Pe=!0;break;case"object":switch(D.$$typeof){case r:case e:Pe=!0}}if(Pe)return Pe=D,Ie=Ie(Pe),D=le===""?"."+R(Pe,0):le,se(Ie)?(_e="",D!=null&&(_e=D.replace(j,"$&/")+"/"),Ue(Ie,K,_e,"",function(Kt){return Kt})):Ie!=null&&(L(Ie)&&(Ie=x(Ie,_e+(!Ie.key||Pe&&Pe.key===Ie.key?"":(""+Ie.key).replace(j,"$&/")+"/")+D)),K.push(Ie)),1;if(Pe=0,le=le===""?".":le+":",se(D))for(var je=0;je<D.length;je++){oe=D[je];var Ke=le+R(oe,je);Pe+=Ue(oe,K,_e,Ke,Ie)}else if(Ke=k(D),typeof Ke=="function")for(D=Ke.call(D),je=0;!(oe=D.next()).done;)oe=oe.value,Ke=le+R(oe,je++),Pe+=Ue(oe,K,_e,Ke,Ie);else if(oe==="object")throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Pe}function nt(D,K,_e){if(D==null)return D;var le=[],Ie=0;return Ue(D,le,"","",function(oe){return K.call(_e,oe,Ie++)}),le}function Ye(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(_e){(D._status===0||D._status===-1)&&(D._status=1,D._result=_e)},function(_e){(D._status===0||D._status===-1)&&(D._status=2,D._result=_e)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var We={current:null},ne={transition:null},ye={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:ne,ReactCurrentOwner:ce};function q(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:nt,forEach:function(D,K,_e){nt(D,function(){K.apply(this,arguments)},_e)},count:function(D){var K=0;return nt(D,function(){K++}),K},toArray:function(D){return nt(D,function(K){return K})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},De.Component=M,De.Fragment=t,De.Profiler=o,De.PureComponent=X,De.StrictMode=i,De.Suspense=g,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,De.act=q,De.cloneElement=function(D,K,_e){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var le=W({},D.props),Ie=D.key,oe=D.ref,Pe=D._owner;if(K!=null){if(K.ref!==void 0&&(oe=K.ref,Pe=ce.current),K.key!==void 0&&(Ie=""+K.key),D.type&&D.type.defaultProps)var je=D.type.defaultProps;for(Ke in K)fe.call(K,Ke)&&!A.hasOwnProperty(Ke)&&(le[Ke]=K[Ke]===void 0&&je!==void 0?je[Ke]:K[Ke])}var Ke=arguments.length-2;if(Ke===1)le.children=_e;else if(1<Ke){je=Array(Ke);for(var Kt=0;Kt<Ke;Kt++)je[Kt]=arguments[Kt+2];le.children=je}return{$$typeof:r,type:D.type,key:Ie,ref:oe,props:le,_owner:Pe}},De.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},De.createElement=S,De.createFactory=function(D){var K=S.bind(null,D);return K.type=D,K},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:f,render:D}},De.isValidElement=L,De.lazy=function(D){return{$$typeof:w,_payload:{_status:-1,_result:D},_init:Ye}},De.memo=function(D,K){return{$$typeof:v,type:D,compare:K===void 0?null:K}},De.startTransition=function(D){var K=ne.transition;ne.transition={};try{D()}finally{ne.transition=K}},De.unstable_act=q,De.useCallback=function(D,K){return We.current.useCallback(D,K)},De.useContext=function(D){return We.current.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D){return We.current.useDeferredValue(D)},De.useEffect=function(D,K){return We.current.useEffect(D,K)},De.useId=function(){return We.current.useId()},De.useImperativeHandle=function(D,K,_e){return We.current.useImperativeHandle(D,K,_e)},De.useInsertionEffect=function(D,K){return We.current.useInsertionEffect(D,K)},De.useLayoutEffect=function(D,K){return We.current.useLayoutEffect(D,K)},De.useMemo=function(D,K){return We.current.useMemo(D,K)},De.useReducer=function(D,K,_e){return We.current.useReducer(D,K,_e)},De.useRef=function(D){return We.current.useRef(D)},De.useState=function(D){return We.current.useState(D)},De.useSyncExternalStore=function(D,K,_e){return We.current.useSyncExternalStore(D,K,_e)},De.useTransition=function(){return We.current.useTransition()},De.version="18.3.1",De}var Ig;function ff(){return Ig||(Ig=1,vd.exports=yE()),vd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function vE(){if(kg)return ja;kg=1;var r=ff(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var w,T={},k=null,P=null;v!==void 0&&(k=""+v),g.key!==void 0&&(k=""+g.key),g.ref!==void 0&&(P=g.ref);for(w in g)i.call(g,w)&&!l.hasOwnProperty(w)&&(T[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)T[w]===void 0&&(T[w]=g[w]);return{$$typeof:e,type:f,key:k,ref:P,props:T,_owner:o.current}}return ja.Fragment=t,ja.jsx=h,ja.jsxs=h,ja}var xg;function _E(){return xg||(xg=1,yd.exports=vE()),yd.exports}var y=_E(),O=ff(),ju={},_d={exports:{}},tn={},wd={exports:{}},Ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function wE(){return Cg||(Cg=1,(function(r){function e(ne,ye){var q=ne.length;ne.push(ye);e:for(;0<q;){var D=q-1>>>1,K=ne[D];if(0<o(K,ye))ne[D]=ye,ne[q]=K,q=D;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var ye=ne[0],q=ne.pop();if(q!==ye){ne[0]=q;e:for(var D=0,K=ne.length,_e=K>>>1;D<_e;){var le=2*(D+1)-1,Ie=ne[le],oe=le+1,Pe=ne[oe];if(0>o(Ie,q))oe<K&&0>o(Pe,Ie)?(ne[D]=Pe,ne[oe]=q,D=oe):(ne[D]=Ie,ne[le]=q,D=le);else if(oe<K&&0>o(Pe,q))ne[D]=Pe,ne[oe]=q,D=oe;else break e}}return ye}function o(ne,ye){var q=ne.sortIndex-ye.sortIndex;return q!==0?q:ne.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],v=[],w=1,T=null,k=3,P=!1,W=!1,B=!1,M=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(ne){for(var ye=t(v);ye!==null;){if(ye.callback===null)i(v);else if(ye.startTime<=ne)i(v),ye.sortIndex=ye.expirationTime,e(g,ye);else break;ye=t(v)}}function se(ne){if(B=!1,Y(ne),!W)if(t(g)!==null)W=!0,Ye(fe);else{var ye=t(v);ye!==null&&We(se,ye.startTime-ne)}}function fe(ne,ye){W=!1,B&&(B=!1,G(S),S=-1),P=!0;var q=k;try{for(Y(ye),T=t(g);T!==null&&(!(T.expirationTime>ye)||ne&&!N());){var D=T.callback;if(typeof D=="function"){T.callback=null,k=T.priorityLevel;var K=D(T.expirationTime<=ye);ye=r.unstable_now(),typeof K=="function"?T.callback=K:T===t(g)&&i(g),Y(ye)}else i(g);T=t(g)}if(T!==null)var _e=!0;else{var le=t(v);le!==null&&We(se,le.startTime-ye),_e=!1}return _e}finally{T=null,k=q,P=!1}}var ce=!1,A=null,S=-1,x=5,L=-1;function N(){return!(r.unstable_now()-L<x)}function j(){if(A!==null){var ne=r.unstable_now();L=ne;var ye=!0;try{ye=A(!0,ne)}finally{ye?R():(ce=!1,A=null)}}else ce=!1}var R;if(typeof X=="function")R=function(){X(j)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,nt=Ue.port2;Ue.port1.onmessage=j,R=function(){nt.postMessage(null)}}else R=function(){M(j,0)};function Ye(ne){A=ne,ce||(ce=!0,R())}function We(ne,ye){S=M(function(){ne(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){W||P||(W=!0,Ye(fe))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ne){switch(k){case 1:case 2:case 3:var ye=3;break;default:ye=k}var q=k;k=ye;try{return ne()}finally{k=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,ye){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var q=k;k=ne;try{return ye()}finally{k=q}},r.unstable_scheduleCallback=function(ne,ye,q){var D=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?D+q:D):q=D,ne){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=q+K,ne={id:w++,callback:ye,priorityLevel:ne,startTime:q,expirationTime:K,sortIndex:-1},q>D?(ne.sortIndex=q,e(v,ne),t(g)===null&&ne===t(v)&&(B?(G(S),S=-1):B=!0,We(se,q-D))):(ne.sortIndex=K,e(g,ne),W||P||(W=!0,Ye(fe))),ne},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(ne){var ye=k;return function(){var q=k;k=ye;try{return ne.apply(this,arguments)}finally{k=q}}}})(Ed)),Ed}var Rg;function EE(){return Rg||(Rg=1,wd.exports=wE()),wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function TE(){if(Ag)return tn;Ag=1;var r=ff(),e=EE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function k(n){return g.call(T,n)?!0:g.call(w,n)?!1:v.test(n)?T[n]=!0:(w[n]=!0,!1)}function P(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,s,a,c){if(s===null||typeof s>"u"||P(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(n,s,a,c,d,p,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=p,this.removeEmptyString=E}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];M[s]=new B(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(G,X);M[s]=new B(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(G,X);M[s]=new B(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(G,X);M[s]=new B(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,s,a,c){var d=M.hasOwnProperty(s)?M[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,a,d,c)&&(a=null),c||d===null?k(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var se=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),ce=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),N=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ye(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var q=Object.assign,D;function K(n){if(D===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+n}var _e=!1;function le(n,s){if(!n||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),p=c.stack.split(`
`),E=d.length-1,C=p.length-1;1<=E&&0<=C&&d[E]!==p[C];)C--;for(;1<=E&&0<=C;E--,C--)if(d[E]!==p[C]){if(E!==1||C!==1)do if(E--,C--,0>C||d[E]!==p[C]){var b=`
`+d[E].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=E&&0<=C);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ie(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=le(n.type,!1),n;case 11:return n=le(n.type.render,!1),n;case 1:return n=le(n.type,!0),n;default:return""}}function oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case ce:return"Portal";case x:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case L:return(n._context.displayName||"Context")+".Provider";case j:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nt:return s=n.displayName||null,s!==null?s:oe(n.type)||"Memo";case Ye:s=n._payload,n=n._init;try{return oe(n(s))}catch{}}return null}function Pe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Kt(n){var s=Ke(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,p.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Rs(n){n._valueTracker||(n._valueTracker=Kt(n))}function Ho(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ke(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function As(n,s){var a=s.checked;return q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Sl(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=je(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ps(n,s){s=s.checked,s!=null&&Y(n,"checked",s,!1)}function Ui(n,s){Ps(n,s);var a=je(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?pt(n,s.type,a):s.hasOwnProperty("defaultValue")&&pt(n,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Wo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function pt(n,s,a){(s!=="number"||Hr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ct=Array.isArray;function Cn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function qo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ko(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:je(a)}}function Il(n,s){var a=je(s.value),c=je(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Wr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Go(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ns(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Go(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qr,kl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function zi(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xl=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(n){xl.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Kr[s]=Kr[n]})});function Gr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Kr.hasOwnProperty(n)&&Kr[n]?(""+s).trim():s+"px"}function Ds(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Gr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Qo=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(n,s){if(s){if(Qo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function bs(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gr=null,yr=null,lt=null;function Yo(n){if(n=Sa(n)){if(typeof gr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Zl(s),gr(n.stateNode,n.type,s))}}function Yr(n){yr?lt?lt.push(n):lt=[n]:yr=n}function Jr(){if(yr){var n=yr,s=lt;if(lt=yr=null,Yo(n),s)for(n=0;n<s.length;n++)Yo(s[n])}}function Cl(n,s){return n(s)}function Rl(){}var $n=!1;function Al(n,s,a){if($n)return n(s,a);$n=!0;try{return Cl(n,s,a)}finally{$n=!1,(yr!==null||lt!==null)&&(Rl(),Jr())}}function Bi(n,s){var a=n.stateNode;if(a===null)return null;var c=Zl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Xr=!1;if(f)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Xr=!1}function Pl(n,s,a,c,d,p,E,C,b){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(ee){this.onError(ee)}}var vr=!1,Hn=null,Os=!1,mn=null,Nl={onError:function(n){vr=!0,Hn=n}};function Dl(n,s,a,c,d,p,E,C,b){vr=!1,Hn=null,Pl.apply(Nl,arguments)}function Jo(n,s,a,c,d,p,E,C,b){if(Dl.apply(this,arguments),vr){if(vr){var $=Hn;vr=!1,Hn=null}else throw Error(t(198));Os||(Os=!0,mn=$)}}function An(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Xo(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function bl(n){if(An(n)!==n)throw Error(t(188))}function Ll(n){var s=n.alternate;if(!s){if(s=An(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return bl(d),n;if(p===c)return bl(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var E=!1,C=d.child;C;){if(C===a){E=!0,a=d,c=p;break}if(C===c){E=!0,c=d,a=p;break}C=C.sibling}if(!E){for(C=p.child;C;){if(C===a){E=!0,a=p,c=d;break}if(C===c){E=!0,c=p,a=d;break}C=C.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Ol(n){return n=Ll(n),n!==null?$i(n):null}function $i(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=$i(n);if(s!==null)return s;n=n.sibling}return null}var Zo=e.unstable_scheduleCallback,Vs=e.unstable_cancelCallback,Hi=e.unstable_shouldYield,_r=e.unstable_requestPaint,Je=e.unstable_now,Gc=e.unstable_getCurrentPriorityLevel,Ms=e.unstable_ImmediatePriority,ea=e.unstable_UserBlockingPriority,Wi=e.unstable_NormalPriority,ta=e.unstable_LowPriority,js=e.unstable_IdlePriority,qi=null,sn=null;function Vl(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(qi,n,void 0,(n.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:Ki,Wn=Math.log,gn=Math.LN2;function Ki(n){return n>>>=0,n===0?32:31-(Wn(n)/gn|0)|0}var qn=64,ei=4194304;function Be(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,E=a&268435455;if(E!==0){var C=E&~d;C!==0?c=Be(C):(p&=E,p!==0&&(c=Be(p)))}else E=a&~d,E!==0?c=Be(E):p!==0&&(c=Be(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-on(s),d=1<<a,c|=n[a],s&=~d;return c}function Gi(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var E=31-on(p),C=1<<E,b=d[E];b===-1?((C&a)===0||(C&c)!==0)&&(d[E]=Gi(C,s)):b<=s&&(n.expiredLanes|=C),p&=~C}}function na(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ra(){var n=qn;return qn<<=1,(qn&4194240)===0&&(qn=64),n}function ia(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Yi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-on(s),n[s]=a}function Qc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-on(a),p=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function sa(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-on(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Ve=0;function Kn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var oa,Fs,aa,la,ua,Gn=!1,Us=[],Qn=null,Yn=null,At=null,Ji=new Map,Er=new Map,an=[],Ml="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ti(n,s){switch(n){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ji.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(s.pointerId)}}function Pn(n,s,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Sa(s),s!==null&&Fs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function jl(n,s,a,c,d){switch(s){case"focusin":return Qn=Pn(Qn,n,s,a,c,d),!0;case"dragenter":return Yn=Pn(Yn,n,s,a,c,d),!0;case"mouseover":return At=Pn(At,n,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return Ji.set(p,Pn(Ji.get(p)||null,n,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Er.set(p,Pn(Er.get(p)||null,n,s,a,c,d)),!0}return!1}function zs(n){var s=ts(n.target);if(s!==null){var a=An(s);if(a!==null){if(s=a.tag,s===13){if(s=Xo(a),s!==null){n.blockedOn=s,ua(n.priority,function(){aa(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ge(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Bs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Qr=c,a.target.dispatchEvent(c),Qr=null}else return s=Sa(a),s!==null&&Fs(s),n.blockedOn=a,!1;s.shift()}return!0}function Fl(n,s,a){Ge(n)&&a.delete(s)}function Yc(){Gn=!1,Qn!==null&&Ge(Qn)&&(Qn=null),Yn!==null&&Ge(Yn)&&(Yn=null),At!==null&&Ge(At)&&(At=null),Ji.forEach(Fl),Er.forEach(Fl)}function ni(n,s){n.blockedOn===s&&(n.blockedOn=null,Gn||(Gn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yc)))}function ri(n){function s(d){return ni(d,n)}if(0<Us.length){ni(Us[0],n);for(var a=1;a<Us.length;a++){var c=Us[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Qn!==null&&ni(Qn,n),Yn!==null&&ni(Yn,n),At!==null&&ni(At,n),Ji.forEach(s),Er.forEach(s),a=0;a<an.length;a++)c=an[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)zs(a),a.blockedOn===null&&an.shift()}var Tr=se.ReactCurrentBatchConfig,Sr=!0;function Jn(n,s,a,c){var d=Ve,p=Tr.transition;Tr.transition=null;try{Ve=1,ca(n,s,a,c)}finally{Ve=d,Tr.transition=p}}function Ul(n,s,a,c){var d=Ve,p=Tr.transition;Tr.transition=null;try{Ve=4,ca(n,s,a,c)}finally{Ve=d,Tr.transition=p}}function ca(n,s,a,c){if(Sr){var d=Bs(n,s,a,c);if(d===null)ah(n,s,c,Xn,a),ti(n,c);else if(jl(d,n,s,a,c))c.stopPropagation();else if(ti(n,c),s&4&&-1<Ml.indexOf(n)){for(;d!==null;){var p=Sa(d);if(p!==null&&oa(p),p=Bs(n,s,a,c),p===null&&ah(n,s,c,Xn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else ah(n,s,c,null,a)}}var Xn=null;function Bs(n,s,a,c){if(Xn=null,n=Ls(c),n=ts(n),n!==null)if(s=An(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Xo(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Xn=n,null}function $s(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gc()){case Ms:return 1;case ea:return 4;case Wi:case ta:return 16;case js:return 536870912;default:return 16}default:return 16}}var ln=null,Hs=null,Ir=null;function zl(){if(Ir)return Ir;var n,s=Hs,a=s.length,c,d="value"in ln?ln.value:ln.textContent,p=d.length;for(n=0;n<a&&s[n]===d[n];n++);var E=a-n;for(c=1;c<=E&&s[a-c]===d[p-c];c++);return Ir=d.slice(n,1<c?1-c:void 0)}function Xi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function ha(){return!1}function jt(n){function s(a,c,d,p,E){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zn:ha,this.isPropagationStopped=ha,this}return q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),s}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=jt(er),ii=q({},er,{view:0,detail:0}),Ws=jt(ii),qs,Ks,un,es=q({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==un&&(un&&n.type==="mousemove"?(qs=n.screenX-un.screenX,Ks=n.screenY-un.screenY):Ks=qs=0,un=n),qs)},movementY:function(n){return"movementY"in n?n.movementY:Ks}}),da=jt(es),Bl=q({},es,{dataTransfer:0}),$l=jt(Bl),Gs=q({},ii,{relatedTarget:0}),Pt=jt(Gs),Hl=q({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Wl=jt(Hl),si=q({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=jt(si),m=q({},er,{data:0}),_=jt(m),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=H[n])?!!s[n]:!1}function Re(){return ie}var ht=q({},ii,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Xi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(n){return n.type==="keypress"?Xi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qe=jt(ht),mt=q({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cn=jt(mt),kr=q({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),tr=jt(kr),nr=q({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qs=jt(nr),fa=q({},es,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hw=jt(fa),dw=[9,13,27,32],Jc=f&&"CompositionEvent"in window,pa=null;f&&"documentMode"in document&&(pa=document.documentMode);var fw=f&&"TextEvent"in window&&!pa,mp=f&&(!Jc||pa&&8<pa&&11>=pa),gp=" ",yp=!1;function vp(n,s){switch(n){case"keyup":return dw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _p(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ys=!1;function pw(n,s){switch(n){case"compositionend":return _p(s);case"keypress":return s.which!==32?null:(yp=!0,gp);case"textInput":return n=s.data,n===gp&&yp?null:n;default:return null}}function mw(n,s){if(Ys)return n==="compositionend"||!Jc&&vp(n,s)?(n=zl(),Ir=Hs=ln=null,Ys=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return mp&&s.locale!=="ko"?null:s.data;default:return null}}var gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gw[n.type]:s==="textarea"}function Ep(n,s,a,c){Yr(c),s=Yl(s,"onChange"),0<s.length&&(a=new Zi("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ma=null,ga=null;function yw(n){Fp(n,0)}function ql(n){var s=to(n);if(Ho(s))return n}function vw(n,s){if(n==="change")return s}var Tp=!1;if(f){var Xc;if(f){var Zc="oninput"in document;if(!Zc){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Zc=typeof Sp.oninput=="function"}Xc=Zc}else Xc=!1;Tp=Xc&&(!document.documentMode||9<document.documentMode)}function Ip(){ma&&(ma.detachEvent("onpropertychange",kp),ga=ma=null)}function kp(n){if(n.propertyName==="value"&&ql(ga)){var s=[];Ep(s,ga,n,Ls(n)),Al(yw,s)}}function _w(n,s,a){n==="focusin"?(Ip(),ma=s,ga=a,ma.attachEvent("onpropertychange",kp)):n==="focusout"&&Ip()}function ww(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ql(ga)}function Ew(n,s){if(n==="click")return ql(s)}function Tw(n,s){if(n==="input"||n==="change")return ql(s)}function Sw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Nn=typeof Object.is=="function"?Object.is:Sw;function ya(n,s){if(Nn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Nn(n[d],s[d]))return!1}return!0}function xp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Cp(n,s){var a=xp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xp(a)}}function Rp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Rp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ap(){for(var n=window,s=Hr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Hr(n.document)}return s}function eh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Iw(n){var s=Ap(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Rp(a.ownerDocument.documentElement,a)){if(c!==null&&eh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Cp(a,p);var E=Cp(a,c);d&&E&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kw=f&&"documentMode"in document&&11>=document.documentMode,Js=null,th=null,va=null,nh=!1;function Pp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||Js==null||Js!==Hr(c)||(c=Js,"selectionStart"in c&&eh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),va&&ya(va,c)||(va=c,c=Yl(th,"onSelect"),0<c.length&&(s=new Zi("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Js)))}function Kl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Xs={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},rh={},Np={};f&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function Gl(n){if(rh[n])return rh[n];if(!Xs[n])return n;var s=Xs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Np)return rh[n]=s[a];return n}var Dp=Gl("animationend"),bp=Gl("animationiteration"),Lp=Gl("animationstart"),Op=Gl("transitionend"),Vp=new Map,Mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(n,s){Vp.set(n,s),l(s,[n])}for(var ih=0;ih<Mp.length;ih++){var sh=Mp[ih],xw=sh.toLowerCase(),Cw=sh[0].toUpperCase()+sh.slice(1);oi(xw,"on"+Cw)}oi(Dp,"onAnimationEnd"),oi(bp,"onAnimationIteration"),oi(Lp,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(Op,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function jp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Jo(c,s,void 0,n),n.currentTarget=null}function Fp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var E=c.length-1;0<=E;E--){var C=c[E],b=C.instance,$=C.currentTarget;if(C=C.listener,b!==p&&d.isPropagationStopped())break e;jp(d,C,$),p=b}else for(E=0;E<c.length;E++){if(C=c[E],b=C.instance,$=C.currentTarget,C=C.listener,b!==p&&d.isPropagationStopped())break e;jp(d,C,$),p=b}}}if(Os)throw n=mn,Os=!1,mn=null,n}function Xe(n,s){var a=s[fh];a===void 0&&(a=s[fh]=new Set);var c=n+"__bubble";a.has(c)||(Up(s,n,2,!1),a.add(c))}function oh(n,s,a){var c=0;s&&(c|=4),Up(a,n,c,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function wa(n){if(!n[Ql]){n[Ql]=!0,i.forEach(function(a){a!=="selectionchange"&&(Rw.has(a)||oh(a,!1,n),oh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,oh("selectionchange",!1,s))}}function Up(n,s,a,c){switch($s(s)){case 1:var d=Jn;break;case 4:d=Ul;break;default:d=ca}a=d.bind(null,s,a,n),d=void 0,!Xr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function ah(n,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(E===4)for(E=c.return;E!==null;){var b=E.tag;if((b===3||b===4)&&(b=E.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;E=E.return}for(;C!==null;){if(E=ts(C),E===null)return;if(b=E.tag,b===5||b===6){c=p=E;continue e}C=C.parentNode}}c=c.return}Al(function(){var $=p,ee=Ls(a),te=[];e:{var Z=Vp.get(n);if(Z!==void 0){var ae=Zi,de=n;switch(n){case"keypress":if(Xi(a)===0)break e;case"keydown":case"keyup":ae=qe;break;case"focusin":de="focus",ae=Pt;break;case"focusout":de="blur",ae=Pt;break;case"beforeblur":case"afterblur":ae=Pt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=$l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=tr;break;case Dp:case bp:case Lp:ae=Wl;break;case Op:ae=Qs;break;case"scroll":ae=Ws;break;case"wheel":ae=hw;break;case"copy":case"cut":case"paste":ae=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=cn}var me=(s&4)!==0,dt=!me&&n==="scroll",F=me?Z!==null?Z+"Capture":null:Z;me=[];for(var V=$,z;V!==null;){z=V;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,F!==null&&(re=Bi(V,F),re!=null&&me.push(Ea(V,re,z)))),dt)break;V=V.return}0<me.length&&(Z=new ae(Z,de,null,a,ee),te.push({event:Z,listeners:me}))}}if((s&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",Z&&a!==Qr&&(de=a.relatedTarget||a.fromElement)&&(ts(de)||de[xr]))break e;if((ae||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=$,de=de?ts(de):null,de!==null&&(dt=An(de),de!==dt||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=$),ae!==de)){if(me=da,re="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(me=cn,re="onPointerLeave",F="onPointerEnter",V="pointer"),dt=ae==null?Z:to(ae),z=de==null?Z:to(de),Z=new me(re,V+"leave",ae,a,ee),Z.target=dt,Z.relatedTarget=z,re=null,ts(ee)===$&&(me=new me(F,V+"enter",de,a,ee),me.target=z,me.relatedTarget=dt,re=me),dt=re,ae&&de)t:{for(me=ae,F=de,V=0,z=me;z;z=Zs(z))V++;for(z=0,re=F;re;re=Zs(re))z++;for(;0<V-z;)me=Zs(me),V--;for(;0<z-V;)F=Zs(F),z--;for(;V--;){if(me===F||F!==null&&me===F.alternate)break t;me=Zs(me),F=Zs(F)}me=null}else me=null;ae!==null&&zp(te,Z,ae,me,!1),de!==null&&dt!==null&&zp(te,dt,de,me,!0)}}e:{if(Z=$?to($):window,ae=Z.nodeName&&Z.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Z.type==="file")var ve=vw;else if(wp(Z))if(Tp)ve=Tw;else{ve=ww;var Ee=_w}else(ae=Z.nodeName)&&ae.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ve=Ew);if(ve&&(ve=ve(n,$))){Ep(te,ve,a,ee);break e}Ee&&Ee(n,Z,$),n==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&pt(Z,"number",Z.value)}switch(Ee=$?to($):window,n){case"focusin":(wp(Ee)||Ee.contentEditable==="true")&&(Js=Ee,th=$,va=null);break;case"focusout":va=th=Js=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Pp(te,a,ee);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Pp(te,a,ee)}var Te;if(Jc)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ys?vp(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(mp&&a.locale!=="ko"&&(Ys||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ys&&(Te=zl()):(ln=ee,Hs="value"in ln?ln.value:ln.textContent,Ys=!0)),Ee=Yl($,ke),0<Ee.length&&(ke=new _(ke,n,null,a,ee),te.push({event:ke,listeners:Ee}),Te?ke.data=Te:(Te=_p(a),Te!==null&&(ke.data=Te)))),(Te=fw?pw(n,a):mw(n,a))&&($=Yl($,"onBeforeInput"),0<$.length&&(ee=new _("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:$}),ee.data=Te))}Fp(te,s)})}function Ea(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Yl(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Bi(n,a),p!=null&&c.unshift(Ea(n,p,d)),p=Bi(n,s),p!=null&&c.push(Ea(n,p,d))),n=n.return}return c}function Zs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zp(n,s,a,c,d){for(var p=s._reactName,E=[];a!==null&&a!==c;){var C=a,b=C.alternate,$=C.stateNode;if(b!==null&&b===c)break;C.tag===5&&$!==null&&(C=$,d?(b=Bi(a,p),b!=null&&E.unshift(Ea(a,b,C))):d||(b=Bi(a,p),b!=null&&E.push(Ea(a,b,C)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var Aw=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function Bp(n){return(typeof n=="string"?n:""+n).replace(Aw,`
`).replace(Pw,"")}function Jl(n,s,a){if(s=Bp(s),Bp(n)!==s&&a)throw Error(t(425))}function Xl(){}var lh=null,uh=null;function ch(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,Dw=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(n){return $p.resolve(null).then(n).catch(bw)}:hh;function bw(n){setTimeout(function(){throw n})}function dh(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ri(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ri(s)}function ai(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Hp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var eo=Math.random().toString(36).slice(2),rr="__reactFiber$"+eo,Ta="__reactProps$"+eo,xr="__reactContainer$"+eo,fh="__reactEvents$"+eo,Lw="__reactListeners$"+eo,Ow="__reactHandles$"+eo;function ts(n){var s=n[rr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[xr]||a[rr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Hp(n);n!==null;){if(a=n[rr])return a;n=Hp(n)}return s}n=a,a=n.parentNode}return null}function Sa(n){return n=n[rr]||n[xr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function to(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Zl(n){return n[Ta]||null}var ph=[],no=-1;function li(n){return{current:n}}function Ze(n){0>no||(n.current=ph[no],ph[no]=null,no--)}function Qe(n,s){no++,ph[no]=n.current,n.current=s}var ui={},Ft=li(ui),Yt=li(!1),ns=ui;function ro(n,s){var a=n.type.contextTypes;if(!a)return ui;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Jt(n){return n=n.childContextTypes,n!=null}function eu(){Ze(Yt),Ze(Ft)}function Wp(n,s,a){if(Ft.current!==ui)throw Error(t(168));Qe(Ft,s),Qe(Yt,a)}function qp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Pe(n)||"Unknown",d));return q({},a,c)}function tu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ui,ns=Ft.current,Qe(Ft,n),Qe(Yt,Yt.current),!0}function Kp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=qp(n,s,ns),c.__reactInternalMemoizedMergedChildContext=n,Ze(Yt),Ze(Ft),Qe(Ft,n)):Ze(Yt),Qe(Yt,a)}var Cr=null,nu=!1,mh=!1;function Gp(n){Cr===null?Cr=[n]:Cr.push(n)}function Vw(n){nu=!0,Gp(n)}function ci(){if(!mh&&Cr!==null){mh=!0;var n=0,s=Ve;try{var a=Cr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Cr=null,nu=!1}catch(d){throw Cr!==null&&(Cr=Cr.slice(n+1)),Zo(Ms,ci),d}finally{Ve=s,mh=!1}}return null}var io=[],so=0,ru=null,iu=0,yn=[],vn=0,rs=null,Rr=1,Ar="";function is(n,s){io[so++]=iu,io[so++]=ru,ru=n,iu=s}function Qp(n,s,a){yn[vn++]=Rr,yn[vn++]=Ar,yn[vn++]=rs,rs=n;var c=Rr;n=Ar;var d=32-on(c)-1;c&=~(1<<d),a+=1;var p=32-on(s)+d;if(30<p){var E=d-d%5;p=(c&(1<<E)-1).toString(32),c>>=E,d-=E,Rr=1<<32-on(s)+d|a<<d|c,Ar=p+n}else Rr=1<<p|a<<d|c,Ar=n}function gh(n){n.return!==null&&(is(n,1),Qp(n,1,0))}function yh(n){for(;n===ru;)ru=io[--so],io[so]=null,iu=io[--so],io[so]=null;for(;n===rs;)rs=yn[--vn],yn[vn]=null,Ar=yn[--vn],yn[vn]=null,Rr=yn[--vn],yn[vn]=null}var hn=null,dn=null,rt=!1,Dn=null;function Yp(n,s){var a=Tn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Jp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,hn=n,dn=ai(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,hn=n,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=rs!==null?{id:Rr,overflow:Ar}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Tn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,hn=n,dn=null,!0):!1;default:return!1}}function vh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _h(n){if(rt){var s=dn;if(s){var a=s;if(!Jp(n,s)){if(vh(n))throw Error(t(418));s=ai(a.nextSibling);var c=hn;s&&Jp(n,s)?Yp(c,a):(n.flags=n.flags&-4097|2,rt=!1,hn=n)}}else{if(vh(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,hn=n}}}function Xp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function su(n){if(n!==hn)return!1;if(!rt)return Xp(n),rt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ch(n.type,n.memoizedProps)),s&&(s=dn)){if(vh(n))throw Zp(),Error(t(418));for(;s;)Yp(n,s),s=ai(s.nextSibling)}if(Xp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){dn=ai(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}dn=null}}else dn=hn?ai(n.stateNode.nextSibling):null;return!0}function Zp(){for(var n=dn;n;)n=ai(n.nextSibling)}function oo(){dn=hn=null,rt=!1}function wh(n){Dn===null?Dn=[n]:Dn.push(n)}var Mw=se.ReactCurrentBatchConfig;function Ia(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(E){var C=d.refs;E===null?delete C[p]:C[p]=E},s._stringRef=p,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ou(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function em(n){var s=n._init;return s(n._payload)}function tm(n){function s(F,V){if(n){var z=F.deletions;z===null?(F.deletions=[V],F.flags|=16):z.push(V)}}function a(F,V){if(!n)return null;for(;V!==null;)s(F,V),V=V.sibling;return null}function c(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function d(F,V){return F=vi(F,V),F.index=0,F.sibling=null,F}function p(F,V,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<V?(F.flags|=2,V):z):(F.flags|=2,V)):(F.flags|=1048576,V)}function E(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,V,z,re){return V===null||V.tag!==6?(V=hd(z,F.mode,re),V.return=F,V):(V=d(V,z),V.return=F,V)}function b(F,V,z,re){var ve=z.type;return ve===A?ee(F,V,z.props.children,re,z.key):V!==null&&(V.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Ye&&em(ve)===V.type)?(re=d(V,z.props),re.ref=Ia(F,V,z),re.return=F,re):(re=Pu(z.type,z.key,z.props,null,F.mode,re),re.ref=Ia(F,V,z),re.return=F,re)}function $(F,V,z,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=dd(z,F.mode,re),V.return=F,V):(V=d(V,z.children||[]),V.return=F,V)}function ee(F,V,z,re,ve){return V===null||V.tag!==7?(V=ds(z,F.mode,re,ve),V.return=F,V):(V=d(V,z),V.return=F,V)}function te(F,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=hd(""+V,F.mode,z),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case fe:return z=Pu(V.type,V.key,V.props,null,F.mode,z),z.ref=Ia(F,null,V),z.return=F,z;case ce:return V=dd(V,F.mode,z),V.return=F,V;case Ye:var re=V._init;return te(F,re(V._payload),z)}if(ct(V)||ye(V))return V=ds(V,F.mode,z,null),V.return=F,V;ou(F,V)}return null}function Z(F,V,z,re){var ve=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ve!==null?null:C(F,V,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:return z.key===ve?b(F,V,z,re):null;case ce:return z.key===ve?$(F,V,z,re):null;case Ye:return ve=z._init,Z(F,V,ve(z._payload),re)}if(ct(z)||ye(z))return ve!==null?null:ee(F,V,z,re,null);ou(F,z)}return null}function ae(F,V,z,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return F=F.get(z)||null,C(V,F,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case fe:return F=F.get(re.key===null?z:re.key)||null,b(V,F,re,ve);case ce:return F=F.get(re.key===null?z:re.key)||null,$(V,F,re,ve);case Ye:var Ee=re._init;return ae(F,V,z,Ee(re._payload),ve)}if(ct(re)||ye(re))return F=F.get(z)||null,ee(V,F,re,ve,null);ou(V,re)}return null}function de(F,V,z,re){for(var ve=null,Ee=null,Te=V,ke=V=0,Ct=null;Te!==null&&ke<z.length;ke++){Te.index>ke?(Ct=Te,Te=null):Ct=Te.sibling;var ze=Z(F,Te,z[ke],re);if(ze===null){Te===null&&(Te=Ct);break}n&&Te&&ze.alternate===null&&s(F,Te),V=p(ze,V,ke),Ee===null?ve=ze:Ee.sibling=ze,Ee=ze,Te=Ct}if(ke===z.length)return a(F,Te),rt&&is(F,ke),ve;if(Te===null){for(;ke<z.length;ke++)Te=te(F,z[ke],re),Te!==null&&(V=p(Te,V,ke),Ee===null?ve=Te:Ee.sibling=Te,Ee=Te);return rt&&is(F,ke),ve}for(Te=c(F,Te);ke<z.length;ke++)Ct=ae(Te,F,ke,z[ke],re),Ct!==null&&(n&&Ct.alternate!==null&&Te.delete(Ct.key===null?ke:Ct.key),V=p(Ct,V,ke),Ee===null?ve=Ct:Ee.sibling=Ct,Ee=Ct);return n&&Te.forEach(function(_i){return s(F,_i)}),rt&&is(F,ke),ve}function me(F,V,z,re){var ve=ye(z);if(typeof ve!="function")throw Error(t(150));if(z=ve.call(z),z==null)throw Error(t(151));for(var Ee=ve=null,Te=V,ke=V=0,Ct=null,ze=z.next();Te!==null&&!ze.done;ke++,ze=z.next()){Te.index>ke?(Ct=Te,Te=null):Ct=Te.sibling;var _i=Z(F,Te,ze.value,re);if(_i===null){Te===null&&(Te=Ct);break}n&&Te&&_i.alternate===null&&s(F,Te),V=p(_i,V,ke),Ee===null?ve=_i:Ee.sibling=_i,Ee=_i,Te=Ct}if(ze.done)return a(F,Te),rt&&is(F,ke),ve;if(Te===null){for(;!ze.done;ke++,ze=z.next())ze=te(F,ze.value,re),ze!==null&&(V=p(ze,V,ke),Ee===null?ve=ze:Ee.sibling=ze,Ee=ze);return rt&&is(F,ke),ve}for(Te=c(F,Te);!ze.done;ke++,ze=z.next())ze=ae(Te,F,ke,ze.value,re),ze!==null&&(n&&ze.alternate!==null&&Te.delete(ze.key===null?ke:ze.key),V=p(ze,V,ke),Ee===null?ve=ze:Ee.sibling=ze,Ee=ze);return n&&Te.forEach(function(gE){return s(F,gE)}),rt&&is(F,ke),ve}function dt(F,V,z,re){if(typeof z=="object"&&z!==null&&z.type===A&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:e:{for(var ve=z.key,Ee=V;Ee!==null;){if(Ee.key===ve){if(ve=z.type,ve===A){if(Ee.tag===7){a(F,Ee.sibling),V=d(Ee,z.props.children),V.return=F,F=V;break e}}else if(Ee.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Ye&&em(ve)===Ee.type){a(F,Ee.sibling),V=d(Ee,z.props),V.ref=Ia(F,Ee,z),V.return=F,F=V;break e}a(F,Ee);break}else s(F,Ee);Ee=Ee.sibling}z.type===A?(V=ds(z.props.children,F.mode,re,z.key),V.return=F,F=V):(re=Pu(z.type,z.key,z.props,null,F.mode,re),re.ref=Ia(F,V,z),re.return=F,F=re)}return E(F);case ce:e:{for(Ee=z.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(F,V.sibling),V=d(V,z.children||[]),V.return=F,F=V;break e}else{a(F,V);break}else s(F,V);V=V.sibling}V=dd(z,F.mode,re),V.return=F,F=V}return E(F);case Ye:return Ee=z._init,dt(F,V,Ee(z._payload),re)}if(ct(z))return de(F,V,z,re);if(ye(z))return me(F,V,z,re);ou(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(F,V.sibling),V=d(V,z),V.return=F,F=V):(a(F,V),V=hd(z,F.mode,re),V.return=F,F=V),E(F)):a(F,V)}return dt}var ao=tm(!0),nm=tm(!1),au=li(null),lu=null,lo=null,Eh=null;function Th(){Eh=lo=lu=null}function Sh(n){var s=au.current;Ze(au),n._currentValue=s}function Ih(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function uo(n,s){lu=n,Eh=lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Xt=!0),n.firstContext=null)}function _n(n){var s=n._currentValue;if(Eh!==n)if(n={context:n,memoizedValue:s,next:null},lo===null){if(lu===null)throw Error(t(308));lo=n,lu.dependencies={lanes:0,firstContext:n}}else lo=lo.next=n;return s}var ss=null;function kh(n){ss===null?ss=[n]:ss.push(n)}function rm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,kh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Pr(n,c)}function Pr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var hi=!1;function xh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function im(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function di(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Pr(n,a)}return d=c.interleaved,d===null?(s.next=s,kh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Pr(n,a)}function uu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,sa(n,a)}}function sm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function cu(n,s,a,c){var d=n.updateQueue;hi=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var b=C,$=b.next;b.next=null,E===null?p=$:E.next=$,E=b;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==E&&(C===null?ee.firstBaseUpdate=$:C.next=$,ee.lastBaseUpdate=b))}if(p!==null){var te=d.baseState;E=0,ee=$=b=null,C=p;do{var Z=C.lane,ae=C.eventTime;if((c&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ae,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var de=n,me=C;switch(Z=s,ae=a,me.tag){case 1:if(de=me.payload,typeof de=="function"){te=de.call(ae,te,Z);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=me.payload,Z=typeof de=="function"?de.call(ae,te,Z):de,Z==null)break e;te=q({},te,Z);break e;case 2:hi=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Z=d.effects,Z===null?d.effects=[C]:Z.push(C))}else ae={eventTime:ae,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?($=ee=ae,b=te):ee=ee.next=ae,E|=Z;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);if(ee===null&&(b=te),d.baseState=b,d.firstBaseUpdate=$,d.lastBaseUpdate=ee,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);ls|=E,n.lanes=E,n.memoizedState=te}}function om(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ka={},ir=li(ka),xa=li(ka),Ca=li(ka);function os(n){if(n===ka)throw Error(t(174));return n}function Ch(n,s){switch(Qe(Ca,s),Qe(xa,n),Qe(ir,ka),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ns(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ns(s,n)}Ze(ir),Qe(ir,s)}function co(){Ze(ir),Ze(xa),Ze(Ca)}function am(n){os(Ca.current);var s=os(ir.current),a=Ns(s,n.type);s!==a&&(Qe(xa,n),Qe(ir,a))}function Rh(n){xa.current===n&&(Ze(ir),Ze(xa))}var it=li(0);function hu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ah=[];function Ph(){for(var n=0;n<Ah.length;n++)Ah[n]._workInProgressVersionPrimary=null;Ah.length=0}var du=se.ReactCurrentDispatcher,Nh=se.ReactCurrentBatchConfig,as=0,st=null,wt=null,kt=null,fu=!1,Ra=!1,Aa=0,jw=0;function Ut(){throw Error(t(321))}function Dh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Nn(n[a],s[a]))return!1;return!0}function bh(n,s,a,c,d,p){if(as=p,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,du.current=n===null||n.memoizedState===null?Bw:$w,n=a(c,d),Ra){p=0;do{if(Ra=!1,Aa=0,25<=p)throw Error(t(301));p+=1,kt=wt=null,s.updateQueue=null,du.current=Hw,n=a(c,d)}while(Ra)}if(du.current=gu,s=wt!==null&&wt.next!==null,as=0,kt=wt=st=null,fu=!1,s)throw Error(t(300));return n}function Lh(){var n=Aa!==0;return Aa=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?st.memoizedState=kt=n:kt=kt.next=n,kt}function wn(){if(wt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var s=kt===null?st.memoizedState:kt.next;if(s!==null)kt=s,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},kt===null?st.memoizedState=kt=n:kt=kt.next=n}return kt}function Pa(n,s){return typeof s=="function"?s(n):s}function Oh(n){var s=wn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var C=E=null,b=null,$=p;do{var ee=$.lane;if((as&ee)===ee)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var te={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(C=b=te,E=c):b=b.next=te,st.lanes|=ee,ls|=ee}$=$.next}while($!==null&&$!==p);b===null?E=c:b.next=C,Nn(c,s.memoizedState)||(Xt=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,st.lanes|=p,ls|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Vh(n){var s=wn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do p=n(p,E.action),E=E.next;while(E!==d);Nn(p,s.memoizedState)||(Xt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function lm(){}function um(n,s){var a=st,c=wn(),d=s(),p=!Nn(c.memoizedState,d);if(p&&(c.memoizedState=d,Xt=!0),c=c.queue,Mh(dm.bind(null,a,c,n),[n]),c.getSnapshot!==s||p||kt!==null&&kt.memoizedState.tag&1){if(a.flags|=2048,Na(9,hm.bind(null,a,c,d,s),void 0,null),xt===null)throw Error(t(349));(as&30)!==0||cm(a,s,d)}return d}function cm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function hm(n,s,a,c){s.value=a,s.getSnapshot=c,fm(s)&&pm(n)}function dm(n,s,a){return a(function(){fm(s)&&pm(n)})}function fm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Nn(n,a)}catch{return!0}}function pm(n){var s=Pr(n,1);s!==null&&Vn(s,n,1,-1)}function mm(n){var s=sr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:n},s.queue=n,n=n.dispatch=zw.bind(null,st,n),[s.memoizedState,n]}function Na(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function gm(){return wn().memoizedState}function pu(n,s,a,c){var d=sr();st.flags|=n,d.memoizedState=Na(1|s,a,void 0,c===void 0?null:c)}function mu(n,s,a,c){var d=wn();c=c===void 0?null:c;var p=void 0;if(wt!==null){var E=wt.memoizedState;if(p=E.destroy,c!==null&&Dh(c,E.deps)){d.memoizedState=Na(s,a,p,c);return}}st.flags|=n,d.memoizedState=Na(1|s,a,p,c)}function ym(n,s){return pu(8390656,8,n,s)}function Mh(n,s){return mu(2048,8,n,s)}function vm(n,s){return mu(4,2,n,s)}function _m(n,s){return mu(4,4,n,s)}function wm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Em(n,s,a){return a=a!=null?a.concat([n]):null,mu(4,4,wm.bind(null,s,n),a)}function jh(){}function Tm(n,s){var a=wn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Dh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Sm(n,s){var a=wn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Dh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Im(n,s,a){return(as&21)===0?(n.baseState&&(n.baseState=!1,Xt=!0),n.memoizedState=a):(Nn(a,s)||(a=ra(),st.lanes|=a,ls|=a,n.baseState=!0),s)}function Fw(n,s){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=Nh.transition;Nh.transition={};try{n(!1),s()}finally{Ve=a,Nh.transition=c}}function km(){return wn().memoizedState}function Uw(n,s,a){var c=gi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},xm(n))Cm(s,a);else if(a=rm(n,s,a,c),a!==null){var d=Qt();Vn(a,n,c,d),Rm(a,s,c)}}function zw(n,s,a){var c=gi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(xm(n))Cm(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,C=p(E,a);if(d.hasEagerState=!0,d.eagerState=C,Nn(C,E)){var b=s.interleaved;b===null?(d.next=d,kh(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}a=rm(n,s,d,c),a!==null&&(d=Qt(),Vn(a,n,c,d),Rm(a,s,c))}}function xm(n){var s=n.alternate;return n===st||s!==null&&s===st}function Cm(n,s){Ra=fu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Rm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,sa(n,a)}}var gu={readContext:_n,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},Bw={readContext:_n,useCallback:function(n,s){return sr().memoizedState=[n,s===void 0?null:s],n},useContext:_n,useEffect:ym,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,pu(4194308,4,wm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return pu(4194308,4,n,s)},useInsertionEffect:function(n,s){return pu(4,2,n,s)},useMemo:function(n,s){var a=sr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=sr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Uw.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var s=sr();return n={current:n},s.memoizedState=n},useState:mm,useDebugValue:jh,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=mm(!1),s=n[0];return n=Fw.bind(null,n[1]),sr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=st,d=sr();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),xt===null)throw Error(t(349));(as&30)!==0||cm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,ym(dm.bind(null,c,p,n),[n]),c.flags|=2048,Na(9,hm.bind(null,c,p,a,s),void 0,null),a},useId:function(){var n=sr(),s=xt.identifierPrefix;if(rt){var a=Ar,c=Rr;a=(c&~(1<<32-on(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Aa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=jw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},$w={readContext:_n,useCallback:Tm,useContext:_n,useEffect:Mh,useImperativeHandle:Em,useInsertionEffect:vm,useLayoutEffect:_m,useMemo:Sm,useReducer:Oh,useRef:gm,useState:function(){return Oh(Pa)},useDebugValue:jh,useDeferredValue:function(n){var s=wn();return Im(s,wt.memoizedState,n)},useTransition:function(){var n=Oh(Pa)[0],s=wn().memoizedState;return[n,s]},useMutableSource:lm,useSyncExternalStore:um,useId:km,unstable_isNewReconciler:!1},Hw={readContext:_n,useCallback:Tm,useContext:_n,useEffect:Mh,useImperativeHandle:Em,useInsertionEffect:vm,useLayoutEffect:_m,useMemo:Sm,useReducer:Vh,useRef:gm,useState:function(){return Vh(Pa)},useDebugValue:jh,useDeferredValue:function(n){var s=wn();return wt===null?s.memoizedState=n:Im(s,wt.memoizedState,n)},useTransition:function(){var n=Vh(Pa)[0],s=wn().memoizedState;return[n,s]},useMutableSource:lm,useSyncExternalStore:um,useId:km,unstable_isNewReconciler:!1};function bn(n,s){if(n&&n.defaultProps){s=q({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Fh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:q({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var yu={isMounted:function(n){return(n=n._reactInternals)?An(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Qt(),d=gi(n),p=Nr(c,d);p.payload=s,a!=null&&(p.callback=a),s=di(n,p,d),s!==null&&(Vn(s,n,d,c),uu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Qt(),d=gi(n),p=Nr(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=di(n,p,d),s!==null&&(Vn(s,n,d,c),uu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Qt(),c=gi(n),d=Nr(a,c);d.tag=2,s!=null&&(d.callback=s),s=di(n,d,c),s!==null&&(Vn(s,n,c,a),uu(s,n,c))}};function Am(n,s,a,c,d,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):s.prototype&&s.prototype.isPureReactComponent?!ya(a,c)||!ya(d,p):!0}function Pm(n,s,a){var c=!1,d=ui,p=s.contextType;return typeof p=="object"&&p!==null?p=_n(p):(d=Jt(s)?ns:Ft.current,c=s.contextTypes,p=(c=c!=null)?ro(n,d):ui),s=new s(a,p),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),s}function Nm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&yu.enqueueReplaceState(s,s.state,null)}function Uh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},xh(n);var p=s.contextType;typeof p=="object"&&p!==null?d.context=_n(p):(p=Jt(s)?ns:Ft.current,d.context=ro(n,p)),d.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Fh(n,s,p,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&yu.enqueueReplaceState(d,d.state,null),cu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ho(n,s){try{var a="",c=s;do a+=Ie(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:s,stack:d,digest:null}}function zh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Bh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Ww=typeof WeakMap=="function"?WeakMap:Map;function Dm(n,s,a){a=Nr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Iu||(Iu=!0,rd=c),Bh(n,s)},a}function bm(n,s,a){a=Nr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Bh(n,s)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Bh(n,s),typeof c!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Lm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Ww;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=sE.bind(null,n,s,a),s.then(n,n))}function Om(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Vm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Nr(-1,1),s.tag=2,di(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var qw=se.ReactCurrentOwner,Xt=!1;function Gt(n,s,a,c){s.child=n===null?nm(s,null,a,c):ao(s,n.child,a,c)}function Mm(n,s,a,c,d){a=a.render;var p=s.ref;return uo(s,d),c=bh(n,s,a,c,p,d),a=Lh(),n!==null&&!Xt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Dr(n,s,d)):(rt&&a&&gh(s),s.flags|=1,Gt(n,s,c,d),s.child)}function jm(n,s,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!cd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Fm(n,s,p,c,d)):(n=Pu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,(n.lanes&d)===0){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:ya,a(E,c)&&n.ref===s.ref)return Dr(n,s,d)}return s.flags|=1,n=vi(p,c),n.ref=s.ref,n.return=s,s.child=n}function Fm(n,s,a,c,d){if(n!==null){var p=n.memoizedProps;if(ya(p,c)&&n.ref===s.ref)if(Xt=!1,s.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Xt=!0);else return s.lanes=n.lanes,Dr(n,s,d)}return $h(n,s,a,c,d)}function Um(n,s,a){var c=s.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(po,fn),fn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(po,fn),fn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Qe(po,fn),fn|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Qe(po,fn),fn|=c;return Gt(n,s,d,a),s.child}function zm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function $h(n,s,a,c,d){var p=Jt(a)?ns:Ft.current;return p=ro(s,p),uo(s,d),a=bh(n,s,a,c,p,d),c=Lh(),n!==null&&!Xt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Dr(n,s,d)):(rt&&c&&gh(s),s.flags|=1,Gt(n,s,a,d),s.child)}function Bm(n,s,a,c,d){if(Jt(a)){var p=!0;tu(s)}else p=!1;if(uo(s,d),s.stateNode===null)_u(n,s),Pm(s,a,c),Uh(s,a,c,d),c=!0;else if(n===null){var E=s.stateNode,C=s.memoizedProps;E.props=C;var b=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=_n($):($=Jt(a)?ns:Ft.current,$=ro(s,$));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==c||b!==$)&&Nm(s,E,c,$),hi=!1;var Z=s.memoizedState;E.state=Z,cu(s,c,E,d),b=s.memoizedState,C!==c||Z!==b||Yt.current||hi?(typeof ee=="function"&&(Fh(s,a,ee,c),b=s.memoizedState),(C=hi||Am(s,a,C,c,Z,b,$))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),E.props=c,E.state=b,E.context=$,c=C):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,im(n,s),C=s.memoizedProps,$=s.type===s.elementType?C:bn(s.type,C),E.props=$,te=s.pendingProps,Z=E.context,b=a.contextType,typeof b=="object"&&b!==null?b=_n(b):(b=Jt(a)?ns:Ft.current,b=ro(s,b));var ae=a.getDerivedStateFromProps;(ee=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==te||Z!==b)&&Nm(s,E,c,b),hi=!1,Z=s.memoizedState,E.state=Z,cu(s,c,E,d);var de=s.memoizedState;C!==te||Z!==de||Yt.current||hi?(typeof ae=="function"&&(Fh(s,a,ae,c),de=s.memoizedState),($=hi||Am(s,a,$,c,Z,de,b)||!1)?(ee||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,de,b),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,de,b)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),E.props=c,E.state=de,E.context=b,c=$):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),c=!1)}return Hh(n,s,a,c,p,d)}function Hh(n,s,a,c,d,p){zm(n,s);var E=(s.flags&128)!==0;if(!c&&!E)return d&&Kp(s,a,!1),Dr(n,s,p);c=s.stateNode,qw.current=s;var C=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&E?(s.child=ao(s,n.child,null,p),s.child=ao(s,null,C,p)):Gt(n,s,C,p),s.memoizedState=c.state,d&&Kp(s,a,!0),s.child}function $m(n){var s=n.stateNode;s.pendingContext?Wp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Wp(n,s.context,!1),Ch(n,s.containerInfo)}function Hm(n,s,a,c,d){return oo(),wh(d),s.flags|=256,Gt(n,s,a,c),s.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function qh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Wm(n,s,a){var c=s.pendingProps,d=it.current,p=!1,E=(s.flags&128)!==0,C;if((C=E)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(p=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(it,d&1),n===null)return _h(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=c.children,n=c.fallback,p?(c=s.mode,p=s.child,E={mode:"hidden",children:E},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=E):p=Nu(E,c,0,null),n=ds(n,c,a,null),p.return=s,n.return=s,p.sibling=n,s.child=p,s.child.memoizedState=qh(a),s.memoizedState=Wh,n):Kh(s,E));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Kw(n,s,E,c,C,d,a);if(p){p=c.fallback,E=s.mode,d=n.child,C=d.sibling;var b={mode:"hidden",children:c.children};return(E&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=vi(d,b),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?p=vi(C,p):(p=ds(p,E,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,E=n.child.memoizedState,E=E===null?qh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},p.memoizedState=E,p.childLanes=n.childLanes&~a,s.memoizedState=Wh,c}return p=n.child,n=p.sibling,c=vi(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Kh(n,s){return s=Nu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function vu(n,s,a,c){return c!==null&&wh(c),ao(s,n.child,null,a),n=Kh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kw(n,s,a,c,d,p,E){if(a)return s.flags&256?(s.flags&=-257,c=zh(Error(t(422))),vu(n,s,E,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=Nu({mode:"visible",children:c.children},d,0,null),p=ds(p,d,E,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&ao(s,n.child,null,E),s.child.memoizedState=qh(E),s.memoizedState=Wh,p);if((s.mode&1)===0)return vu(n,s,E,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,p=Error(t(419)),c=zh(p,c,void 0),vu(n,s,E,c)}if(C=(E&n.childLanes)!==0,Xt||C){if(c=xt,c!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|E))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Pr(n,d),Vn(c,n,d,-1))}return ud(),c=zh(Error(t(421))),vu(n,s,E,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=oE.bind(null,n),d._reactRetry=s,null):(n=p.treeContext,dn=ai(d.nextSibling),hn=s,rt=!0,Dn=null,n!==null&&(yn[vn++]=Rr,yn[vn++]=Ar,yn[vn++]=rs,Rr=n.id,Ar=n.overflow,rs=s),s=Kh(s,c.children),s.flags|=4096,s)}function qm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ih(n.return,s,a)}function Gh(n,s,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Km(n,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(Gt(n,s,c.children,a),c=it.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qm(n,a,s);else if(n.tag===19)qm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(it,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&hu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Gh(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&hu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Gh(s,!0,a,null,p);break;case"together":Gh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _u(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Dr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ls|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=vi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=vi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Gw(n,s,a){switch(s.tag){case 3:$m(s),oo();break;case 5:am(s);break;case 1:Jt(s.type)&&tu(s);break;case 4:Ch(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Qe(au,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(it,it.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Wm(n,s,a):(Qe(it,it.current&1),n=Dr(n,s,a),n!==null?n.sibling:null);Qe(it,it.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Km(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(it,it.current),c)break;return null;case 22:case 23:return s.lanes=0,Um(n,s,a)}return Dr(n,s,a)}var Gm,Qh,Qm,Ym;Gm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Qh=function(){},Qm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,os(ir.current);var p=null;switch(a){case"input":d=As(n,d),c=As(n,c),p=[];break;case"select":d=q({},d,{value:void 0}),c=q({},c,{value:void 0}),p=[];break;case"textarea":d=qo(n,d),c=qo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Xl)}Rn(a,c);var E;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(E in C)C.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?p||(p=[]):(p=p||[]).push($,null));for($ in c){var b=c[$];if(C=d!=null?d[$]:void 0,c.hasOwnProperty($)&&b!==C&&(b!=null||C!=null))if($==="style")if(C){for(E in C)!C.hasOwnProperty(E)||b&&b.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in b)b.hasOwnProperty(E)&&C[E]!==b[E]&&(a||(a={}),a[E]=b[E])}else a||(p||(p=[]),p.push($,a)),a=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,C=C?C.__html:void 0,b!=null&&C!==b&&(p=p||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(b!=null&&$==="onScroll"&&Xe("scroll",n),p||C===b||(p=[])):(p=p||[]).push($,b))}a&&(p=p||[]).push("style",a);var $=p;(s.updateQueue=$)&&(s.flags|=4)}},Ym=function(n,s,a,c){a!==c&&(s.flags|=4)};function Da(n,s){if(!rt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function zt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Qw(n,s,a){var c=s.pendingProps;switch(yh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return Jt(s.type)&&eu(),zt(s),null;case 3:return c=s.stateNode,co(),Ze(Yt),Ze(Ft),Ph(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(su(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Dn!==null&&(od(Dn),Dn=null))),Qh(n,s),zt(s),null;case 5:Rh(s);var d=os(Ca.current);if(a=s.type,n!==null&&s.stateNode!=null)Qm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return zt(s),null}if(n=os(ir.current),su(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[rr]=s,c[Ta]=p,n=(s.mode&1)!==0,a){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(d=0;d<_a.length;d++)Xe(_a[d],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":Sl(c,p),Xe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Xe("invalid",c);break;case"textarea":Ko(c,p),Xe("invalid",c)}Rn(a,p),d=null;for(var E in p)if(p.hasOwnProperty(E)){var C=p[E];E==="children"?typeof C=="string"?c.textContent!==C&&(p.suppressHydrationWarning!==!0&&Jl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&Jl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Xe("scroll",c)}switch(a){case"input":Rs(c),Wo(c,p,!0);break;case"textarea":Rs(c),Wr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Xl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Go(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(a,{is:c.is}):(n=E.createElement(a),a==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,a),n[rr]=s,n[Ta]=c,Gm(n,s,!1,!1),s.stateNode=n;e:{switch(E=bs(a,c),a){case"dialog":Xe("cancel",n),Xe("close",n),d=c;break;case"iframe":case"object":case"embed":Xe("load",n),d=c;break;case"video":case"audio":for(d=0;d<_a.length;d++)Xe(_a[d],n);d=c;break;case"source":Xe("error",n),d=c;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),d=c;break;case"details":Xe("toggle",n),d=c;break;case"input":Sl(n,c),d=As(n,c),Xe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=q({},c,{value:void 0}),Xe("invalid",n);break;case"textarea":Ko(n,c),d=qo(n,c),Xe("invalid",n);break;default:d=c}Rn(a,d),C=d;for(p in C)if(C.hasOwnProperty(p)){var b=C[p];p==="style"?Ds(n,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&kl(n,b)):p==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&zi(n,b):typeof b=="number"&&zi(n,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?b!=null&&p==="onScroll"&&Xe("scroll",n):b!=null&&Y(n,p,b,E))}switch(a){case"input":Rs(n),Wo(n,c,!1);break;case"textarea":Rs(n),Wr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Cn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Cn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Xl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zt(s),null;case 6:if(n&&s.stateNode!=null)Ym(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=os(Ca.current),os(ir.current),su(s)){if(c=s.stateNode,a=s.memoizedProps,c[rr]=s,(p=c.nodeValue!==a)&&(n=hn,n!==null))switch(n.tag){case 3:Jl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Jl(c.nodeValue,a,(n.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[rr]=s,s.stateNode=c}return zt(s),null;case 13:if(Ze(it),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Zp(),oo(),s.flags|=98560,p=!1;else if(p=su(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[rr]=s}else oo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zt(s),p=!1}else Dn!==null&&(od(Dn),Dn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(it.current&1)!==0?Et===0&&(Et=3):ud())),s.updateQueue!==null&&(s.flags|=4),zt(s),null);case 4:return co(),Qh(n,s),n===null&&wa(s.stateNode.containerInfo),zt(s),null;case 10:return Sh(s.type._context),zt(s),null;case 17:return Jt(s.type)&&eu(),zt(s),null;case 19:if(Ze(it),p=s.memoizedState,p===null)return zt(s),null;if(c=(s.flags&128)!==0,E=p.rendering,E===null)if(c)Da(p,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(E=hu(n),E!==null){for(s.flags|=128,Da(p,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,n=c,p.flags&=14680066,E=p.alternate,E===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=E.childLanes,p.lanes=E.lanes,p.child=E.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=E.memoizedProps,p.memoizedState=E.memoizedState,p.updateQueue=E.updateQueue,p.type=E.type,n=E.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(it,it.current&1|2),s.child}n=n.sibling}p.tail!==null&&Je()>mo&&(s.flags|=128,c=!0,Da(p,!1),s.lanes=4194304)}else{if(!c)if(n=hu(E),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Da(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!rt)return zt(s),null}else 2*Je()-p.renderingStartTime>mo&&a!==1073741824&&(s.flags|=128,c=!0,Da(p,!1),s.lanes=4194304);p.isBackwards?(E.sibling=s.child,s.child=E):(a=p.last,a!==null?a.sibling=E:s.child=E,p.last=E)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Je(),s.sibling=null,a=it.current,Qe(it,c?a&1|2:a&1),s):(zt(s),null);case 22:case 23:return ld(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(fn&1073741824)!==0&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Yw(n,s){switch(yh(s),s.tag){case 1:return Jt(s.type)&&eu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return co(),Ze(Yt),Ze(Ft),Ph(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Rh(s),null;case 13:if(Ze(it),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));oo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(it),null;case 4:return co(),null;case 10:return Sh(s.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var wu=!1,Bt=!1,Jw=typeof WeakSet=="function"?WeakSet:Set,he=null;function fo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ut(n,s,c)}else a.current=null}function Yh(n,s,a){try{a()}catch(c){ut(n,s,c)}}var Jm=!1;function Xw(n,s){if(lh=Sr,n=Ap(),eh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,C=-1,b=-1,$=0,ee=0,te=n,Z=null;t:for(;;){for(var ae;te!==a||d!==0&&te.nodeType!==3||(C=E+d),te!==p||c!==0&&te.nodeType!==3||(b=E+c),te.nodeType===3&&(E+=te.nodeValue.length),(ae=te.firstChild)!==null;)Z=te,te=ae;for(;;){if(te===n)break t;if(Z===a&&++$===d&&(C=E),Z===p&&++ee===c&&(b=E),(ae=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=ae}a=C===-1||b===-1?null:{start:C,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:n,selectionRange:a},Sr=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var me=de.memoizedProps,dt=de.memoizedState,F=s.stateNode,V=F.getSnapshotBeforeUpdate(s.elementType===s.type?me:bn(s.type,me),dt);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ut(s,s.return,re)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return de=Jm,Jm=!1,de}function ba(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Yh(s,a,p)}d=d.next}while(d!==c)}}function Eu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Jh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Xm(n){var s=n.alternate;s!==null&&(n.alternate=null,Xm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[rr],delete s[Ta],delete s[fh],delete s[Lw],delete s[Ow])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zm(n){return n.tag===5||n.tag===3||n.tag===4}function eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Xl));else if(c!==4&&(n=n.child,n!==null))for(Xh(n,s,a),n=n.sibling;n!==null;)Xh(n,s,a),n=n.sibling}function Zh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Zh(n,s,a),n=n.sibling;n!==null;)Zh(n,s,a),n=n.sibling}var Nt=null,Ln=!1;function fi(n,s,a){for(a=a.child;a!==null;)tg(n,s,a),a=a.sibling}function tg(n,s,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(qi,a)}catch{}switch(a.tag){case 5:Bt||fo(a,s);case 6:var c=Nt,d=Ln;Nt=null,fi(n,s,a),Nt=c,Ln=d,Nt!==null&&(Ln?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Ln?(n=Nt,a=a.stateNode,n.nodeType===8?dh(n.parentNode,a):n.nodeType===1&&dh(n,a),ri(n)):dh(Nt,a.stateNode));break;case 4:c=Nt,d=Ln,Nt=a.stateNode.containerInfo,Ln=!0,fi(n,s,a),Nt=c,Ln=d;break;case 0:case 11:case 14:case 15:if(!Bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,E=p.destroy;p=p.tag,E!==void 0&&((p&2)!==0||(p&4)!==0)&&Yh(a,s,E),d=d.next}while(d!==c)}fi(n,s,a);break;case 1:if(!Bt&&(fo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ut(a,s,C)}fi(n,s,a);break;case 21:fi(n,s,a);break;case 22:a.mode&1?(Bt=(c=Bt)||a.memoizedState!==null,fi(n,s,a),Bt=c):fi(n,s,a);break;default:fi(n,s,a)}}function ng(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Jw),s.forEach(function(c){var d=aE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,E=s,C=E;e:for(;C!==null;){switch(C.tag){case 5:Nt=C.stateNode,Ln=!1;break e;case 3:Nt=C.stateNode.containerInfo,Ln=!0;break e;case 4:Nt=C.stateNode.containerInfo,Ln=!0;break e}C=C.return}if(Nt===null)throw Error(t(160));tg(p,E,d),Nt=null,Ln=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch($){ut(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)rg(s,n),s=s.sibling}function rg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(s,n),or(n),c&4){try{ba(3,n,n.return),Eu(3,n)}catch(me){ut(n,n.return,me)}try{ba(5,n,n.return)}catch(me){ut(n,n.return,me)}}break;case 1:On(s,n),or(n),c&512&&a!==null&&fo(a,a.return);break;case 5:if(On(s,n),or(n),c&512&&a!==null&&fo(a,a.return),n.flags&32){var d=n.stateNode;try{zi(d,"")}catch(me){ut(n,n.return,me)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,E=a!==null?a.memoizedProps:p,C=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&Ps(d,p),bs(C,E);var $=bs(C,p);for(E=0;E<b.length;E+=2){var ee=b[E],te=b[E+1];ee==="style"?Ds(d,te):ee==="dangerouslySetInnerHTML"?kl(d,te):ee==="children"?zi(d,te):Y(d,ee,te,$)}switch(C){case"input":Ui(d,p);break;case"textarea":Il(d,p);break;case"select":var Z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?Cn(d,!!p.multiple,ae,!1):Z!==!!p.multiple&&(p.defaultValue!=null?Cn(d,!!p.multiple,p.defaultValue,!0):Cn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Ta]=p}catch(me){ut(n,n.return,me)}}break;case 6:if(On(s,n),or(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(me){ut(n,n.return,me)}}break;case 3:if(On(s,n),or(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ri(s.containerInfo)}catch(me){ut(n,n.return,me)}break;case 4:On(s,n),or(n);break;case 13:On(s,n),or(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(nd=Je())),c&4&&ng(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(Bt=($=Bt)||ee,On(s,n),Bt=$):On(s,n),or(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!ee&&(n.mode&1)!==0)for(he=n,ee=n.child;ee!==null;){for(te=he=ee;he!==null;){switch(Z=he,ae=Z.child,Z.tag){case 0:case 11:case 14:case 15:ba(4,Z,Z.return);break;case 1:fo(Z,Z.return);var de=Z.stateNode;if(typeof de.componentWillUnmount=="function"){c=Z,a=Z.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(me){ut(c,a,me)}}break;case 5:fo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){og(te);continue}}ae!==null?(ae.return=Z,he=ae):og(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{d=te.stateNode,$?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=te.stateNode,b=te.memoizedProps.style,E=b!=null&&b.hasOwnProperty("display")?b.display:null,C.style.display=Gr("display",E))}catch(me){ut(n,n.return,me)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(me){ut(n,n.return,me)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:On(s,n),or(n),c&4&&ng(n);break;case 21:break;default:On(s,n),or(n)}}function or(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Zm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(zi(d,""),c.flags&=-33);var p=eg(n);Zh(n,p,d);break;case 3:case 4:var E=c.stateNode.containerInfo,C=eg(n);Xh(n,C,E);break;default:throw Error(t(161))}}catch(b){ut(n,n.return,b)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Zw(n,s,a){he=n,ig(n)}function ig(n,s,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&c){var E=d.memoizedState!==null||wu;if(!E){var C=d.alternate,b=C!==null&&C.memoizedState!==null||Bt;C=wu;var $=Bt;if(wu=E,(Bt=b)&&!$)for(he=d;he!==null;)E=he,b=E.child,E.tag===22&&E.memoizedState!==null?ag(d):b!==null?(b.return=E,he=b):ag(d);for(;p!==null;)he=p,ig(p),p=p.sibling;he=d,wu=C,Bt=$}sg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):sg(n)}}function sg(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Bt||Eu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Bt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:bn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&om(s,p,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}om(s,E,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&ri(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||s.flags&512&&Jh(s)}catch(Z){ut(s,s.return,Z)}}if(s===n){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function og(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function ag(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Eu(4,s)}catch(b){ut(s,a,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){ut(s,d,b)}}var p=s.return;try{Jh(s)}catch(b){ut(s,p,b)}break;case 5:var E=s.return;try{Jh(s)}catch(b){ut(s,E,b)}}}catch(b){ut(s,s.return,b)}if(s===n){he=null;break}var C=s.sibling;if(C!==null){C.return=s.return,he=C;break}he=s.return}}var eE=Math.ceil,Tu=se.ReactCurrentDispatcher,ed=se.ReactCurrentOwner,En=se.ReactCurrentBatchConfig,Fe=0,xt=null,gt=null,Dt=0,fn=0,po=li(0),Et=0,La=null,ls=0,Su=0,td=0,Oa=null,Zt=null,nd=0,mo=1/0,br=null,Iu=!1,rd=null,pi=null,ku=!1,mi=null,xu=0,Va=0,id=null,Cu=-1,Ru=0;function Qt(){return(Fe&6)!==0?Je():Cu!==-1?Cu:Cu=Je()}function gi(n){return(n.mode&1)===0?1:(Fe&2)!==0&&Dt!==0?Dt&-Dt:Mw.transition!==null?(Ru===0&&(Ru=ra()),Ru):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:$s(n.type)),n)}function Vn(n,s,a,c){if(50<Va)throw Va=0,id=null,Error(t(185));Yi(n,a,c),((Fe&2)===0||n!==xt)&&(n===xt&&((Fe&2)===0&&(Su|=a),Et===4&&yi(n,Dt)),en(n,c),a===1&&Fe===0&&(s.mode&1)===0&&(mo=Je()+500,nu&&ci()))}function en(n,s){var a=n.callbackNode;Qi(n,s);var c=wr(n,n===xt?Dt:0);if(c===0)a!==null&&Vs(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Vs(a),s===1)n.tag===0?Vw(ug.bind(null,n)):Gp(ug.bind(null,n)),Dw(function(){(Fe&6)===0&&ci()}),a=null;else{switch(Kn(c)){case 1:a=Ms;break;case 4:a=ea;break;case 16:a=Wi;break;case 536870912:a=js;break;default:a=Wi}a=yg(a,lg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function lg(n,s){if(Cu=-1,Ru=0,(Fe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(go()&&n.callbackNode!==a)return null;var c=wr(n,n===xt?Dt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Au(n,c);else{s=c;var d=Fe;Fe|=2;var p=hg();(xt!==n||Dt!==s)&&(br=null,mo=Je()+500,cs(n,s));do try{rE();break}catch(C){cg(n,C)}while(!0);Th(),Tu.current=p,Fe=d,gt!==null?s=0:(xt=null,Dt=0,s=Et)}if(s!==0){if(s===2&&(d=na(n),d!==0&&(c=d,s=sd(n,d))),s===1)throw a=La,cs(n,0),yi(n,c),en(n,Je()),a;if(s===6)yi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!tE(d)&&(s=Au(n,c),s===2&&(p=na(n),p!==0&&(c=p,s=sd(n,p))),s===1))throw a=La,cs(n,0),yi(n,c),en(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:hs(n,Zt,br);break;case 3:if(yi(n,c),(c&130023424)===c&&(s=nd+500-Je(),10<s)){if(wr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=hh(hs.bind(null,n,Zt,br),s);break}hs(n,Zt,br);break;case 4:if(yi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var E=31-on(c);p=1<<E,E=s[E],E>d&&(d=E),c&=~p}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*eE(c/1960))-c,10<c){n.timeoutHandle=hh(hs.bind(null,n,Zt,br),c);break}hs(n,Zt,br);break;case 5:hs(n,Zt,br);break;default:throw Error(t(329))}}}return en(n,Je()),n.callbackNode===a?lg.bind(null,n):null}function sd(n,s){var a=Oa;return n.current.memoizedState.isDehydrated&&(cs(n,s).flags|=256),n=Au(n,s),n!==2&&(s=Zt,Zt=a,s!==null&&od(s)),n}function od(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function tE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Nn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(n,s){for(s&=~td,s&=~Su,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-on(s),c=1<<a;n[a]=-1,s&=~c}}function ug(n){if((Fe&6)!==0)throw Error(t(327));go();var s=wr(n,0);if((s&1)===0)return en(n,Je()),null;var a=Au(n,s);if(n.tag!==0&&a===2){var c=na(n);c!==0&&(s=c,a=sd(n,c))}if(a===1)throw a=La,cs(n,0),yi(n,s),en(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,hs(n,Zt,br),en(n,Je()),null}function ad(n,s){var a=Fe;Fe|=1;try{return n(s)}finally{Fe=a,Fe===0&&(mo=Je()+500,nu&&ci())}}function us(n){mi!==null&&mi.tag===0&&(Fe&6)===0&&go();var s=Fe;Fe|=1;var a=En.transition,c=Ve;try{if(En.transition=null,Ve=1,n)return n()}finally{Ve=c,En.transition=a,Fe=s,(Fe&6)===0&&ci()}}function ld(){fn=po.current,Ze(po)}function cs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Nw(a)),gt!==null)for(a=gt.return;a!==null;){var c=a;switch(yh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&eu();break;case 3:co(),Ze(Yt),Ze(Ft),Ph();break;case 5:Rh(c);break;case 4:co();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:Sh(c.type._context);break;case 22:case 23:ld()}a=a.return}if(xt=n,gt=n=vi(n.current,null),Dt=fn=s,Et=0,La=null,td=Su=ls=0,Zt=Oa=null,ss!==null){for(s=0;s<ss.length;s++)if(a=ss[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var E=p.next;p.next=d,c.next=E}a.pending=c}ss=null}return n}function cg(n,s){do{var a=gt;try{if(Th(),du.current=gu,fu){for(var c=st.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}fu=!1}if(as=0,kt=wt=st=null,Ra=!1,Aa=0,ed.current=null,a===null||a.return===null){Et=1,La=s,gt=null;break}e:{var p=n,E=a.return,C=a,b=s;if(s=Dt,C.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,ee=C,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ae=Om(E);if(ae!==null){ae.flags&=-257,Vm(ae,E,C,p,s),ae.mode&1&&Lm(p,$,s),s=ae,b=$;var de=s.updateQueue;if(de===null){var me=new Set;me.add(b),s.updateQueue=me}else de.add(b);break e}else{if((s&1)===0){Lm(p,$,s),ud();break e}b=Error(t(426))}}else if(rt&&C.mode&1){var dt=Om(E);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Vm(dt,E,C,p,s),wh(ho(b,C));break e}}p=b=ho(b,C),Et!==4&&(Et=2),Oa===null?Oa=[p]:Oa.push(p),p=E;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var F=Dm(p,b,s);sm(p,F);break e;case 1:C=b;var V=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(pi===null||!pi.has(z)))){p.flags|=65536,s&=-s,p.lanes|=s;var re=bm(p,C,s);sm(p,re);break e}}p=p.return}while(p!==null)}fg(a)}catch(ve){s=ve,gt===a&&a!==null&&(gt=a=a.return);continue}break}while(!0)}function hg(){var n=Tu.current;return Tu.current=gu,n===null?gu:n}function ud(){(Et===0||Et===3||Et===2)&&(Et=4),xt===null||(ls&268435455)===0&&(Su&268435455)===0||yi(xt,Dt)}function Au(n,s){var a=Fe;Fe|=2;var c=hg();(xt!==n||Dt!==s)&&(br=null,cs(n,s));do try{nE();break}catch(d){cg(n,d)}while(!0);if(Th(),Fe=a,Tu.current=c,gt!==null)throw Error(t(261));return xt=null,Dt=0,Et}function nE(){for(;gt!==null;)dg(gt)}function rE(){for(;gt!==null&&!Hi();)dg(gt)}function dg(n){var s=gg(n.alternate,n,fn);n.memoizedProps=n.pendingProps,s===null?fg(n):gt=s,ed.current=null}function fg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Qw(a,s,fn),a!==null){gt=a;return}}else{if(a=Yw(a,s),a!==null){a.flags&=32767,gt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,gt=null;return}}if(s=s.sibling,s!==null){gt=s;return}gt=s=n}while(s!==null);Et===0&&(Et=5)}function hs(n,s,a){var c=Ve,d=En.transition;try{En.transition=null,Ve=1,iE(n,s,a,c)}finally{En.transition=d,Ve=c}return null}function iE(n,s,a,c){do go();while(mi!==null);if((Fe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Qc(n,p),n===xt&&(gt=xt=null,Dt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ku||(ku=!0,yg(Wi,function(){return go(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=En.transition,En.transition=null;var E=Ve;Ve=1;var C=Fe;Fe|=4,ed.current=null,Xw(n,a),rg(a,n),Iw(uh),Sr=!!lh,uh=lh=null,n.current=a,Zw(a),_r(),Fe=C,Ve=E,En.transition=p}else n.current=a;if(ku&&(ku=!1,mi=n,xu=d),p=n.pendingLanes,p===0&&(pi=null),Vl(a.stateNode),en(n,Je()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Iu)throw Iu=!1,n=rd,rd=null,n;return(xu&1)!==0&&n.tag!==0&&go(),p=n.pendingLanes,(p&1)!==0?n===id?Va++:(Va=0,id=n):Va=0,ci(),null}function go(){if(mi!==null){var n=Kn(xu),s=En.transition,a=Ve;try{if(En.transition=null,Ve=16>n?16:n,mi===null)var c=!1;else{if(n=mi,mi=null,xu=0,(Fe&6)!==0)throw Error(t(331));var d=Fe;for(Fe|=4,he=n.current;he!==null;){var p=he,E=p.child;if((he.flags&16)!==0){var C=p.deletions;if(C!==null){for(var b=0;b<C.length;b++){var $=C[b];for(he=$;he!==null;){var ee=he;switch(ee.tag){case 0:case 11:case 15:ba(8,ee,p)}var te=ee.child;if(te!==null)te.return=ee,he=te;else for(;he!==null;){ee=he;var Z=ee.sibling,ae=ee.return;if(Xm(ee),ee===$){he=null;break}if(Z!==null){Z.return=ae,he=Z;break}he=ae}}}var de=p.alternate;if(de!==null){var me=de.child;if(me!==null){de.child=null;do{var dt=me.sibling;me.sibling=null,me=dt}while(me!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&E!==null)E.return=p,he=E;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ba(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,he=F;break e}he=p.return}}var V=n.current;for(he=V;he!==null;){E=he;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,he=z;else e:for(E=V;he!==null;){if(C=he,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Eu(9,C)}}catch(ve){ut(C,C.return,ve)}if(C===E){he=null;break e}var re=C.sibling;if(re!==null){re.return=C.return,he=re;break e}he=C.return}}if(Fe=d,ci(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(qi,n)}catch{}c=!0}return c}finally{Ve=a,En.transition=s}}return!1}function pg(n,s,a){s=ho(a,s),s=Dm(n,s,1),n=di(n,s,1),s=Qt(),n!==null&&(Yi(n,1,s),en(n,s))}function ut(n,s,a){if(n.tag===3)pg(n,n,a);else for(;s!==null;){if(s.tag===3){pg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(pi===null||!pi.has(c))){n=ho(a,n),n=bm(s,n,1),s=di(s,n,1),n=Qt(),s!==null&&(Yi(s,1,n),en(s,n));break}}s=s.return}}function sE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Qt(),n.pingedLanes|=n.suspendedLanes&a,xt===n&&(Dt&a)===a&&(Et===4||Et===3&&(Dt&130023424)===Dt&&500>Je()-nd?cs(n,0):td|=a),en(n,s)}function mg(n,s){s===0&&((n.mode&1)===0?s=1:(s=ei,ei<<=1,(ei&130023424)===0&&(ei=4194304)));var a=Qt();n=Pr(n,s),n!==null&&(Yi(n,s,a),en(n,a))}function oE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),mg(n,a)}function aE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),mg(n,a)}var gg;gg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Yt.current)Xt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Xt=!1,Gw(n,s,a);Xt=(n.flags&131072)!==0}else Xt=!1,rt&&(s.flags&1048576)!==0&&Qp(s,iu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;_u(n,s),n=s.pendingProps;var d=ro(s,Ft.current);uo(s,a),d=bh(null,s,c,n,d,a);var p=Lh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jt(c)?(p=!0,tu(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,xh(s),d.updater=yu,s.stateNode=d,d._reactInternals=s,Uh(s,c,n,a),s=Hh(null,s,c,!0,p,a)):(s.tag=0,rt&&p&&gh(s),Gt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(_u(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=uE(c),n=bn(c,n),d){case 0:s=$h(null,s,c,n,a);break e;case 1:s=Bm(null,s,c,n,a);break e;case 11:s=Mm(null,s,c,n,a);break e;case 14:s=jm(null,s,c,bn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),$h(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),Bm(n,s,c,d,a);case 3:e:{if($m(s),n===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,im(n,s),cu(s,c,null,a);var E=s.memoizedState;if(c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=ho(Error(t(423)),s),s=Hm(n,s,c,a,d);break e}else if(c!==d){d=ho(Error(t(424)),s),s=Hm(n,s,c,a,d);break e}else for(dn=ai(s.stateNode.containerInfo.firstChild),hn=s,rt=!0,Dn=null,a=nm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(oo(),c===d){s=Dr(n,s,a);break e}Gt(n,s,c,a)}s=s.child}return s;case 5:return am(s),n===null&&_h(s),c=s.type,d=s.pendingProps,p=n!==null?n.memoizedProps:null,E=d.children,ch(c,d)?E=null:p!==null&&ch(c,p)&&(s.flags|=32),zm(n,s),Gt(n,s,E,a),s.child;case 6:return n===null&&_h(s),null;case 13:return Wm(n,s,a);case 4:return Ch(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ao(s,null,c,a):Gt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),Mm(n,s,c,d,a);case 7:return Gt(n,s,s.pendingProps,a),s.child;case 8:return Gt(n,s,s.pendingProps.children,a),s.child;case 12:return Gt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,E=d.value,Qe(au,c._currentValue),c._currentValue=E,p!==null)if(Nn(p.value,E)){if(p.children===d.children&&!Yt.current){s=Dr(n,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var C=p.dependencies;if(C!==null){E=p.child;for(var b=C.firstContext;b!==null;){if(b.context===c){if(p.tag===1){b=Nr(-1,a&-a),b.tag=2;var $=p.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?b.next=b:(b.next=ee.next,ee.next=b),$.pending=b}}p.lanes|=a,b=p.alternate,b!==null&&(b.lanes|=a),Ih(p.return,a,s),C.lanes|=a;break}b=b.next}}else if(p.tag===10)E=p.type===s.type?null:p.child;else if(p.tag===18){if(E=p.return,E===null)throw Error(t(341));E.lanes|=a,C=E.alternate,C!==null&&(C.lanes|=a),Ih(E,a,s),E=p.sibling}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===s){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}Gt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,uo(s,a),d=_n(d),c=c(d),s.flags|=1,Gt(n,s,c,a),s.child;case 14:return c=s.type,d=bn(c,s.pendingProps),d=bn(c.type,d),jm(n,s,c,d,a);case 15:return Fm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),_u(n,s),s.tag=1,Jt(c)?(n=!0,tu(s)):n=!1,uo(s,a),Pm(s,c,d),Uh(s,c,d,a),Hh(null,s,c,!0,n,a);case 19:return Km(n,s,a);case 22:return Um(n,s,a)}throw Error(t(156,s.tag))};function yg(n,s){return Zo(n,s)}function lE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(n,s,a,c){return new lE(n,s,a,c)}function cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uE(n){if(typeof n=="function")return cd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===nt)return 14}return 2}function vi(n,s){var a=n.alternate;return a===null?(a=Tn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Pu(n,s,a,c,d,p){var E=2;if(c=n,typeof n=="function")cd(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case A:return ds(a.children,d,p,s);case S:E=8,d|=8;break;case x:return n=Tn(12,a,s,d|2),n.elementType=x,n.lanes=p,n;case R:return n=Tn(13,a,s,d),n.elementType=R,n.lanes=p,n;case Ue:return n=Tn(19,a,s,d),n.elementType=Ue,n.lanes=p,n;case We:return Nu(a,d,p,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case L:E=10;break e;case N:E=9;break e;case j:E=11;break e;case nt:E=14;break e;case Ye:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Tn(E,a,s,d),s.elementType=n,s.type=c,s.lanes=p,s}function ds(n,s,a,c){return n=Tn(7,n,c,s),n.lanes=a,n}function Nu(n,s,a,c){return n=Tn(22,n,c,s),n.elementType=We,n.lanes=a,n.stateNode={isHidden:!1},n}function hd(n,s,a){return n=Tn(6,n,null,s),n.lanes=a,n}function dd(n,s,a){return s=Tn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function cE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ia(0),this.expirationTimes=ia(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function fd(n,s,a,c,d,p,E,C,b){return n=new cE(n,s,a,C,b),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Tn(3,null,null,s),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},xh(p),n}function hE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function vg(n){if(!n)return ui;n=n._reactInternals;e:{if(An(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return qp(n,a,s)}return s}function _g(n,s,a,c,d,p,E,C,b){return n=fd(a,c,!0,n,d,p,E,C,b),n.context=vg(null),a=n.current,c=Qt(),d=gi(a),p=Nr(c,d),p.callback=s??null,di(a,p,d),n.current.lanes=d,Yi(n,d,c),en(n,c),n}function Du(n,s,a,c){var d=s.current,p=Qt(),E=gi(d);return a=vg(a),s.context===null?s.context=a:s.pendingContext=a,s=Nr(p,E),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=di(d,s,E),n!==null&&(Vn(n,d,E,p),uu(n,d,E)),E}function bu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function pd(n,s){wg(n,s),(n=n.alternate)&&wg(n,s)}function dE(){return null}var Eg=typeof reportError=="function"?reportError:function(n){console.error(n)};function md(n){this._internalRoot=n}Lu.prototype.render=md.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Du(n,s,null,null)},Lu.prototype.unmount=md.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;us(function(){Du(null,n,null,null)}),s[xr]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var s=la();n={blockedOn:null,target:n,priority:s};for(var a=0;a<an.length&&s!==0&&s<an[a].priority;a++);an.splice(a,0,n),a===0&&zs(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ou(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function fE(n,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var $=bu(E);p.call($)}}var E=_g(s,c,n,0,null,!1,!1,"",Tg);return n._reactRootContainer=E,n[xr]=E.current,wa(n.nodeType===8?n.parentNode:n),us(),E}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var $=bu(b);C.call($)}}var b=fd(n,0,!1,null,null,!1,!1,"",Tg);return n._reactRootContainer=b,n[xr]=b.current,wa(n.nodeType===8?n.parentNode:n),us(function(){Du(s,b,a,c)}),b}function Vu(n,s,a,c,d){var p=a._reactRootContainer;if(p){var E=p;if(typeof d=="function"){var C=d;d=function(){var b=bu(E);C.call(b)}}Du(s,E,n,d)}else E=fE(a,s,n,d,c);return bu(E)}oa=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Be(s.pendingLanes);a!==0&&(sa(s,a|1),en(s,Je()),(Fe&6)===0&&(mo=Je()+500,ci()))}break;case 13:us(function(){var c=Pr(n,1);if(c!==null){var d=Qt();Vn(c,n,1,d)}}),pd(n,1)}},Fs=function(n){if(n.tag===13){var s=Pr(n,134217728);if(s!==null){var a=Qt();Vn(s,n,134217728,a)}pd(n,134217728)}},aa=function(n){if(n.tag===13){var s=gi(n),a=Pr(n,s);if(a!==null){var c=Qt();Vn(a,n,s,c)}pd(n,s)}},la=function(){return Ve},ua=function(n,s){var a=Ve;try{return Ve=n,s()}finally{Ve=a}},gr=function(n,s,a){switch(s){case"input":if(Ui(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Zl(c);if(!d)throw Error(t(90));Ho(c),Ui(c,d)}}}break;case"textarea":Il(n,a);break;case"select":s=a.value,s!=null&&Cn(n,!!a.multiple,s,!1)}},Cl=ad,Rl=us;var pE={usingClientEntryPoint:!1,Events:[Sa,to,Zl,Yr,Jr,ad]},Ma={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mE={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ol(n),n===null?null:n.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||dE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{qi=Mu.inject(mE),sn=Mu}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pE,tn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(s))throw Error(t(200));return hE(n,s,null,a)},tn.createRoot=function(n,s){if(!gd(n))throw Error(t(299));var a=!1,c="",d=Eg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=fd(n,1,!1,null,null,a,!1,c,d),n[xr]=s.current,wa(n.nodeType===8?n.parentNode:n),new md(s)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ol(s),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return us(n)},tn.hydrate=function(n,s,a){if(!Ou(s))throw Error(t(200));return Vu(null,n,s,!0,a)},tn.hydrateRoot=function(n,s,a){if(!gd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",E=Eg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=_g(s,null,n,1,a??null,d,!1,p,E),n[xr]=s.current,wa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Lu(s)},tn.render=function(n,s,a){if(!Ou(s))throw Error(t(200));return Vu(null,n,s,!1,a)},tn.unmountComponentAtNode=function(n){if(!Ou(n))throw Error(t(40));return n._reactRootContainer?(us(function(){Vu(null,null,n,!1,function(){n._reactRootContainer=null,n[xr]=null})}),!0):!1},tn.unstable_batchedUpdates=ad,tn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Ou(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Vu(n,s,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Pg;function SE(){if(Pg)return _d.exports;Pg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_d.exports=TE(),_d.exports}var Ng;function IE(){if(Ng)return ju;Ng=1;var r=SE();return ju.createRoot=r.createRoot,ju.hydrateRoot=r.hydrateRoot,ju}var kE=IE();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Dg="popstate";function xE(r={}){function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=ks(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),jd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,v=g.indexOf("#");f=v===-1?g:g.slice(0,v)}return f+"#"+(typeof l=="string"?l:Za(l))}function i(o,l){kn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return RE(e,t,i,r)}function ot(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function kn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CE(){return Math.random().toString(36).substring(2,10)}function bg(r,e){return{usr:r.state,key:r.key,idx:e}}function jd(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ks(e):e,state:t,key:e&&e.key||i||CE()}}function Za({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ks(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function RE(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f="POP",g=null,v=w();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function w(){return(h.state||{idx:null}).idx}function T(){f="POP";let M=w(),G=M==null?null:M-v;v=M,g&&g({action:f,location:B.location,delta:G})}function k(M,G){f="PUSH";let X=jd(B.location,M,G);t&&t(X,M),v=w()+1;let Y=bg(X,v),se=B.createHref(X);try{h.pushState(Y,"",se)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(se)}l&&g&&g({action:f,location:B.location,delta:1})}function P(M,G){f="REPLACE";let X=jd(B.location,M,G);t&&t(X,M),v=w();let Y=bg(X,v),se=B.createHref(X);h.replaceState(Y,"",se),l&&g&&g({action:f,location:B.location,delta:0})}function W(M){return AE(M)}let B={get action(){return f},get location(){return r(o,h)},listen(M){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Dg,T),g=M,()=>{o.removeEventListener(Dg,T),g=null}},createHref(M){return e(o,M)},createURL:W,encodeLocation(M){let G=W(M);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:k,replace:P,go(M){return h.go(M)}};return B}function AE(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ot(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Za(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function uv(r,e,t="/"){return PE(r,e,t,!1)}function PE(r,e,t,i){let o=typeof e=="string"?ks(e):e,l=jr(o.pathname||"/",t);if(l==null)return null;let h=cv(r);NE(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let v=BE(l);f=UE(h[g],v,i)}return f}function cv(r,e=[],t=[],i="",o=!1){let l=(h,f,g=o,v)=>{let w={relativePath:v===void 0?h.path||"":v,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;ot(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let T=Mr([i,w.relativePath]),k=t.concat(w);h.children&&h.children.length>0&&(ot(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),cv(h.children,e,k,T,g)),!(h.path==null&&!h.index)&&e.push({path:T,score:jE(T,h.index),routesMeta:k})};return r.forEach((h,f)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))l(h,f);else for(let v of hv(h.path))l(h,f,!0,v)}),e}function hv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=hv(i.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function NE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:FE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var DE=/^:[\w-]+$/,bE=3,LE=2,OE=1,VE=10,ME=-2,Lg=r=>r==="*";function jE(r,e){let t=r.split("/"),i=t.length;return t.some(Lg)&&(i+=ME),e&&(i+=LE),t.filter(o=>!Lg(o)).reduce((o,l)=>o+(DE.test(l)?bE:l===""?OE:VE),i)}function FE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function UE(r,e,t=!1){let{routesMeta:i}=r,o={},l="/",h=[];for(let f=0;f<i.length;++f){let g=i[f],v=f===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=ic({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},w),k=g.route;if(!T&&v&&t&&!i[i.length-1].route.index&&(T=ic({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Mr([l,T.pathname]),pathnameBase:qE(Mr([l,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(l=Mr([l,T.pathnameBase]))}return h}function ic(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=zE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((v,{paramName:w,isOptional:T},k)=>{if(w==="*"){let W=f[k]||"";h=l.slice(0,l.length-W.length).replace(/(.)\/+$/,"$1")}const P=f[k];return T&&!P?v[w]=void 0:v[w]=(P||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function zE(r,e=!1,t=!0){kn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function BE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function jr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var dv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$E=r=>dv.test(r);function HE(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?ks(r):r,l;if(t)if($E(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${t}`)}t.startsWith("/")?l=Og(t.substring(1),"/"):l=Og(t,e)}else l=e;return{pathname:l,search:KE(i),hash:GE(o)}}function Og(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Td(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fv(r){let e=WE(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function pv(r,e,t,i=!1){let o;typeof r=="string"?o=ks(r):(o={...r},ot(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),ot(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),ot(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),T-=1;o.pathname=k.join("/")}f=T>=0?e[T]:"/"}let g=HE(o,f),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||w)&&(g.pathname+="/"),g}var Mr=r=>r.join("/").replace(/\/\/+/g,"/"),qE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),KE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,GE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,QE=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function YE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function JE(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var mv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gv(r,e){let t=r;if(typeof t!="string"||!dv.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,o=!1;if(mv)try{let l=new URL(window.location.href),h=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=jr(h.pathname,e);h.origin===l.origin&&f!=null?t=f+h.search+h.hash:o=!0}catch{kn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yv=["POST","PUT","PATCH","DELETE"];new Set(yv);var XE=["GET",...yv];new Set(XE);var Oo=O.createContext(null);Oo.displayName="DataRouter";var xc=O.createContext(null);xc.displayName="DataRouterState";var ZE=O.createContext(!1),vv=O.createContext({isTransitioning:!1});vv.displayName="ViewTransition";var e1=O.createContext(new Map);e1.displayName="Fetchers";var t1=O.createContext(null);t1.displayName="Await";var xn=O.createContext(null);xn.displayName="Navigation";var cl=O.createContext(null);cl.displayName="Location";var mr=O.createContext({outlet:null,matches:[],isDataRoute:!1});mr.displayName="Route";var pf=O.createContext(null);pf.displayName="RouteError";var _v="REACT_ROUTER_ERROR",n1="REDIRECT",r1="ROUTE_ERROR_RESPONSE";function i1(r){if(r.startsWith(`${_v}:${n1}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function s1(r){if(r.startsWith(`${_v}:${r1}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new QE(e.status,e.statusText,e.data)}catch{}}function o1(r,{relative:e}={}){ot(hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=O.useContext(xn),{hash:o,pathname:l,search:h}=dl(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Mr([t,l])),i.createHref({pathname:f,search:h,hash:o})}function hl(){return O.useContext(cl)!=null}function Mi(){return ot(hl(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(cl).location}var wv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ev(r){O.useContext(xn).static||O.useLayoutEffect(r)}function Bn(){let{isDataRoute:r}=O.useContext(mr);return r?w1():a1()}function a1(){ot(hl(),"useNavigate() may be used only in the context of a <Router> component.");let r=O.useContext(Oo),{basename:e,navigator:t}=O.useContext(xn),{matches:i}=O.useContext(mr),{pathname:o}=Mi(),l=JSON.stringify(fv(i)),h=O.useRef(!1);return Ev(()=>{h.current=!0}),O.useCallback((g,v={})=>{if(kn(h.current,wv),!h.current)return;if(typeof g=="number"){t.go(g);return}let w=pv(g,JSON.parse(l),o,v.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Mr([e,w.pathname])),(v.replace?t.replace:t.push)(w,v.state,v)},[e,t,l,o,r])}O.createContext(null);function l1(){let{matches:r}=O.useContext(mr),e=r[r.length-1];return e?e.params:{}}function dl(r,{relative:e}={}){let{matches:t}=O.useContext(mr),{pathname:i}=Mi(),o=JSON.stringify(fv(t));return O.useMemo(()=>pv(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function u1(r,e){return Tv(r,e)}function Tv(r,e,t,i,o){var X;ot(hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(xn),{matches:h}=O.useContext(mr),f=h[h.length-1],g=f?f.params:{},v=f?f.pathname:"/",w=f?f.pathnameBase:"/",T=f&&f.route;{let Y=T&&T.path||"";Iv(v,!T||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let k=Mi(),P;if(e){let Y=typeof e=="string"?ks(e):e;ot(w==="/"||((X=Y.pathname)==null?void 0:X.startsWith(w)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),P=Y}else P=k;let W=P.pathname||"/",B=W;if(w!=="/"){let Y=w.replace(/^\//,"").split("/");B="/"+W.replace(/^\//,"").split("/").slice(Y.length).join("/")}let M=uv(r,{pathname:B});kn(T||M!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),kn(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=p1(M&&M.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:Mr([w,l.encodeLocation?l.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?w:Mr([w,l.encodeLocation?l.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),h,t,i,o);return e&&G?O.createElement(cl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},G):G}function c1(){let r=_1(),e=YE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:o},t):null,h)}var h1=O.createElement(c1,null),Sv=class extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=s1(r.digest);t&&(r=t)}let e=r!==void 0?O.createElement(mr.Provider,{value:this.props.routeContext},O.createElement(pf.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?O.createElement(d1,{error:r},e):e}};Sv.contextType=ZE;var Sd=new WeakMap;function d1({children:r,error:e}){let{basename:t}=O.useContext(xn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=i1(e.digest);if(i){let o=Sd.get(e);if(o)throw o;let l=gv(i.location,t);if(mv&&!Sd.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Sd.set(e,h),h}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function f1({routeContext:r,match:e,children:t}){let i=O.useContext(Oo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(mr.Provider,{value:r},t)}function p1(r,e=[],t=null,i=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,h=t==null?void 0:t.errors;if(h!=null){let w=l.findIndex(T=>T.route.id&&(h==null?void 0:h[T.route.id])!==void 0);ot(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,w+1))}let f=!1,g=-1;if(t)for(let w=0;w<l.length;w++){let T=l[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=w),T.route.id){let{loaderData:k,errors:P}=t,W=T.route.loader&&!k.hasOwnProperty(T.route.id)&&(!P||P[T.route.id]===void 0);if(T.route.lazy||W){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let v=t&&i?(w,T)=>{var k,P;i(w,{location:t.location,params:((P=(k=t.matches)==null?void 0:k[0])==null?void 0:P.params)??{},unstable_pattern:JE(t.matches),errorInfo:T})}:void 0;return l.reduceRight((w,T,k)=>{let P,W=!1,B=null,M=null;t&&(P=h&&T.route.id?h[T.route.id]:void 0,B=T.route.errorElement||h1,f&&(g<0&&k===0?(Iv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,M=null):g===k&&(W=!0,M=T.route.hydrateFallbackElement||null)));let G=e.concat(l.slice(0,k+1)),X=()=>{let Y;return P?Y=B:W?Y=M:T.route.Component?Y=O.createElement(T.route.Component,null):T.route.element?Y=T.route.element:Y=w,O.createElement(f1,{match:T,routeContext:{outlet:w,matches:G,isDataRoute:t!=null},children:Y})};return t&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?O.createElement(Sv,{location:t.location,revalidation:t.revalidation,component:B,error:P,children:X(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:v}):X()},null)}function mf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m1(r){let e=O.useContext(Oo);return ot(e,mf(r)),e}function g1(r){let e=O.useContext(xc);return ot(e,mf(r)),e}function y1(r){let e=O.useContext(mr);return ot(e,mf(r)),e}function gf(r){let e=y1(r),t=e.matches[e.matches.length-1];return ot(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function v1(){return gf("useRouteId")}function _1(){var i;let r=O.useContext(pf),e=g1("useRouteError"),t=gf("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function w1(){let{router:r}=m1("useNavigate"),e=gf("useNavigate"),t=O.useRef(!1);return Ev(()=>{t.current=!0}),O.useCallback(async(o,l={})=>{kn(t.current,wv),t.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Vg={};function Iv(r,e,t){!e&&!Vg[r]&&(Vg[r]=!0,kn(!1,t))}O.memo(E1);function E1({routes:r,future:e,state:t,onError:i}){return Tv(r,void 0,t,i,e)}function Mn(r){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function T1({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1,unstable_useTransitions:h}){ot(!hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),g=O.useMemo(()=>({basename:f,navigator:o,static:l,unstable_useTransitions:h,future:{}}),[f,o,l,h]);typeof t=="string"&&(t=ks(t));let{pathname:v="/",search:w="",hash:T="",state:k=null,key:P="default"}=t,W=O.useMemo(()=>{let B=jr(v,f);return B==null?null:{location:{pathname:B,search:w,hash:T,state:k,key:P},navigationType:i}},[f,v,w,T,k,P,i]);return kn(W!=null,`<Router basename="${f}"> is not able to match the URL "${v}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:O.createElement(xn.Provider,{value:g},O.createElement(cl.Provider,{children:e,value:W}))}function S1({children:r,location:e}){return u1(Fd(r),e)}function Fd(r,e=[]){let t=[];return O.Children.forEach(r,(i,o)=>{if(!O.isValidElement(i))return;let l=[...e,o];if(i.type===O.Fragment){t.push.apply(t,Fd(i.props.children,l));return}ot(i.type===Mn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Fd(i.props.children,l)),t.push(h)}),t}var qu="get",Ku="application/x-www-form-urlencoded";function Cc(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function I1(r){return Cc(r)&&r.tagName.toLowerCase()==="button"}function k1(r){return Cc(r)&&r.tagName.toLowerCase()==="form"}function x1(r){return Cc(r)&&r.tagName.toLowerCase()==="input"}function C1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function R1(r,e){return r.button===0&&(!e||e==="_self")&&!C1(r)}var Fu=null;function A1(){if(Fu===null)try{new FormData(document.createElement("form"),0),Fu=!1}catch{Fu=!0}return Fu}var P1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(r){return r!=null&&!P1.has(r)?(kn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ku}"`),null):r}function N1(r,e){let t,i,o,l,h;if(k1(r)){let f=r.getAttribute("action");i=f?jr(f,e):null,t=r.getAttribute("method")||qu,o=Id(r.getAttribute("enctype"))||Ku,l=new FormData(r)}else if(I1(r)||x1(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||f.getAttribute("action");if(i=g?jr(g,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||qu,o=Id(r.getAttribute("formenctype"))||Id(f.getAttribute("enctype"))||Ku,l=new FormData(f,r),!A1()){let{name:v,type:w,value:T}=r;if(w==="image"){let k=v?`${v}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else v&&l.append(v,T)}}else{if(Cc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qu,i=null,o=Ku,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function D1(r,e,t,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${i}`:o.pathname=`${o.pathname}.${i}`:o.pathname==="/"?o.pathname=`_root.${i}`:e&&jr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function b1(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function L1(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function O1(r,e,t){let i=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await b1(l,t);return h.links?h.links():[]}return[]}));return F1(i.flat(1).filter(L1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Mg(r,e,t,i,o,l){let h=(g,v)=>t[v]?g.route.id!==t[v].route.id:!0,f=(g,v)=>{var w;return t[v].pathname!==g.pathname||((w=t[v].route.path)==null?void 0:w.endsWith("*"))&&t[v].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,v)=>h(g,v)||f(g,v)):l==="data"?e.filter((g,v)=>{var T;let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,v)||f(g,v))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function V1(r,e,{includeHydrateFallback:t}={}){return M1(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function M1(r){return[...new Set(r)]}function j1(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function F1(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let l=JSON.stringify(j1(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function kv(){let r=O.useContext(Oo);return yf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function U1(){let r=O.useContext(xc);return yf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var vf=O.createContext(void 0);vf.displayName="FrameworkContext";function xv(){let r=O.useContext(vf);return yf(r,"You must render this element inside a <HydratedRouter> element"),r}function z1(r,e){let t=O.useContext(vf),[i,o]=O.useState(!1),[l,h]=O.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:v,onMouseLeave:w,onTouchStart:T}=e,k=O.useRef(null);O.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let B=G=>{G.forEach(X=>{h(X.isIntersecting)})},M=new IntersectionObserver(B,{threshold:.5});return k.current&&M.observe(k.current),()=>{M.disconnect()}}},[r]),O.useEffect(()=>{if(i){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[i]);let P=()=>{o(!0)},W=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,k,{}]:[l,k,{onFocus:Fa(f,P),onBlur:Fa(g,W),onMouseEnter:Fa(v,P),onMouseLeave:Fa(w,W),onTouchStart:Fa(T,P)}]:[!1,k,{}]}function Fa(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function B1({page:r,...e}){let{router:t}=kv(),i=O.useMemo(()=>uv(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?O.createElement(H1,{page:r,matches:i,...e}):null}function $1(r){let{manifest:e,routeModules:t}=xv(),[i,o]=O.useState([]);return O.useEffect(()=>{let l=!1;return O1(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),i}function H1({page:r,matches:e,...t}){let i=Mi(),{future:o,manifest:l,routeModules:h}=xv(),{basename:f}=kv(),{loaderData:g,matches:v}=U1(),w=O.useMemo(()=>Mg(r,e,v,l,i,"data"),[r,e,v,l,i]),T=O.useMemo(()=>Mg(r,e,v,l,i,"assets"),[r,e,v,l,i]),k=O.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let B=new Set,M=!1;if(e.forEach(X=>{var se;let Y=l.routes[X.route.id];!Y||!Y.hasLoader||(!w.some(fe=>fe.route.id===X.route.id)&&X.route.id in g&&((se=h[X.route.id])!=null&&se.shouldRevalidate)||Y.hasClientLoader?M=!0:B.add(X.route.id))}),B.size===0)return[];let G=D1(r,f,o.unstable_trailingSlashAwareDataRequests,"data");return M&&B.size>0&&G.searchParams.set("_routes",e.filter(X=>B.has(X.route.id)).map(X=>X.route.id).join(",")),[G.pathname+G.search]},[f,o.unstable_trailingSlashAwareDataRequests,g,i,l,w,e,r,h]),P=O.useMemo(()=>V1(T,l),[T,l]),W=$1(T);return O.createElement(O.Fragment,null,k.map(B=>O.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),P.map(B=>O.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),W.map(({key:B,link:M})=>O.createElement("link",{key:B,nonce:t.nonce,...M})))}function W1(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var q1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q1&&(window.__reactRouterVersion="7.12.0")}catch{}function K1({basename:r,children:e,unstable_useTransitions:t,window:i}){let o=O.useRef();o.current==null&&(o.current=xE({window:i,v5Compat:!0}));let l=o.current,[h,f]=O.useState({action:l.action,location:l.location}),g=O.useCallback(v=>{t===!1?f(v):O.startTransition(()=>f(v))},[t]);return O.useLayoutEffect(()=>l.listen(g),[l,g]),O.createElement(T1,{basename:r,children:e,location:h.location,navigationType:h.action,navigator:l,unstable_useTransitions:t})}var Cv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,el=O.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:h,state:f,target:g,to:v,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W){let{basename:B,unstable_useTransitions:M}=O.useContext(xn),G=typeof v=="string"&&Cv.test(v),X=gv(v,B);v=X.to;let Y=o1(v,{relative:o}),[se,fe,ce]=z1(i,P),A=J1(v,{replace:h,state:f,target:g,preventScrollReset:w,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:k,unstable_useTransitions:M});function S(L){e&&e(L),L.defaultPrevented||A(L)}let x=O.createElement("a",{...P,...ce,href:X.absoluteURL||Y,onClick:X.isExternal||l?e:S,ref:W1(W,fe),target:g,"data-discover":!G&&t==="render"?"true":void 0});return se&&!G?O.createElement(O.Fragment,null,x,O.createElement(B1,{page:Y})):x});el.displayName="Link";var G1=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:h,viewTransition:f,children:g,...v},w){let T=dl(h,{relative:v.relative}),k=Mi(),P=O.useContext(xc),{navigator:W,basename:B}=O.useContext(xn),M=P!=null&&nT(T)&&f===!0,G=W.encodeLocation?W.encodeLocation(T).pathname:T.pathname,X=k.pathname,Y=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(X=X.toLowerCase(),Y=Y?Y.toLowerCase():null,G=G.toLowerCase()),Y&&B&&(Y=jr(Y,B)||Y);const se=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let fe=X===G||!o&&X.startsWith(G)&&X.charAt(se)==="/",ce=Y!=null&&(Y===G||!o&&Y.startsWith(G)&&Y.charAt(G.length)==="/"),A={isActive:fe,isPending:ce,isTransitioning:M},S=fe?e:void 0,x;typeof i=="function"?x=i(A):x=[i,fe?"active":null,ce?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(A):l;return O.createElement(el,{...v,"aria-current":S,className:x,ref:w,style:L,to:h,viewTransition:f},typeof g=="function"?g(A):g)});G1.displayName="NavLink";var Q1=O.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:h=qu,action:f,onSubmit:g,relative:v,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W)=>{let{unstable_useTransitions:B}=O.useContext(xn),M=eT(),G=tT(f,{relative:v}),X=h.toLowerCase()==="get"?"get":"post",Y=typeof f=="string"&&Cv.test(f),se=fe=>{if(g&&g(fe),fe.defaultPrevented)return;fe.preventDefault();let ce=fe.nativeEvent.submitter,A=(ce==null?void 0:ce.getAttribute("formmethod"))||h,S=()=>M(ce||fe.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:o,state:l,relative:v,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k});B&&t!==!1?O.startTransition(()=>S()):S()};return O.createElement("form",{ref:W,method:X,action:G,onSubmit:i?g:se,...P,"data-discover":!Y&&r==="render"?"true":void 0})});Q1.displayName="Form";function Y1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rv(r){let e=O.useContext(Oo);return ot(e,Y1(r)),e}function J1(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:g}={}){let v=Bn(),w=Mi(),T=dl(r,{relative:l});return O.useCallback(k=>{if(R1(k,e)){k.preventDefault();let P=t!==void 0?t:Za(w)===Za(T),W=()=>v(r,{replace:P,state:i,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:f});g?O.startTransition(()=>W()):W()}},[w,v,T,t,i,e,r,o,l,h,f,g])}var X1=0,Z1=()=>`__${String(++X1)}__`;function eT(){let{router:r}=Rv("useSubmit"),{basename:e}=O.useContext(xn),t=v1(),i=r.fetch,o=r.navigate;return O.useCallback(async(l,h={})=>{let{action:f,method:g,encType:v,formData:w,body:T}=N1(l,e);if(h.navigate===!1){let k=h.fetcherKey||Z1();await i(k,t,h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:T,formMethod:h.method||g,formEncType:h.encType||v,flushSync:h.flushSync})}else await o(h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:T,formMethod:h.method||g,formEncType:h.encType||v,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,o,e,t])}function tT(r,{relative:e}={}){let{basename:t}=O.useContext(xn),i=O.useContext(mr);ot(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...dl(r||".",{relative:e})},h=Mi();if(r==null){l.search=h.search;let f=new URLSearchParams(l.search),g=f.getAll("index");if(g.some(w=>w==="")){f.delete("index"),g.filter(T=>T).forEach(T=>f.append("index",T));let w=f.toString();l.search=w?`?${w}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Mr([t,l.pathname])),Za(l)}function nT(r,{relative:e}={}){let t=O.useContext(vv);ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Rv("useViewTransitionState"),o=dl(r,{relative:e});if(!t.isTransitioning)return!1;let l=jr(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=jr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ic(o.pathname,h)!=null||ic(o.pathname,l)!=null}/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Av=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=O.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...f},g)=>O.createElement("svg",{ref:g,...iT,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:Av("lucide",o),...f},[...h.map(([v,w])=>O.createElement(v,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(r,e)=>{const t=O.forwardRef(({className:i,...o},l)=>O.createElement(sT,{ref:l,iconNode:e,className:Av(`lucide-${rT(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],aT=$e("Activity",oT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vs=$e("ArrowLeft",lT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cT=$e("ArrowRight",uT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]],dT=$e("BatteryLow",hT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_f=$e("Calendar",fT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Pv=$e("Camera",pT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],gT=$e("ChartNoAxesColumn",mT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nv=$e("CircleAlert",yT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dv=$e("CircleCheckBig",vT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],wT=$e("Clock",_T);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],TT=$e("CloudSun",ET);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],IT=$e("Coffee",ST);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],xT=$e("Download",kT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],RT=$e("House",CT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],PT=$e("List",AT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],DT=$e("Loader",NT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],bv=$e("LogIn",bT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Lv=$e("Moon",LT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ud=$e("Plus",OT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],MT=$e("Save",VT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Ov=$e("ShieldAlert",jT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Vv=$e("Sun",FT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],zT=$e("Sunset",UT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$T=$e("Target",BT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],WT=$e("TrendingUp",HT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],KT=$e("TriangleAlert",qT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],QT=$e("Trophy",GT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Mv=$e("Upload",YT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XT=$e("User",JT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jv=$e("X",ZT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Fv=$e("Zap",eS),tS=()=>{};var jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},nS=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let k=(f&15)<<2|v>>6,P=v&63;g||(P=64,h||(k=64)),i.push(t[w],t[T],t[k],t[P])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Uv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):nS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||T==null)throw new rS;const k=l<<2|f>>4;if(i.push(k),v!==64){const P=f<<4&240|v>>2;if(i.push(P),T!==64){const W=v<<6&192|T;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class rS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iS=function(r){const e=Uv(r);return zv.encodeByteArray(e,!0)},sc=function(r){return iS(r).replace(/\./g,"")},Bv=function(r){try{return zv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=()=>sS().__FIREBASE_DEFAULTS__,aS=()=>{if(typeof process>"u"||typeof jg>"u")return;const r=jg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Bv(r[1]);return e&&JSON.parse(e)},Rc=()=>{try{return tS()||oS()||aS()||lS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$v=r=>{var e,t;return(t=(e=Rc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},uS=r=>{const e=$v(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Hv=()=>{var r;return(r=Rc())==null?void 0:r.config},Wv=r=>{var e;return(e=Rc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[sc(JSON.stringify(t)),sc(JSON.stringify(h)),""].join(".")}const qa={};function dS(){const r={prod:[],emulator:[]};for(const e of Object.keys(qa))qa[e]?r.emulator.push(e):r.prod.push(e);return r}function fS(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Fg=!1;function Kv(r,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||qa[r]===e||qa[r]||Fg)return;qa[r]=e;function t(k){return`__firebase__banner__${k}`}const i="__firebase__banner",l=dS().prod.length>0;function h(){const k=document.getElementById(i);k&&k.remove()}function f(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function g(k,P){k.setAttribute("width","24"),k.setAttribute("id",P),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function v(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{Fg=!0,h()},k}function w(k,P){k.setAttribute("id",P),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function T(){const k=fS(i),P=t("text"),W=document.getElementById(P)||document.createElement("span"),B=t("learnmore"),M=document.getElementById(B)||document.createElement("a"),G=t("preprendIcon"),X=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const Y=k.element;f(Y),w(M,B);const se=v();g(X,G),Y.append(X,W,M,se),document.body.appendChild(Y)}l?(W.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function mS(){var e;const r=(e=Rc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function vS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _S(){const r=qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wS(){return!mS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function TS(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="FirebaseError";class $r extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=SS,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?IS(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new $r(o,f,i)}}function IS(r,e){return r.replace(kS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const kS=/\{\$([^}]+)}/g;function xS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _s(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Ug(l)&&Ug(h)){if(!_s(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ug(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function CS(r,e){const t=new RS(r,e);return t.subscribe.bind(t)}class RS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");AS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=kd),o.error===void 0&&(o.error=kd),o.complete===void 0&&(o.complete=kd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AS(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r){return r&&r._delegate?r._delegate:r}class ws{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DS(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NS(r){return r===fs?void 0:r}function DS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const LS={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},OS=be.INFO,VS={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},MS=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=VS[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=OS,this._logHandler=MS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const jS=(r,e)=>e.some(t=>r instanceof t);let zg,Bg;function FS(){return zg||(zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function US(){return Bg||(Bg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gv=new WeakMap,zd=new WeakMap,Qv=new WeakMap,xd=new WeakMap,Ef=new WeakMap;function zS(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ki(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Gv.set(t,r)}).catch(()=>{}),Ef.set(e,r),e}function BS(r){if(zd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});zd.set(r,e)}let Bd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return zd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Qv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ki(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $S(r){Bd=r(Bd)}function HS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Cd(this),e,...t);return Qv.set(i,e.sort?e.sort():[e]),ki(i)}:US().includes(r)?function(...e){return r.apply(Cd(this),e),ki(Gv.get(this))}:function(...e){return ki(r.apply(Cd(this),e))}}function WS(r){return typeof r=="function"?HS(r):(r instanceof IDBTransaction&&BS(r),jS(r,FS())?new Proxy(r,Bd):r)}function ki(r){if(r instanceof IDBRequest)return zS(r);if(xd.has(r))return xd.get(r);const e=WS(r);return e!==r&&(xd.set(r,e),Ef.set(e,r)),e}const Cd=r=>Ef.get(r);function qS(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=ki(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ki(h.result),g.oldVersion,g.newVersion,ki(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const KS=["get","getKey","getAll","getAllKeys","count"],GS=["put","add","delete","clear"],Rd=new Map;function $g(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Rd.get(e))return Rd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=GS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||KS.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return Rd.set(e,l),l}$S(r=>({...r,get:(e,t,i)=>$g(e,t)||r.get(e,t,i),has:(e,t)=>!!$g(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function YS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $d="@firebase/app",Hg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new wf("@firebase/app"),JS="@firebase/app-compat",XS="@firebase/analytics-compat",ZS="@firebase/analytics",eI="@firebase/app-check-compat",tI="@firebase/app-check",nI="@firebase/auth",rI="@firebase/auth-compat",iI="@firebase/database",sI="@firebase/data-connect",oI="@firebase/database-compat",aI="@firebase/functions",lI="@firebase/functions-compat",uI="@firebase/installations",cI="@firebase/installations-compat",hI="@firebase/messaging",dI="@firebase/messaging-compat",fI="@firebase/performance",pI="@firebase/performance-compat",mI="@firebase/remote-config",gI="@firebase/remote-config-compat",yI="@firebase/storage",vI="@firebase/storage-compat",_I="@firebase/firestore",wI="@firebase/ai",EI="@firebase/firestore-compat",TI="firebase",SI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",II={[$d]:"fire-core",[JS]:"fire-core-compat",[ZS]:"fire-analytics",[XS]:"fire-analytics-compat",[tI]:"fire-app-check",[eI]:"fire-app-check-compat",[nI]:"fire-auth",[rI]:"fire-auth-compat",[iI]:"fire-rtdb",[sI]:"fire-data-connect",[oI]:"fire-rtdb-compat",[aI]:"fire-fn",[lI]:"fire-fn-compat",[uI]:"fire-iid",[cI]:"fire-iid-compat",[hI]:"fire-fcm",[dI]:"fire-fcm-compat",[fI]:"fire-perf",[pI]:"fire-perf-compat",[mI]:"fire-rc",[gI]:"fire-rc-compat",[yI]:"fire-gcs",[vI]:"fire-gcs-compat",[_I]:"fire-fst",[EI]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[TI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,kI=new Map,Wd=new Map;function Wg(r,e){try{r.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function xo(r){const e=r.name;if(Wd.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;Wd.set(e,r);for(const t of oc.values())Wg(t,r);for(const t of kI.values())Wg(t,r);return!0}function Tf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new fl("app","Firebase",xI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=SI;function Yv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Hd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(t||(t=Hv()),!t)throw xi.create("no-options");const l=oc.get(o);if(l){if(_s(t,l.options)&&_s(i,l.config))return l;throw xi.create("duplicate-app",{appName:o})}const h=new bS(o);for(const g of Wd.values())h.addComponent(g);const f=new CI(t,i,h);return oc.set(o,f),f}function Jv(r=Hd){const e=oc.get(r);if(!e&&r===Hd&&Hv())return Yv();if(!e)throw xi.create("no-app",{appName:r});return e}function Ci(r,e,t){let i=II[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(h.join(" "));return}xo(new ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebase-heartbeat-database",AI=1,tl="firebase-heartbeat-store";let Ad=null;function Xv(){return Ad||(Ad=qS(RI,AI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw xi.create("idb-open",{originalErrorMessage:r.message})})),Ad}async function PI(r){try{const t=(await Xv()).transaction(tl),i=await t.objectStore(tl).get(Zv(r));return await t.done,i}catch(e){if(e instanceof $r)Fr.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(t.message)}}}async function qg(r,e){try{const i=(await Xv()).transaction(tl,"readwrite");await i.objectStore(tl).put(e,Zv(r)),await i.done}catch(t){if(t instanceof $r)Fr.warn(t.message);else{const i=xi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fr.warn(i.message)}}}function Zv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1024,DI=30;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Kg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>DI){const h=VI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kg(),{heartbeatsToSend:i,unsentEntries:o}=LI(this._heartbeatsCache.heartbeats),l=sc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fr.warn(t),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function LI(r,e=NI){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Gg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Gg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class OI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?TS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Gg(r){return sc(JSON.stringify({version:2,heartbeats:r})).length}function VI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r){xo(new ws("platform-logger",e=>new QS(e),"PRIVATE")),xo(new ws("heartbeat",e=>new bI(e),"PRIVATE")),Ci($d,Hg,r),Ci($d,Hg,"esm2020"),Ci("fire-js","")}MI("");var jI="firebase",FI="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(jI,FI,"app");function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UI=e_,t_=new fl("auth","Firebase",e_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new wf("@firebase/auth");function zI(r,...e){ac.logLevel<=be.WARN&&ac.warn(`Auth (${Mo}): ${r}`,...e)}function Gu(r,...e){ac.logLevel<=be.ERROR&&ac.error(`Auth (${Mo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(r,...e){throw If(r,...e)}function Un(r,...e){return If(r,...e)}function Sf(r,e,t){const i={...UI(),[e]:t};return new fl("auth","Firebase",i).create(e,{appName:r.name})}function gs(r){return Sf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&dr(r,"argument-error"),Sf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function If(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return t_.create(r,...e)}function xe(r,e,...t){if(!r)throw If(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gu(e),new Error(e)}function Ur(r,e){r||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function $I(){return Qg()==="http:"||Qg()==="https:"}function Qg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($I()||yS()||"connection"in navigator)?navigator.onLine:!0}function WI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=pS()||vS()}get(){return HI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r,e){Ur(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GI=new ml(3e4,6e4);function xf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function jo(r,e,t,i,o={}){return r_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=pl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:g,...l};return gS()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Vo(r.emulatorConfig.host)&&(v.credentials="include"),n_.fetch()(await i_(r,r.config.apiHost,t,f),v)})}async function r_(r,e,t){r._canInitEmulator=!1;const i={...qI,...e};try{const o=new YI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Uu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,v]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Uu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Uu(r,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Sf(r,w,v);dr(r,w)}}catch(o){if(o instanceof $r)throw o;dr(r,"network-request-failed",{message:String(o)})}}async function QI(r,e,t,i,o={}){const l=await jo(r,e,t,i,o);return"mfaPendingCredential"in l&&dr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function i_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?kf(r.config,o):`${r.config.apiScheme}://${o}`;return KI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class YI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Un(this.auth,"network-request-failed")),GI.get())})}}function Uu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Un(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e){return jo(r,"POST","/v1/accounts:delete",e)}async function lc(r,e){return jo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XI(r,e=!1){const t=Vt(r),i=await t.getIdToken(e),o=Cf(i);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ka(Pd(o.auth_time)),issuedAtTime:Ka(Pd(o.iat)),expirationTime:Ka(Pd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pd(r){return Number(r)*1e3}function Cf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bv(t);return o?JSON.parse(o):(Gu("Failed to decode base64 JWT payload"),null)}catch(o){return Gu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Yg(r){const e=Cf(r);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof $r&&ZI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function ZI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(r){var T;const e=r.auth,t=await r.getIdToken(),i=await nl(r,lc(e,{idToken:t}));xe(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?s_(o.providerUserInfo):[],h=nk(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Kd(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,w)}async function tk(r){const e=Vt(r);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nk(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function s_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(r,e){const t=await r_(r,{},async()=>{const i=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await i_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&Vo(r.emulatorConfig.host)&&(g.credentials="include"),n_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ik(r,e){return jo(r,"POST","/v2/accounts:revokeToken",xf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=Yg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await rk(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Eo;return i&&(xe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(r,e){xe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nl(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XI(this,e)}reload(){return tk(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await uc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await nl(this,JI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,v=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:P,providerData:W,stsTokenManager:B}=t;xe(T&&B,e,"internal-error");const M=Eo.fromJSON(this.name,B);xe(typeof T=="string",e,"internal-error"),wi(i,e.name),wi(o,e.name),xe(typeof k=="boolean",e,"internal-error"),xe(typeof P=="boolean",e,"internal-error"),wi(l,e.name),wi(h,e.name),wi(f,e.name),wi(g,e.name),wi(v,e.name),wi(w,e.name);const G=new Fn({uid:T,auth:e,email:o,emailVerified:k,displayName:i,isAnonymous:P,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:v,lastLoginAt:w});return W&&Array.isArray(W)&&(G.providerData=W.map(X=>({...X}))),g&&(G._redirectEventId=g),G}static async _fromIdTokenResponse(e,t,i=!1){const o=new Eo;o.updateFromServerResponse(t);const l=new Fn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await uc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?s_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Eo;f.updateFromIdToken(i);const g=new Fn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Kd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new Map;function Vr(r){Ur(r instanceof Function,"Expected a class definition");let e=Jg.get(r);return e?(Ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o_.type="NONE";const Xg=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(r,e,t){return`firebase:${r}:${e}:${t}`}class To{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lc(this.auth,{idToken:e}).catch(()=>{});return t?Fn._fromGetAccountInfoResponse(this.auth,t,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new To(Vr(Xg),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Vr(Xg);const h=Qu(i,e.config.apiKey,e.name);let f=null;for(const v of t)try{const w=await v._get(h);if(w){let T;if(typeof w=="string"){const k=await lc(e,{idToken:w}).catch(()=>{});if(!k)break;T=await Fn._fromGetAccountInfoResponse(e,k,w)}else T=Fn._fromJSON(e,w);v!==l&&(f=T),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new To(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new To(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d_(e))return"Blackberry";if(f_(e))return"Webos";if(l_(e))return"Safari";if((e.includes("chrome/")||u_(e))&&!e.includes("edge/"))return"Chrome";if(h_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function a_(r=qt()){return/firefox\//i.test(r)}function l_(r=qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u_(r=qt()){return/crios\//i.test(r)}function c_(r=qt()){return/iemobile/i.test(r)}function h_(r=qt()){return/android/i.test(r)}function d_(r=qt()){return/blackberry/i.test(r)}function f_(r=qt()){return/webos/i.test(r)}function Rf(r=qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function sk(r=qt()){var e;return Rf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function ok(){return _S()&&document.documentMode===10}function p_(r=qt()){return Rf(r)||h_(r)||f_(r)||d_(r)||/windows phone/i.test(r)||c_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(r,e=[]){let t;switch(r){case"Browser":t=Zg(qt());break;case"Worker":t=`${Zg(qt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(r,e={}){return jo(r,"GET","/v2/passwordPolicy",xf(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=6;class ck{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ey(this),this.idTokenSubscription=new ey(this),this.beforeStateQueue=new ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lc(this,{idToken:e}),i=await Fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(jn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(gs(this));const t=e?Vt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lk(this),t=new ck(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ik(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&zI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ac(r){return Vt(r)}class ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=CS(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dk(r){Af=r}function fk(r){return Af.loadJS(r)}function pk(){return Af.gapiScript}function mk(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(r,e){const t=Tf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_s(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function yk(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Vr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vk(r,e,t){const i=Ac(r);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=g_(e),{host:h,port:f}=_k(e),g=f===null?"":`:${f}`,v={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(_s(v,i.config.emulator)&&_s(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Vo(h)?(qv(`${l}//${h}${g}`),Kv("Auth",!0)):wk()}function g_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _k(r){const e=g_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:ty(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:ty(h)}}}function ty(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function wk(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(r,e){return QI(r,"POST","/v1/accounts:signInWithIdp",xf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="http://localhost";class Es extends y_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new Es(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return So(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,So(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,So(e,t)}buildRequest(){const e={requestUri:Ek,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends Pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends gl{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Es._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends gl{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends gl{constructor(){super("twitter.com")}static credential(e,t){return Es._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Si.credential(t,i)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Fn._fromIdTokenResponse(e,i,o),h=ny(i);return new Co({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ny(i);return new Co({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ny(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends $r{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new cc(e,t,i,o)}}function v_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(r,l,e,i):l})}async function Tk(r,e,t=!1){const i=await nl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Co._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(r,e,t=!1){const{auth:i}=r;if(jn(i.app))return Promise.reject(gs(i));const o="reauthenticate";try{const l=await nl(r,v_(i,o,e,r),t);xe(l.idToken,i,"internal-error");const h=Cf(l.idToken);xe(h,i,"internal-error");const{sub:f}=h;return xe(r.uid===f,i,"user-mismatch"),Co._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&dr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(r,e,t=!1){if(jn(r.app))return Promise.reject(gs(r));const i="signIn",o=await v_(r,i,e),l=await Co._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function kk(r,e,t,i){return Vt(r).onIdTokenChanged(e,t,i)}function xk(r,e,t){return Vt(r).beforeAuthStateChanged(e,t)}function Ck(r,e,t,i){return Vt(r).onAuthStateChanged(e,t,i)}function Rk(r){return Vt(r).signOut()}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=1e3,Pk=10;class w_ extends __{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);ok()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Pk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ak)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}w_.type="LOCAL";const Nk=w_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends __{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}E_.type="SESSION";const T_=E_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Pc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async v=>v(t.origin,l)),g=await Dk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const v=Nf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const k=T;if(k.data.eventId===v)switch(k.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(k.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function Lk(r){lr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function Ok(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Mk(){return S_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="firebaseLocalStorageDb",jk=1,dc="firebaseLocalStorage",k_="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nc(r,e){return r.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function Fk(){const r=indexedDB.deleteDatabase(I_);return new yl(r).toPromise()}function Gd(){const r=indexedDB.open(I_,jk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(dc,{keyPath:k_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(dc)?e(i):(i.close(),await Fk(),e(await Gd()))})})}async function ry(r,e,t){const i=Nc(r,!0).put({[k_]:e,value:t});return new yl(i).toPromise()}async function Uk(r,e){const t=Nc(r,!1).get(e),i=await new yl(t).toPromise();return i===void 0?null:i.value}function iy(r,e){const t=Nc(r,!0).delete(e);return new yl(t).toPromise()}const zk=800,Bk=3;class x_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Bk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pc._getInstance(Mk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Ok(),!this.activeServiceWorker)return;this.sender=new bk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gd();return await ry(e,hc,"1"),await iy(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ry(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Uk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Nc(o,!1).getAll();return new yl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x_.type="LOCAL";const $k=x_;new ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(r,e){return e?Vr(e):(xe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends y_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,t){return So(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Hk(r){return Ik(r.auth,new Df(r),r.bypassAuthState)}function Wk(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),Sk(t,new Df(r),r.bypassAuthState)}async function qk(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),Tk(t,new Df(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hk;case"linkViaPopup":case"linkViaRedirect":return qk;case"reauthViaPopup":case"reauthViaRedirect":return Wk;default:dr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new ml(2e3,1e4);async function Gk(r,e,t){if(jn(r.app))return Promise.reject(Un(r,"operation-not-supported-in-this-environment"));const i=Ac(r);BI(r,e,Pf);const o=C_(i,t);return new ps(i,"signInViaPopup",e,o).executeNotNull()}class ps extends R_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kk.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="pendingRedirect",Yu=new Map;class Yk extends R_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const i=await Jk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jk(r,e){const t=ex(e),i=Zk(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Xk(r,e){Yu.set(r._key(),e)}function Zk(r){return Vr(r._redirectPersistence)}function ex(r){return Qu(Qk,r.config.apiKey,r.name)}async function tx(r,e,t=!1){if(jn(r.app))return Promise.reject(gs(r));const i=Ac(r),o=C_(i,e),h=await new Yk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=600*1e3;class rx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ix(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!A_(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Un(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function A_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ix(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(r,e={}){return jo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ax=/^https?/;async function lx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await sx(r);for(const t of e)try{if(ux(t))return}catch{}dr(r,"unauthorized-domain")}function ux(r){const e=qd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!ax.test(t))return!1;if(ox.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new ml(3e4,6e4);function oy(){const r=lr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function hx(r){return new Promise((e,t)=>{var o,l,h;function i(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),t(Un(r,"network-request-failed"))},timeout:cx.get()})}if((l=(o=lr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=lr().gapi)!=null&&h.load)i();else{const f=mk("iframefcb");return lr()[f]=()=>{gapi.load?i():t(Un(r,"network-request-failed"))},fk(`${pk()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function dx(r){return Ju=Ju||hx(r),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new ml(5e3,15e3),px="__/auth/iframe",mx="emulator/auth/iframe",gx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vx(r){const e=r.config;xe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?kf(e,mx):`https://${r.config.authDomain}/${px}`,i={apiKey:e.apiKey,appName:r.name,v:Mo},o=yx.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${pl(i).slice(1)}`}async function _x(r){const e=await dx(r),t=lr().gapi;return xe(t,r,"internal-error"),e.open({where:document.body,url:vx(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gx,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Un(r,"network-request-failed"),f=lr().setTimeout(()=>{l(h)},fx.get());function g(){lr().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ex=500,Tx=600,Sx="_blank",Ix="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kx(r,e,t,i=Ex,o=Tx){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...wx,width:i.toString(),height:o.toString(),top:l,left:h},v=qt().toLowerCase();t&&(f=u_(v)?Sx:t),a_(v)&&(e=e||Ix,g.scrollbars="yes");const w=Object.entries(g).reduce((k,[P,W])=>`${k}${P}=${W},`,"");if(sk(v)&&f!=="_self")return xx(e||"",f),new ay(null);const T=window.open(e||"",f,w);xe(T,r,"popup-blocked");try{T.focus()}catch{}return new ay(T)}function xx(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="__/auth/handler",Rx="emulator/auth/handler",Ax=encodeURIComponent("fac");async function ly(r,e,t,i,o,l){xe(r.config.authDomain,r,"auth-domain-config-required"),xe(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Mo,eventId:o};if(e instanceof Pf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",xS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof gl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),v=g?`#${Ax}=${encodeURIComponent(g)}`:"";return`${Px(r)}?${pl(f).slice(1)}${v}`}function Px({config:r}){return r.emulator?kf(r,Rx):`https://${r.authDomain}/${Cx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class Nx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T_,this._completeRedirectFn=tx,this._overrideRedirectResult=Xk}async _openPopup(e,t,i,o){var h;Ur((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await ly(e,t,i,qd(),o);return kx(e,l,Nf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await ly(e,t,i,qd(),o);return Lk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await _x(e),i=new rx(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nd,{type:Nd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Nd];l!==void 0&&t(!!l),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return p_()||l_()||Rf()}}const Dx=Nx;var uy="@firebase/auth",cy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ox(r){xo(new ws("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;xe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m_(r)},v=new hk(i,o,l,g);return yk(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xo(new ws("auth-internal",e=>{const t=Ac(e.getProvider("auth").getImmediate());return(i=>new bx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(uy,cy,Lx(r)),Ci(uy,cy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=300,Mx=Wv("authIdTokenMaxAge")||Vx;let hy=null;const jx=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Mx)return;const o=t==null?void 0:t.token;hy!==o&&(hy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Fx(r=Jv()){const e=Tf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=gk(r,{popupRedirectResolver:Dx,persistence:[$k,Nk,T_]}),i=Wv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=jx(l.toString());xk(t,h,()=>h(t.currentUser)),kk(t,f=>h(f))}}const o=$v("auth");return o&&vk(t,`http://${o}`),t}function Ux(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}dk({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Un("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Ux().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ox("Browser");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,P_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function x(){}x.prototype=S.prototype,A.F=S.prototype,A.prototype=new x,A.prototype.constructor=A,A.D=function(L,N,j){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return S.prototype[N].apply(L,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,S,x){x||(x=0);const L=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)L[N]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(N=0;N<16;++N)L[N]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=A.g[0],x=A.g[1],N=A.g[2];let j=A.g[3],R;R=S+(j^x&(N^j))+L[0]+3614090360&4294967295,S=x+(R<<7&4294967295|R>>>25),R=j+(N^S&(x^N))+L[1]+3905402710&4294967295,j=S+(R<<12&4294967295|R>>>20),R=N+(x^j&(S^x))+L[2]+606105819&4294967295,N=j+(R<<17&4294967295|R>>>15),R=x+(S^N&(j^S))+L[3]+3250441966&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(j^x&(N^j))+L[4]+4118548399&4294967295,S=x+(R<<7&4294967295|R>>>25),R=j+(N^S&(x^N))+L[5]+1200080426&4294967295,j=S+(R<<12&4294967295|R>>>20),R=N+(x^j&(S^x))+L[6]+2821735955&4294967295,N=j+(R<<17&4294967295|R>>>15),R=x+(S^N&(j^S))+L[7]+4249261313&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(j^x&(N^j))+L[8]+1770035416&4294967295,S=x+(R<<7&4294967295|R>>>25),R=j+(N^S&(x^N))+L[9]+2336552879&4294967295,j=S+(R<<12&4294967295|R>>>20),R=N+(x^j&(S^x))+L[10]+4294925233&4294967295,N=j+(R<<17&4294967295|R>>>15),R=x+(S^N&(j^S))+L[11]+2304563134&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(j^x&(N^j))+L[12]+1804603682&4294967295,S=x+(R<<7&4294967295|R>>>25),R=j+(N^S&(x^N))+L[13]+4254626195&4294967295,j=S+(R<<12&4294967295|R>>>20),R=N+(x^j&(S^x))+L[14]+2792965006&4294967295,N=j+(R<<17&4294967295|R>>>15),R=x+(S^N&(j^S))+L[15]+1236535329&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(N^j&(x^N))+L[1]+4129170786&4294967295,S=x+(R<<5&4294967295|R>>>27),R=j+(x^N&(S^x))+L[6]+3225465664&4294967295,j=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(j^S))+L[11]+643717713&4294967295,N=j+(R<<14&4294967295|R>>>18),R=x+(j^S&(N^j))+L[0]+3921069994&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^j&(x^N))+L[5]+3593408605&4294967295,S=x+(R<<5&4294967295|R>>>27),R=j+(x^N&(S^x))+L[10]+38016083&4294967295,j=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(j^S))+L[15]+3634488961&4294967295,N=j+(R<<14&4294967295|R>>>18),R=x+(j^S&(N^j))+L[4]+3889429448&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^j&(x^N))+L[9]+568446438&4294967295,S=x+(R<<5&4294967295|R>>>27),R=j+(x^N&(S^x))+L[14]+3275163606&4294967295,j=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(j^S))+L[3]+4107603335&4294967295,N=j+(R<<14&4294967295|R>>>18),R=x+(j^S&(N^j))+L[8]+1163531501&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^j&(x^N))+L[13]+2850285829&4294967295,S=x+(R<<5&4294967295|R>>>27),R=j+(x^N&(S^x))+L[2]+4243563512&4294967295,j=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(j^S))+L[7]+1735328473&4294967295,N=j+(R<<14&4294967295|R>>>18),R=x+(j^S&(N^j))+L[12]+2368359562&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(x^N^j)+L[5]+4294588738&4294967295,S=x+(R<<4&4294967295|R>>>28),R=j+(S^x^N)+L[8]+2272392833&4294967295,j=S+(R<<11&4294967295|R>>>21),R=N+(j^S^x)+L[11]+1839030562&4294967295,N=j+(R<<16&4294967295|R>>>16),R=x+(N^j^S)+L[14]+4259657740&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^j)+L[1]+2763975236&4294967295,S=x+(R<<4&4294967295|R>>>28),R=j+(S^x^N)+L[4]+1272893353&4294967295,j=S+(R<<11&4294967295|R>>>21),R=N+(j^S^x)+L[7]+4139469664&4294967295,N=j+(R<<16&4294967295|R>>>16),R=x+(N^j^S)+L[10]+3200236656&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^j)+L[13]+681279174&4294967295,S=x+(R<<4&4294967295|R>>>28),R=j+(S^x^N)+L[0]+3936430074&4294967295,j=S+(R<<11&4294967295|R>>>21),R=N+(j^S^x)+L[3]+3572445317&4294967295,N=j+(R<<16&4294967295|R>>>16),R=x+(N^j^S)+L[6]+76029189&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^j)+L[9]+3654602809&4294967295,S=x+(R<<4&4294967295|R>>>28),R=j+(S^x^N)+L[12]+3873151461&4294967295,j=S+(R<<11&4294967295|R>>>21),R=N+(j^S^x)+L[15]+530742520&4294967295,N=j+(R<<16&4294967295|R>>>16),R=x+(N^j^S)+L[2]+3299628645&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(N^(x|~j))+L[0]+4096336452&4294967295,S=x+(R<<6&4294967295|R>>>26),R=j+(x^(S|~N))+L[7]+1126891415&4294967295,j=S+(R<<10&4294967295|R>>>22),R=N+(S^(j|~x))+L[14]+2878612391&4294967295,N=j+(R<<15&4294967295|R>>>17),R=x+(j^(N|~S))+L[5]+4237533241&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~j))+L[12]+1700485571&4294967295,S=x+(R<<6&4294967295|R>>>26),R=j+(x^(S|~N))+L[3]+2399980690&4294967295,j=S+(R<<10&4294967295|R>>>22),R=N+(S^(j|~x))+L[10]+4293915773&4294967295,N=j+(R<<15&4294967295|R>>>17),R=x+(j^(N|~S))+L[1]+2240044497&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~j))+L[8]+1873313359&4294967295,S=x+(R<<6&4294967295|R>>>26),R=j+(x^(S|~N))+L[15]+4264355552&4294967295,j=S+(R<<10&4294967295|R>>>22),R=N+(S^(j|~x))+L[6]+2734768916&4294967295,N=j+(R<<15&4294967295|R>>>17),R=x+(j^(N|~S))+L[13]+1309151649&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~j))+L[4]+4149444226&4294967295,S=x+(R<<6&4294967295|R>>>26),R=j+(x^(S|~N))+L[11]+3174756917&4294967295,j=S+(R<<10&4294967295|R>>>22),R=N+(S^(j|~x))+L[2]+718787259&4294967295,N=j+(R<<15&4294967295|R>>>17),R=x+(j^(N|~S))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+j&4294967295}i.prototype.v=function(A,S){S===void 0&&(S=A.length);const x=S-this.blockSize,L=this.C;let N=this.h,j=0;for(;j<S;){if(N==0)for(;j<=x;)o(this,A,j),j+=this.blockSize;if(typeof A=="string"){for(;j<S;)if(L[N++]=A.charCodeAt(j++),N==this.blockSize){o(this,L),N=0;break}}else for(;j<S;)if(L[N++]=A[j++],N==this.blockSize){o(this,L),N=0;break}}this.h=N,this.o+=S},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var x=A.length-8;x<A.length;++x)A[x]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)A[S++]=this.g[x]>>>L&255;return A};function l(A,S){var x=f;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=S(A)}function h(A,S){this.h=S;const x=[];let L=!0;for(let N=A.length-1;N>=0;N--){const j=A[N]|0;L&&j==S||(x[N]=j,L=!1)}this.g=x}var f={};function g(A){return-128<=A&&A<128?l(A,function(S){return new h([S|0],S<0?-1:0)}):new h([A|0],A<0?-1:0)}function v(A){if(isNaN(A)||!isFinite(A))return T;if(A<0)return M(v(-A));const S=[];let x=1;for(let L=0;A>=x;L++)S[L]=A/x|0,x*=4294967296;return new h(S,0)}function w(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return M(w(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=v(Math.pow(S,8));let L=T;for(let j=0;j<A.length;j+=8){var N=Math.min(8,A.length-j);const R=parseInt(A.substring(j,j+N),S);N<8?(N=v(Math.pow(S,N)),L=L.j(N).add(v(R))):(L=L.j(x),L=L.add(v(R)))}return L}var T=g(0),k=g(1),P=g(16777216);r=h.prototype,r.m=function(){if(B(this))return-M(this).m();let A=0,S=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);A+=(L>=0?L:4294967296+L)*S,S*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(W(this))return"0";if(B(this))return"-"+M(this).toString(A);const S=v(Math.pow(A,6));var x=this;let L="";for(;;){const N=se(x,S).g;x=G(x,N.j(S));let j=((x.g.length>0?x.g[0]:x.h)>>>0).toString(A);if(x=N,W(x))return j+L;for(;j.length<6;)j="0"+j;L=j+L}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function W(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function B(A){return A.h==-1}r.l=function(A){return A=G(this,A),B(A)?-1:W(A)?0:1};function M(A){const S=A.g.length,x=[];for(let L=0;L<S;L++)x[L]=~A.g[L];return new h(x,~A.h).add(k)}r.abs=function(){return B(this)?M(this):this},r.add=function(A){const S=Math.max(this.g.length,A.g.length),x=[];let L=0;for(let N=0;N<=S;N++){let j=L+(this.i(N)&65535)+(A.i(N)&65535),R=(j>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);L=R>>>16,j&=65535,R&=65535,x[N]=R<<16|j}return new h(x,x[x.length-1]&-2147483648?-1:0)};function G(A,S){return A.add(M(S))}r.j=function(A){if(W(this)||W(A))return T;if(B(this))return B(A)?M(this).j(M(A)):M(M(this).j(A));if(B(A))return M(this.j(M(A)));if(this.l(P)<0&&A.l(P)<0)return v(this.m()*A.m());const S=this.g.length+A.g.length,x=[];for(var L=0;L<2*S;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let N=0;N<A.g.length;N++){const j=this.i(L)>>>16,R=this.i(L)&65535,Ue=A.i(N)>>>16,nt=A.i(N)&65535;x[2*L+2*N]+=R*nt,X(x,2*L+2*N),x[2*L+2*N+1]+=j*nt,X(x,2*L+2*N+1),x[2*L+2*N+1]+=R*Ue,X(x,2*L+2*N+1),x[2*L+2*N+2]+=j*Ue,X(x,2*L+2*N+2)}for(A=0;A<S;A++)x[A]=x[2*A+1]<<16|x[2*A];for(A=S;A<2*S;A++)x[A]=0;return new h(x,0)};function X(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function Y(A,S){this.g=A,this.h=S}function se(A,S){if(W(S))throw Error("division by zero");if(W(A))return new Y(T,T);if(B(A))return S=se(M(A),S),new Y(M(S.g),M(S.h));if(B(S))return S=se(A,M(S)),new Y(M(S.g),S.h);if(A.g.length>30){if(B(A)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var x=k,L=S;L.l(A)<=0;)x=fe(x),L=fe(L);var N=ce(x,1),j=ce(L,1);for(L=ce(L,2),x=ce(x,2);!W(L);){var R=j.add(L);R.l(A)<=0&&(N=N.add(x),j=R),L=ce(L,1),x=ce(x,1)}return S=G(A,N.j(S)),new Y(N,S)}for(N=T;A.l(S)>=0;){for(x=Math.max(1,Math.floor(A.m()/S.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),j=v(x),R=j.j(S);B(R)||R.l(A)>0;)x-=L,j=v(x),R=j.j(S);W(j)&&(j=k),N=N.add(j),A=G(A,R)}return new Y(N,A)}r.B=function(A){return se(this,A).h},r.and=function(A){const S=Math.max(this.g.length,A.g.length),x=[];for(let L=0;L<S;L++)x[L]=this.i(L)&A.i(L);return new h(x,this.h&A.h)},r.or=function(A){const S=Math.max(this.g.length,A.g.length),x=[];for(let L=0;L<S;L++)x[L]=this.i(L)|A.i(L);return new h(x,this.h|A.h)},r.xor=function(A){const S=Math.max(this.g.length,A.g.length),x=[];for(let L=0;L<S;L++)x[L]=this.i(L)^A.i(L);return new h(x,this.h^A.h)};function fe(A){const S=A.g.length+1,x=[];for(let L=0;L<S;L++)x[L]=A.i(L)<<1|A.i(L-1)>>>31;return new h(x,A.h)}function ce(A,S){const x=S>>5;S%=32;const L=A.g.length-x,N=[];for(let j=0;j<L;j++)N[j]=S>0?A.i(j+x)>>>S|A.i(j+x+1)<<32-S:A.i(j+x);return new h(N,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,P_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Ri=h}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N_,Ba,D_,Xu,Qd,b_,L_,O_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var U=u[I];if(!(U in _))break e;_=_[U]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&_.push([I,m[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function v(u,m,_){return v=g,v.apply(null,arguments)}function w(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function T(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,U,H){for(var ie=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ie[Re-2]=arguments[Re];return m.prototype[U].apply(I,ie)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const m=u.length;if(m>0){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function W(u,m){for(let I=1;I<arguments.length;I++){const U=arguments[I];var _=typeof U;if(_=_!="object"?_:U?Array.isArray(U)?"array":_:"null",_=="array"||_=="object"&&typeof U.length=="number"){_=u.length||0;const H=U.length||0;u.length=_+H;for(let ie=0;ie<H;ie++)u[_+ie]=U[ie]}else u.push(U)}}class B{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function M(u){h.setTimeout(()=>{throw u},0)}function G(){var u=A;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class X{constructor(){this.h=this.g=null}add(m,_){const I=Y.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Y=new B(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ce=!1,A=new X,S=()=>{const u=Promise.resolve(void 0);fe=()=>{u.then(x)}};function x(){for(var u;u=G();){try{u.h.call(u.g)}catch(_){M(_)}var m=Y;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ce=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}T(Ue,N),Ue.prototype.init=function(u,m){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),Ye=0;function We(u,m,_,I,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=U,this.key=++Ye,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function q(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function D(u){const m={};for(const _ in u)m[_]=u[_];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(u,m){let _,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(_ in I)u[_]=I[_];for(let H=0;H<K.length;H++)_=K[H],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,_,I,U){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ie=oe(u,m,I,U);return ie>-1?(m=u[ie],_||(m.fa=!1)):(m=new We(m,this.src,H,!!I,U),m.fa=_,u.push(m)),m};function Ie(u,m){const _=m.type;if(_ in u.g){var I=u.g[_],U=Array.prototype.indexOf.call(I,m,void 0),H;(H=U>=0)&&Array.prototype.splice.call(I,U,1),H&&(ne(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function oe(u,m,_,I){for(let U=0;U<u.length;++U){const H=u[U];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==I)return U}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),je={};function Ke(u,m,_,I,U){if(Array.isArray(m)){for(let H=0;H<m.length;H++)Ke(u,m[H],_,I,U);return null}return _=Wo(_),u&&u[nt]?u.J(m,_,f(I)?!!I.capture:!1,U):Kt(u,m,_,!1,I,U)}function Kt(u,m,_,I,U,H){if(!m)throw Error("Invalid event type");const ie=f(U)?!!U.capture:!!U;let Re=Ps(u);if(Re||(u[Pe]=Re=new le(u)),_=Re.add(m,_,I,ie,H),_.proxy)return _;if(I=Rs(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)j||(U=ie),U===void 0&&(U=!1),u.addEventListener(m.toString(),I,U);else if(u.attachEvent)u.attachEvent(As(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Rs(){function u(_){return m.call(u.src,u.listener,_)}const m=Sl;return u}function Ho(u,m,_,I,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)Ho(u,m[H],_,I,U);else I=f(I)?!!I.capture:!!I,_=Wo(_),u&&u[nt]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],_=oe(m,_,I,U),_>-1&&(ne(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=Ps(u))&&(m=u.g[m.toString()],u=-1,m&&(u=oe(m,_,I,U)),(_=u>-1?m[u]:null)&&Hr(_))}function Hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[nt])Ie(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(As(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Ps(m))?(Ie(_,u),_.h==0&&(_.src=null,m[Pe]=null)):ne(u)}}}function As(u){return u in je?je[u]:je[u]="on"+u}function Sl(u,m){if(u.da)u=!0;else{m=new Ue(m,this);const _=u.listener,I=u.ha||u.src;u.fa&&Hr(u),u=_.call(I,m)}return u}function Ps(u){return u=u[Pe],u instanceof le?u:null}var Ui="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wo(u){return typeof u=="function"?u:(u[Ui]||(u[Ui]=function(m){return u.handleEvent(m)}),u[Ui])}function pt(){L.call(this),this.i=new le(this),this.M=this,this.G=null}T(pt,L),pt.prototype[nt]=!0,pt.prototype.removeEventListener=function(u,m,_,I){Ho(this,u,m,_,I)};function ct(u,m){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var U=m;m=new N(I,u),_e(m,U)}U=!0;let H,ie;if(_)for(ie=_.length-1;ie>=0;ie--)H=m.g=_[ie],U=Cn(H,I,!0,m)&&U;if(H=m.g=u,U=Cn(H,I,!0,m)&&U,U=Cn(H,I,!1,m)&&U,_)for(ie=0;ie<_.length;ie++)H=m.g=_[ie],U=Cn(H,I,!1,m)&&U}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let I=0;I<_.length;I++)ne(_[I]);delete u.g[m],u.h--}}this.G=null},pt.prototype.J=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},pt.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function Cn(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let H=0;H<m.length;++H){const ie=m[H];if(ie&&!ie.da&&ie.capture==_){const Re=ie.listener,ht=ie.ha||ie.src;ie.fa&&Ie(u.i,ie),U=Re.call(ht,I)!==!1&&U}}return U&&!I.defaultPrevented}function qo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Ko(u){u.g=qo(()=>{u.g=null,u.i&&(u.i=!1,Ko(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Il extends L{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ko(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){L.call(this),this.h=u,this.g={}}T(Wr,L);var Go=[];function Ns(u){ye(u.g,function(m,_){this.g.hasOwnProperty(_)&&Hr(m)},u),u.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),Ns(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=h.JSON.stringify,kl=h.JSON.parse,zi=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Kr(){}function xl(){}var Gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ds(){N.call(this,"d")}T(Ds,N);function Qo(){N.call(this,"c")}T(Qo,N);var Rn={},bs=null;function Qr(){return bs=bs||new pt}Rn.Ia="serverreachability";function Ls(u){N.call(this,Rn.Ia,u)}T(Ls,N);function gr(u){const m=Qr();ct(m,new Ls(m))}Rn.STAT_EVENT="statevent";function yr(u,m){N.call(this,Rn.STAT_EVENT,u),this.stat=m}T(yr,N);function lt(u){const m=Qr();ct(m,new yr(m,u))}Rn.Ja="timingevent";function Yo(u,m){N.call(this,Rn.Ja,u),this.size=m}T(Yo,N);function Yr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.ua=function(){this.g=!1};function Cl(u,m,_,I,U,H){u.info(function(){if(u.g)if(H){var ie="",Re=H.split("&");for(let qe=0;qe<Re.length;qe++){var ht=Re[qe].split("=");if(ht.length>1){const mt=ht[0];ht=ht[1];const cn=mt.split("_");ie=cn.length>=2&&cn[1]=="type"?ie+(mt+"="+ht+"&"):ie+(mt+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+m+`
`+_+`
`+ie})}function Rl(u,m,_,I,U,H,ie){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+m+`
`+_+`
`+H+" "+ie})}function $n(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Bi(u,_)+(I?" "+I:"")})}function Al(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function Bi(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var _=H[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var U=I[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return qr(H)}catch{return m}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pl;function vr(){}T(vr,Kr),vr.prototype.g=function(){return new XMLHttpRequest},Pl=new vr;function Hn(u){return encodeURIComponent(String(u))}function Os(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function mn(u,m,_,I){this.j=u,this.i=m,this.l=_,this.S=I||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}var Dl={},Jo={};function An(u,m,_){u.M=1,u.A=wr(gn(m)),u.u=_,u.R=!0,Xo(u,null)}function Xo(u,m){u.F=Date.now(),$i(u),u.B=gn(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),la(_.i,"t",I),u.C=0,_=u.j.L,u.h=new Nl,u.g=Bl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Il(v(u.Y,u,u.g),u.P)),m=u.V,_=u.g,I=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Go[0]=U.toString()),U=Go);for(let H=0;H<U.length;H++){const ie=Ke(_,U[H],I||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),gr(),Cl(u.i,u.v,u.B,u.l,u.S,u.u)}mn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Jn(u)==3?m.j():this.Y(u)},mn.prototype.Y=function(u){try{if(u==this.g)e:{const Re=Jn(this.g),ht=this.g.ya(),qe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Ul(this.g)))){this.K||Re!=4||ht==7||(ht==8||qe<=0?gr(3):gr(2)),Vs(this);var m=this.g.ca();this.X=m;var _=bl(this);if(this.o=m==200,Rl(this.i,this.v,this.B,this.l,this.S,Re,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,U=this.g;if((I=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var H=I;break t}}H=null}if(u=H)$n(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,lt(12),_r(this),Hi(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<_.length;)if(mt=Ol(this,_),mt==Jo){Re==4&&(this.m=4,lt(14),u=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Dl){this.m=4,lt(15),$n(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else $n(this.i,this.l,mt,null),Je(this,mt);if(Ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||_.length!=0||this.h.h||(this.m=1,lt(16),u=!1),this.o=this.o&&u,!u)$n(this.i,this.l,_,"[Invalid Chunked Response]"),_r(this),Hi(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Zi(ie),ie.P=!0,lt(11))}}else $n(this.i,this.l,_,null),Je(this,_);Re==4&&_r(this),this.o&&!this.K&&(Re==4?qs(this.j,this):(this.o=!1,$i(this)))}else ca(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),_r(this),Hi(this)}}}catch{}finally{}};function bl(u){if(!Ll(u))return u.g.la();const m=Ul(u.g);if(m==="")return"";let _="";const I=m.length,U=Jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return _r(u),Hi(u),"";u.h.i=new h.TextDecoder}for(let H=0;H<I;H++)u.h.h=!0,_+=u.h.i.decode(m[H],{stream:!(U&&H==I-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Ll(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ol(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?Jo:(_=Number(m.substring(_,I)),isNaN(_)?Dl:(I+=1,I+_>m.length?Jo:(m=m.slice(I,I+_),u.C=I+_,m)))}mn.prototype.cancel=function(){this.K=!0,_r(this)};function $i(u){u.T=Date.now()+u.H,Zo(u,u.H)}function Zo(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Yr(v(u.aa,u),m)}function Vs(u){u.D&&(h.clearTimeout(u.D),u.D=null)}mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Al(this.i,this.B),this.M!=2&&(gr(),lt(17)),_r(this),this.m=2,Hi(this)):Zo(this,this.T-u)};function Hi(u){u.j.I==0||u.K||qs(u.j,u)}function _r(u){Vs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ns(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Je(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ta(_.h,u))){if(!u.L&&ta(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Ws(_),ln(_);else break e;er(_),lt(18)}}else _.xa=U[1],0<_.xa-_.K&&U[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Yr(v(_.Va,_),6e3));Wi(_.h)<=1&&_.ta&&(_.ta=void 0)}else un(_,11)}else if((u.L||_.g==u)&&Ws(_),!R(m))for(U=_.Ba.g.parse(m),m=0;m<U.length;m++){let qe=U[m];const mt=qe[0];if(!(mt<=_.K))if(_.K=mt,qe=qe[1],_.I==2)if(qe[0]=="c"){_.M=qe[1],_.ba=qe[2];const cn=qe[3];cn!=null&&(_.ka=cn,_.j.info("VER="+_.ka));const kr=qe[4];kr!=null&&(_.za=kr,_.j.info("SVER="+_.za));const tr=qe[5];tr!=null&&typeof tr=="number"&&tr>0&&(I=1.5*tr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const nr=u.g;if(nr){const Qs=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var H=I.h;H.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(js(H,H.h),H.h=null))}if(I.G){const fa=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(I.wa=fa,Be(I.J,I.G,fa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var ie=u;if(I.na=da(I,I.L?I.ba:null,I.W),ie.L){qi(I.h,ie);var Re=ie,ht=I.O;ht&&(Re.H=ht),Re.D&&(Vs(Re),$i(Re)),I.g=ie}else jt(I);_.i.length>0&&Ir(_)}else qe[0]!="stop"&&qe[0]!="close"||un(_,7);else _.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?un(_,7):$s(_):qe[0]!="noop"&&_.l&&_.l.qa(qe),_.A=0)}}gr(4)}catch{}}var Gc=class{constructor(u,m){this.g=u,this.map=m}};function Ms(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ea(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Wi(u){return u.h?1:u.g?u.g.size:0}function ta(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function js(u,m){u.g?u.g.add(m):u.h=m}function qi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ms.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return P(u.i)}var Vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let U,H=null;I>=0?(U=u[_].substring(0,I),H=u[_].substring(I+1)):U=u[_],m(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Wn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Wn?(this.l=u.l,Ki(this,u.j),this.o=u.o,this.g=u.g,qn(this,u.u),this.h=u.h,ei(this,ua(u.i)),this.m=u.m):u&&(m=String(u).match(Vl))?(this.l=!1,Ki(this,m[1]||"",!0),this.o=Gi(m[2]||""),this.g=Gi(m[3]||"",!0),qn(this,m[4]),this.h=Gi(m[5]||"",!0),ei(this,m[6]||"",!0),this.m=Gi(m[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}Wn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qi(m,ra,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qi(m,ra,!0),"@"),u.push(Hn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Qi(_,_.charAt(0)=="/"?Yi:ia,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Qi(_,sa)),u.join("")},Wn.prototype.resolve=function(u){const m=gn(this);let _=!!u.j;_?Ki(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var I=u.h;if(_)qn(m,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var U=m.h.lastIndexOf("/");U!=-1&&(I=m.h.slice(0,U+1)+I)}if(U=I,U==".."||U==".")I="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){I=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let ie=0;ie<U.length;){const Re=U[ie++];Re=="."?I&&ie==U.length&&H.push(""):Re==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&ie==U.length&&H.push("")):(H.push(Re),I=!0)}I=H.join("/")}else I=U}return _?m.h=I:_=u.i.toString()!=="",_?ei(m,ua(u.i)):_=!!u.m,_&&(m.m=u.m),m};function gn(u){return new Wn(u)}function Ki(u,m,_){u.j=_?Gi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ei(u,m,_){m instanceof Ve?(u.i=m,Us(u.i,u.l)):(_||(m=Qi(m,Qc)),u.i=new Ve(m,u.l))}function Be(u,m,_){u.i.set(m,_)}function wr(u){return Be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Gi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,na),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function na(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ra=/[#\/\?@]/g,ia=/[#\?:]/g,Yi=/[#\?]/g,Qc=/[#\?@]/g,sa=/#/g;function Ve(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Kn(u){u.g||(u.g=new Map,u.h=0,u.i&&on(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ve.prototype,r.add=function(u,m){Kn(this),this.i=null,u=Gn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function oa(u,m){Kn(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Fs(u,m){return Kn(u),m=Gn(u,m),u.g.has(m)}r.forEach=function(u,m){Kn(this),this.g.forEach(function(_,I){_.forEach(function(U){u.call(m,U,I,this)},this)},this)};function aa(u,m){Kn(u);let _=[];if(typeof m=="string")Fs(u,m)&&(_=_.concat(u.g.get(Gn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Kn(this),this.i=null,u=Gn(this,u),Fs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=aa(this,u),u.length>0?String(u[0]):m):m};function la(u,m,_){oa(u,m),_.length>0&&(u.i=null,u.g.set(Gn(u,m),P(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var _=m[I];const U=Hn(_);_=aa(this,_);for(let H=0;H<_.length;H++){let ie=U;_[H]!==""&&(ie+="="+Hn(_[H])),u.push(ie)}}return this.i=u.join("&")};function ua(u){const m=new Ve;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Us(u,m){m&&!u.j&&(Kn(u),u.i=null,u.g.forEach(function(_,I){const U=I.toLowerCase();I!=U&&(oa(this,I),la(this,U,_))},u)),u.j=m}function Qn(u,m){const _=new Jr;if(h.Image){const I=new Image;I.onload=w(At,_,"TestLoadImage: loaded",!0,m,I),I.onerror=w(At,_,"TestLoadImage: error",!1,m,I),I.onabort=w(At,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=w(At,_,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Yn(u,m){const _=new Jr,I=new AbortController,U=setTimeout(()=>{I.abort(),At(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(U),H.ok?At(_,"TestPingServer: ok",!0,m):At(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),At(_,"TestPingServer: error",!1,m)})}function At(u,m,_,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(_)}catch{}}function Ji(){this.g=new zi}function Er(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Er,Kr),Er.prototype.g=function(){return new an(this.i,this.h)};function an(u,m){pt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(an,pt),r=an.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ml(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ml(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ti(this):Pn(this),this.readyState==3&&Ml(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ti(this))},r.Na=function(u){this.g&&(this.response=u,ti(this))},r.ga=function(){this.g&&ti(this)};function ti(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function jl(u){let m="";return ye(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function zs(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=jl(_),typeof u=="string"?_!=null&&Hn(_):Be(u,m,_))}function Ge(u){pt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Ge,pt);var Fl=/^https?$/i,Yc=["POST","PUT"];r=Ge.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pl.g(),this.g.onreadystatechange=k(v(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){ni(this,H);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)_.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())_.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Yc,m,void 0)>=0)||I||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of _)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ni(this,H)}};function ni(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ri(u),Sr(u)}function ri(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Sr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),Ge.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Tr(this):this.Xa())},r.Xa=function(){Tr(this)};function Tr(u){if(u.h&&typeof l<"u"){if(u.v&&Jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=H===0){let ie=String(u.D).match(Vl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),I=!Fl.test(ie?ie.toLowerCase():"")}_=I}if(_)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var U=Jn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ri(u)}}finally{Sr(u)}}}}function Sr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ct(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),kl(m)}};function Ul(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(u){const m={};u=(u.g&&Jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(R(u[I]))continue;var _=Os(u[I]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[U]||[];m[U]=H,H.push(_)}q(m,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Bs(u){this.za=0,this.i=[],this.j=new Jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xn("baseRetryDelayMs",5e3,u),this.Za=Xn("retryDelaySeedMs",1e4,u),this.Ta=Xn("forwardChannelMaxRetries",2,u),this.va=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ms(u&&u.concurrentRequestLimit),this.Ba=new Ji,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Bs.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,I){lt(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=da(this,null,this.W),Ir(this)};function $s(u){if(Hs(u),u.I==3){var m=u.V++,_=gn(u.J);if(Be(_,"SID",u.M),Be(_,"RID",m),Be(_,"TYPE","terminate"),Zn(u,_),m=new mn(u,u.j,m),m.M=2,m.A=wr(gn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Bl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$i(m)}es(u)}function ln(u){u.g&&(Zi(u),u.g.cancel(),u.g=null)}function Hs(u){ln(u),u.v&&(h.clearTimeout(u.v),u.v=null),Ws(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Ir(u){if(!ea(u.h)&&!u.m){u.m=!0;var m=u.Ea;fe||S(),ce||(fe(),ce=!0),A.add(m,u),u.D=0}}function zl(u,m){return Wi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Yr(v(u.Ea,u,m),Ks(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new mn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=D(H),_e(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ha(this,U,m),_=gn(this.J),Be(_,"RID",u),Be(_,"CVER",22),this.G&&Be(_,"X-HTTP-Session-Id",this.G),Zn(this,_),H&&(this.R?m="headers="+Hn(jl(H))+"&"+m:this.u&&zs(_,this.u,H)),js(this.h,U),this.Ra&&Be(_,"TYPE","init"),this.S?(Be(_,"$req",m),Be(_,"SID","null"),U.U=!0,An(U,_,null)):An(U,_,m),this.I=2}}else this.I==3&&(u?Xi(this,u):this.i.length==0||ea(this.h)||Xi(this))};function Xi(u,m){var _;m?_=m.l:_=u.V++;const I=gn(u.J);Be(I,"SID",u.M),Be(I,"RID",_),Be(I,"AID",u.K),Zn(u,I),u.u&&u.o&&zs(I,u.u,u.o),_=new mn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ha(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),js(u.h,_),An(_,I,m)}function Zn(u,m){u.H&&ye(u.H,function(_,I){Be(m,I,_)}),u.l&&ye({},function(_,I){Be(m,I,_)})}function ha(u,m,_){_=Math.min(u.i.length,_);const I=u.l?v(u.l.Ka,u.l,u):null;e:{var U=u.i;let Re=-1;for(;;){const ht=["count="+_];Re==-1?_>0?(Re=U[0].g,ht.push("ofs="+Re)):Re=0:ht.push("ofs="+Re);let qe=!0;for(let mt=0;mt<_;mt++){var H=U[mt].g;const cn=U[mt].map;if(H-=Re,H<0)Re=Math.max(0,U[mt].g-100),qe=!1;else try{H="req"+H+"_"||"";try{var ie=cn instanceof Map?cn:Object.entries(cn);for(const[kr,tr]of ie){let nr=tr;f(tr)&&(nr=qr(tr)),ht.push(H+kr+"="+encodeURIComponent(nr))}}catch(kr){throw ht.push(H+"type="+encodeURIComponent("_badmap")),kr}}catch{I&&I(cn)}}if(qe){ie=ht.join("&");break e}}ie=void 0}return u=u.i.splice(0,_),m.G=u,ie}function jt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;fe||S(),ce||(fe(),ce=!0),A.add(m,u),u.A=0}}function er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Yr(v(u.Da,u),Ks(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Yr(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),ln(this),ii(this))};function Zi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ii(u){u.g=new mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=gn(u.na);Be(m,"RID","rpc"),Be(m,"SID",u.M),Be(m,"AID",u.K),Be(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Be(m,"TO",u.ia),Be(m,"TYPE","xmlhttp"),Zn(u,m),u.u&&u.o&&zs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=wr(gn(m)),_.u=null,_.R=!0,Xo(_,u)}r.Va=function(){this.C!=null&&(this.C=null,ln(this),er(this),lt(19))};function Ws(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function qs(u,m){var _=null;if(u.g==m){Ws(u),Zi(u),u.g=null;var I=2}else if(ta(u.h,m))_=m.G,qi(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;I=Qr(),ct(I,new Yo(I,_)),Ir(u)}else jt(u);else if(U=m.m,U==3||U==0&&m.X>0||!(I==1&&zl(u,m)||I==2&&er(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),U){case 1:un(u,5);break;case 4:un(u,10);break;case 3:un(u,6);break;default:un(u,2)}}}function Ks(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function un(u,m){if(u.j.info("Error code "+m),m==2){var _=v(u.bb,u),I=u.Ua;const U=!I;I=new Wn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ki(I,"https"),wr(I),U?Qn(I.toString(),_):Yn(I.toString(),_)}else lt(2);u.I=0,u.l&&u.l.pa(m),es(u),Hs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function es(u){if(u.I=0,u.ja=[],u.l){const m=sn(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function da(u,m,_){var I=_ instanceof Wn?gn(_):new Wn(_);if(I.g!="")m&&(I.g=m+"."+I.g),qn(I,I.u);else{var U=h.location;I=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const H=new Wn(null);I&&Ki(H,I),m&&(H.g=m),U&&qn(H,U),_&&(H.h=_),I=H}return _=u.G,m=u.wa,_&&m&&Be(I,_,m),Be(I,"VER",u.ka),Zn(u,I),I}function Bl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ge(new Er({ab:_})):new Ge(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $l(){}r=$l.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new Pt(u,m)};function Pt(u,m){pt.call(this),this.g=new Bs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new si(this)}T(Pt,pt),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){$s(this.g)},Pt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=qr(u),u=_);m.i.push(new Gc(m.Ya++,u)),m.I==3&&Ir(m)},Pt.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,Pt.Z.N.call(this)};function Hl(u){Ds.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}T(Hl,Ds);function Wl(){Qo.call(this),this.status=1}T(Wl,Qo);function si(u){this.g=u}T(si,$l),si.prototype.ra=function(){ct(this.g,"a")},si.prototype.qa=function(u){ct(this.g,new Hl(u))},si.prototype.pa=function(u){ct(this.g,new Wl)},si.prototype.oa=function(){ct(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,O_=function(){return new Gs},L_=function(){return Qr()},b_=Rn,Qd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Xu=Xr,Zr.COMPLETE="complete",D_=Zr,xl.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",pt.prototype.listen=pt.prototype.J,Ba=xl,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,N_=Ge}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.8.0";function zx(r){Fo=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new wf("@firebase/firestore");function yo(){return Ts.logLevel}function ue(r,...e){if(Ts.logLevel<=be.DEBUG){const t=e.map(bf);Ts.debug(`Firestore (${Fo}): ${r}`,...t)}}function zr(r,...e){if(Ts.logLevel<=be.ERROR){const t=e.map(bf);Ts.error(`Firestore (${Fo}): ${r}`,...t)}}function Ro(r,...e){if(Ts.logLevel<=be.WARN){const t=e.map(bf);Ts.warn(`Firestore (${Fo}): ${r}`,...t)}}function bf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,V_(r,i,t)}function V_(r,e,t){let i=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw zr(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||V_(e,o,i)}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class $x{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Hx{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ai,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ai)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new M_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class Wx{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class qx{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Wx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=Gx(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Le(r,e){return r<e?-1:r>e?1:0}function Yd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return Dd(o)===Dd(l)?Le(o,l):Dd(o)?1:-1}return Le(r.length,e.length)}const Qx=55296,Yx=57343;function Dd(r){const e=r.charCodeAt(0);return e>=Qx&&e<=Yx}function Ao(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ar.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),o=ar.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):Yd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class et extends ar{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const Jx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends ar{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return Jx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new Lt([py])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ge(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(et.fromString(e))}static fromName(e){return new we(et.fromString(e).popFirst(5))}static empty(){return new we(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r,e,t){if(!t)throw new ge(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Xx(r,e,t,i){if(e===!0&&i===!0)throw new ge(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function my(r){if(!we.isDocumentKey(r))throw new ge(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function gy(r){if(we.isDocumentKey(r))throw new ge(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function F_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Of(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Po(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Of(r);throw new ge(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r,e){const t={typeString:r};return e&&(t.value=e),t}function vl(r,e){if(!F_(r))throw new ge(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-62135596800,vy=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*vy);return new tt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yy)throw new ge(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:_t("string",tt._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new tt(0,0))}static max(){return new Ce(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=-1;function Zx(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new tt(t+1,0):new tt(t,i));return new Ni(o,we.empty(),e)}function eC(r){return new Ni(r.readTime,r.key,rl)}class Ni{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ni(Ce.min(),we.empty(),rl)}static max(){return new Ni(Ce.max(),we.empty(),rl)}}function tC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==nC)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,i)=>{t(e)}))}static reject(e){return new Q(((t,i)=>{i(e)}))}static waitFor(e){return new Q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next((o=>o?Q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Q(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((w=>{h[v]=w,++f,f===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new Q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function iC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=-1;function bc(r){return r==null}function fc(r){return r===0&&1/r==-1/0}function sC(r){return typeof r=="number"&&Number.isInteger(r)&&!fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="";function oC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_y(e)),e=aC(r.get(t),e);return _y(e)}function aC(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case U_:t+="";break;default:t+=l}}return t}function _y(r){return r+U_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ji(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function z_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}}class Bu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??bt.RED,this.left=o??bt.EMPTY,this.right=l??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new bt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ey(this.data.getIterator())}getIteratorFrom(e){return new Ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class Ey{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new It(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new B_("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const lC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=lC.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bi(r){return typeof r=="string"?Mt.fromBase64String(r):Mt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="server_timestamp",H_="__type__",W_="__previous_value__",q_="__local_write_time__";function Mf(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[H_])==null?void 0:i.stringValue)===$_}function Lc(r){const e=r.mapValue.fields[W_];return Mf(e)?Lc(e):e}function il(r){const e=Di(r.mapValue.fields[q_].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,i,o,l,h,f,g,v,w,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=w,this.apiKey=T}}const pc="(default)";class sl{constructor(e,t){this.projectId=e,this.database=t||pc}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}function cC(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ge(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="__type__",hC="__max__",$u={mapValue:{}},G_="__vector__",mc="value";function Li(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mf(r)?4:fC(r)?9007199254740991:dC(r)?10:11:Se(28295,{value:r})}function fr(r,e){if(r===e)return!0;const t=Li(r);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return il(r).isEqual(il(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Di(o.timestampValue),f=Di(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return bi(o.bytesValue).isEqual(bi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ft(o.doubleValue),f=ft(l.doubleValue);return h===f?fc(h)===fc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(wy(h)!==wy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!fr(h[g],f[g])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function ol(r,e){return(r.values||[]).find((t=>fr(t,e)))!==void 0}function No(r,e){if(r===e)return 0;const t=Li(r),i=Li(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ft(l.integerValue||l.doubleValue),g=ft(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Ty(r.timestampValue,e.timestampValue);case 4:return Ty(il(r),il(e));case 5:return Yd(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=bi(l),g=bi(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let v=0;v<f.length&&v<g.length;v++){const w=Le(f[v],g[v]);if(w!==0)return w}return Le(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Le(ft(l.latitude),ft(h.latitude));return f!==0?f:Le(ft(l.longitude),ft(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Sy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var k,P,W,B;const f=l.fields||{},g=h.fields||{},v=(k=f[mc])==null?void 0:k.arrayValue,w=(P=g[mc])==null?void 0:P.arrayValue,T=Le(((W=v==null?void 0:v.values)==null?void 0:W.length)||0,((B=w==null?void 0:w.values)==null?void 0:B.length)||0);return T!==0?T:Sy(v,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===$u.mapValue&&h===$u.mapValue)return 0;if(l===$u.mapValue)return 1;if(h===$u.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),v=h.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const k=Yd(g[T],w[T]);if(k!==0)return k;const P=No(f[g[T]],v[w[T]]);if(P!==0)return P}return Le(g.length,w.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Ty(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Di(r),i=Di(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function Sy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=No(t[o],i[o]);if(l)return l}return Le(t.length,i.length)}function Do(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Di(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return bi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Jd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Jd(t.fields[h])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function Zu(r){switch(Li(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lc(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return bi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ji(i.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function Xd(r){return!!r&&"integerValue"in r}function jf(r){return!!r&&"arrayValue"in r}function Iy(r){return!!r&&"nullValue"in r}function ky(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function dC(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[K_])==null?void 0:i.stringValue)===G_}function Ga(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ji(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ga(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ga(r.arrayValue.values[t]);return e}return{...r}}function fC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===hC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Ga(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ji(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new rn(Ga(this.value))}}function Q_(r){const e=[];return ji(r.fields,((t,i)=>{const o=new Lt([t]);if(ec(i)){const l=Q_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Wt(e,0,Ce.min(),Ce.min(),Ce.min(),rn.empty(),0)}static newFoundDocument(e,t,i,o){return new Wt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new Wt(e,2,t,Ce.min(),Ce.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Ce.min(),Ce.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.position=e,this.inclusive=t}}function xy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(h.referenceValue),t.key):i=No(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Cy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!fr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function pC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{}class Tt extends Y_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new gC(e,t,i):t==="array-contains"?new _C(e,i):t==="in"?new wC(e,i):t==="not-in"?new EC(e,i):t==="array-contains-any"?new TC(e,i):new Tt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new yC(e,i):new vC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends Y_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pr(e,t)}matches(e){return J_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function J_(r){return r.op==="and"}function X_(r){return mC(r)&&J_(r)}function mC(r){for(const e of r.filters)if(e instanceof pr)return!1;return!0}function Zd(r){if(r instanceof Tt)return r.field.canonicalString()+r.op.toString()+Do(r.value);if(X_(r))return r.filters.map((e=>Zd(e))).join(",");{const e=r.filters.map((t=>Zd(t))).join(",");return`${r.op}(${e})`}}function Z_(r,e){return r instanceof Tt?(function(i,o){return o instanceof Tt&&i.op===o.op&&i.field.isEqual(o.field)&&fr(i.value,o.value)})(r,e):r instanceof pr?(function(i,o){return o instanceof pr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&Z_(h,o.filters[f])),!0):!1})(r,e):void Se(19439)}function e0(r){return r instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(r):r instanceof pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(e0).join(" ,")+"}"})(r):"Filter"}class gC extends Tt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class yC extends Tt{constructor(e,t){super(e,"in",t),this.keys=t0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vC extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=t0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function t0(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class _C extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&ol(t.arrayValue,this.value)}}class wC extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ol(this.value.arrayValue,t)}}class EC extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ol(this.value.arrayValue,t)}}class TC extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ol(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Ry(r,e=null,t=[],i=[],o=null,l=null,h=null){return new SC(r,e,t,i,o,l,h)}function Ff(r){const e=Ae(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Zd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Do(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Do(i))).join(",")),e.Te=t}return e.Te}function Uf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!pC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Z_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Cy(r.startAt,e.startAt)&&Cy(r.endAt,e.endAt)}function ef(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function IC(r,e,t,i,o,l,h,f){return new Oc(r,e,t,i,o,l,h,f)}function zf(r){return new Oc(r)}function Ay(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function kC(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function xC(r){return r.collectionGroup!==null}function Qa(r){const e=Ae(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new It(Lt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(f=f.add(v.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yc(l,i))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new yc(Lt.keyField(),i))}return e.Ie}function ur(r){const e=Ae(r);return e.Ee||(e.Ee=CC(e,Qa(r))),e.Ee}function CC(r,e){if(r.limitType==="F")return Ry(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yc(o.field,l)}));const t=r.endAt?new gc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new gc(r.startAt.position,r.startAt.inclusive):null;return Ry(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function tf(r,e,t){return new Oc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vc(r,e){return Uf(ur(r),ur(e))&&r.limitType===e.limitType}function n0(r){return`${Ff(ur(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>e0(o))).join(", ")}]`),bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${i})`})(ur(r))}; limitType=${r.limitType})`}function Mc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Qa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,g){const v=xy(h,f,g);return h.inclusive?v<=0:v<0})(i.startAt,Qa(i),o)||i.endAt&&!(function(h,f,g){const v=xy(h,f,g);return h.inclusive?v>=0:v>0})(i.endAt,Qa(i),o))})(r,e)}function RC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function r0(r){return(e,t)=>{let i=!1;for(const o of Qa(r)){const l=AC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function AC(r,e,t){const i=r.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),v=f.data.field(l);return g!==null&&v!==null?No(g,v):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return z_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new at(we.comparator);function Br(){return PC}const i0=new at(we.comparator);function $a(...r){let e=i0;for(const t of r)e=e.insert(t.key,t);return e}function s0(r){let e=i0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ms(){return Ya()}function o0(){return Ya()}function Ya(){return new xs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const NC=new at(we.comparator),DC=new It(we.comparator);function Oe(...r){let e=DC;for(const t of r)e=e.add(t);return e}const bC=new It(Le);function LC(){return bC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function a0(r){return{integerValue:""+r}}function OC(r,e){return sC(e)?a0(e):Bf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this._=void 0}}function VC(r,e,t){return r instanceof vc?(function(o,l){const h={fields:{[H_]:{stringValue:$_},[q_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Mf(l)&&(l=Lc(l)),l&&(h.fields[W_]=l),{mapValue:h}})(t,e):r instanceof al?u0(r,e):r instanceof ll?c0(r,e):(function(o,l){const h=l0(o,l),f=Py(h)+Py(o.Ae);return Xd(h)&&Xd(o.Ae)?a0(f):Bf(o.serializer,f)})(r,e)}function MC(r,e,t){return r instanceof al?u0(r,e):r instanceof ll?c0(r,e):t}function l0(r,e){return r instanceof _c?(function(i){return Xd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class vc extends jc{}class al extends jc{constructor(e){super(),this.elements=e}}function u0(r,e){const t=h0(e);for(const i of r.elements)t.some((o=>fr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ll extends jc{constructor(e){super(),this.elements=e}}function c0(r,e){let t=h0(e);for(const i of r.elements)t=t.filter((o=>!fr(o,i)));return{arrayValue:{values:t}}}class _c extends jc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Py(r){return ft(r.integerValue||r.doubleValue)}function h0(r){return jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function jC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof al&&o instanceof al||i instanceof ll&&o instanceof ll?Ao(i.elements,o.elements,fr):i instanceof _c&&o instanceof _c?fr(i.Ae,o.Ae):i instanceof vc&&o instanceof vc})(r.transform,e.transform)}class FC{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Fc{}function d0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new $f(r.key,In.none()):new _l(r.key,r.data,In.none());{const t=r.data,i=rn.empty();let o=new It(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Fi(r.key,i,new pn(o.toArray()),In.none())}}function UC(r,e,t){r instanceof _l?(function(o,l,h){const f=o.value.clone(),g=Dy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Fi?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Dy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(f0(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ja(r,e,t,i){return r instanceof _l?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const v=l.value.clone(),w=by(l.fieldTransforms,g,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Fi?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const v=by(l.fieldTransforms,g,h),w=h.data;return w.setAll(f0(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,h,f){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function zC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=l0(i.transform,o||null);l!=null&&(t===null&&(t=rn.empty()),t.set(i.field,l))}return t||null}function Ny(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ao(i,o,((l,h)=>jC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class _l extends Fc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fi extends Fc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function f0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Dy(r,e,t){const i=new Map;He(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,MC(h,f,t[o]))}return i}function by(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,VC(l,h,e))}return i}class $f extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BC extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&UC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ja(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ja(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=o0();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=d0(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((t,i)=>Ny(t,i)))&&Ao(this.baseMutations,e.baseMutations,((t,i)=>Ny(t,i)))}}class Hf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return NC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Hf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Me;function qC(r){switch(r){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function p0(r){if(r===void 0)return zr("GRPC error has no .code"),J.UNKNOWN;switch(r){case yt.OK:return J.OK;case yt.CANCELLED:return J.CANCELLED;case yt.UNKNOWN:return J.UNKNOWN;case yt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case yt.INTERNAL:return J.INTERNAL;case yt.UNAVAILABLE:return J.UNAVAILABLE;case yt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case yt.NOT_FOUND:return J.NOT_FOUND;case yt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case yt.ABORTED:return J.ABORTED;case yt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case yt.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:r})}}(Me=yt||(yt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new Ri([4294967295,4294967295],0);function Ly(r){const e=KC().encode(r),t=new P_;return t.update(e),new Uint8Array(t.digest())}function Oy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ri([t,i],0),new Ri([o,l],0)]}class Wf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ha(`Invalid padding: ${t}`);if(i<0)throw new Ha(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ri.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ri.fromNumber(i)));return o.compare(GC)===1&&(o=new Ri([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ly(e),[i,o]=Oy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Wf(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Ly(e),[i,o]=Oy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uc(Ce.min(),o,new at(Le),Br(),Oe())}}class wl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wl(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class m0{constructor(e,t){this.targetId=e,this.Ce=t}}class g0{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Vy{constructor(){this.ve=0,this.Fe=My(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new wl(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=My()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class QC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Br(),this.He=Hu(),this.Je=Hu(),this.Ze=new at(Le)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(ef(l))if(i===0){const h=new we(l.path);this.et(t,h,Wt.newNoDocument(h,Ce.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=bi(i).toUint8Array()}catch(g){if(g instanceof B_)return Ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Wf(h,o,l)}catch(g){return Ro(g instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&ef(f.target)){const g=new we(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Wt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let i=Oe();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Uc(e,t,this.Ze,this.je,i);return this.je=Br(),this.He=Hu(),this.Je=Hu(),this.Ze=new at(Le),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Vy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new It(Le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new It(Le),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new at(we.comparator)}function My(){return new at(we.comparator)}const YC={asc:"ASCENDING",desc:"DESCENDING"},JC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XC={and:"AND",or:"OR"};class ZC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nf(r,e){return r.useProto3Json||bc(e)?e:{value:e}}function wc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function eR(r,e){return wc(r,e.toTimestamp())}function cr(r){return He(!!r,49232),Ce.fromTimestamp((function(t){const i=Di(t);return new tt(i.seconds,i.nanos)})(r))}function qf(r,e){return rf(r,e).canonicalString()}function rf(r,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function v0(r){const e=et.fromString(r);return He(S0(e),10190,{key:e.toString()}),e}function sf(r,e){return qf(r.databaseId,e.path)}function bd(r,e){const t=v0(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(w0(t))}function _0(r,e){return qf(r.databaseId,e)}function tR(r){const e=v0(r);return e.length===4?et.emptyPath():w0(e)}function of(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function w0(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function jy(r,e,t){return{name:sf(r,e),fields:t.value.mapValue.fields}}function nR(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Se(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(He(w===void 0||typeof w=="string",58123),Mt.fromBase64String(w||"")):(He(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Mt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(v){const w=v.code===void 0?J.UNKNOWN:p0(v.code);return new ge(w,v.message||"")})(h);t=new g0(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=bd(r,i.document.name),l=cr(i.document.updateTime),h=i.document.createTime?cr(i.document.createTime):Ce.min(),f=new rn({mapValue:{fields:i.document.fields}}),g=Wt.newFoundDocument(o,l,h,f),v=i.targetIds||[],w=i.removedTargetIds||[];t=new nc(v,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=bd(r,i.document),l=i.readTime?cr(i.readTime):Ce.min(),h=Wt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new nc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=bd(r,i.document),l=i.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new WC(o,l),f=i.targetId;t=new m0(f,h)}}return t}function rR(r,e){let t;if(e instanceof _l)t={update:jy(r,e.key,e.value)};else if(e instanceof $f)t={delete:sf(r,e.key)};else if(e instanceof Fi)t={update:jy(r,e.key,e.data),updateMask:dR(e.fieldMask)};else{if(!(e instanceof BC))return Se(16599,{dt:e.type});t={verify:sf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof vc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof al)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof _c)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:eR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(r,e.precondition)),t}function iR(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?cr(o.updateTime):cr(l);return h.isEqual(Ce.min())&&(h=cr(l)),new FC(h,o.transformResults||[])})(t,e)))):[]}function sR(r,e){return{documents:[_0(r,e.path)]}}function oR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=_0(r,o);const l=(function(v){if(v.length!==0)return T0(pr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(k){return{field:_o(k.field),direction:uR(k.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=nf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function aR(r){let e=tR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const k=E0(T);return k instanceof pr&&X_(k)?k.getFilters():[k]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((k=>(function(W){return new yc(wo(W.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let k;return k=typeof T=="object"?T.value:T,bc(k)?null:k})(t.limit));let g=null;t.startAt&&(g=(function(T){const k=!!T.before,P=T.values||[];return new gc(P,k)})(t.startAt));let v=null;return t.endAt&&(v=(function(T){const k=!T.before,P=T.values||[];return new gc(P,k)})(t.endAt)),IC(e,o,h,l,f,"F",g,v)}function lR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function E0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wo(t.unaryFilter.field);return Tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return Tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return Tt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Tt.create(wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return pr.create(t.compositeFilter.filters.map((i=>E0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function uR(r){return YC[r]}function cR(r){return JC[r]}function hR(r){return XC[r]}function _o(r){return{fieldPath:r.canonicalString()}}function wo(r){return Lt.fromServerFormat(r.fieldPath)}function T0(r){return r instanceof Tt?(function(t){if(t.op==="=="){if(ky(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Iy(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ky(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Iy(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:cR(t.op),value:t.value}}})(r):r instanceof pr?(function(t){const i=t.getFilters().map((o=>T0(o)));return i.length===1?i[0]:{compositeFilter:{op:hR(t.op),filters:i}}})(r):Se(54877,{filter:r})}function dR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function S0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function I0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,i,o,l=Ce.min(),h=Ce.min(),f=Mt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.yt=e}}function pR(r){const e=aR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.Sn=new gR}addToCollectionParentIndex(e,t){return this.Sn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Ni.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class gR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new It(et.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new It(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k0=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(k0,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new bo(0)}static ar(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="LruGarbageCollector",yR=1048576;function zy([r,e],[t,i]){const o=Le(r,t);return o===0?Le(e,i):o}class vR{constructor(e){this.Pr=e,this.buffer=new It(zy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();zy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _R{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(Uy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?ue(Uy,"Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Ar(3e5)}))}}class wR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(Dc.ce);const i=new vR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Fy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,l,h,f,g,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(v=Date.now(),yo()<=be.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(v-g)+`ms
Total Duration: ${v-w}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function ER(r,e){return new wR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.changes=new xs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ja(i.mutation,o,pn.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const o=ms();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=$a();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ms();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Br();const h=Ya(),f=(function(){return Ya()})();return t.forEach(((g,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Fi)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Ja(w.mutation,v,w.mutation.getFieldMask(),tt.now())):h.set(v.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>f.set(v,new SR(w,h.get(v)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Ya();let o=new at(((h,f)=>h-f)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let w=i.get(g)||pn.empty();w=f.applyToLocalView(v,w),i.set(g,w);const T=(o.get(f.batchId)||Oe()).add(g);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,w=g.value,T=o0();w.forEach((k=>{if(!l.has(k)){const P=d0(t.get(k),i.get(k));P!==null&&T.set(k,P),l=l.add(k)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return Q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return kC(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Q.resolve(ms());let f=rl,g=l;return h.next((v=>Q.forEach(v,((w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?Q.resolve():this.remoteDocumentCache.getEntry(e,w).next((k=>{g=g.insert(w,k)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,Oe()))).next((w=>({batchId:f,changes:s0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=$a();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=$a();return this.indexManager.getCollectionParents(e,l).next((f=>Q.forEach(f,(g=>{const v=(function(T,k){return new Oc(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((T,k)=>{h=h.insert(T,k)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Wt.newInvalidDocument(w)))}));let f=$a();return h.forEach(((g,v)=>{const w=l.get(g);w!==void 0&&Ja(w.mutation,v,pn.empty(),tt.now()),Mc(t,v)&&(f=f.insert(g,v))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Q.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:pR(o.bundledQuery),readTime:cr(o.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.overlays=new at(we.comparator),this.Lr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ms();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.bt(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=ms(),l=t.length+1,h=new we(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new at(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=ms(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const f=ms(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,w)=>f.set(v,w))),!(f.size()>=o)););return Q.resolve(f)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new HC(t,i));let l=this.Lr.get(t);l===void 0&&(l=Oe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this.kr=new It(Rt.Kr),this.qr=new It(Rt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Rt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Rt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new we(new et([])),i=new Rt(t,e),o=new Rt(t,e+1),l=[];return this.qr.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new we(new et([])),i=new Rt(t,e),o=new Rt(t,e+1);let l=Oe();return this.qr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Rt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Rt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return we.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new It(Rt.Kr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new $C(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Jr=this.Jr.add(new Rt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Vf:this.Yn-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new It(Le);return t.forEach((o=>{const l=new Rt(o,0),h=new Rt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(f=>{i=i.add(f.Hr)}))})),Q.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const h=new Rt(new we(l),0);let f=new It(Le);return this.Jr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.Hr)),!0)}),h),Q.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Q.forEach(t.mutations,(o=>{const l=new Rt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Rt(t,0),o=this.Jr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.ti=e,this.docs=(function(){return new at(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let i=Br();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Wt.newInvalidDocument(o))})),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Br();const h=t.path,f=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||tC(eC(w),i)<=0||(o.has(w.key)||Mc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ni(e,t){return Q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new PR(this)}getSize(e){return Q.resolve(this.size)}}class PR extends TR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),Q.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.persistence=e,this.ri=new xs((t=>Ff(t)),Uf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new Kf,this.targetCount=0,this.oi=bo._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Q.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new bo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.lr(t),Q.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ri.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t){this._i={},this.overlays={},this.ai=new Dc(0),this.ui=!1,this.ui=!0,this.ci=new CR,this.referenceDelegate=e(this),this.li=new NR(this),this.indexManager=new mR,this.remoteDocumentCache=(function(o){return new AR(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new fR(t),this.Pi=new kR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new RR(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new DR(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Q.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class DR extends rC{constructor(e){super(),this.currentSequenceNumber=e}}class Gf{constructor(e){this.persistence=e,this.Ri=new Kf,this.Ai=null}static Vi(e){return new Gf(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.di,(i=>{const o=we.fromPath(i);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ec{constructor(e,t){this.persistence=e,this.fi=new xs((i=>oC(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=ER(this,t)}static Vi(e,t){return new Ec(e,t)}Ti(){}Ii(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Q.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Ce.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Q.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}wr(e,t,i){return Q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Qf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return wS()?8:iC(qt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new bR;return this.ys(e,t,h).next((f=>{if(l.result=f,this.As)return this.ws(e,t,h,f.size)}))})).next((()=>l.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(yo()<=be.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(yo()<=be.DEBUG&&ue("QueryEngine","Query:",vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(yo()<=be.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):Q.resolve())}gs(e,t){if(Ay(t))return Q.resolve(null);let i=ur(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=tf(t,null,"F"),i=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Oe(...l);return this.fs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.bs(t,f);return this.Ss(t,v,h,g.readTime)?this.gs(e,tf(t,null,"F")):this.Ds(e,v,t,g)}))))})))))}ps(e,t,i,o){return Ay(t)||o.isEqual(Ce.min())?Q.resolve(null):this.fs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,i,o)?Q.resolve(null):(yo()<=be.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.Ds(e,h,t,Zx(o,rl)).next((f=>f)))}))}bs(e,t){let i=new It(r0(e));return t.forEach(((o,l)=>{Mc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,i){return yo()<=be.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",vo(t)),this.fs.getDocumentsMatchingQuery(e,t,Ni.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="LocalStore",OR=3e8;class VR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new at(Le),this.Fs=new xs((l=>Ff(l)),Uf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function MR(r,e,t,i){return new VR(r,e,t,i)}async function C0(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let g=Oe();for(const v of o){h.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of l){f.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Ns:v,removedBatchIds:h,addedBatchIds:f})))}))}))}function jR(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,v,w){const T=v.batch,k=T.keys();let P=Q.resolve();return k.forEach((W=>{P=P.next((()=>w.getEntry(g,W))).next((B=>{const M=v.docVersions.get(W);He(M!==null,48541),B.version.compareTo(M)<0&&(T.applyToRemoteDocument(B,v),B.isValidDocument()&&(B.setReadTime(v.commitVersion),w.addEntry(B)))}))})),P.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Oe();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function R0(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function FR(r,e){const t=Ae(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((w,T)=>{const k=o.get(T);if(!k)return;f.push(t.li.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,w.addedDocuments,T))));let P=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(Mt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,i)),o=o.insert(T,P),(function(B,M,G){return B.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=OR?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(k,P,w)&&f.push(t.li.updateTargetData(l,P))}));let g=Br(),v=Oe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(UR(l,h,e.documentUpdates).next((w=>{g=w.Bs,v=w.Ls}))),!i.isEqual(Ce.min())){const w=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(w)}return Q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.vs=o,l)))}function UR(r,e,t){let i=Oe(),o=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Br();return t.forEach(((f,g)=>{const v=l.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(Yf,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)})),{Bs:h,Ls:o}}))}function zR(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Vf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function BR(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((l=>l?(o=l,Q.resolve(o)):t.li.allocateTargetId(i).next((h=>(o=new Ii(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function af(r,e,t){const i=Ae(r),o=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!zo(h))throw h;ue(Yf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function By(r,e,t){const i=Ae(r);let o=Ce.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,w){const T=Ae(g),k=T.Fs.get(w);return k!==void 0?Q.resolve(T.vs.get(k)):T.li.getTargetData(v,w)})(i,h,ur(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:Oe()))).next((f=>($R(i,RC(e),f),{documents:f,ks:l})))))}function $R(r,e,t){let i=r.Ms.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}class $y{constructor(){this.activeTargetIds=LC()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HR{constructor(){this.vo=new $y,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new $y,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="ConnectivityMonitor";class Wy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(Hy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(Hy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu=null;function lf(){return Wu===null?Wu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wu++,"0x"+Wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="RestConnection",qR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class KR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===pc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=lf(),f=this.Qo(e,t.toUriEncodedString());ue(Ld,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,l);const{host:v}=new URL(f),w=Vo(v);return this.zo(e,f,g,i,w).then((T=>(ue(Ld,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Ro(Ld,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T}))}jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const i=qR[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection",Ua=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Io extends KR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Io.c_){const e=L_();Ua(e,b_.STAT_EVENT,(t=>{t.stat===Qd.PROXY?ue($t,"STAT_EVENT: detected buffering proxy"):t.stat===Qd.NOPROXY&&ue($t,"STAT_EVENT: detected no buffering proxy")})),Io.c_=!0}}zo(e,t,i,o,l){const h=lf();return new Promise(((f,g)=>{const v=new N_;v.setWithCredentials(!0),v.listenOnce(D_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Xu.NO_ERROR:const T=v.getResponseJson();ue($t,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case Xu.TIMEOUT:ue($t,`RPC '${e}' ${h} timed out`),g(new ge(J.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:const k=v.getStatus();if(ue($t,`RPC '${e}' ${h} failed with status:`,k,"response text:",v.getResponseText()),k>0){let P=v.getResponseJson();Array.isArray(P)&&(P=P[0]);const W=P==null?void 0:P.error;if(W&&W.status&&W.message){const B=(function(G){const X=G.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(X)>=0?X:J.UNKNOWN})(W.status);g(new ge(B,W.message))}else g(new ge(J.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ge(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ue($t,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ue($t,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=lf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=l.join("");ue($t,`Creating RPC '${e}' stream ${o}: ${v}`,f);const w=h.createWebChannel(v,f);this.I_(w);let T=!1,k=!1;const P=new GR({Ho:W=>{k?ue($t,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(T||(ue($t,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ue($t,`RPC '${e}' stream ${o} sending:`,W),w.send(W))},Jo:()=>w.close()});return Ua(w,Ba.EventType.OPEN,(()=>{k||(ue($t,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),Ua(w,Ba.EventType.CLOSE,(()=>{k||(k=!0,ue($t,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(w))})),Ua(w,Ba.EventType.ERROR,(W=>{k||(k=!0,Ro($t,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),P.o_(new ge(J.UNAVAILABLE,"The operation could not be completed")))})),Ua(w,Ba.EventType.MESSAGE,(W=>{var B;if(!k){const M=W.data[0];He(!!M,16349);const G=M,X=(G==null?void 0:G.error)||((B=G[0])==null?void 0:B.error);if(X){ue($t,`RPC '${e}' stream ${o} received error:`,X);const Y=X.status;let se=(function(A){const S=yt[A];if(S!==void 0)return p0(S)})(Y),fe=X.message;se===void 0&&(se=J.INTERNAL,fe="Unknown error status: "+Y+" with message "+X.message),k=!0,P.o_(new ge(se,fe)),w.close()}else ue($t,`RPC '${e}' stream ${o} received:`,M),P.__(M)}})),Io.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return O_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(r){return new Io(r)}function Od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r){return new ZC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Io.c_=!1;class A0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="PersistentStream";class P0{constructor(e,t,i,o,l,h,f,g){this.Ci=e,this.b_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ue(qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YR extends P0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=nR(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?cr(h.readTime):Ce.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=of(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=ef(g)?{documents:sR(l,g)}:{query:oR(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=y0(l,h.resumeToken);const v=nf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ce.min())>0){f.readTime=wc(l,h.snapshotVersion.toTimestamp());const v=nf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}return f})(this.serializer,e);const i=lR(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=of(this.serializer),t.removeTarget=e,this.K_(t)}}class JR extends P0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iR(e.writeResults,e.commitTime),i=cr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=of(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>rR(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{}class ZR extends XR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,rf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(J.UNKNOWN,l.toString())}))}jo(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.jo(e,rf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(J.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function eA(r,e,t,i){return new ZR(r,e,t,i)}class tA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="RemoteStore";class nA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Cs(this)&&(ue(Ss,"Restarting streams for network reachability change."),await(async function(g){const v=Ae(g);v.Ea.add(4),await El(v),v.Va.set("Unknown"),v.Ea.delete(4),await Bc(v)})(this))}))})),this.Va=new tA(i,o)}}async function Bc(r){if(Cs(r))for(const e of r.Ra)await e(!0)}async function El(r){for(const e of r.Ra)await e(!1)}function N0(r,e){const t=Ae(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ep(t)?Zf(t):Bo(t).O_()&&Xf(t,e))}function Jf(r,e){const t=Ae(r),i=Bo(t);t.Ia.delete(e),i.O_()&&D0(t,e),t.Ia.size===0&&(i.O_()?i.L_():Cs(t)&&t.Va.set("Unknown"))}function Xf(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(r).Z_(e)}function D0(r,e){r.da.$e(e),Bo(r).X_(e)}function Zf(r){r.da=new QC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Bo(r).start(),r.Va.ua()}function ep(r){return Cs(r)&&!Bo(r).x_()&&r.Ia.size>0}function Cs(r){return Ae(r).Ea.size===0}function b0(r){r.da=void 0}async function rA(r){r.Va.set("Online")}async function iA(r){r.Ia.forEach(((e,t)=>{Xf(r,e)}))}async function sA(r,e){b0(r),ep(r)?(r.Va.ha(e),Zf(r)):r.Va.set("Unknown")}async function oA(r,e,t){if(r.Va.set("Online"),e instanceof g0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.da.removeTarget(f))})(r,e)}catch(i){ue(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Tc(r,i)}else if(e instanceof nc?r.da.Xe(e):e instanceof m0?r.da.st(e):r.da.tt(e),!t.isEqual(Ce.min()))try{const i=await R0(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.da.Tt(h);return f.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(v);w&&l.Ia.set(v,w.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,v)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Mt.EMPTY_BYTE_STRING,w.snapshotVersion)),D0(l,g);const T=new Ii(w.target,g,v,w.sequenceNumber);Xf(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ue(Ss,"Failed to raise snapshot:",i),await Tc(r,i)}}async function Tc(r,e,t){if(!zo(e))throw e;r.Ea.add(1),await El(r),r.Va.set("Offline"),t||(t=()=>R0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Ss,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Bc(r)}))}function L0(r,e){return e().catch((t=>Tc(r,t,e)))}async function $c(r){const e=Ae(r),t=Oi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vf;for(;aA(e);)try{const o=await zR(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,lA(e,o)}catch(o){await Tc(e,o)}O0(e)&&V0(e)}function aA(r){return Cs(r)&&r.Ta.length<10}function lA(r,e){r.Ta.push(e);const t=Oi(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function O0(r){return Cs(r)&&!Oi(r).x_()&&r.Ta.length>0}function V0(r){Oi(r).start()}async function uA(r){Oi(r).ra()}async function cA(r){const e=Oi(r);for(const t of r.Ta)e.ea(t.mutations)}async function hA(r,e,t){const i=r.Ta.shift(),o=Hf.from(i,e,t);await L0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await $c(r)}async function dA(r,e){e&&Oi(r).Y_&&await(async function(i,o){if((function(h){return qC(h)&&h!==J.ABORTED})(o.code)){const l=i.Ta.shift();Oi(i).B_(),await L0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await $c(i)}})(r,e),O0(r)&&V0(r)}async function Ky(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),ue(Ss,"RemoteStore received new credentials");const i=Cs(t);t.Ea.add(3),await El(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bc(t)}async function fA(r,e){const t=Ae(r);e?(t.Ea.delete(2),await Bc(t)):e||(t.Ea.add(2),await El(t),t.Va.set("Unknown"))}function Bo(r){return r.ma||(r.ma=(function(t,i,o){const l=Ae(t);return l.sa(),new YR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:rA.bind(null,r),Yo:iA.bind(null,r),t_:sA.bind(null,r),J_:oA.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),ep(r)?Zf(r):r.Va.set("Unknown")):(await r.ma.stop(),b0(r))}))),r.ma}function Oi(r){return r.fa||(r.fa=(function(t,i,o){const l=Ae(t);return l.sa(),new JR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:uA.bind(null,r),t_:dA.bind(null,r),ta:cA.bind(null,r),na:hA.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await $c(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Ss,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new tp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(r,e){if(zr("AsyncQueue",`${e}: ${r}`),zo(r))return new ge(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=$a(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.ga=new at(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Lo{constructor(e,t,i,o,l,h,f,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Lo(e,t,ko.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class mA{constructor(){this.queries=Qy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ae(t),l=o.queries;o.queries=Qy(),l.forEach(((h,f)=>{for(const g of f.ba)g.onError(i)}))})(this,new ge(J.ABORTED,"Firestore shutting down"))}}function Qy(){return new xs((r=>n0(r)),Vc)}async function gA(r,e){const t=Ae(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(i=2):(l=new pA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=np(h,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&rp(t)}async function yA(r,e){const t=Ae(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function vA(r,e){const t=Ae(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.ba)f.Fa(o)&&(i=!0);h.wa=o}}i&&rp(t)}function _A(r,e,t){const i=Ae(r),o=i.queries.get(e);if(o)for(const l of o.ba)l.onError(t);i.queries.delete(e)}function rp(r){r.Ca.forEach((e=>{e.next()}))}var uf,Yy;(Yy=uf||(uf={})).Ma="default",Yy.Cache="cache";class wA{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.key=e}}class j0{constructor(e){this.key=e}}class EA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=r0(e),this.tu=new ko(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Gy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const k=o.get(w),P=Mc(this.query,T)?T:null,W=!!k&&this.mutatedKeys.has(k.key),B=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let M=!1;k&&P?k.data.isEqual(P.data)?W!==B&&(i.track({type:3,doc:P}),M=!0):this.su(k,P)||(i.track({type:2,doc:P}),M=!0,(g&&this.eu(P,g)>0||v&&this.eu(P,v)<0)&&(f=!0)):!k&&P?(i.track({type:0,doc:P}),M=!0):k&&!P&&(i.track({type:1,doc:k}),M=!0,(g||v)&&(f=!0)),M&&(P?(h=h.add(P),l=B?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,T)=>(function(P,W){const B=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:M})}};return B(P)-B(W)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Xa;return this.Xa=g,h.length!==0||v?{snapshot:new Lo(this.query,e.tu,l,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new j0(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new M0(i))})),t}cu(e){this.Za=e.ks,this.Ya=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ip="SyncEngine";class TA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class SA{constructor(e){this.key=e,this.hu=!1}}class IA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new xs((f=>n0(f)),Vc),this.Iu=new Map,this.Eu=new Set,this.Ru=new at(we.comparator),this.Au=new Map,this.Vu=new Kf,this.du={},this.mu=new Map,this.fu=bo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kA(r,e,t=!0){const i=H0(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await F0(i,e,t,!0),o}async function xA(r,e){const t=H0(r);await F0(t,e,!0,!1)}async function F0(r,e,t,i){const o=await BR(r.localStore,ur(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await CA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&N0(r.remoteStore,o),f}async function CA(r,e,t,i,o){r.pu=(T,k,P)=>(async function(B,M,G,X){let Y=M.view.ru(G);Y.Ss&&(Y=await By(B.localStore,M.query,!1).then((({documents:A})=>M.view.ru(A,Y))));const se=X&&X.targetChanges.get(M.targetId),fe=X&&X.targetMismatches.get(M.targetId)!=null,ce=M.view.applyChanges(Y,B.isPrimaryClient,se,fe);return Xy(B,M.targetId,ce.au),ce.snapshot})(r,T,k,P);const l=await By(r.localStore,e,!0),h=new EA(e,l.ks),f=h.ru(l.documents),g=wl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(f,r.isPrimaryClient,g);Xy(r,t,v.au);const w=new TA(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function RA(r,e,t){const i=Ae(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Vc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await af(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Jf(i.remoteStore,o.targetId),cf(i,o.targetId)})).catch(Uo)):(cf(i,o.targetId),await af(i.localStore,o.targetId,!0))}async function AA(r,e){const t=Ae(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Jf(t.remoteStore,i.targetId))}async function PA(r,e,t){const i=MA(r);try{const o=await(function(h,f){const g=Ae(h),v=tt.now(),w=f.reduce(((P,W)=>P.add(W.key)),Oe());let T,k;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let W=Br(),B=Oe();return g.xs.getEntries(P,w).next((M=>{W=M,W.forEach(((G,X)=>{X.isValidDocument()||(B=B.add(G))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,W))).next((M=>{T=M;const G=[];for(const X of f){const Y=zC(X,T.get(X.key).overlayedDocument);Y!=null&&G.push(new Fi(X.key,Y,Q_(Y.value.mapValue),In.exists(!0)))}return g.mutationQueue.addMutationBatch(P,v,G,f)})).next((M=>{k=M;const G=M.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(P,M.batchId,G)}))})).then((()=>({batchId:k.batchId,changes:s0(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let v=h.du[h.currentUser.toKey()];v||(v=new at(Le)),v=v.insert(f,g),h.du[h.currentUser.toKey()]=v})(i,o.batchId,t),await Tl(i,o.changes),await $c(i.remoteStore)}catch(o){const l=np(o,"Failed to persist write");t.reject(l)}}async function U0(r,e){const t=Ae(r);try{const i=await FR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await Tl(t,i,e)}catch(i){await Uo(i)}}function Jy(r,e,t){const i=Ae(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ae(h);g.onlineState=f;let v=!1;g.queries.forEach(((w,T)=>{for(const k of T.ba)k.va(f)&&(v=!0)})),v&&rp(g)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function NA(r,e,t){const i=Ae(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new at(we.comparator);h=h.insert(l,Wt.newNoDocument(l,Ce.min()));const f=Oe().add(l),g=new Uc(Ce.min(),new Map,new at(Le),h,f);await U0(i,g),i.Ru=i.Ru.remove(l),i.Au.delete(e),sp(i)}else await af(i.localStore,e,!1).then((()=>cf(i,e,t))).catch(Uo)}async function DA(r,e){const t=Ae(r),i=e.batch.batchId;try{const o=await jR(t.localStore,e);B0(t,i,null),z0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Tl(t,o)}catch(o){await Uo(o)}}async function bA(r,e,t){const i=Ae(r);try{const o=await(function(h,f){const g=Ae(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return g.mutationQueue.lookupMutationBatch(v,f).next((T=>(He(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(v,T)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>g.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);B0(i,e,t),z0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Tl(i,o)}catch(o){await Uo(o)}}function z0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function B0(r,e,t){const i=Ae(r);let o=i.du[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function cf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||$0(r,i)}))}function $0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Jf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),sp(r))}function Xy(r,e,t){for(const i of t)i instanceof M0?(r.Vu.addReference(i.key,e),LA(r,i)):i instanceof j0?(ue(ip,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||$0(r,i.key)):Se(19791,{wu:i})}function LA(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(ue(ip,"New document in limbo: "+t),r.Eu.add(i),sp(r))}function sp(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(et.fromString(e)),i=r.fu.next();r.Au.set(i,new SA(t)),r.Ru=r.Ru.insert(t,i),N0(r.remoteStore,new Ii(ur(zf(t.path)),i,"TargetPurposeLimboResolution",Dc.ce))}}async function Tl(r,e,t){const i=Ae(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{h.push(i.pu(g,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const T=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){o.push(v);const T=Qf.Es(g.targetId,v);l.push(T)}})))})),await Promise.all(h),i.Pu.J_(o),await(async function(g,v){const w=Ae(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Q.forEach(v,(k=>Q.forEach(k.Ts,(P=>w.persistence.referenceDelegate.addReference(T,k.targetId,P))).next((()=>Q.forEach(k.Is,(P=>w.persistence.referenceDelegate.removeReference(T,k.targetId,P)))))))))}catch(T){if(!zo(T))throw T;ue(Yf,"Failed to update sequence numbers: "+T)}for(const T of v){const k=T.targetId;if(!T.fromCache){const P=w.vs.get(k),W=P.snapshotVersion,B=P.withLastLimboFreeSnapshotVersion(W);w.vs=w.vs.insert(k,B)}}})(i.localStore,l))}async function OA(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){ue(ip,"User change. New user:",e.toKey());const i=await C0(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ge(J.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tl(t,i.Ns)}}function VA(r,e){const t=Ae(r),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function H0(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=U0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NA.bind(null,e),e.Pu.J_=vA.bind(null,e.eventManager),e.Pu.yu=_A.bind(null,e.eventManager),e}function MA(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bA.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return MR(this.persistence,new LR,e.initialUser,this.serializer)}Cu(e){return new x0(Gf.Vi,this.serializer)}Du(e){return new HR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class jA extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof Ec,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new _R(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new x0((i=>Ec.Vi(i,t)),this.serializer)}}class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OA.bind(null,this.syncEngine),await fA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mA})()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),i=QR(e.databaseInfo);return eA(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new nA(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jy(this.syncEngine,t,0)),(function(){return Wy.v()?new Wy:new WR})())}createSyncEngine(e,t){return(function(o,l,h,f,g,v,w){const T=new IA(o,l,h,f,g,v);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ae(o);ue(Ss,"RemoteStore shutting down."),l.Ea.add(5),await El(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hf.provider={build:()=>new hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class UA{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=Lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ue(Vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ue(Vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=np(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Vd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Vi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await C0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Zy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await zA(r);ue(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Ky(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Ky(e.remoteStore,o))),r._onlineComponents=e}async function zA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Vi,"Using user provided OfflineComponentProvider");try{await Vd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await Vd(r,new Sc)}}else ue(Vi,"Using default OfflineComponentProvider"),await Vd(r,new jA(void 0));return r._offlineComponents}async function W0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Vi,"Using user provided OnlineComponentProvider"),await Zy(r,r._uninitializedComponentsProvider._online)):(ue(Vi,"Using default OnlineComponentProvider"),await Zy(r,new hf))),r._onlineComponents}function BA(r){return W0(r).then((e=>e.syncEngine))}async function $A(r){const e=await W0(r),t=e.eventManager;return t.onListen=kA.bind(null,e.syncEngine),t.onUnlisten=RA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AA.bind(null,e.syncEngine),t}function HA(r,e,t={}){const i=new Ai;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,v){const w=new FA({next:k=>{w.Nu(),h.enqueueAndForget((()=>yA(l,T)));const P=k.docs.has(f);!P&&k.fromCache?v.reject(new ge(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&k.fromCache&&g&&g.source==="server"?v.reject(new ge(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(k)},error:k=>v.reject(k)}),T=new wA(zf(f.path),w,{includeMetadataChanges:!0,Ka:!0});return gA(l,T)})(await $A(r),r.asyncQueue,e,t,i))),i.promise}function WA(r,e){const t=new Ai;return r.asyncQueue.enqueueAndForget((async()=>PA(await BA(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="ComponentProvider",ev=new Map;function KA(r,e,t,i,o){return new uC(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,q0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="firestore.googleapis.com",tv=!0;class nv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K0,this.ssl=tv}else this.host=e.host,this.ssl=e.ssl??tv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yR)throw new ge(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q0(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Bx;switch(i.type){case"firstParty":return new qx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ev.get(t);i&&(ue(qA,"Removing Datastore"),ev.delete(t),i.terminate())})(this),Promise.resolve()}}function GA(r,e,t,i={}){var v;r=Po(r,Hc);const o=Vo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(qv(`https://${f}`),Kv("Firestore",!0)),l.host!==K0&&l.host!==f&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:i};if(!_s(g,h)&&(r._setSettings(g),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=Ht.MOCK_USER;else{w=hS(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new ge(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Ht(k)}r._authCredentials=new $x(new M_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new op(this.firestore,e,this._query)}}class St{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(vl(t,St._jsonSchema))return new St(e,i||null,new we(et.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:_t("string",St._jsonSchemaVersion),referencePath:_t("string")};class Pi extends op{constructor(e,t,i){super(e,t,zf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new we(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function QA(r,e,...t){if(r=Vt(r),j_("collection","path",e),r instanceof Hc){const i=et.fromString(e,...t);return gy(i),new Pi(r,null,i)}{if(!(r instanceof St||r instanceof Pi))throw new ge(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(et.fromString(e,...t));return gy(i),new Pi(r.firestore,null,i)}}function ap(r,e,...t){if(r=Vt(r),arguments.length===1&&(e=Lf.newId()),j_("doc","path",e),r instanceof Hc){const i=et.fromString(e,...t);return my(i),new St(r,null,new we(i))}{if(!(r instanceof St||r instanceof Pi))throw new ge(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(et.fromString(e,...t));return my(i),new St(r.firestore,r instanceof Pi?r.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="AsyncQueue";class iv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A0(this,"async_queue_retry"),this._c=()=>{const i=Od();i&&ue(rv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Od();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Od();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ai;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;ue(rv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",sv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=tp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:sv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Wc extends Hc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new iv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iv(e),this._firestoreClient=void 0,await e}}}function YA(r,e){const t=typeof r=="object"?r:Jv(),i=typeof r=="string"?r:pc,o=Tf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=uS("firestore");l&&GA(o,...l)}return o}function lp(r){if(r._terminated)throw new ge(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||JA(r),r._firestoreClient}function JA(r){var i,o,l,h;const e=r._freezeSettings(),t=KA(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new UA(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Mt.fromBase64String(e))}catch(t){throw new ge(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:_t("string",Sn._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(vl(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:_t("string",hr._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zn(e.vectorValues);throw new ge(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zn._jsonSchemaVersion="firestore/vectorValue/1.0",zn._jsonSchema={type:_t("string",zn._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=/^__.*__$/;class ZA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}}class G0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Q0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:r})}}class hp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new hp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ic(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Q0(this.dataSource)&&XA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class e2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zc(e)}createContext(e,t,i,o=!1){return new hp({dataSource:e,methodName:t,targetDoc:i,path:Lt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y0(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new e2(r._databaseId,!!e.ignoreUndefinedProperties,t)}function J0(r,e,t,i,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);dp("Data must be an object, but it was:",h,i);const f=X0(i,h);let g,v;if(l.merge)g=new pn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const k=ul(e,T,t);if(!h.contains(k))throw new ge(J.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);tw(w,k)||w.push(k)}g=new pn(w),v=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,v=h.fieldTransforms;return new ZA(new rn(f),g,v)}class qc extends cp{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qc}}function t2(r,e,t,i){const o=r.createContext(1,e,t);dp("Data must be an object, but it was:",o,i);const l=[],h=rn.empty();ji(i,((g,v)=>{const w=ew(e,g,t);v=Vt(v);const T=o.childContextForFieldPath(w);if(v instanceof qc)l.push(w);else{const k=Kc(v,T);k!=null&&(l.push(w),h.set(w,k))}}));const f=new pn(l);return new G0(h,f,o.fieldTransforms)}function n2(r,e,t,i,o,l){const h=r.createContext(1,e,t),f=[ul(e,i,t)],g=[o];if(l.length%2!=0)throw new ge(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)f.push(ul(e,l[k])),g.push(l[k+1]);const v=[],w=rn.empty();for(let k=f.length-1;k>=0;--k)if(!tw(v,f[k])){const P=f[k];let W=g[k];W=Vt(W);const B=h.childContextForFieldPath(P);if(W instanceof qc)v.push(P);else{const M=Kc(W,B);M!=null&&(v.push(P),w.set(P,M))}}const T=new pn(v);return new G0(w,T,h.fieldTransforms)}function Kc(r,e){if(Z0(r=Vt(r)))return dp("Unsupported field value:",e,r),X0(r,e);if(r instanceof cp)return(function(i,o){if(!Q0(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let g=Kc(f,o.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=tt.fromDate(i);return{timestampValue:wc(o.serializer,l)}}if(i instanceof tt){const l=new tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wc(o.serializer,l)}}if(i instanceof hr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sn)return{bytesValue:y0(o.serializer,i._byteString)};if(i instanceof St){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zn)return(function(h,f){const g=h instanceof zn?h.toArray():h;return{mapValue:{fields:{[K_]:{stringValue:G_},[mc]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw f.createError("VectorValues must only contain numeric values.");return Bf(f.serializer,w)}))}}}}}})(i,o);if(I0(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Of(i)}`)})(r,e)}function X0(r,e){const t={};return z_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(r,((i,o)=>{const l=Kc(o,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Z0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof hr||r instanceof Sn||r instanceof St||r instanceof cp||r instanceof zn||I0(r))}function dp(r,e,t){if(!Z0(t)||!F_(t)){const i=Of(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function ul(r,e,t){if((e=Vt(e))instanceof up)return e._internalPath;if(typeof e=="string")return ew(r,e);throw Ic("Field path arguments must be of type string or ",r,!1,void 0,t)}const r2=new RegExp("[~\\*/\\[\\]]");function ew(r,e,t){if(e.search(r2)>=0)throw Ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new up(...e.split("."))._internalPath}catch{throw Ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ic(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ge(J.INVALID_ARGUMENT,f+r+g)}function tw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ji(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[mc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ft(h.doubleValue)));return new zn(t)}convertGeoPoint(e){return new hr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const t=Di(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);He(S0(i),9688,{name:e});const o=new sl(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends i2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}const ov="@firebase/firestore",av="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(ul("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o2 extends nw{data(){return super.data()}}function rw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Wa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends nw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ul("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ys._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:_t("string",ys._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class rc extends ys{data(e={}){return super.data(e)}}class Xa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new rc(this._firestore,this._userDataWriter,i.key,i,new Wa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Wa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Wa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:a2(f.type),doc:g,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:_t("string",Xa._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Y0(e)}set(e,t,i){this._verifyNotCommitted();const o=Md(e,this._firestore),l=rw(o.converter,t,i),h=J0(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,In.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=Md(e,this._firestore);let h;return h=typeof(t=Vt(t))=="string"||t instanceof up?n2(this._dataReader,"WriteBatch.update",l._key,t,i,o):t2(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Md(e,this._firestore);return this._mutations=this._mutations.concat(new $f(t._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Md(r,e){if((r=Vt(r)).firestore!==e)throw new ge(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(r){r=Po(r,St);const e=Po(r.firestore,Wc),t=lp(e);return HA(t,r._key).then((i=>c2(e,r,i)))}function iw(r,e,t){r=Po(r,St);const i=Po(r.firestore,Wc),o=rw(r.converter,e,t),l=Y0(i);return sw(i,[J0(l,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,In.none())])}function sw(r,e){const t=lp(r);return WA(t,e)}function c2(r,e,t){const i=t.docs.get(e._key),o=new s2(r);return new ys(r,o,e._key,i,new Wa(t.hasPendingWrites,t.fromCache),e.converter)}function h2(r){return r=Po(r,Wc),lp(r),new l2(r,(e=>sw(r,e)))}(function(e,t=!0){zx(Mo),xo(new ws("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new Wc(new Hx(i.getProvider("auth-internal")),new Kx(h,i.getProvider("app-check-internal")),cC(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ci(ov,av,e),Ci(ov,av,"esm2020")})();const d2={apiKey:"AIzaSyCO5r-8hPDpEJD2qY2llWyf_gAQXVlu4CU",authDomain:"stop-procrastinating-9ffaf.firebaseapp.com",projectId:"stop-procrastinating-9ffaf",storageBucket:"stop-procrastinating-9ffaf.firebasestorage.app",messagingSenderId:"270312713724",appId:"1:270312713724:web:98e212793206ff87511679",measurementId:"G-KYLVPZXV20"},ow=Yv(d2),Is=Fx(ow),f2=new Lr,kc=YA(ow),pe={USER_MOOD:"sp_user_mood",TASKS:"sp_tasks",SCHEDULED_TASKS:"sp_scheduled_tasks",DISTRACTION_LOGS:"sp_distraction_logs",WORK_LOGS:"sp_work_logs",REFLECTIONS:"sp_daily_reflections",USER_STATS:"sp_user_stats",EVENT_LOG:"sp_event_log"},p2=async(r,e)=>{const t=Is.currentUser;if(t)try{const i=ap(kc,"users",t.uid),l={[pe.TASKS]:"tasks",[pe.SCHEDULED_TASKS]:"scheduled",[pe.REFLECTIONS]:"reflections",[pe.USER_STATS]:"stats",[pe.USER_MOOD]:"mood"}[r];if(l){const h=typeof e=="object"?JSON.stringify(e):e;await iw(i,{[l]:h},{merge:!0}),console.log(`Synced ${r} to cloud.`)}}catch(i){console.error("Cloud sync failed:",i)}},Ne=(r,e=null)=>{try{const t=localStorage.getItem(r);return t?JSON.parse(t):e}catch(t){return console.error(`Error reading ${r} from storage:`,t),e}},vt=(r,e)=>{try{localStorage.setItem(r,JSON.stringify(e)),p2(r,e)}catch(t){console.error(`Error writing ${r} to storage:`,t)}},aw=()=>{const r=new Date().toDateString();let e=Ne(pe.USER_STATS,{totalPoints:0,currentStreak:0,longestStreak:0,lastActiveDate:null});if(e.lastActiveDate!==r){const t=new Date;t.setDate(t.getDate()-1),e.lastActiveDate===t.toDateString()?e.currentStreak+=1:e.lastActiveDate===null?e.currentStreak=1:e.currentStreak+=1,e.currentStreak>e.longestStreak&&(e.longestStreak=e.currentStreak),e.lastActiveDate=r,vt(pe.USER_STATS,e)}return e},df=r=>{let e=Ne(pe.USER_STATS,{totalPoints:0,currentStreak:0,longestStreak:0,lastActiveDate:null});return e.totalPoints+=r,vt(pe.USER_STATS,e),e},lw=()=>{Object.values(pe).forEach(r=>{localStorage.removeItem(r)}),localStorage.removeItem("sp_user_name")},uw=O.createContext(),m2=()=>O.useContext(uw),g2=({children:r})=>{const[e,t]=O.useState(()=>{try{return localStorage.getItem("sp_theme")||"light"}catch{return"light"}});O.useEffect(()=>{const o=document.documentElement;e==="dark"?o.setAttribute("data-theme","dark"):o.removeAttribute("data-theme"),localStorage.setItem("sp_theme",e)},[e]);const i=()=>{t(o=>o==="light"?"dark":"light")};return y.jsx(uw.Provider,{value:{theme:e,toggleTheme:i},children:r})},Ot=({children:r})=>{const e=Mi(),t=Ne(pe.USER_STATS,{totalPoints:0,currentStreak:0}),[i,o]=O.useState(null),{theme:l,toggleTheme:h}=m2();O.useEffect(()=>{const g=Ck(Is,v=>{o(v)});return()=>g()},[]);const f=()=>{lw(),Rk(Is)};return y.jsxs("div",{className:"layout-wrapper",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[y.jsxs("header",{style:{padding:"1rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--header-bg)",color:"var(--color-text-primary)"},children:[y.jsx(el,{to:"/",style:{textDecoration:"none",color:"var(--color-primary)",fontWeight:"bold"},children:"Stop Procrastinating"}),y.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",fontSize:"0.875rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx("span",{role:"img","aria-label":"streak",children:""}),y.jsxs("span",{children:[t.currentStreak," Days"]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx("span",{role:"img","aria-label":"points",children:""}),y.jsxs("span",{children:[t.totalPoints," pts"]})]}),y.jsx("button",{onClick:h,style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-primary)",display:"flex",alignItems:"center",padding:"0.25rem"},"aria-label":"Toggle Theme",children:l==="light"?y.jsx(Lv,{size:20}):y.jsx(Vv,{size:20})}),i?y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"0.5rem"},children:[i.photoURL?y.jsx("img",{src:i.photoURL,alt:"User",style:{width:"24px",height:"24px",borderRadius:"50%"}}):y.jsx(XT,{size:20}),y.jsx("button",{onClick:f,style:{background:"none",border:"none",fontSize:"0.75rem",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline"},children:"Sign Out"})]}):y.jsxs(el,{to:"/signin",style:{display:"flex",alignItems:"center",gap:"0.25rem",textDecoration:"none",color:"var(--color-primary)",marginLeft:"0.5rem"},children:[y.jsx(bv,{size:18}),y.jsx("span",{children:"Sign In"})]})]})]}),y.jsx("main",{style:{flex:1,paddingBottom:"2rem"},children:r}),y.jsxs("nav",{style:{position:"fixed",bottom:0,left:0,width:"100%",background:"var(--nav-bg)",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-around",padding:"0.75rem 0",zIndex:100},children:[y.jsx(za,{to:"/",icon:y.jsx(RT,{size:20}),label:"Home",active:e.pathname==="/"||e.pathname==="/mood"}),y.jsx(za,{to:"/schedule",icon:y.jsx(_f,{size:20}),label:"Tasks",active:e.pathname==="/schedule"}),y.jsx(za,{to:"/limit",icon:y.jsx(Ov,{size:20}),label:"Limit",active:e.pathname==="/limit"}),y.jsx(za,{to:"/reflect",icon:y.jsx(gT,{size:20}),label:"Reflect",active:e.pathname==="/reflect"}),y.jsx(za,{to:"/analysis",icon:y.jsx(WT,{size:20}),label:"Analysis",active:e.pathname==="/analysis"})]}),y.jsx("div",{style:{height:"70px"}})]})},za=({to:r,icon:e,label:t,active:i})=>y.jsxs(el,{to:r,style:{display:"flex",flexDirection:"column",alignItems:"center",textDecoration:"none",color:i?"var(--color-primary)":"var(--color-text-secondary)",fontSize:"0.75rem"},children:[e,y.jsx("span",{style:{marginTop:"0.25rem"},children:t})]}),y2=()=>{const r=Bn(),[e,t]=O.useState("Friend"),[i,o]=O.useState(0),[l,h]=O.useState(0),[f,g]=O.useState("Start your day!"),[v,w]=O.useState([]),[T,k]=O.useState(null);return O.useEffect(()=>{t(Ne(pe.USER_NAME,"Friend"));const P=Ne(pe.USER_STATS,{currentStreak:0,totalPoints:0});o(P.currentStreak),h(P.totalPoints),(()=>{const B=new Date().setHours(0,0,0,0),G=Ne(pe.DISTRACTION_LOGS,[]).filter(oe=>new Date(oe.date).setHours(0,0,0,0)===B),X=G.reduce((oe,Pe)=>oe+parseInt(Pe.duration||0),0),Y=G.length,se={};G.forEach(oe=>{se[oe.app]=(se[oe.app]||0)+parseInt(oe.duration||0)});const fe=Object.entries(se).sort(([,oe],[,Pe])=>Pe-oe).slice(0,3).map(([oe,Pe])=>({name:oe,duration:Pe}));w(fe);const ce=Ne(pe.TASKS,[]),A=Ne(pe.SCHEDULED_TASKS,[]),S=ce.filter(oe=>oe.completed&&oe.completedAt&&new Date(oe.completedAt).setHours(0,0,0,0)===B),x=A.filter(oe=>oe.completed&&oe.completedAt&&new Date(oe.completedAt).setHours(0,0,0,0)===B),L=[...S,...x],N=L.reduce((oe,Pe)=>oe+(parseInt(Pe.timeTaken)||0),0),R=Ne(pe.WORK_LOGS,[]).filter(oe=>new Date(oe.date).setHours(0,0,0,0)===B),Ue=R.reduce((oe,Pe)=>oe+parseInt(Pe.duration||0),0),nt=N+Ue,Ye=L.length,We=Ye*10+R.length*2;let ne=0,ye=0;const q=nt+X;let D="Ready to start?";if(q>0){const oe=Math.round(X/q*100);ye=oe,ne=100-oe,ne>=80?D="You are on fire!  Highly Focused.":ne>=50?D="Good flow. Keep working! ":ne>=30?D="Distractions are creeping in. ":D="Procrastination is winning. Fight back! "}g(D);const le=Ne(pe.REFLECTIONS,[]).sort((oe,Pe)=>new Date(Pe.date)-new Date(oe.date))[0],Ie=le?le.tomorrowGoal:null;k({date:new Date().toISOString(),workScore:ne,procrastinationScore:ye,tasksDoneCount:Ye,pointsScored:We,distractionTime:X,distractionCount:Y,tomorrowGoal:Ie,isLive:!0})})()},[]),y.jsx(Ot,{children:y.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"2rem"},children:[y.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"0.5rem",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Stop Procrastinating"}),y.jsx("p",{style:{fontSize:"1.2rem",color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Start small. Be kind to yourself."}),y.jsxs("div",{className:"card",style:{textAlign:"left",marginBottom:"2rem"},children:[y.jsxs("h3",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(QT,{className:"text-secondary",size:20}),"Your Progress"]}),y.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-md)",fontWeight:"500",color:"var(--color-primary)"},children:f}),y.jsxs("ul",{style:{paddingLeft:"1.5rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"1rem"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:i})," Total Days Active"]}),y.jsxs("li",{children:[y.jsx("strong",{children:l})," Focus Points"]})]}),v.length>0&&y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"var(--color-text-primary)"},children:"Top Distractions Today:"}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.5rem"},children:v.map((P,W)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fef2f2",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #fecaca"},children:[y.jsx("span",{style:{color:"#ef4444",fontWeight:"500"},children:P.name}),y.jsxs("span",{style:{fontWeight:"bold",color:"#b91c1c"},children:[P.duration,"m"]})]},W))})]})]}),y.jsx("div",{style:{marginTop:"2rem"},children:y.jsxs("button",{className:"btn-primary",onClick:()=>r("/mood"),children:["Get Started ",y.jsx(cT,{size:18,style:{marginLeft:"0.5rem"}})]})}),T&&y.jsxs("div",{style:{marginTop:"3rem",textAlign:"left"},children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-text-secondary)"},children:[y.jsx(aT,{size:18}),"Today's Live Snapshot"]}),y.jsxs("div",{className:"card",children:[y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.9rem"},children:[y.jsxs("span",{style:{color:"#15803d",fontWeight:"bold"},children:["Work ",T.workScore,"%"]}),y.jsxs("span",{style:{color:"#b91c1c",fontWeight:"bold"},children:["Procrastinate ",T.procrastinationScore,"%"]})]}),y.jsxs("div",{style:{height:"8px",background:"#e2e8f0",borderRadius:"4px",overflow:"hidden",display:"flex"},children:[y.jsx("div",{style:{width:`${T.workScore}%`,background:"#22c55e"}}),y.jsx("div",{style:{width:`${T.procrastinationScore}%`,background:"#ef4444"}})]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid #f1f5f9"},children:[y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--color-primary)"},children:T.tasksDoneCount||0}),y.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Tasks Done"})]}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--color-warning)"},children:T.pointsScored||0}),y.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Points Scored"})]})]}),y.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1.5rem"},children:[y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:"Distractions"}),y.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:[T.distractionTime||0,"m"]})]}),y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:"Count"}),y.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:T.distractionCount||0})]})]}),T.tomorrowGoal&&y.jsxs("div",{style:{padding:"1rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-md)"},children:[y.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[y.jsx(_f,{size:14}),new Date(T.date).toDateString()===new Date().toDateString()?"Goal for Tomorrow":"Target set for Today"]}),y.jsx("div",{style:{fontWeight:500},children:T.tomorrowGoal})]})]})]})]})})},v2=(r,e={})=>{const t=new Date;let i="night";if(e.overrideTimeOfDay)i=e.overrideTimeOfDay;else{const f=t.getHours();f>=5&&f<12?i="morning":f>=12&&f<17?i="afternoon":f>=17&&f<21&&(i="evening")}const{overrideTimeOfDay:o,...l}=e,h=Ne(pe.USER_MOOD,"neutral");return{event_id:crypto.randomUUID(),user_id:Is.currentUser?Is.currentUser.uid:"local_user",timestamp:t.toISOString(),date:t.toISOString().split("T")[0],time_of_day:i,event_type:r,mood_before:h,payload:l,synced:!1}},$o=(r,e)=>{const t=v2(r,e),i=Ne(pe.EVENT_LOG,[]);i.push(t),vt(pe.EVENT_LOG,i),_2()},_2=async()=>{const r=Is.currentUser;if(!r)return;const e=Ne(pe.EVENT_LOG,[]),t=e.filter(i=>!i.synced);if(t.length!==0)try{const i=h2(kc),o=QA(kc,"users",r.uid,"events");t.forEach(h=>{const f=ap(o,h.event_id),{synced:g,...v}=h;i.set(f,v)}),await i.commit();const l=e.map(h=>t.find(f=>f.event_id===h.event_id)?{...h,synced:!0}:h);vt(pe.EVENT_LOG,l),console.log(`Synced ${t.length} events to cloud.`)}catch(i){console.error("Failed to sync events:",i)}},w2=()=>{const r=Bn(),e=[{id:"focused",label:"Focused",icon:y.jsx(Fv,{size:32}),color:"var(--color-success)",desc:"I'm ready to tackle something big."},{id:"low-energy",label:"Low Energy",icon:y.jsx(dT,{size:32}),color:"var(--color-warning)",desc:"I need something small and easy."},{id:"bored",label:"Bored",icon:y.jsx(IT,{size:32}),color:"var(--color-text-accent)",desc:"I need to get interested."}],t=i=>{vt(pe.USER_MOOD,i),$o("mood_update",{mood:i}),r("/tasks")};return y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"How are you feeling right now?"}),y.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map(i=>y.jsxs("button",{onClick:()=>t(i.id),className:"card",style:{display:"flex",alignItems:"center",gap:"1rem",textAlign:"left",width:"100%",border:"1px solid transparent",cursor:"pointer",transition:"transform 0.2s, border-color 0.2s"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.02)",o.currentTarget.style.borderColor=i.color},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.borderColor="transparent"},children:[y.jsx("div",{style:{color:i.color},children:i.icon}),y.jsxs("div",{children:[y.jsx("strong",{style:{display:"block",fontSize:"1.1rem"},children:i.label}),y.jsx("span",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)"},children:i.desc})]})]},i.id))})]})})},E2=()=>{const r=Bn(),[e,t]=O.useState([]),[i,o]=O.useState(null),[l,h]=O.useState([]);return O.useEffect(()=>{const f=Ne(pe.USER_MOOD);o(f);const v=Ne(pe.TASKS,[]).filter(P=>{var W;return!P.completed&&(((W=P.moods)==null?void 0:W.includes(f))||!P.moods||P.moods.length===0)});t(v);const w=Ne(pe.SCHEDULED_TASKS,[]),T=new Date().setHours(0,0,0,0),k=w.filter(P=>{const W=new Date(P.startDate).setHours(0,0,0,0),B=new Date(P.dueDate).setHours(0,0,0,0);return!P.completed&&T>=W&&T<=B});h(k)},[]),y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("button",{onClick:()=>r("/schedule"),style:{background:"transparent",border:"none",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"1rem",cursor:"pointer",marginBottom:"1rem"},children:[y.jsx(vs,{size:20})," Back"]}),l.length>0&&y.jsxs("div",{style:{background:"var(--color-bg-accent)",padding:"1rem",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",border:"1px solid var(--color-primary)"},children:[y.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"start",color:"var(--color-primary)",marginBottom:"0.5rem"},children:[y.jsx(Nv,{size:20,style:{marginTop:"0.1rem"}}),y.jsxs("strong",{style:{display:"block"},children:["Daily Commitments (",l.length,")"]})]}),l.map(f=>y.jsx("div",{style:{marginLeft:"1.75rem",marginBottom:"0.5rem",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem"},children:y.jsxs("span",{style:{color:"var(--color-text-primary)"},children:["Planned to work on ",y.jsx("strong",{children:f.workToComplete})," for the ",y.jsx("strong",{children:f.name}),"."]})},f.id))]}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[y.jsx("h2",{children:"Suggested for You"}),y.jsxs("button",{className:"btn-primary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},onClick:()=>r("/add-task"),children:[y.jsx(Ud,{size:18})," Add Task"]})]}),e.length===0?y.jsxs("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"2rem"},children:[y.jsxs("p",{children:["No tasks fit your current mood (",i,")."]}),y.jsx("p",{children:"Why not add a small one?"})]}):y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map(f=>y.jsxs("div",{className:"card",children:[y.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:y.jsxs("div",{children:[y.jsx("h3",{style:{margin:"0 0 0.25rem",fontSize:"1.25rem"},children:f.title}),y.jsxs("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem"},children:[y.jsx("strong",{children:"Start with:"})," ",f.smallStep]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[y.jsx(wT,{size:16})," ",f.time]})]})}),y.jsx("div",{style:{marginTop:"1rem",textAlign:"right"},children:y.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.9rem"},onClick:()=>r(`/complete/${f.id}`),children:"Task Done (Add Proof)"})})]},f.id))})]})})},T2=()=>{const r=Bn(),[e,t]=O.useState({title:"",smallStep:"",time:"15 mins",moods:[]}),i=[{id:"focused",label:"Focused"},{id:"low-energy",label:"Low Energy"},{id:"bored",label:"Bored"}],o=h=>{h.preventDefault();const f=Ne(pe.TASKS,[]),g={id:Date.now().toString(),...e,completed:!1,createdAt:new Date().toISOString()};vt(pe.TASKS,[g,...f]),$o("task_create",{task_id:g.id,title:g.title,expected_time:e.time}),r("/tasks")},l=h=>{t(f=>{const g=f.moods.includes(h)?f.moods.filter(v=>v!==h):[...f.moods,h];return{...f,moods:g}})};return y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("button",{onClick:()=>r("/schedule"),style:{background:"transparent",border:"none",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"1rem",cursor:"pointer",marginBottom:"1rem"},children:[y.jsx(vs,{size:20})," Back"]}),y.jsx("h2",{children:"Add a New Task"}),y.jsxs("form",{onSubmit:o,className:"card",children:[y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Task Name"}),y.jsx("input",{required:!0,value:e.title,onChange:h=>t({...e,title:h.target.value}),placeholder:"e.g. Study Math"})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Small First Step (Crucial!)"}),y.jsx("input",{required:!0,value:e.smallStep,onChange:h=>t({...e,smallStep:h.target.value}),placeholder:"e.g. Open the textbook to page 50"}),y.jsx("small",{style:{color:"var(--color-text-secondary)"},children:"Just write what you will do in the first 2 minutes."})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Expected Time (Minutes)"}),y.jsx("input",{type:"number",required:!0,value:e.time,onChange:h=>t({...e,time:h.target.value}),placeholder:"e.g. 30"})]}),y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"Best for Mood (Optional)"}),y.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:i.map(h=>y.jsx("button",{type:"button",onClick:()=>l(h.id),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",border:"1px solid var(--color-primary)",background:e.moods.includes(h.id)?"var(--color-primary)":"transparent",color:e.moods.includes(h.id)?"white":"var(--color-primary)",fontSize:"0.85rem"},children:h.label},h.id))})]}),y.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save Task"})]})]})})},fp=({value:r,onChange:e})=>y.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:[["15","30","45","60"].map(t=>y.jsxs("button",{type:"button",onClick:()=>e(t),style:{padding:"0.5rem 1rem",borderRadius:"2rem",border:"1px solid var(--color-primary)",background:r===t?"var(--color-primary)":"transparent",color:r===t?"white":"var(--color-primary)",cursor:"pointer",transition:"all 0.2s"},children:[t,"m"]},t)),'type="text" inputMode="numeric" pattern="[0-9]*" placeholder="Custom (max 600)" value=',r,"onChange=",t=>{const i=t.target.value;(i===""||/^\d+$/.test(i)&&parseInt(i,10)<=600)&&e(i)},"style=",{width:"120px",padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #cbd5e1",outlineColor:"var(--color-primary)"},"/>"]}),pp=({value:r,onChange:e})=>{const t=[{id:"morning",label:"Morning",icon:y.jsx(Vv,{size:20}),color:"#f59e0b"},{id:"afternoon",label:"Afternoon",icon:y.jsx(TT,{size:20}),color:"#ea580c"},{id:"evening",label:"Evening",icon:y.jsx(zT,{size:20}),color:"#7c3aed"},{id:"night",label:"Night",icon:y.jsx(Lv,{size:20}),color:"#1e293b"}];return y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"var(--color-text-secondary)"},children:"When did this happen?"}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:t.map(i=>y.jsxs("button",{type:"button",onClick:()=>e(i.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"0.75rem 0.25rem",borderRadius:"var(--radius-md)",border:`1px solid ${r===i.id?i.color:"transparent"}`,background:r===i.id?`${i.color}15`:"var(--color-bg-secondary)",color:r===i.id?i.color:"var(--color-text-secondary)",cursor:"pointer",transition:"all 0.2s"},children:[i.icon,y.jsx("span",{style:{fontSize:"0.75rem",fontWeight:r===i.id?"600":"400"},children:i.label})]},i.id))})]})},S2=()=>{const{taskId:r}=l1(),e=Bn(),[t,i]=O.useState(null),[o,l]=O.useState(""),[h,f]=O.useState(""),[g,v]=O.useState(null),w=O.useRef(null),T=O.useRef(null),[k,P]=O.useState(!1),[W,B]=O.useState(0),[M,G]=O.useState("morning");O.useEffect(()=>{const se=new Date().getHours();se>=5&&se<12?G("morning"):se>=12&&se<17?G("afternoon"):se>=17&&se<21?G("evening"):G("night")},[]),O.useEffect(()=>{let fe=Ne(pe.TASKS,[]).find(ce=>ce.id===r);if(!fe){const A=Ne(pe.SCHEDULED_TASKS,[]).find(S=>String(S.id)===r);A&&(fe={...A,title:A.name,smallStep:A.workToComplete||"Scheduled Work",isSchedule:!0})}fe&&i(fe)},[r]);const X=se=>{const fe=se.target.files[0];if(fe){const ce=new FileReader;ce.onloadend=()=>{v(ce.result)},ce.readAsDataURL(fe)}},Y=se=>{if(se.preventDefault(),t.isSchedule){const S=Ne(pe.SCHEDULED_TASKS,[]).map(x=>String(x.id)===r?{...x,completed:!0,completedAt:new Date().toISOString(),timeTaken:parseInt(h)||0,proofImage:g}:x);vt(pe.SCHEDULED_TASKS,S)}else{const S=Ne(pe.TASKS,[]).map(x=>x.id===r?{...x,completed:!0,learning:o,completedAt:new Date().toISOString(),timeTaken:parseInt(h)||0,proofImage:g}:x);vt(pe.TASKS,S)}const fe=new Date().setHours(0,0,0,0);let ce=10;if(t.isSchedule){const A=new Date(t.dueDate).setHours(0,0,0,0);fe<=A?ce=100:ce=10}df(ce),aw(),$o("task_complete",{task_id:r,task_title:t.title,actual_time_spent:parseInt(h)||0,points_earned:ce,has_proof:!!g,learning_note:o,overrideTimeOfDay:M}),B(ce),P(!0)};return t?k?y.jsx(Ot,{children:y.jsxs("div",{className:"container",style:{textAlign:"center",padding:"3rem 1rem"},children:[y.jsx(Dv,{size:64,color:"var(--color-success)",style:{margin:"0 auto 1rem"}}),y.jsx("h2",{children:"Well Done!"}),y.jsx("p",{children:"You started despite resistance. That matters."}),y.jsxs("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-lg)"},children:[y.jsxs("h3",{style:{margin:0,color:"var(--color-primary)"},children:["+",W," Focus Points"]}),y.jsx("p",{style:{margin:"0.5rem 0 0"},children:"Streak Updated!"})]}),y.jsx("button",{className:"btn-primary",onClick:()=>e("/"),children:"Back Home"})]})}):y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("h2",{children:['Complete "',t.title,'"']}),y.jsx("div",{className:"card",children:y.jsxs("form",{onSubmit:Y,children:[y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"Time Taken (minutes)"}),y.jsx(fp,{value:h,onChange:f})]}),y.jsx(pp,{value:M,onChange:G}),y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"What did you learn or do? (Optional)"}),y.jsx("textarea",{value:o,onChange:se=>l(se.target.value),placeholder:"I learned that starting wasn't so bad...",rows:2})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("label",{style:{display:"block",marginBottom:"0.5rem"},children:"Upload Proof (Optional)"}),y.jsx("input",{type:"file",accept:"image/*",ref:w,onChange:X,style:{display:"none"}}),y.jsx("input",{type:"file",accept:"image/*",capture:"environment",id:"cameraInput",ref:T,onChange:X,style:{display:"none"}}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[y.jsxs("div",{onClick:()=>{var se;return(se=w.current)==null?void 0:se.click()},style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1.5rem",textAlign:"center",color:"var(--color-text-secondary)",cursor:"pointer",background:g?"#f0fdf4":"transparent"},children:[y.jsx(Mv,{size:24,style:{marginBottom:"0.5rem"}}),y.jsx("div",{children:"Upload Image"})]}),y.jsxs("div",{onClick:()=>{var se;return(se=T.current)==null?void 0:se.click()},style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1.5rem",textAlign:"center",color:"var(--color-text-secondary)",cursor:"pointer",background:g?"#f0fdf4":"transparent"},children:[y.jsx(Pv,{size:24,style:{marginBottom:"0.5rem"}}),y.jsx("div",{children:"Take Photo"})]})]}),g&&y.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--color-success)",textAlign:"center"},children:"Proof Attached!"})]}),y.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Mark as Completed"})]})})]})}):y.jsx(Ot,{children:y.jsx("div",{children:"Loading..."})})},I2=()=>{const r=Bn(),[e,t]=O.useState([]),[i,o]=O.useState([]),[l,h]=O.useState(null),[f,g]=O.useState(""),[v,w]=O.useState(!1),[T,k]=O.useState(!1),[P,W]=O.useState(!1),[B,M]=O.useState(""),[G,X]=O.useState(""),[Y,se]=O.useState(null),fe=O.useRef(null),ce=O.useRef(null),[A,S]=O.useState("morning"),[x,L]=O.useState({name:"",workToComplete:"",startDate:"",dueDate:""}),[N,j]=O.useState({title:"",smallStep:"",time:"15 mins",moods:[]}),R=[{id:"focused",label:"Focused"},{id:"low-energy",label:"Low Energy"},{id:"bored",label:"Bored"}];O.useEffect(()=>{t(Ne(pe.SCHEDULED_TASKS,[])),o(Ne(pe.TASKS,[]))},[]);const Ue=q=>{if(q.preventDefault(),!l||!f)return;const D=parseInt(f);if(isNaN(D)||D<=0)return;const K={id:Date.now().toString(),taskId:l.id,taskTitle:l.title||l.name,duration:D,date:new Date().toISOString()},_e=Ne(pe.WORK_LOGS,[]);vt(pe.WORK_LOGS,[..._e,K]),df(D),h(null),g(""),alert(`Logged ${D} mins of work! Keep it up.`)},nt=q=>{q.preventDefault();const D=[...e,{id:Date.now(),...x}];vt(pe.SCHEDULED_TASKS,D),t(D),w(!1),L({name:"",workToComplete:"",startDate:"",dueDate:""})},Ye=q=>{q.preventDefault();const K=[{id:Date.now().toString(),...N,completed:!1,createdAt:new Date().toISOString()},...i];vt(pe.TASKS,K),o(K),k(!1),j({title:"",smallStep:"",time:"15 mins",moods:[]})},We=q=>{j(D=>{const K=D.moods.includes(q)?D.moods.filter(_e=>_e!==q):[...D.moods,q];return{...D,moods:K}})},ne=q=>{const D=q.target.files[0];if(D){const K=new FileReader;K.onloadend=()=>{se(K.result)},K.readAsDataURL(D)}},ye=q=>{q.preventDefault();const D=Ne(pe.TASKS,[]),K={id:Date.now().toString(),title:B,smallStep:"Ad-hoc Logged",time:G,completed:!0,completedAt:new Date().toISOString(),timeTaken:parseInt(G)||0,proofImage:Y,isAdhoc:!0};vt(pe.TASKS,[K,...D]),o([K,...D]);const _e=10;df(_e),aw(),$o("task_complete",{task_id:K.id,task_title:K.title,actual_time_spent:parseInt(G)||0,points_earned:_e,has_proof:!!Y,is_adhoc:!0,overrideTimeOfDay:A}),alert(`Saved! +${_e} Points.`),W(!1),M(""),X(""),se(null)};return y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[y.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[y.jsx(vs,{size:18})," Back"]}),y.jsx("h2",{style:{margin:0},children:"Planning Hub"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"3rem"},children:[y.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",border:T?"2px solid var(--color-primary)":"1px solid transparent",transition:"all 0.2s",padding:"2rem 1rem"},onClick:()=>{k(!T),w(!1),W(!1)},children:[y.jsx("div",{style:{background:"var(--color-bg-accent)",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"var(--color-primary)"},children:y.jsx(Fv,{size:24})}),y.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem"},children:"Add Task"}),y.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",margin:0},children:"For immediate work today. Small steps."})]}),y.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",border:v?"2px solid var(--color-primary)":"1px solid transparent",padding:"2rem 1rem"},onClick:()=>{w(!v),k(!1),W(!1)},children:[y.jsx("div",{style:{background:"#f0f9ff",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"#0284c7"},children:y.jsx(_f,{size:24})}),y.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem"},children:"Schedule Future Task"}),y.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",margin:0},children:"Plan ahead to reduce uncertainty."})]})]}),T&&y.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[y.jsx("h3",{style:{marginBottom:"1rem"},children:"Add a New Task"}),y.jsxs("form",{onSubmit:Ye,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid var(--color-primary)"},children:[y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Task Name"}),y.jsx("input",{required:!0,value:N.title,onChange:q=>j({...N,title:q.target.value}),placeholder:"e.g. Study Math",autoFocus:!0})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Small First Step (Crucial!)"}),y.jsx("input",{required:!0,value:N.smallStep,onChange:q=>j({...N,smallStep:q.target.value}),placeholder:"e.g. Open the textbook to page 50"}),y.jsx("small",{style:{color:"var(--color-text-secondary)"},children:"Just write what you will do in the first 2 minutes."})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Expected Time (Minutes)"}),y.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",required:!0,value:N.time,onChange:q=>{const D=q.target.value;D===""?j({...N,time:D}):/^\d+$/.test(D)&&parseInt(D,10)<=600&&j({...N,time:D})},placeholder:"e.g. 30 (max 600)"})]}),y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"Best for Mood (Optional)"}),y.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:R.map(q=>y.jsx("button",{type:"button",onClick:()=>We(q.id),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",border:"1px solid var(--color-primary)",background:N.moods.includes(q.id)?"var(--color-primary)":"transparent",color:N.moods.includes(q.id)?"white":"var(--color-primary)",fontSize:"0.85rem"},children:q.label},q.id))})]}),y.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[y.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),y.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Task"})]})]})]}),v&&y.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[y.jsx("h3",{style:{marginBottom:"1rem"},children:"New Future Plan"}),y.jsxs("form",{onSubmit:nt,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid #0284c7"},children:[y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Task Name"}),y.jsx("input",{required:!0,value:x.name,onChange:q=>L({...x,name:q.target.value}),autoFocus:!0})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Work to Complete"}),y.jsx("input",{value:x.workToComplete,onChange:q=>L({...x,workToComplete:q.target.value}),placeholder:"e.g. Read Chapters 1-3"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[y.jsxs("div",{children:[y.jsx("label",{children:"Start Date"}),y.jsx("input",{type:"date",required:!0,value:x.startDate,onChange:q=>L({...x,startDate:q.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{children:"Due Date"}),y.jsx("input",{type:"date",required:!0,value:x.dueDate,onChange:q=>L({...x,dueDate:q.target.value})})]})]}),y.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[y.jsx("button",{type:"button",onClick:()=>w(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),y.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Plan"})]})]})]}),P&&y.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[y.jsx("h3",{style:{marginBottom:"1rem"},children:"Log Unplanned Work"}),y.jsxs("form",{onSubmit:ye,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid #8b5cf6"},children:[y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"What did you do?"}),y.jsx("input",{required:!0,value:B,onChange:q=>M(q.target.value),placeholder:"e.g. Helper a friend",autoFocus:!0})]}),y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"Time Taken (minutes)"}),y.jsx(fp,{value:G,onChange:X})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("label",{style:{display:"block",marginBottom:"0.5rem"},children:"Upload Proof (Optional)"}),y.jsx("input",{type:"file",accept:"image/*",ref:fe,onChange:ne,style:{display:"none"}}),y.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:ce,onChange:ne,style:{display:"none"}}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[y.jsxs("div",{onClick:()=>{var q;return(q=fe.current)==null?void 0:q.click()},style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1rem",textAlign:"center",cursor:"pointer",background:Y?"#f0fdf4":"transparent"},children:[y.jsx(Mv,{size:24,style:{marginBottom:"0.5rem"}}),y.jsx("div",{children:"Upload"})]}),y.jsxs("div",{onClick:()=>{var q;return(q=ce.current)==null?void 0:q.click()},style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1rem",textAlign:"center",cursor:"pointer",background:Y?"#f0fdf4":"transparent"},children:[y.jsx(Pv,{size:24,style:{marginBottom:"0.5rem"}}),y.jsx("div",{children:"Camera"})]})]}),Y&&y.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--color-success)",textAlign:"center"},children:"Proof Attached!"})]}),y.jsx(pp,{value:A,onChange:S}),y.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[y.jsx("button",{type:"button",onClick:()=>W(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),y.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Work"})]})]})]}),y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[y.jsx(PT,{size:20,className:"text-secondary"}),y.jsx("h3",{style:{margin:0,color:"var(--color-text-secondary)"},children:"Your Plans"}),y.jsx("div",{style:{flex:1}}),y.jsx("button",{onClick:()=>{W(!P),k(!1),w(!1)},style:{background:"var(--color-bg-secondary)",border:"none",padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",color:"var(--color-primary)",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer"},children:"+ Log Other Task"})]}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.length>0&&i.some(q=>!q.completed)&&y.jsx("h4",{style:{margin:"1rem 0 0.5rem",color:"var(--color-primary)",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.25rem"},children:"Daily Commitments"}),i.filter(q=>!q.completed).map(q=>y.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--color-warning)"},children:[y.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[y.jsx("h3",{style:{margin:0},children:q.title}),y.jsx("span",{style:{fontSize:"0.75rem",background:"#fef3c7",color:"#d97706",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"Now"})]}),y.jsx("p",{style:{margin:"0 0 0.5rem",color:"var(--color-text-primary)"},children:q.smallStep})]})}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[y.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:["Duration: ",q.time,"m"]}),y.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>r(`/complete/${q.id}`),children:"Task Done"})]})]},q.id)),e.length>0&&y.jsx("h4",{style:{margin:"1.5rem 0 0.5rem",color:"#0284c7",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.25rem"},children:"Future Schedule"}),e.map(q=>{const D=new Date().setHours(0,0,0,0),K=new Date(q.startDate).setHours(0,0,0,0),_e=new Date(q.dueDate).setHours(0,0,0,0),le=D>=K&&D<=_e;return _e<D||q.completed?null:y.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--color-primary)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[y.jsxs("div",{children:[y.jsx("h3",{style:{margin:"0 0 0.25rem"},children:q.name}),y.jsx("p",{style:{margin:"0 0 0.5rem",color:"var(--color-text-primary)"},children:q.workToComplete})]}),le&&y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--color-primary)",fontSize:"0.8rem",fontWeight:"bold",background:"var(--color-bg-accent)",padding:"0.25rem 0.5rem",borderRadius:"var(--radius-md)"},children:[y.jsx(Nv,{size:14}),"Active Today"]})]}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[y.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[y.jsxs("span",{children:["Start: ",q.startDate]}),y.jsxs("span",{children:["Due: ",q.dueDate]})]}),y.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>r(`/complete/${q.id}`),children:"Task Done"}),y.jsx("button",{className:"btn-secondary",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>h(q),children:"Done some work"})]}),(l==null?void 0:l.id)===q.id&&y.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem"},children:"Log Work (Not Done Yet)"}),y.jsxs("form",{onSubmit:Ue,style:{display:"flex",gap:"0.5rem"},children:[y.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Mins",value:f,onChange:Ie=>{const oe=Ie.target.value;(oe===""||/^\d+$/.test(oe)&&parseInt(oe,10)<=600)&&g(oe)},style:{width:"80px",padding:"0.25rem"},autoFocus:!0}),y.jsxs("button",{type:"submit",className:"btn-primary",style:{padding:"0.25rem 0.75rem",fontSize:"0.85rem"},children:[y.jsx(MT,{size:14})," Save"]}),y.jsx("button",{type:"button",onClick:()=>{h(null),g("")},style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--color-text-secondary)"},children:y.jsx(jv,{size:18})})]})]})]},q.id)}),i.length===0&&e.length===0&&y.jsx("p",{style:{textAlign:"center",padding:"2rem",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)"},children:"No plans yet. Clear mind, clear path."})]})]})]})})},k2=()=>{const r=Bn(),[e,t]=O.useState(0),[i,o]=O.useState(0),[l,h]=O.useState(""),[f,g]=O.useState([]),[v,w]=O.useState([]),[T,k]=O.useState([]),[P,W]=O.useState(!1),[B,M]=O.useState(0),[G,X]=O.useState(0),[Y,se]=O.useState(0),[fe,ce]=O.useState(0);O.useEffect(()=>{const S=new Date().setHours(0,0,0,0),L=Ne(pe.DISTRACTION_LOGS,[]).filter(le=>new Date(le.date).setHours(0,0,0,0)===S);g(L);const N=L.reduce((le,Ie)=>le+parseInt(Ie.duration||0),0);X(N);const j=Ne(pe.TASKS,[]),R=Ne(pe.SCHEDULED_TASKS,[]),Ue=j.filter(le=>!le.completed||!le.completedAt?!1:new Date(le.completedAt).setHours(0,0,0,0)===S),nt=R.filter(le=>!le.completed||!le.completedAt?!1:new Date(le.completedAt).setHours(0,0,0,0)===S),Ye=[...Ue,...nt];w(Ye);const ne=Ne(pe.WORK_LOGS,[]).filter(le=>new Date(le.date).setHours(0,0,0,0)===S);k(ne);const ye=Ye.reduce((le,Ie)=>le+(parseInt(Ie.timeTaken)||0),0),q=ne.reduce((le,Ie)=>le+parseInt(Ie.duration||0),0),D=ye+q;M(D);const K=Ye.length;se(K),ce(K*10+ne.length*2);const _e=D+N;if(_e>0){const le=Math.round(N/_e*100);t(le),o(100-le)}else o(0),t(0)},[]);const A=S=>{S.preventDefault();const x=Ne(pe.REFLECTIONS,[]),L={id:Date.now(),date:new Date().toISOString(),procrastinationScore:e,workScore:i,tomorrowGoal:l,distractionCount:f.length,distractionTime:G,tasksDoneCount:Y,taskTime:B,pointsScored:fe};vt(pe.REFLECTIONS,[L,...x]),$o("diary_entry",{procrastination_score:e,work_score:i,tomorrow_goal:l,total_distraction_time:G,total_work_time:B}),W(!0)};return P?y.jsx(Ot,{children:y.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"3rem"},children:[y.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),y.jsx("h2",{children:"Reflection Saved"}),y.jsx("p",{children:"Rest well. Tomorrow is a fresh start."}),y.jsx("button",{className:"btn-primary",onClick:()=>r("/"),style:{marginTop:"2rem"},children:"Back Home"}),y.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-lg)",textAlign:"left"},children:[y.jsx("h3",{style:{fontSize:"1.1rem",marginTop:0},children:"Target for Tomorrow:"}),y.jsx("p",{style:{fontSize:"1.2rem",color:"var(--color-primary)",fontWeight:600},children:l})]})]})}):y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[y.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[y.jsx(vs,{size:18})," Back"]}),y.jsx("h2",{style:{margin:0},children:"Today's Reflection"})]}),y.jsxs("form",{onSubmit:A,className:"card",children:[y.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"#f0fdf4",borderRadius:"var(--radius-md)",border:"1px solid #bbf7d0",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.9rem",color:"#166534",marginBottom:"0.25rem"},children:"Overall Focus Score"}),y.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",color:"#15803d"},children:[i,"%"]})]}),y.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fef2f2",borderRadius:"var(--radius-md)",border:"1px solid #fecaca",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("span",{style:{color:"#991b1b",fontWeight:"500"},children:"Procrastination Level"}),y.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:[e,"%"]})]}),y.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Time Breakdown"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"2rem"},children:[y.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center",background:"var(--color-bg-secondary)"},children:[y.jsx(Dv,{size:24,style:{color:"var(--color-success)",marginBottom:"0.5rem"}}),y.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:[B,"m"]}),y.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Work Time"})]}),y.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center",background:"var(--color-bg-secondary)"},children:[y.jsx(KT,{size:24,style:{color:"var(--color-warning)",marginBottom:"0.5rem"}}),y.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:[G,"m"]}),y.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Distracted"})]})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Today's Activity Log"}),y.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Today's Activity Log"}),v.length===0&&f.length===0&&T.length===0?y.jsx("p",{style:{color:"var(--color-text-secondary)",fontStyle:"italic"},children:"No activity recorded yet."}):y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.map((S,x)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius-sm)",borderLeft:"4px solid var(--color-success)"},children:[y.jsxs("span",{children:[S.title||S.name," ",y.jsx("strong",{style:{color:"var(--color-success)"},children:"(Done)"})]}),y.jsxs("strong",{children:[S.timeTaken||0,"m"]})]},`task-${x}`)),T.map((S,x)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius-sm)",borderLeft:"4px solid #3b82f6"},children:[y.jsxs("span",{children:[S.taskTitle," ",y.jsx("small",{children:"(Work Log)"})]}),y.jsxs("strong",{children:[S.duration,"m"]})]},`log-${x}`)),f.map((S,x)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius-sm)",borderLeft:"4px solid var(--color-danger)"},children:[y.jsxs("span",{children:[S.app," ",y.jsxs("small",{children:["(",S.reasons.join(", "),")"]})]}),y.jsxs("strong",{children:[S.duration,"m"]})]},`dist-${x}`))]})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[y.jsx($T,{size:18})," Goal for Tomorrow"]}),y.jsx("input",{required:!0,value:l,onChange:S=>h(S.target.value),placeholder:"e.g. Finish the Math Chapter without phone",style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-md)",border:"1px solid #cbd5e1"}})]}),y.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%",padding:"1rem"},children:"Save & Close Day"})]})]})})},x2=()=>{const r=Bn(),[e,t]=O.useState("initial"),[i,o]=O.useState([]),[l,h]=O.useState(""),[f,g]=O.useState(""),[v,w]=O.useState([]),[T,k]=O.useState(null),[P,W]=O.useState([]),[B,M]=O.useState(""),[G,X]=O.useState("morning");O.useEffect(()=>{const S=new Date().getHours();S>=5&&S<12?X("morning"):S>=12&&S<17?X("afternoon"):S>=17&&S<21?X("evening"):X("night")},[]),O.useEffect(()=>{const S=Ne("sp_distraction_types",[]);o(S)},[]);const Y=()=>{if(!l)return;const S=[...i,{id:Date.now(),name:l,reasons:v.length>0?v:["General"]}];vt("sp_distraction_types",S),o(S),h(""),w([]),g(""),t("initial")},se=()=>{f&&(w([...v,f]),g(""))},fe=S=>{S.preventDefault();const x=Ne(pe.DISTRACTION_LOGS,[]),L={id:Date.now(),app:T.name,reasons:P,duration:B,date:new Date().toISOString()};vt(pe.DISTRACTION_LOGS,[L,...x]),$o("distraction_log",{app:T.name,reasons:P,duration:parseInt(B)||0,overrideTimeOfDay:G}),t("success")},ce=S=>{P.includes(S)?W(P.filter(x=>x!==S)):W([...P,S])},A=()=>{k(null),W([]),M("")};return e==="calm"?y.jsx(Ot,{children:y.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"4rem"},children:[y.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),y.jsx("h2",{children:"Great Job!"}),y.jsx("p",{children:"Focusing on your improvement is the best gift you can give yourself."}),y.jsx("button",{className:"btn-primary",onClick:()=>t("initial"),style:{marginTop:"2rem"},children:"Back"})]})}):e==="success"?y.jsx(Ot,{children:y.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"4rem"},children:[y.jsx("h2",{children:"Logged."}),y.jsx("p",{children:"Awareness is the first step. Use this data tomorrow."}),y.jsx("button",{className:"btn-primary",onClick:()=>{t("initial"),A()},style:{marginTop:"2rem"},children:"Done"})]})}):e==="config"?y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[y.jsx("h2",{children:"Add Distraction"}),y.jsx("button",{onClick:()=>t("initial"),style:{background:"none",border:"none",cursor:"pointer"},children:y.jsx(jv,{})})]}),y.jsxs("div",{className:"card",children:[y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Distraction Name"}),y.jsx("input",{value:l,onChange:S=>h(S.target.value),placeholder:"e.g. YouTube Shorts"})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("label",{children:"Possible Reasons"}),y.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[y.jsx("input",{value:f,onChange:S=>g(S.target.value),placeholder:"e.g. Boredom"}),y.jsx("button",{type:"button",onClick:se,className:"btn-primary",style:{padding:"0.5rem"},children:y.jsx(Ud,{size:16})})]}),y.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:v.map((S,x)=>y.jsx("span",{style:{background:"#f1f5f9",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.85rem"},children:S},x))})]}),y.jsx("button",{className:"btn-primary",onClick:Y,style:{width:"100%"},children:"Save"})]})]})}):e==="logging"?y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("button",{onClick:()=>{t("initial"),A()},style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginBottom:"1rem"},children:[y.jsx(vs,{size:18})," Back"]}),y.jsx("h2",{children:"Log Distraction"}),T?y.jsxs("form",{onSubmit:fe,className:"card",children:[y.jsx("h3",{style:{marginTop:0},children:T.name}),y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"Why did you check it? (Select all that apply)"}),y.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:T.reasons.map((S,x)=>y.jsx("button",{type:"button",onClick:()=>ce(S),style:{padding:"0.5rem 1rem",borderRadius:"2rem",border:"1px solid var(--color-primary)",background:P.includes(S)?"var(--color-primary)":"white",color:P.includes(S)?"white":"var(--color-primary)",cursor:"pointer"},children:S},x))})]}),y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsx("label",{children:"Time Spent (Minutes)"}),y.jsx(fp,{value:B,onChange:M})]}),y.jsx(pp,{value:G,onChange:X}),y.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save Log"})]}):y.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[y.jsx("p",{children:"Which app did you use?"}),i.map(S=>y.jsx("button",{className:"card",onClick:()=>k(S),style:{textAlign:"left",cursor:"pointer",borderColor:"var(--color-primary)"},children:y.jsx("strong",{children:S.name})},S.id)),i.length===0&&y.jsx("p",{children:"No distractions configured. Go back and add some!"})]})]})}):y.jsx(Ot,{children:y.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"2rem"},children:[y.jsx("div",{style:{position:"absolute",left:"1rem",top:"5rem"},children:y.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500"},children:[y.jsx(vs,{size:18})," Back"]})}),y.jsx(Ov,{size:64,style:{color:"var(--color-text-accent)",marginBottom:"1rem"}}),y.jsx("h2",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Distracted?"}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[y.jsx("button",{className:"btn-primary",style:{padding:"1.5rem",fontSize:"1.25rem",background:"#ef4444"},onClick:()=>{A(),t("logging")},children:"Yes, I gave in."}),y.jsx("button",{className:"btn-primary",style:{padding:"1rem",fontSize:"1.1rem",background:"#10b981"},onClick:()=>t("calm"),children:"No, I'm focused."})]}),y.jsx("div",{style:{marginTop:"2rem"},children:y.jsxs("button",{onClick:()=>t("config"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"transparent",border:"1px dashed var(--color-text-secondary)",color:"var(--color-text-secondary)",cursor:"pointer",padding:"0.75rem 1.5rem",borderRadius:"var(--radius-full)",fontSize:"0.9rem",transition:"all 0.2s"},children:[y.jsx(Ud,{size:16})," Add Distraction"]})})]})})},cw=(r,e="")=>Object.keys(r).reduce((t,i)=>{const o=e.length?e+".":"";return typeof r[i]=="object"&&r[i]!==null&&!Array.isArray(r[i])?Object.assign(t,cw(r[i],o+i)):Array.isArray(r[i])?t[o+i]=r[i].join(";"):t[o+i]=r[i],t},{}),C2=r=>{if(!r||r.length===0)return"";const e=r.map(o=>cw(o)),t=Array.from(new Set(e.flatMap(Object.keys)));return t.sort((o,l)=>o==="timestamp"?-1:l==="timestamp"?1:o==="event_type"?-1:l==="event_type"?1:o.localeCompare(l)),[t.join(","),...e.map(o=>t.map(l=>{let h=o[l]||"";const f=String(h);return f.includes(",")||f.includes('"')||f.includes(`
`)?`"${f.replace(/"/g,'""')}"`:f}).join(","))].join(`
`)},R2=(r,e="stop-procrastinating-data.csv")=>{const t=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(i.download!==void 0){const o=URL.createObjectURL(t);i.setAttribute("href",o),i.setAttribute("download",e),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},lv=({data:r,dataKeys:e,colors:t,height:i=200,width:o="100%"})=>{if(!r||r.length===0)return y.jsx("div",{style:{height:i,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",background:"#f8fafc",borderRadius:"8px"},children:"No Data Available"});const l=500,h=200,f=30,g=l-2*f,v=h-2*f,w=r.flatMap(M=>e.map(G=>Number(M[G]||0))),T=Math.max(...w,0),k=T>0?T*1.1:10,P=g/r.length,W=P*.2,B=(P-W)/e.length;return y.jsxs("div",{style:{width:o,overflow:"hidden"},children:[y.jsxs("svg",{viewBox:`0 0 ${l} ${h}`,style:{width:"100%",height:"auto",background:"#fff",borderRadius:"8px",border:"1px solid #f1f5f9"},children:[[0,.25,.5,.75,1].map(M=>y.jsx("line",{x1:f,y1:f+M*v,x2:l-f,y2:f+M*v,stroke:"#e2e8f0",strokeWidth:"1"},M)),r.map((M,G)=>{const X=f+G*P+W/2;return y.jsxs("g",{children:[e.map((Y,se)=>{const ce=Number(M[Y]||0)/k*v,A=X+se*B,S=f+v-ce;return y.jsx("rect",{x:A,y:S,width:B*.9,height:ce,fill:t[se],rx:"2"},Y)}),y.jsxs("text",{x:X+(P-W)/2,y:h-10,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:[new Date(M.date).getDate(),"/",new Date(M.date).getMonth()+1]})]},G)}),[0,.5,1].map(M=>y.jsx("text",{x:f-5,y:f+(1-M)*v+3,textAnchor:"end",fontSize:"9",fill:"#94a3b8",children:Math.round(M*k)},M))]}),y.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"0.5rem"},children:e.map((M,G)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"#64748b"},children:[y.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",background:t[G]}}),M==="taskTime"?"Work Time":M==="distractionTime"?"Distracted":M==="pointsScored"?"Points":M]},M))})]})},A2=({data:r,dataKeys:e,colors:t,height:i=200,width:o="100%"})=>{if(!r||r.length===0)return y.jsx("div",{style:{height:i,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",background:"#f8fafc",borderRadius:"8px"},children:"No Data Available"});const l=500,h=200,f=20,g=Math.max(...r.map(k=>Math.max(...e.map(P=>Number(k[P]||0))))),v=g>0?g*1.1:10,w=k=>f+k/(r.length-1||1)*(l-2*f),T=k=>h-f-k/v*(h-2*f);return y.jsxs("div",{style:{width:o,overflow:"hidden"},children:[y.jsxs("svg",{viewBox:`0 0 ${l} ${h}`,style:{width:"100%",height:"auto",background:"#fff",borderRadius:"8px",border:"1px solid #f1f5f9"},children:[[0,.25,.5,.75,1].map(k=>y.jsx("line",{x1:f,y1:f+k*(h-2*f),x2:l-f,y2:f+k*(h-2*f),stroke:"#e2e8f0",strokeWidth:"1"},k)),e.map((k,P)=>{const W=r.map((B,M)=>`${w(M)},${T(Number(B[k]||0))}`).join(" ");return y.jsxs("g",{children:[y.jsx("polyline",{fill:"none",stroke:t[P],strokeWidth:"3",points:W,strokeLinecap:"round",strokeLinejoin:"round"}),r.map((B,M)=>y.jsx("circle",{cx:w(M),cy:T(Number(B[k]||0)),r:"3",fill:"#fff",stroke:t[P],strokeWidth:"2"},M))]},k)}),r.map((k,P)=>y.jsxs("text",{x:w(P),y:h-5,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:[new Date(k.date).getDate(),"/",new Date(k.date).getMonth()+1]},P))]}),y.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"0.5rem"},children:e.map((k,P)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"#64748b"},children:[y.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:t[P]}}),k==="workScore"?"Work":k==="procrastinationScore"?"Procrastination":k==="pointsScored"?"Points":k==="distractionTime"?"Time Lost (m)":k]},k))})]})},P2=()=>{const r=Bn(),[e,t]=O.useState([]);O.useEffect(()=>{const o=Ne(pe.REFLECTIONS,[]),l={};o.forEach(f=>{const g=new Date(f.date).toDateString();(!l[g]||new Date(f.date)>new Date(l[g].date))&&(l[g]=f)});const h=Object.values(l).sort((f,g)=>new Date(f.date)-new Date(g.date));t(h)},[]);const i=()=>{const o=Ne(pe.EVENT_LOG,[]);if(!o||o.length===0){alert("No detailed event data found yet. Start using the app to generate logs!");return}const l=C2(o);R2(l,`stop_procrastinating_events_${new Date().toISOString().split("T")[0]}.csv`)};return y.jsx(Ot,{children:y.jsxs("div",{className:"container",children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[y.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[y.jsx(vs,{size:18})," Back"]}),y.jsx("h2",{style:{flex:1,textAlign:"center",margin:0},children:"Progress Analysis"}),y.jsx("button",{onClick:i,style:{background:"transparent",border:"1px solid var(--color-primary)",color:"var(--color-primary)",padding:"0.5rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Export Detailed Event Logs (CSV)",children:y.jsx(xT,{size:20})})]}),y.jsxs("div",{style:{display:"grid",gap:"2rem"},children:[y.jsxs("div",{className:"card",children:[y.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Work vs Procrastination (%)"}),y.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:["Aim to keep the ",y.jsx("span",{style:{color:"#22c55e",fontWeight:"bold"},children:"Green"})," line above the ",y.jsx("span",{style:{color:"#ef4444",fontWeight:"bold"},children:"Red"})," line."]}),y.jsx(A2,{data:e,dataKeys:["workScore","procrastinationScore"],colors:["#22c55e","#ef4444"]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Time: Work vs Distracted (Minutes)"}),y.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"Daily comparison of productive time vs lost time."}),y.jsx(lv,{data:e,dataKeys:["taskTime","distractionTime"],colors:["#22c55e","#f97316"]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Focus Points Earned"}),y.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"Your daily rewards for completing tasks and building habits."}),y.jsx(lv,{data:e,dataKeys:["pointsScored"],colors:["#a855f7"]})]})]})]})})},N2=()=>{const r=Bn(),[e,t]=O.useState(!1),[i,o]=O.useState(null),l=async()=>{t(!0),o(null);try{const f=(await Gk(Is,f2)).user,g=ap(kc,"users",f.uid),v=await u2(g);if(v.exists()){lw();const w=v.data();w.tasks&&vt(pe.TASKS,JSON.parse(w.tasks)),w.scheduled&&vt(pe.SCHEDULED_TASKS,JSON.parse(w.scheduled)),w.reflections&&vt(pe.REFLECTIONS,JSON.parse(w.reflections)),w.stats&&vt(pe.USER_STATS,JSON.parse(w.stats)),w.mood&&vt(pe.USER_MOOD,w.mood),console.log("Data synced from cloud!")}else{const w={email:f.email,displayName:f.displayName,createdAt:new Date().toISOString(),tasks:JSON.stringify(Ne(pe.TASKS,[])),scheduled:JSON.stringify(Ne(pe.SCHEDULED_TASKS,[])),reflections:JSON.stringify(Ne(pe.REFLECTIONS,[])),stats:JSON.stringify(Ne(pe.USER_STATS,{})),mood:Ne(pe.USER_MOOD,null)};await iw(g,w),console.log("Local data backed up to cloud!")}r("/")}catch(h){console.error("Login Result Error:",h),o(`Failed to sign in: ${h.message}`)}finally{t(!1)}};return y.jsx(Ot,{children:y.jsx("div",{className:"container",style:{textAlign:"center",marginTop:"4rem"},children:y.jsxs("div",{className:"card",style:{maxWidth:"400px",margin:"0 auto"},children:[y.jsx("h2",{style:{marginBottom:"1rem"},children:"Backup Your Progress"}),y.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Sign in to save your tasks, streaks, and reflections to the cloud. Access them from any device."}),i&&y.jsx("div",{style:{color:"var(--color-danger)",marginBottom:"1rem",fontSize:"0.9rem"},children:i}),y.jsxs("button",{onClick:l,disabled:e,className:"btn-primary",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.75rem",padding:"0.75rem"},children:[e?y.jsx(DT,{className:"spin",size:20}):y.jsx(bv,{size:20}),e?"Signing In...":"Sign in with Google"]})]})})})};function D2(){return y.jsx(K1,{children:y.jsxs(S1,{children:[y.jsx(Mn,{path:"/",element:y.jsx(y2,{})}),y.jsx(Mn,{path:"/analysis",element:y.jsx(P2,{})}),y.jsx(Mn,{path:"/signin",element:y.jsx(N2,{})}),y.jsx(Mn,{path:"/mood",element:y.jsx(w2,{})}),y.jsx(Mn,{path:"/tasks",element:y.jsx(E2,{})}),y.jsx(Mn,{path:"/add-task",element:y.jsx(T2,{})}),y.jsx(Mn,{path:"/complete/:taskId",element:y.jsx(S2,{})}),y.jsx(Mn,{path:"/schedule",element:y.jsx(I2,{})}),y.jsx(Mn,{path:"/reflect",element:y.jsx(k2,{})}),y.jsx(Mn,{path:"/limit",element:y.jsx(x2,{})})]})})}kE.createRoot(document.getElementById("root")).render(y.jsx(O.StrictMode,{children:y.jsx(g2,{children:y.jsx(D2,{})})}));
