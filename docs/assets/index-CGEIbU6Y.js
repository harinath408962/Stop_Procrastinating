(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var cd={exports:{}},La={},hd={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function Yw(){if(ug)return Ae;ug=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function k(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,B={};function V(O,q,ye){this.props=O,this.context=q,this.refs=B,this.updater=ye||P}V.prototype.isReactComponent={},V.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function J(){}J.prototype=V.prototype;function G(O,q,ye){this.props=O,this.context=q,this.refs=B,this.updater=ye||P}var Q=G.prototype=new J;Q.constructor=G,W(Q,V.prototype),Q.isPureReactComponent=!0;var oe=Array.isArray,he=Object.prototype.hasOwnProperty,K={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(O,q,ye){var de,Ce={},Pe=null,Be=null;if(q!=null)for(de in q.ref!==void 0&&(Be=q.ref),q.key!==void 0&&(Pe=""+q.key),q)he.call(q,de)&&!x.hasOwnProperty(de)&&(Ce[de]=q[de]);var Oe=arguments.length-2;if(Oe===1)Ce.children=ye;else if(1<Oe){for(var qe=Array(Oe),qt=0;qt<Oe;qt++)qe[qt]=arguments[qt+2];Ce.children=qe}if(O&&O.defaultProps)for(de in Oe=O.defaultProps,Oe)Ce[de]===void 0&&(Ce[de]=Oe[de]);return{$$typeof:r,type:O,key:Pe,ref:Be,props:Ce,_owner:K.current}}function R(O,q){return{$$typeof:r,type:O.type,key:q,ref:O.ref,props:O.props,_owner:O._owner}}function b(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function D(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ye){return q[ye]})}var j=/\/+/g;function A(O,q){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):q.toString(36)}function ze(O,q,ye,de,Ce){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Be=!1;if(O===null)Be=!0;else switch(Pe){case"string":case"number":Be=!0;break;case"object":switch(O.$$typeof){case r:case e:Be=!0}}if(Be)return Be=O,Ce=Ce(Be),O=de===""?"."+A(Be,0):de,oe(Ce)?(ye="",O!=null&&(ye=O.replace(j,"$&/")+"/"),ze(Ce,q,ye,"",function(qt){return qt})):Ce!=null&&(b(Ce)&&(Ce=R(Ce,ye+(!Ce.key||Be&&Be.key===Ce.key?"":(""+Ce.key).replace(j,"$&/")+"/")+O)),q.push(Ce)),1;if(Be=0,de=de===""?".":de+":",oe(O))for(var Oe=0;Oe<O.length;Oe++){Pe=O[Oe];var qe=de+A(Pe,Oe);Be+=ze(Pe,q,ye,qe,Ce)}else if(qe=k(O),typeof qe=="function")for(O=qe.call(O),Oe=0;!(Pe=O.next()).done;)Pe=Pe.value,qe=de+A(Pe,Oe++),Be+=ze(Pe,q,ye,qe,Ce);else if(Pe==="object")throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Be}function at(O,q,ye){if(O==null)return O;var de=[],Ce=0;return ze(O,de,"","",function(Pe){return q.call(ye,Pe,Ce++)}),de}function tt(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(ye){(O._status===0||O._status===-1)&&(O._status=1,O._result=ye)},function(ye){(O._status===0||O._status===-1)&&(O._status=2,O._result=ye)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var We={current:null},re={transition:null},me={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:re,ReactCurrentOwner:K};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:at,forEach:function(O,q,ye){at(O,function(){q.apply(this,arguments)},ye)},count:function(O){var q=0;return at(O,function(){q++}),q},toArray:function(O){return at(O,function(q){return q})||[]},only:function(O){if(!b(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ae.Component=V,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=G,Ae.StrictMode=s,Ae.Suspense=g,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ae.act=se,Ae.cloneElement=function(O,q,ye){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var de=W({},O.props),Ce=O.key,Pe=O.ref,Be=O._owner;if(q!=null){if(q.ref!==void 0&&(Pe=q.ref,Be=K.current),q.key!==void 0&&(Ce=""+q.key),O.type&&O.type.defaultProps)var Oe=O.type.defaultProps;for(qe in q)he.call(q,qe)&&!x.hasOwnProperty(qe)&&(de[qe]=q[qe]===void 0&&Oe!==void 0?Oe[qe]:q[qe])}var qe=arguments.length-2;if(qe===1)de.children=ye;else if(1<qe){Oe=Array(qe);for(var qt=0;qt<qe;qt++)Oe[qt]=arguments[qt+2];de.children=Oe}return{$$typeof:r,type:O.type,key:Ce,ref:Pe,props:de,_owner:Be}},Ae.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Ae.createElement=I,Ae.createFactory=function(O){var q=I.bind(null,O);return q.type=O,q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(O){return{$$typeof:f,render:O}},Ae.isValidElement=b,Ae.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:tt}},Ae.memo=function(O,q){return{$$typeof:y,type:O,compare:q===void 0?null:q}},Ae.startTransition=function(O){var q=re.transition;re.transition={};try{O()}finally{re.transition=q}},Ae.unstable_act=se,Ae.useCallback=function(O,q){return We.current.useCallback(O,q)},Ae.useContext=function(O){return We.current.useContext(O)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(O){return We.current.useDeferredValue(O)},Ae.useEffect=function(O,q){return We.current.useEffect(O,q)},Ae.useId=function(){return We.current.useId()},Ae.useImperativeHandle=function(O,q,ye){return We.current.useImperativeHandle(O,q,ye)},Ae.useInsertionEffect=function(O,q){return We.current.useInsertionEffect(O,q)},Ae.useLayoutEffect=function(O,q){return We.current.useLayoutEffect(O,q)},Ae.useMemo=function(O,q){return We.current.useMemo(O,q)},Ae.useReducer=function(O,q,ye){return We.current.useReducer(O,q,ye)},Ae.useRef=function(O){return We.current.useRef(O)},Ae.useState=function(O){return We.current.useState(O)},Ae.useSyncExternalStore=function(O,q,ye){return We.current.useSyncExternalStore(O,q,ye)},Ae.useTransition=function(){return We.current.useTransition()},Ae.version="18.3.1",Ae}var cg;function rf(){return cg||(cg=1,hd.exports=Yw()),hd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function Jw(){if(hg)return La;hg=1;var r=rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var E,T={},k=null,P=null;y!==void 0&&(k=""+y),g.key!==void 0&&(k=""+g.key),g.ref!==void 0&&(P=g.ref);for(E in g)s.call(g,E)&&!l.hasOwnProperty(E)&&(T[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)T[E]===void 0&&(T[E]=g[E]);return{$$typeof:e,type:f,key:k,ref:P,props:T,_owner:o.current}}return La.Fragment=t,La.jsx=h,La.jsxs=h,La}var dg;function Xw(){return dg||(dg=1,cd.exports=Jw()),cd.exports}var v=Xw(),M=rf(),Vu={},dd={exports:{}},en={},fd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function Zw(){return fg||(fg=1,(function(r){function e(re,me){var se=re.length;re.push(me);e:for(;0<se;){var O=se-1>>>1,q=re[O];if(0<o(q,me))re[O]=me,re[se]=q,se=O;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var me=re[0],se=re.pop();if(se!==me){re[0]=se;e:for(var O=0,q=re.length,ye=q>>>1;O<ye;){var de=2*(O+1)-1,Ce=re[de],Pe=de+1,Be=re[Pe];if(0>o(Ce,se))Pe<q&&0>o(Be,Ce)?(re[O]=Be,re[Pe]=se,O=Pe):(re[O]=Ce,re[de]=se,O=de);else if(Pe<q&&0>o(Be,se))re[O]=Be,re[Pe]=se,O=Pe;else break e}}return me}function o(re,me){var se=re.sortIndex-me.sortIndex;return se!==0?se:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],E=1,T=null,k=3,P=!1,W=!1,B=!1,V=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(re){for(var me=t(y);me!==null;){if(me.callback===null)s(y);else if(me.startTime<=re)s(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function oe(re){if(B=!1,Q(re),!W)if(t(g)!==null)W=!0,tt(he);else{var me=t(y);me!==null&&We(oe,me.startTime-re)}}function he(re,me){W=!1,B&&(B=!1,J(I),I=-1),P=!0;var se=k;try{for(Q(me),T=t(g);T!==null&&(!(T.expirationTime>me)||re&&!D());){var O=T.callback;if(typeof O=="function"){T.callback=null,k=T.priorityLevel;var q=O(T.expirationTime<=me);me=r.unstable_now(),typeof q=="function"?T.callback=q:T===t(g)&&s(g),Q(me)}else s(g);T=t(g)}if(T!==null)var ye=!0;else{var de=t(y);de!==null&&We(oe,de.startTime-me),ye=!1}return ye}finally{T=null,k=se,P=!1}}var K=!1,x=null,I=-1,R=5,b=-1;function D(){return!(r.unstable_now()-b<R)}function j(){if(x!==null){var re=r.unstable_now();b=re;var me=!0;try{me=x(!0,re)}finally{me?A():(K=!1,x=null)}}else K=!1}var A;if(typeof G=="function")A=function(){G(j)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,at=ze.port2;ze.port1.onmessage=j,A=function(){at.postMessage(null)}}else A=function(){V(j,0)};function tt(re){x=re,K||(K=!0,A())}function We(re,me){I=V(function(){re(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){W||P||(W=!0,tt(he))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(k){case 1:case 2:case 3:var me=3;break;default:me=k}var se=k;k=me;try{return re()}finally{k=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=k;k=re;try{return me()}finally{k=se}},r.unstable_scheduleCallback=function(re,me,se){var O=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?O+se:O):se=O,re){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=se+q,re={id:E++,callback:me,priorityLevel:re,startTime:se,expirationTime:q,sortIndex:-1},se>O?(re.sortIndex=se,e(y,re),t(g)===null&&re===t(y)&&(B?(J(I),I=-1):B=!0,We(oe,se-O))):(re.sortIndex=q,e(g,re),W||P||(W=!0,tt(he))),re},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(re){var me=k;return function(){var se=k;k=me;try{return re.apply(this,arguments)}finally{k=se}}}})(pd)),pd}var pg;function eE(){return pg||(pg=1,fd.exports=Zw()),fd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function tE(){if(mg)return en;mg=1;var r=rf(),e=eE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function k(n){return g.call(T,n)?!0:g.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function P(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,i,a,c){if(i===null||typeof i>"u"||P(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function B(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){V[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];V[i]=new B(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){V[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){V[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){V[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){V[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){V[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){V[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){V[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(J,G);V[i]=new B(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(J,G);V[i]=new B(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(J,G);V[i]=new B(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){V[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),V.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){V[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,i,a,c){var d=V.hasOwnProperty(i)?V[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(W(i,a,d,c)&&(a=null),c||d===null?k(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),K=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,O;function q(n){if(O===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+n}var ye=!1;function de(n,i){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var c=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){c=$}n.call(i.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,C=p.length-1;1<=w&&0<=C&&d[w]!==p[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==p[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==p[C]){var N=`
`+d[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=C);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function Ce(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=de(n.type,!1),n;case 11:return n=de(n.type.render,!1),n;case 1:return n=de(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case K:return"Portal";case R:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case ze:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case at:return i=n.displayName||null,i!==null?i:Pe(n.type)||"Memo";case tt:i=n._payload,n=n._init;try{return Pe(n(i))}catch{}}return null}function Be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qt(n){var i=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Cs(n){n._valueTracker||(n._valueTracker=qt(n))}function Uo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xs(n,i){var a=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function wl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Oe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rs(n,i){i=i.checked,i!=null&&Q(n,"checked",i,!1)}function Mi(n,i){Rs(n,i);var a=Oe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?pt(n,i.type,a):i.hasOwnProperty("defaultValue")&&pt(n,i.type,Oe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function zo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function pt(n,i,a){(i!=="number"||Hr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ct=Array.isArray;function kn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Oe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Bo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $o(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Oe(a)}}function El(n,i){var a=Oe(i.value),c=Oe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Wr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Ho(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function As(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Ho(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qr,Tl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function ji(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sl=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(n){Sl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Kr[i]=Kr[n]})});function Gr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Kr.hasOwnProperty(n)&&Kr[n]?(""+i).trim():i+"px"}function Ps(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Gr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Wo=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cn(n,i){if(i){if(Wo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ns(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Ds(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mr=null,gr=null,lt=null;function qo(n){if(n=_a(n)){if(typeof mr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Yl(i),mr(n.stateNode,n.type,i))}}function Yr(n){gr?lt?lt.push(n):lt=[n]:gr=n}function Jr(){if(gr){var n=gr,i=lt;if(lt=gr=null,qo(n),i)for(n=0;n<i.length;n++)qo(i[n])}}function Il(n,i){return n(i)}function kl(){}var Bn=!1;function Cl(n,i,a){if(Bn)return n(i,a);Bn=!0;try{return Il(n,i,a)}finally{Bn=!1,(gr!==null||lt!==null)&&(kl(),Jr())}}function Fi(n,i){var a=n.stateNode;if(a===null)return null;var c=Yl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Xr=!1;if(f)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Xr=!1}function xl(n,i,a,c,d,p,w,C,N){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(Z){this.onError(Z)}}var yr=!1,$n=null,bs=!1,dn=null,Rl={onError:function(n){yr=!0,$n=n}};function Al(n,i,a,c,d,p,w,C,N){yr=!1,$n=null,xl.apply(Rl,arguments)}function Ko(n,i,a,c,d,p,w,C,N){if(Al.apply(this,arguments),yr){if(yr){var $=$n;yr=!1,$n=null}else throw Error(t(198));bs||(bs=!0,dn=$)}}function xn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Go(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Pl(n){if(xn(n)!==n)throw Error(t(188))}function Nl(n){var i=n.alternate;if(!i){if(i=xn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Pl(d),n;if(p===c)return Pl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=p;break}if(C===c){w=!0,c=d,a=p;break}C=C.sibling}if(!w){for(C=p.child;C;){if(C===a){w=!0,a=p,c=d;break}if(C===c){w=!0,c=p,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Dl(n){return n=Nl(n),n!==null?Ui(n):null}function Ui(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ui(n);if(i!==null)return i;n=n.sibling}return null}var Qo=e.unstable_scheduleCallback,Ls=e.unstable_cancelCallback,zi=e.unstable_shouldYield,vr=e.unstable_requestPaint,Ye=e.unstable_now,zc=e.unstable_getCurrentPriorityLevel,Vs=e.unstable_ImmediatePriority,Yo=e.unstable_UserBlockingPriority,Bi=e.unstable_NormalPriority,Jo=e.unstable_LowPriority,Os=e.unstable_IdlePriority,$i=null,nn=null;function bl(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot($i,n,void 0,(n.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Hi,Hn=Math.log,fn=Math.LN2;function Hi(n){return n>>>=0,n===0?32:31-(Hn(n)/fn|0)|0}var Wn=64,ei=4194304;function Ue(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _r(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=Ue(C):(p&=w,p!==0&&(c=Ue(p)))}else w=a&~d,w!==0?c=Ue(w):p!==0&&(c=Ue(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-rn(i),d=1<<a,c|=n[a],i&=~d;return c}function Wi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qi(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-rn(p),C=1<<w,N=d[w];N===-1?((C&a)===0||(C&c)!==0)&&(d[w]=Wi(C,i)):N<=i&&(n.expiredLanes|=C),p&=~C}}function Xo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zo(){var n=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),n}function ea(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ki(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-rn(i),n[i]=a}function Bc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-rn(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ta(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-rn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Le=0;function qn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var na,Ms,ra,ia,sa,Kn=!1,js=[],Gn=null,Qn=null,Rt=null,Gi=new Map,wr=new Map,sn=[],Ll="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ti(n,i){switch(n){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Gi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":wr.delete(i.pointerId)}}function Rn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=_a(i),i!==null&&Ms(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Vl(n,i,a,c,d){switch(i){case"focusin":return Gn=Rn(Gn,n,i,a,c,d),!0;case"dragenter":return Qn=Rn(Qn,n,i,a,c,d),!0;case"mouseover":return Rt=Rn(Rt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return Gi.set(p,Rn(Gi.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,wr.set(p,Rn(wr.get(p)||null,n,i,a,c,d)),!0}return!1}function Fs(n){var i=Xi(n.target);if(i!==null){var a=xn(i);if(a!==null){if(i=a.tag,i===13){if(i=Go(a),i!==null){n.blockedOn=i,sa(n.priority,function(){ra(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Us(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Qr=c,a.target.dispatchEvent(c),Qr=null}else return i=_a(a),i!==null&&Ms(i),n.blockedOn=a,!1;i.shift()}return!0}function Ol(n,i,a){Ke(n)&&a.delete(i)}function $c(){Kn=!1,Gn!==null&&Ke(Gn)&&(Gn=null),Qn!==null&&Ke(Qn)&&(Qn=null),Rt!==null&&Ke(Rt)&&(Rt=null),Gi.forEach(Ol),wr.forEach(Ol)}function ni(n,i){n.blockedOn===i&&(n.blockedOn=null,Kn||(Kn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$c)))}function ri(n){function i(d){return ni(d,n)}if(0<js.length){ni(js[0],n);for(var a=1;a<js.length;a++){var c=js[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Gn!==null&&ni(Gn,n),Qn!==null&&ni(Qn,n),Rt!==null&&ni(Rt,n),Gi.forEach(i),wr.forEach(i),a=0;a<sn.length;a++)c=sn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<sn.length&&(a=sn[0],a.blockedOn===null);)Fs(a),a.blockedOn===null&&sn.shift()}var Er=oe.ReactCurrentBatchConfig,Tr=!0;function Yn(n,i,a,c){var d=Le,p=Er.transition;Er.transition=null;try{Le=1,oa(n,i,a,c)}finally{Le=d,Er.transition=p}}function Ml(n,i,a,c){var d=Le,p=Er.transition;Er.transition=null;try{Le=4,oa(n,i,a,c)}finally{Le=d,Er.transition=p}}function oa(n,i,a,c){if(Tr){var d=Us(n,i,a,c);if(d===null)eh(n,i,c,Jn,a),ti(n,c);else if(Vl(d,n,i,a,c))c.stopPropagation();else if(ti(n,c),i&4&&-1<Ll.indexOf(n)){for(;d!==null;){var p=_a(d);if(p!==null&&na(p),p=Us(n,i,a,c),p===null&&eh(n,i,c,Jn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else eh(n,i,c,null,a)}}var Jn=null;function Us(n,i,a,c){if(Jn=null,n=Ds(c),n=Xi(n),n!==null)if(i=xn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Go(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Jn=n,null}function zs(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zc()){case Vs:return 1;case Yo:return 4;case Bi:case Jo:return 16;case Os:return 536870912;default:return 16}default:return 16}}var on=null,Bs=null,Sr=null;function jl(){if(Sr)return Sr;var n,i=Bs,a=i.length,c,d="value"in on?on.value:on.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return Sr=d.slice(n,1<c?1-c:void 0)}function Qi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function aa(){return!1}function Mt(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xn:aa,this.isPropagationStopped=aa,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),i}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=Mt(Zn),ii=se({},Zn,{view:0,detail:0}),$s=Mt(ii),Hs,Ws,an,Ji=se({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==an&&(an&&n.type==="mousemove"?(Hs=n.screenX-an.screenX,Ws=n.screenY-an.screenY):Ws=Hs=0,an=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Ws}}),la=Mt(Ji),Fl=se({},Ji,{dataTransfer:0}),Ul=Mt(Fl),qs=se({},ii,{relatedTarget:0}),At=Mt(qs),zl=se({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Bl=Mt(zl),si=se({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Mt(si),m=se({},Zn,{data:0}),_=Mt(m),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=H[n])?!!i[n]:!1}function xe(){return ie}var ht=se({},ii,{key:function(n){if(n.key){var i=S[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xe,charCode:function(n){return n.type==="keypress"?Qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),He=Mt(ht),mt=se({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ln=Mt(mt),Ir=se({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xe}),er=Mt(Ir),tr=se({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ks=Mt(tr),ua=se({},Ji,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=Mt(ua),W0=[9,13,27,32],Hc=f&&"CompositionEvent"in window,ca=null;f&&"documentMode"in document&&(ca=document.documentMode);var q0=f&&"TextEvent"in window&&!ca,tp=f&&(!Hc||ca&&8<ca&&11>=ca),np=" ",rp=!1;function ip(n,i){switch(n){case"keyup":return W0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gs=!1;function K0(n,i){switch(n){case"compositionend":return sp(i);case"keypress":return i.which!==32?null:(rp=!0,np);case"textInput":return n=i.data,n===np&&rp?null:n;default:return null}}function G0(n,i){if(Gs)return n==="compositionend"||!Hc&&ip(n,i)?(n=jl(),Sr=Bs=on=null,Gs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return tp&&i.locale!=="ko"?null:i.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Q0[n.type]:i==="textarea"}function ap(n,i,a,c){Yr(c),i=Kl(i,"onChange"),0<i.length&&(a=new Yi("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ha=null,da=null;function Y0(n){kp(n,0)}function $l(n){var i=Zs(n);if(Uo(i))return n}function J0(n,i){if(n==="change")return i}var lp=!1;if(f){var Wc;if(f){var qc="oninput"in document;if(!qc){var up=document.createElement("div");up.setAttribute("oninput","return;"),qc=typeof up.oninput=="function"}Wc=qc}else Wc=!1;lp=Wc&&(!document.documentMode||9<document.documentMode)}function cp(){ha&&(ha.detachEvent("onpropertychange",hp),da=ha=null)}function hp(n){if(n.propertyName==="value"&&$l(da)){var i=[];ap(i,da,n,Ds(n)),Cl(Y0,i)}}function X0(n,i,a){n==="focusin"?(cp(),ha=i,da=a,ha.attachEvent("onpropertychange",hp)):n==="focusout"&&cp()}function Z0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $l(da)}function ew(n,i){if(n==="click")return $l(i)}function tw(n,i){if(n==="input"||n==="change")return $l(i)}function nw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:nw;function fa(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!An(n[d],i[d]))return!1}return!0}function dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function fp(n,i){var a=dp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=dp(a)}}function pp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?pp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function mp(){for(var n=window,i=Hr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Hr(n.document)}return i}function Kc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function rw(n){var i=mp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&pp(a.ownerDocument.documentElement,a)){if(c!==null&&Kc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=fp(a,p);var w=fp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var iw=f&&"documentMode"in document&&11>=document.documentMode,Qs=null,Gc=null,pa=null,Qc=!1;function gp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qc||Qs==null||Qs!==Hr(c)||(c=Qs,"selectionStart"in c&&Kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pa&&fa(pa,c)||(pa=c,c=Kl(Gc,"onSelect"),0<c.length&&(i=new Yi("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Qs)))}function Hl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ys={animationend:Hl("Animation","AnimationEnd"),animationiteration:Hl("Animation","AnimationIteration"),animationstart:Hl("Animation","AnimationStart"),transitionend:Hl("Transition","TransitionEnd")},Yc={},yp={};f&&(yp=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Wl(n){if(Yc[n])return Yc[n];if(!Ys[n])return n;var i=Ys[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in yp)return Yc[n]=i[a];return n}var vp=Wl("animationend"),_p=Wl("animationiteration"),wp=Wl("animationstart"),Ep=Wl("transitionend"),Tp=new Map,Sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(n,i){Tp.set(n,i),l(i,[n])}for(var Jc=0;Jc<Sp.length;Jc++){var Xc=Sp[Jc],sw=Xc.toLowerCase(),ow=Xc[0].toUpperCase()+Xc.slice(1);oi(sw,"on"+ow)}oi(vp,"onAnimationEnd"),oi(_p,"onAnimationIteration"),oi(wp,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(Ep,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Ip(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Ko(c,i,void 0,n),n.currentTarget=null}function kp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var C=c[w],N=C.instance,$=C.currentTarget;if(C=C.listener,N!==p&&d.isPropagationStopped())break e;Ip(d,C,$),p=N}else for(w=0;w<c.length;w++){if(C=c[w],N=C.instance,$=C.currentTarget,C=C.listener,N!==p&&d.isPropagationStopped())break e;Ip(d,C,$),p=N}}}if(bs)throw n=dn,bs=!1,dn=null,n}function Je(n,i){var a=i[oh];a===void 0&&(a=i[oh]=new Set);var c=n+"__bubble";a.has(c)||(Cp(i,n,2,!1),a.add(c))}function Zc(n,i,a){var c=0;i&&(c|=4),Cp(a,n,c,i)}var ql="_reactListening"+Math.random().toString(36).slice(2);function ga(n){if(!n[ql]){n[ql]=!0,s.forEach(function(a){a!=="selectionchange"&&(aw.has(a)||Zc(a,!1,n),Zc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ql]||(i[ql]=!0,Zc("selectionchange",!1,i))}}function Cp(n,i,a,c){switch(zs(i)){case 1:var d=Yn;break;case 4:d=Ml;break;default:d=oa}a=d.bind(null,i,a,n),d=void 0,!Xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function eh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;w=w.return}for(;C!==null;){if(w=Xi(C),w===null)return;if(N=w.tag,N===5||N===6){c=p=w;continue e}C=C.parentNode}}c=c.return}Cl(function(){var $=p,Z=Ds(a),te=[];e:{var X=Tp.get(n);if(X!==void 0){var ae=Yi,ce=n;switch(n){case"keypress":if(Qi(a)===0)break e;case"keydown":case"keyup":ae=He;break;case"focusin":ce="focus",ae=At;break;case"focusout":ce="blur",ae=At;break;case"beforeblur":case"afterblur":ae=At;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=er;break;case vp:case _p:case wp:ae=Bl;break;case Ep:ae=Ks;break;case"scroll":ae=$s;break;case"wheel":ae=H0;break;case"copy":case"cut":case"paste":ae=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ln}var fe=(i&4)!==0,dt=!fe&&n==="scroll",F=fe?X!==null?X+"Capture":null:X;fe=[];for(var L=$,z;L!==null;){z=L;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,F!==null&&(ne=Fi(L,F),ne!=null&&fe.push(ya(L,ne,z)))),dt)break;L=L.return}0<fe.length&&(X=new ae(X,ce,null,a,Z),te.push({event:X,listeners:fe}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",X&&a!==Qr&&(ce=a.relatedTarget||a.fromElement)&&(Xi(ce)||ce[kr]))break e;if((ae||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,ae?(ce=a.relatedTarget||a.toElement,ae=$,ce=ce?Xi(ce):null,ce!==null&&(dt=xn(ce),ce!==dt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ae=null,ce=$),ae!==ce)){if(fe=la,ne="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(fe=ln,ne="onPointerLeave",F="onPointerEnter",L="pointer"),dt=ae==null?X:Zs(ae),z=ce==null?X:Zs(ce),X=new fe(ne,L+"leave",ae,a,Z),X.target=dt,X.relatedTarget=z,ne=null,Xi(Z)===$&&(fe=new fe(F,L+"enter",ce,a,Z),fe.target=z,fe.relatedTarget=dt,ne=fe),dt=ne,ae&&ce)t:{for(fe=ae,F=ce,L=0,z=fe;z;z=Js(z))L++;for(z=0,ne=F;ne;ne=Js(ne))z++;for(;0<L-z;)fe=Js(fe),L--;for(;0<z-L;)F=Js(F),z--;for(;L--;){if(fe===F||F!==null&&fe===F.alternate)break t;fe=Js(fe),F=Js(F)}fe=null}else fe=null;ae!==null&&xp(te,X,ae,fe,!1),ce!==null&&dt!==null&&xp(te,dt,ce,fe,!0)}}e:{if(X=$?Zs($):window,ae=X.nodeName&&X.nodeName.toLowerCase(),ae==="select"||ae==="input"&&X.type==="file")var pe=J0;else if(op(X))if(lp)pe=tw;else{pe=Z0;var _e=X0}else(ae=X.nodeName)&&ae.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=ew);if(pe&&(pe=pe(n,$))){ap(te,pe,a,Z);break e}_e&&_e(n,X,$),n==="focusout"&&(_e=X._wrapperState)&&_e.controlled&&X.type==="number"&&pt(X,"number",X.value)}switch(_e=$?Zs($):window,n){case"focusin":(op(_e)||_e.contentEditable==="true")&&(Qs=_e,Gc=$,pa=null);break;case"focusout":pa=Gc=Qs=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,gp(te,a,Z);break;case"selectionchange":if(iw)break;case"keydown":case"keyup":gp(te,a,Z)}var we;if(Hc)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Gs?ip(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(tp&&a.locale!=="ko"&&(Gs||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Gs&&(we=jl()):(on=Z,Bs="value"in on?on.value:on.textContent,Gs=!0)),_e=Kl($,Se),0<_e.length&&(Se=new _(Se,n,null,a,Z),te.push({event:Se,listeners:_e}),we?Se.data=we:(we=sp(a),we!==null&&(Se.data=we)))),(we=q0?K0(n,a):G0(n,a))&&($=Kl($,"onBeforeInput"),0<$.length&&(Z=new _("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:$}),Z.data=we))}kp(te,i)})}function ya(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Kl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Fi(n,a),p!=null&&c.unshift(ya(n,p,d)),p=Fi(n,i),p!=null&&c.push(ya(n,p,d))),n=n.return}return c}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function xp(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var C=a,N=C.alternate,$=C.stateNode;if(N!==null&&N===c)break;C.tag===5&&$!==null&&(C=$,d?(N=Fi(a,p),N!=null&&w.unshift(ya(a,N,C))):d||(N=Fi(a,p),N!=null&&w.push(ya(a,N,C)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var lw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function Rp(n){return(typeof n=="string"?n:""+n).replace(lw,`
`).replace(uw,"")}function Gl(n,i,a){if(i=Rp(i),Rp(n)!==i&&a)throw Error(t(425))}function Ql(){}var th=null,nh=null;function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(n){return Ap.resolve(null).then(n).catch(dw)}:ih;function dw(n){setTimeout(function(){throw n})}function sh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ri(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ri(i)}function ai(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Pp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),nr="__reactFiber$"+Xs,va="__reactProps$"+Xs,kr="__reactContainer$"+Xs,oh="__reactEvents$"+Xs,fw="__reactListeners$"+Xs,pw="__reactHandles$"+Xs;function Xi(n){var i=n[nr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[kr]||a[nr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Pp(n);n!==null;){if(a=n[nr])return a;n=Pp(n)}return i}n=a,a=n.parentNode}return null}function _a(n){return n=n[nr]||n[kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Yl(n){return n[va]||null}var ah=[],eo=-1;function li(n){return{current:n}}function Xe(n){0>eo||(n.current=ah[eo],ah[eo]=null,eo--)}function Qe(n,i){eo++,ah[eo]=n.current,n.current=i}var ui={},jt=li(ui),Qt=li(!1),Zi=ui;function to(n,i){var a=n.type.contextTypes;if(!a)return ui;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Yt(n){return n=n.childContextTypes,n!=null}function Jl(){Xe(Qt),Xe(jt)}function Np(n,i,a){if(jt.current!==ui)throw Error(t(168));Qe(jt,i),Qe(Qt,a)}function Dp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Be(n)||"Unknown",d));return se({},a,c)}function Xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ui,Zi=jt.current,Qe(jt,n),Qe(Qt,Qt.current),!0}function bp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Dp(n,i,Zi),c.__reactInternalMemoizedMergedChildContext=n,Xe(Qt),Xe(jt),Qe(jt,n)):Xe(Qt),Qe(Qt,a)}var Cr=null,Zl=!1,lh=!1;function Lp(n){Cr===null?Cr=[n]:Cr.push(n)}function mw(n){Zl=!0,Lp(n)}function ci(){if(!lh&&Cr!==null){lh=!0;var n=0,i=Le;try{var a=Cr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Cr=null,Zl=!1}catch(d){throw Cr!==null&&(Cr=Cr.slice(n+1)),Qo(Vs,ci),d}finally{Le=i,lh=!1}}return null}var no=[],ro=0,eu=null,tu=0,pn=[],mn=0,es=null,xr=1,Rr="";function ts(n,i){no[ro++]=tu,no[ro++]=eu,eu=n,tu=i}function Vp(n,i,a){pn[mn++]=xr,pn[mn++]=Rr,pn[mn++]=es,es=n;var c=xr;n=Rr;var d=32-rn(c)-1;c&=~(1<<d),a+=1;var p=32-rn(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,xr=1<<32-rn(i)+d|a<<d|c,Rr=p+n}else xr=1<<p|a<<d|c,Rr=n}function uh(n){n.return!==null&&(ts(n,1),Vp(n,1,0))}function ch(n){for(;n===eu;)eu=no[--ro],no[ro]=null,tu=no[--ro],no[ro]=null;for(;n===es;)es=pn[--mn],pn[mn]=null,Rr=pn[--mn],pn[mn]=null,xr=pn[--mn],pn[mn]=null}var un=null,cn=null,et=!1,Pn=null;function Op(n,i){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Mp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,un=n,cn=ai(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,un=n,cn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=es!==null?{id:xr,overflow:Rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,un=n,cn=null,!0):!1;default:return!1}}function hh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dh(n){if(et){var i=cn;if(i){var a=i;if(!Mp(n,i)){if(hh(n))throw Error(t(418));i=ai(a.nextSibling);var c=un;i&&Mp(n,i)?Op(c,a):(n.flags=n.flags&-4097|2,et=!1,un=n)}}else{if(hh(n))throw Error(t(418));n.flags=n.flags&-4097|2,et=!1,un=n}}}function jp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function nu(n){if(n!==un)return!1;if(!et)return jp(n),et=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!rh(n.type,n.memoizedProps)),i&&(i=cn)){if(hh(n))throw Fp(),Error(t(418));for(;i;)Op(n,i),i=ai(i.nextSibling)}if(jp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){cn=ai(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}cn=null}}else cn=un?ai(n.stateNode.nextSibling):null;return!0}function Fp(){for(var n=cn;n;)n=ai(n.nextSibling)}function io(){cn=un=null,et=!1}function fh(n){Pn===null?Pn=[n]:Pn.push(n)}var gw=oe.ReactCurrentBatchConfig;function wa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var C=d.refs;w===null?delete C[p]:C[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ru(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Up(n){var i=n._init;return i(n._payload)}function zp(n){function i(F,L){if(n){var z=F.deletions;z===null?(F.deletions=[L],F.flags|=16):z.push(L)}}function a(F,L){if(!n)return null;for(;L!==null;)i(F,L),L=L.sibling;return null}function c(F,L){for(F=new Map;L!==null;)L.key!==null?F.set(L.key,L):F.set(L.index,L),L=L.sibling;return F}function d(F,L){return F=vi(F,L),F.index=0,F.sibling=null,F}function p(F,L,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<L?(F.flags|=2,L):z):(F.flags|=2,L)):(F.flags|=1048576,L)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,L,z,ne){return L===null||L.tag!==6?(L=id(z,F.mode,ne),L.return=F,L):(L=d(L,z),L.return=F,L)}function N(F,L,z,ne){var pe=z.type;return pe===x?Z(F,L,z.props.children,ne,z.key):L!==null&&(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===tt&&Up(pe)===L.type)?(ne=d(L,z.props),ne.ref=wa(F,L,z),ne.return=F,ne):(ne=xu(z.type,z.key,z.props,null,F.mode,ne),ne.ref=wa(F,L,z),ne.return=F,ne)}function $(F,L,z,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=sd(z,F.mode,ne),L.return=F,L):(L=d(L,z.children||[]),L.return=F,L)}function Z(F,L,z,ne,pe){return L===null||L.tag!==7?(L=us(z,F.mode,ne,pe),L.return=F,L):(L=d(L,z),L.return=F,L)}function te(F,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=id(""+L,F.mode,z),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case he:return z=xu(L.type,L.key,L.props,null,F.mode,z),z.ref=wa(F,null,L),z.return=F,z;case K:return L=sd(L,F.mode,z),L.return=F,L;case tt:var ne=L._init;return te(F,ne(L._payload),z)}if(ct(L)||me(L))return L=us(L,F.mode,z,null),L.return=F,L;ru(F,L)}return null}function X(F,L,z,ne){var pe=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:C(F,L,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case he:return z.key===pe?N(F,L,z,ne):null;case K:return z.key===pe?$(F,L,z,ne):null;case tt:return pe=z._init,X(F,L,pe(z._payload),ne)}if(ct(z)||me(z))return pe!==null?null:Z(F,L,z,ne,null);ru(F,z)}return null}function ae(F,L,z,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(z)||null,C(L,F,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case he:return F=F.get(ne.key===null?z:ne.key)||null,N(L,F,ne,pe);case K:return F=F.get(ne.key===null?z:ne.key)||null,$(L,F,ne,pe);case tt:var _e=ne._init;return ae(F,L,z,_e(ne._payload),pe)}if(ct(ne)||me(ne))return F=F.get(z)||null,Z(L,F,ne,pe,null);ru(L,ne)}return null}function ce(F,L,z,ne){for(var pe=null,_e=null,we=L,Se=L=0,kt=null;we!==null&&Se<z.length;Se++){we.index>Se?(kt=we,we=null):kt=we.sibling;var Fe=X(F,we,z[Se],ne);if(Fe===null){we===null&&(we=kt);break}n&&we&&Fe.alternate===null&&i(F,we),L=p(Fe,L,Se),_e===null?pe=Fe:_e.sibling=Fe,_e=Fe,we=kt}if(Se===z.length)return a(F,we),et&&ts(F,Se),pe;if(we===null){for(;Se<z.length;Se++)we=te(F,z[Se],ne),we!==null&&(L=p(we,L,Se),_e===null?pe=we:_e.sibling=we,_e=we);return et&&ts(F,Se),pe}for(we=c(F,we);Se<z.length;Se++)kt=ae(we,F,Se,z[Se],ne),kt!==null&&(n&&kt.alternate!==null&&we.delete(kt.key===null?Se:kt.key),L=p(kt,L,Se),_e===null?pe=kt:_e.sibling=kt,_e=kt);return n&&we.forEach(function(_i){return i(F,_i)}),et&&ts(F,Se),pe}function fe(F,L,z,ne){var pe=me(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var _e=pe=null,we=L,Se=L=0,kt=null,Fe=z.next();we!==null&&!Fe.done;Se++,Fe=z.next()){we.index>Se?(kt=we,we=null):kt=we.sibling;var _i=X(F,we,Fe.value,ne);if(_i===null){we===null&&(we=kt);break}n&&we&&_i.alternate===null&&i(F,we),L=p(_i,L,Se),_e===null?pe=_i:_e.sibling=_i,_e=_i,we=kt}if(Fe.done)return a(F,we),et&&ts(F,Se),pe;if(we===null){for(;!Fe.done;Se++,Fe=z.next())Fe=te(F,Fe.value,ne),Fe!==null&&(L=p(Fe,L,Se),_e===null?pe=Fe:_e.sibling=Fe,_e=Fe);return et&&ts(F,Se),pe}for(we=c(F,we);!Fe.done;Se++,Fe=z.next())Fe=ae(we,F,Se,Fe.value,ne),Fe!==null&&(n&&Fe.alternate!==null&&we.delete(Fe.key===null?Se:Fe.key),L=p(Fe,L,Se),_e===null?pe=Fe:_e.sibling=Fe,_e=Fe);return n&&we.forEach(function(Qw){return i(F,Qw)}),et&&ts(F,Se),pe}function dt(F,L,z,ne){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case he:e:{for(var pe=z.key,_e=L;_e!==null;){if(_e.key===pe){if(pe=z.type,pe===x){if(_e.tag===7){a(F,_e.sibling),L=d(_e,z.props.children),L.return=F,F=L;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===tt&&Up(pe)===_e.type){a(F,_e.sibling),L=d(_e,z.props),L.ref=wa(F,_e,z),L.return=F,F=L;break e}a(F,_e);break}else i(F,_e);_e=_e.sibling}z.type===x?(L=us(z.props.children,F.mode,ne,z.key),L.return=F,F=L):(ne=xu(z.type,z.key,z.props,null,F.mode,ne),ne.ref=wa(F,L,z),ne.return=F,F=ne)}return w(F);case K:e:{for(_e=z.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){a(F,L.sibling),L=d(L,z.children||[]),L.return=F,F=L;break e}else{a(F,L);break}else i(F,L);L=L.sibling}L=sd(z,F.mode,ne),L.return=F,F=L}return w(F);case tt:return _e=z._init,dt(F,L,_e(z._payload),ne)}if(ct(z))return ce(F,L,z,ne);if(me(z))return fe(F,L,z,ne);ru(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(a(F,L.sibling),L=d(L,z),L.return=F,F=L):(a(F,L),L=id(z,F.mode,ne),L.return=F,F=L),w(F)):a(F,L)}return dt}var so=zp(!0),Bp=zp(!1),iu=li(null),su=null,oo=null,ph=null;function mh(){ph=oo=su=null}function gh(n){var i=iu.current;Xe(iu),n._currentValue=i}function yh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function ao(n,i){su=n,ph=oo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Jt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(ph!==n)if(n={context:n,memoizedValue:i,next:null},oo===null){if(su===null)throw Error(t(308));oo=n,su.dependencies={lanes:0,firstContext:n}}else oo=oo.next=n;return i}var ns=null;function vh(n){ns===null?ns=[n]:ns.push(n)}function $p(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,vh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Ar(n,c)}function Ar(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var hi=!1;function _h(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function di(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Ar(n,a)}return d=c.interleaved,d===null?(i.next=i,vh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Ar(n,a)}function ou(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ta(n,a)}}function Wp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function au(n,i,a,c){var d=n.updateQueue;hi=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,$=N.next;N.next=null,w===null?p=$:w.next=$,w=N;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==w&&(C===null?Z.firstBaseUpdate=$:C.next=$,Z.lastBaseUpdate=N))}if(p!==null){var te=d.baseState;w=0,Z=$=N=null,C=p;do{var X=C.lane,ae=C.eventTime;if((c&X)===X){Z!==null&&(Z=Z.next={eventTime:ae,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ce=n,fe=C;switch(X=i,ae=a,fe.tag){case 1:if(ce=fe.payload,typeof ce=="function"){te=ce.call(ae,te,X);break e}te=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=fe.payload,X=typeof ce=="function"?ce.call(ae,te,X):ce,X==null)break e;te=se({},te,X);break e;case 2:hi=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[C]:X.push(C))}else ae={eventTime:ae,lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?($=Z=ae,N=te):Z=Z.next=ae,w|=X;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;X=C,C=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Z===null&&(N=te),d.baseState=N,d.firstBaseUpdate=$,d.lastBaseUpdate=Z,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);ss|=w,n.lanes=w,n.memoizedState=te}}function qp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ea={},rr=li(Ea),Ta=li(Ea),Sa=li(Ea);function rs(n){if(n===Ea)throw Error(t(174));return n}function wh(n,i){switch(Qe(Sa,i),Qe(Ta,n),Qe(rr,Ea),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:As(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=As(i,n)}Xe(rr),Qe(rr,i)}function lo(){Xe(rr),Xe(Ta),Xe(Sa)}function Kp(n){rs(Sa.current);var i=rs(rr.current),a=As(i,n.type);i!==a&&(Qe(Ta,n),Qe(rr,a))}function Eh(n){Ta.current===n&&(Xe(rr),Xe(Ta))}var nt=li(0);function lu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Th=[];function Sh(){for(var n=0;n<Th.length;n++)Th[n]._workInProgressVersionPrimary=null;Th.length=0}var uu=oe.ReactCurrentDispatcher,Ih=oe.ReactCurrentBatchConfig,is=0,rt=null,_t=null,St=null,cu=!1,Ia=!1,ka=0,yw=0;function Ft(){throw Error(t(321))}function kh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!An(n[a],i[a]))return!1;return!0}function Ch(n,i,a,c,d,p){if(is=p,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,uu.current=n===null||n.memoizedState===null?Ew:Tw,n=a(c,d),Ia){p=0;do{if(Ia=!1,ka=0,25<=p)throw Error(t(301));p+=1,St=_t=null,i.updateQueue=null,uu.current=Sw,n=a(c,d)}while(Ia)}if(uu.current=fu,i=_t!==null&&_t.next!==null,is=0,St=_t=rt=null,cu=!1,i)throw Error(t(300));return n}function xh(){var n=ka!==0;return ka=0,n}function ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?rt.memoizedState=St=n:St=St.next=n,St}function yn(){if(_t===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=St===null?rt.memoizedState:St.next;if(i!==null)St=i,_t=n;else{if(n===null)throw Error(t(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?rt.memoizedState=St=n:St=St.next=n}return St}function Ca(n,i){return typeof i=="function"?i(n):i}function Rh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=_t,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var C=w=null,N=null,$=p;do{var Z=$.lane;if((is&Z)===Z)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var te={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(C=N=te,w=c):N=N.next=te,rt.lanes|=Z,ss|=Z}$=$.next}while($!==null&&$!==p);N===null?w=c:N.next=C,An(c,i.memoizedState)||(Jt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,rt.lanes|=p,ss|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Ah(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);An(p,i.memoizedState)||(Jt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Gp(){}function Qp(n,i){var a=rt,c=yn(),d=i(),p=!An(c.memoizedState,d);if(p&&(c.memoizedState=d,Jt=!0),c=c.queue,Ph(Xp.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,xa(9,Jp.bind(null,a,c,d,i),void 0,null),It===null)throw Error(t(349));(is&30)!==0||Yp(a,i,d)}return d}function Yp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Jp(n,i,a,c){i.value=a,i.getSnapshot=c,Zp(i)&&em(n)}function Xp(n,i,a){return a(function(){Zp(i)&&em(n)})}function Zp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!An(n,a)}catch{return!0}}function em(n){var i=Ar(n,1);i!==null&&Ln(i,n,1,-1)}function tm(n){var i=ir();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:n},i.queue=n,n=n.dispatch=ww.bind(null,rt,n),[i.memoizedState,n]}function xa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function nm(){return yn().memoizedState}function hu(n,i,a,c){var d=ir();rt.flags|=n,d.memoizedState=xa(1|i,a,void 0,c===void 0?null:c)}function du(n,i,a,c){var d=yn();c=c===void 0?null:c;var p=void 0;if(_t!==null){var w=_t.memoizedState;if(p=w.destroy,c!==null&&kh(c,w.deps)){d.memoizedState=xa(i,a,p,c);return}}rt.flags|=n,d.memoizedState=xa(1|i,a,p,c)}function rm(n,i){return hu(8390656,8,n,i)}function Ph(n,i){return du(2048,8,n,i)}function im(n,i){return du(4,2,n,i)}function sm(n,i){return du(4,4,n,i)}function om(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function am(n,i,a){return a=a!=null?a.concat([n]):null,du(4,4,om.bind(null,i,n),a)}function Nh(){}function lm(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&kh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function um(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&kh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function cm(n,i,a){return(is&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(An(a,i)||(a=Zo(),rt.lanes|=a,ss|=a,n.baseState=!0),i)}function vw(n,i){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=Ih.transition;Ih.transition={};try{n(!1),i()}finally{Le=a,Ih.transition=c}}function hm(){return yn().memoizedState}function _w(n,i,a){var c=gi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},dm(n))fm(i,a);else if(a=$p(n,i,a,c),a!==null){var d=Gt();Ln(a,n,c,d),pm(a,i,c)}}function ww(n,i,a){var c=gi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(dm(n))fm(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,C=p(w,a);if(d.hasEagerState=!0,d.eagerState=C,An(C,w)){var N=i.interleaved;N===null?(d.next=d,vh(i)):(d.next=N.next,N.next=d),i.interleaved=d;return}}catch{}finally{}a=$p(n,i,d,c),a!==null&&(d=Gt(),Ln(a,n,c,d),pm(a,i,c))}}function dm(n){var i=n.alternate;return n===rt||i!==null&&i===rt}function fm(n,i){Ia=cu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function pm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ta(n,a)}}var fu={readContext:gn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Ew={readContext:gn,useCallback:function(n,i){return ir().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:rm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,hu(4194308,4,om.bind(null,i,n),a)},useLayoutEffect:function(n,i){return hu(4194308,4,n,i)},useInsertionEffect:function(n,i){return hu(4,2,n,i)},useMemo:function(n,i){var a=ir();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=ir();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=_w.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var i=ir();return n={current:n},i.memoizedState=n},useState:tm,useDebugValue:Nh,useDeferredValue:function(n){return ir().memoizedState=n},useTransition:function(){var n=tm(!1),i=n[0];return n=vw.bind(null,n[1]),ir().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=rt,d=ir();if(et){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),It===null)throw Error(t(349));(is&30)!==0||Yp(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,rm(Xp.bind(null,c,p,n),[n]),c.flags|=2048,xa(9,Jp.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=ir(),i=It.identifierPrefix;if(et){var a=Rr,c=xr;a=(c&~(1<<32-rn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ka++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=yw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Tw={readContext:gn,useCallback:lm,useContext:gn,useEffect:Ph,useImperativeHandle:am,useInsertionEffect:im,useLayoutEffect:sm,useMemo:um,useReducer:Rh,useRef:nm,useState:function(){return Rh(Ca)},useDebugValue:Nh,useDeferredValue:function(n){var i=yn();return cm(i,_t.memoizedState,n)},useTransition:function(){var n=Rh(Ca)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Gp,useSyncExternalStore:Qp,useId:hm,unstable_isNewReconciler:!1},Sw={readContext:gn,useCallback:lm,useContext:gn,useEffect:Ph,useImperativeHandle:am,useInsertionEffect:im,useLayoutEffect:sm,useMemo:um,useReducer:Ah,useRef:nm,useState:function(){return Ah(Ca)},useDebugValue:Nh,useDeferredValue:function(n){var i=yn();return _t===null?i.memoizedState=n:cm(i,_t.memoizedState,n)},useTransition:function(){var n=Ah(Ca)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Gp,useSyncExternalStore:Qp,useId:hm,unstable_isNewReconciler:!1};function Nn(n,i){if(n&&n.defaultProps){i=se({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Dh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:se({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var pu={isMounted:function(n){return(n=n._reactInternals)?xn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Gt(),d=gi(n),p=Pr(c,d);p.payload=i,a!=null&&(p.callback=a),i=di(n,p,d),i!==null&&(Ln(i,n,d,c),ou(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Gt(),d=gi(n),p=Pr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=di(n,p,d),i!==null&&(Ln(i,n,d,c),ou(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Gt(),c=gi(n),d=Pr(a,c);d.tag=2,i!=null&&(d.callback=i),i=di(n,d,c),i!==null&&(Ln(i,n,c,a),ou(i,n,c))}};function mm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!fa(a,c)||!fa(d,p):!0}function gm(n,i,a){var c=!1,d=ui,p=i.contextType;return typeof p=="object"&&p!==null?p=gn(p):(d=Yt(i)?Zi:jt.current,c=i.contextTypes,p=(c=c!=null)?to(n,d):ui),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=pu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function ym(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&pu.enqueueReplaceState(i,i.state,null)}function bh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},_h(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=gn(p):(p=Yt(i)?Zi:jt.current,d.context=to(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Dh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&pu.enqueueReplaceState(d,d.state,null),au(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function uo(n,i){try{var a="",c=i;do a+=Ce(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Lh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Vh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Iw=typeof WeakMap=="function"?WeakMap:Map;function vm(n,i,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Eu||(Eu=!0,Yh=c),Vh(n,i)},a}function _m(n,i,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Vh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Vh(n,i),typeof c!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function wm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Iw;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=jw.bind(null,n,i,a),i.then(n,n))}function Em(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Tm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Pr(-1,1),i.tag=2,di(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var kw=oe.ReactCurrentOwner,Jt=!1;function Kt(n,i,a,c){i.child=n===null?Bp(i,null,a,c):so(i,n.child,a,c)}function Sm(n,i,a,c,d){a=a.render;var p=i.ref;return ao(i,d),c=Ch(n,i,a,c,p,d),a=xh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(et&&a&&uh(i),i.flags|=1,Kt(n,i,c,d),i.child)}function Im(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!rd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,km(n,i,p,c,d)):(n=xu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:fa,a(w,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=vi(p,c),n.ref=i.ref,n.return=i,i.child=n}function km(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(fa(p,c)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return Oh(n,i,a,c,d)}function Cm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ho,hn),hn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Qe(ho,hn),hn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Qe(ho,hn),hn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Qe(ho,hn),hn|=c;return Kt(n,i,d,a),i.child}function xm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Oh(n,i,a,c,d){var p=Yt(a)?Zi:jt.current;return p=to(i,p),ao(i,d),a=Ch(n,i,a,c,p,d),c=xh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(et&&c&&uh(i),i.flags|=1,Kt(n,i,a,d),i.child)}function Rm(n,i,a,c,d){if(Yt(a)){var p=!0;Xl(i)}else p=!1;if(ao(i,d),i.stateNode===null)gu(n,i),gm(i,a,c),bh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,C=i.memoizedProps;w.props=C;var N=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=gn($):($=Yt(a)?Zi:jt.current,$=to(i,$));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||N!==$)&&ym(i,w,c,$),hi=!1;var X=i.memoizedState;w.state=X,au(i,c,w,d),N=i.memoizedState,C!==c||X!==N||Qt.current||hi?(typeof Z=="function"&&(Dh(i,a,Z,c),N=i.memoizedState),(C=hi||mm(i,a,C,c,X,N,$))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=N),w.props=c,w.state=N,w.context=$,c=C):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,Hp(n,i),C=i.memoizedProps,$=i.type===i.elementType?C:Nn(i.type,C),w.props=$,te=i.pendingProps,X=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=gn(N):(N=Yt(a)?Zi:jt.current,N=to(i,N));var ae=a.getDerivedStateFromProps;(Z=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==te||X!==N)&&ym(i,w,c,N),hi=!1,X=i.memoizedState,w.state=X,au(i,c,w,d);var ce=i.memoizedState;C!==te||X!==ce||Qt.current||hi?(typeof ae=="function"&&(Dh(i,a,ae,c),ce=i.memoizedState),($=hi||mm(i,a,$,c,X,ce,N)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ce,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ce,N)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ce),w.props=c,w.state=ce,w.context=N,c=$):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return Mh(n,i,a,c,p,d)}function Mh(n,i,a,c,d,p){xm(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&bp(i,a,!1),Nr(n,i,p);c=i.stateNode,kw.current=i;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=so(i,n.child,null,p),i.child=so(i,null,C,p)):Kt(n,i,C,p),i.memoizedState=c.state,d&&bp(i,a,!0),i.child}function Am(n){var i=n.stateNode;i.pendingContext?Np(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Np(n,i.context,!1),wh(n,i.containerInfo)}function Pm(n,i,a,c,d){return io(),fh(d),i.flags|=256,Kt(n,i,a,c),i.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function Fh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Nm(n,i,a){var c=i.pendingProps,d=nt.current,p=!1,w=(i.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(nt,d&1),n===null)return dh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Ru(w,c,0,null),n=us(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Fh(a),i.memoizedState=jh,n):Uh(i,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Cw(n,i,w,c,C,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,C=d.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=N,i.deletions=null):(c=vi(d,N),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?p=vi(C,p):(p=us(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?Fh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=jh,c}return p=n.child,n=p.sibling,c=vi(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Uh(n,i){return i=Ru({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function mu(n,i,a,c){return c!==null&&fh(c),so(i,n.child,null,a),n=Uh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Cw(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Lh(Error(t(422))),mu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Ru({mode:"visible",children:c.children},d,0,null),p=us(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&so(i,n.child,null,w),i.child.memoizedState=Fh(w),i.memoizedState=jh,p);if((i.mode&1)===0)return mu(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,p=Error(t(419)),c=Lh(p,c,void 0),mu(n,i,w,c)}if(C=(w&n.childLanes)!==0,Jt||C){if(c=It,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Ar(n,d),Ln(c,n,d,-1))}return nd(),c=Lh(Error(t(421))),mu(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=Fw.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,cn=ai(d.nextSibling),un=i,et=!0,Pn=null,n!==null&&(pn[mn++]=xr,pn[mn++]=Rr,pn[mn++]=es,xr=n.id,Rr=n.overflow,es=i),i=Uh(i,c.children),i.flags|=4096,i)}function Dm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),yh(n.return,i,a)}function zh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function bm(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Kt(n,i,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dm(n,a,i);else if(n.tag===19)Dm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(nt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&lu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),zh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&lu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}zh(i,!0,a,null,p);break;case"together":zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function gu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ss|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=vi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=vi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function xw(n,i,a){switch(i.tag){case 3:Am(i),io();break;case 5:Kp(i);break;case 1:Yt(i.type)&&Xl(i);break;case 4:wh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Qe(iu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Nm(n,i,a):(Qe(nt,nt.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return bm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return i.lanes=0,Cm(n,i,a)}return Nr(n,i,a)}var Lm,Bh,Vm,Om;Lm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bh=function(){},Vm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,rs(rr.current);var p=null;switch(a){case"input":d=xs(n,d),c=xs(n,c),p=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),p=[];break;case"textarea":d=Bo(n,d),c=Bo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ql)}Cn(a,c);var w;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?p||(p=[]):(p=p||[]).push($,null));for($ in c){var N=c[$];if(C=d!=null?d[$]:void 0,c.hasOwnProperty($)&&N!==C&&(N!=null||C!=null))if($==="style")if(C){for(w in C)!C.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&C[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(p||(p=[]),p.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(p=p||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&Je("scroll",n),p||C===N||(p=[])):(p=p||[]).push($,N))}a&&(p=p||[]).push("style",a);var $=p;(i.updateQueue=$)&&(i.flags|=4)}},Om=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ra(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Rw(n,i,a){var c=i.pendingProps;switch(ch(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(i),null;case 1:return Yt(i.type)&&Jl(),Ut(i),null;case 3:return c=i.stateNode,lo(),Xe(Qt),Xe(jt),Sh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(nu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pn!==null&&(Zh(Pn),Pn=null))),Bh(n,i),Ut(i),null;case 5:Eh(i);var d=rs(Sa.current);if(a=i.type,n!==null&&i.stateNode!=null)Vm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ut(i),null}if(n=rs(rr.current),nu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[nr]=i,c[va]=p,n=(i.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<ma.length;d++)Je(ma[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":wl(c,p),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Je("invalid",c);break;case"textarea":$o(c,p),Je("invalid",c)}Cn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var C=p[w];w==="children"?typeof C=="string"?c.textContent!==C&&(p.suppressHydrationWarning!==!0&&Gl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&Gl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Je("scroll",c)}switch(a){case"input":Cs(c),zo(c,p,!0);break;case"textarea":Cs(c),Wr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Ql)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ho(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[nr]=i,n[va]=c,Lm(n,i,!1,!1),i.stateNode=n;e:{switch(w=Ns(a,c),a){case"dialog":Je("cancel",n),Je("close",n),d=c;break;case"iframe":case"object":case"embed":Je("load",n),d=c;break;case"video":case"audio":for(d=0;d<ma.length;d++)Je(ma[d],n);d=c;break;case"source":Je("error",n),d=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),d=c;break;case"details":Je("toggle",n),d=c;break;case"input":wl(n,c),d=xs(n,c),Je("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),Je("invalid",n);break;case"textarea":$o(n,c),d=Bo(n,c),Je("invalid",n);break;default:d=c}Cn(a,d),C=d;for(p in C)if(C.hasOwnProperty(p)){var N=C[p];p==="style"?Ps(n,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Tl(n,N)):p==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&ji(n,N):typeof N=="number"&&ji(n,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?N!=null&&p==="onScroll"&&Je("scroll",n):N!=null&&Q(n,p,N,w))}switch(a){case"input":Cs(n),zo(n,c,!1);break;case"textarea":Cs(n),Wr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?kn(n,!!c.multiple,p,!1):c.defaultValue!=null&&kn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ql)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ut(i),null;case 6:if(n&&i.stateNode!=null)Om(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=rs(Sa.current),rs(rr.current),nu(i)){if(c=i.stateNode,a=i.memoizedProps,c[nr]=i,(p=c.nodeValue!==a)&&(n=un,n!==null))switch(n.tag){case 3:Gl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gl(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=i,i.stateNode=c}return Ut(i),null;case 13:if(Xe(nt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&cn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Fp(),io(),i.flags|=98560,p=!1;else if(p=nu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[nr]=i}else io(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),p=!1}else Pn!==null&&(Zh(Pn),Pn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(nt.current&1)!==0?wt===0&&(wt=3):nd())),i.updateQueue!==null&&(i.flags|=4),Ut(i),null);case 4:return lo(),Bh(n,i),n===null&&ga(i.stateNode.containerInfo),Ut(i),null;case 10:return gh(i.type._context),Ut(i),null;case 17:return Yt(i.type)&&Jl(),Ut(i),null;case 19:if(Xe(nt),p=i.memoizedState,p===null)return Ut(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)Ra(p,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=lu(n),w!==null){for(i.flags|=128,Ra(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ye()>fo&&(i.flags|=128,c=!0,Ra(p,!1),i.lanes=4194304)}else{if(!c)if(n=lu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ra(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!et)return Ut(i),null}else 2*Ye()-p.renderingStartTime>fo&&a!==1073741824&&(i.flags|=128,c=!0,Ra(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ye(),i.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),i):(Ut(i),null);case 22:case 23:return td(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(hn&1073741824)!==0&&(Ut(i),i.subtreeFlags&6&&(i.flags|=8192)):Ut(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Aw(n,i){switch(ch(i),i.tag){case 1:return Yt(i.type)&&Jl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return lo(),Xe(Qt),Xe(jt),Sh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Eh(i),null;case 13:if(Xe(nt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));io()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Xe(nt),null;case 4:return lo(),null;case 10:return gh(i.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var yu=!1,zt=!1,Pw=typeof WeakSet=="function"?WeakSet:Set,ue=null;function co(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ut(n,i,c)}else a.current=null}function $h(n,i,a){try{a()}catch(c){ut(n,i,c)}}var Mm=!1;function Nw(n,i){if(th=Tr,n=mp(),Kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,C=-1,N=-1,$=0,Z=0,te=n,X=null;t:for(;;){for(var ae;te!==a||d!==0&&te.nodeType!==3||(C=w+d),te!==p||c!==0&&te.nodeType!==3||(N=w+c),te.nodeType===3&&(w+=te.nodeValue.length),(ae=te.firstChild)!==null;)X=te,te=ae;for(;;){if(te===n)break t;if(X===a&&++$===d&&(C=w),X===p&&++Z===c&&(N=w),(ae=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=ae}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(nh={focusedElem:n,selectionRange:a},Tr=!1,ue=i;ue!==null;)if(i=ue,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ue=n;else for(;ue!==null;){i=ue;try{var ce=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var fe=ce.memoizedProps,dt=ce.memoizedState,F=i.stateNode,L=F.getSnapshotBeforeUpdate(i.elementType===i.type?fe:Nn(i.type,fe),dt);F.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){ut(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,ue=n;break}ue=i.return}return ce=Mm,Mm=!1,ce}function Aa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&$h(i,a,p)}d=d.next}while(d!==c)}}function vu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Hh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function jm(n){var i=n.alternate;i!==null&&(n.alternate=null,jm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[nr],delete i[va],delete i[oh],delete i[fw],delete i[pw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Fm(n){return n.tag===5||n.tag===3||n.tag===4}function Um(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Fm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ql));else if(c!==4&&(n=n.child,n!==null))for(Wh(n,i,a),n=n.sibling;n!==null;)Wh(n,i,a),n=n.sibling}function qh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(qh(n,i,a),n=n.sibling;n!==null;)qh(n,i,a),n=n.sibling}var Pt=null,Dn=!1;function fi(n,i,a){for(a=a.child;a!==null;)zm(n,i,a),a=a.sibling}function zm(n,i,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount($i,a)}catch{}switch(a.tag){case 5:zt||co(a,i);case 6:var c=Pt,d=Dn;Pt=null,fi(n,i,a),Pt=c,Dn=d,Pt!==null&&(Dn?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(Dn?(n=Pt,a=a.stateNode,n.nodeType===8?sh(n.parentNode,a):n.nodeType===1&&sh(n,a),ri(n)):sh(Pt,a.stateNode));break;case 4:c=Pt,d=Dn,Pt=a.stateNode.containerInfo,Dn=!0,fi(n,i,a),Pt=c,Dn=d;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&$h(a,i,w),d=d.next}while(d!==c)}fi(n,i,a);break;case 1:if(!zt&&(co(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ut(a,i,C)}fi(n,i,a);break;case 21:fi(n,i,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,fi(n,i,a),zt=c):fi(n,i,a);break;default:fi(n,i,a)}}function Bm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Pw),i.forEach(function(c){var d=Uw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function bn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,C=w;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,Dn=!1;break e;case 3:Pt=C.stateNode.containerInfo,Dn=!0;break e;case 4:Pt=C.stateNode.containerInfo,Dn=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));zm(p,w,d),Pt=null,Dn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch($){ut(d,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)$m(i,n),i=i.sibling}function $m(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bn(i,n),sr(n),c&4){try{Aa(3,n,n.return),vu(3,n)}catch(fe){ut(n,n.return,fe)}try{Aa(5,n,n.return)}catch(fe){ut(n,n.return,fe)}}break;case 1:bn(i,n),sr(n),c&512&&a!==null&&co(a,a.return);break;case 5:if(bn(i,n),sr(n),c&512&&a!==null&&co(a,a.return),n.flags&32){var d=n.stateNode;try{ji(d,"")}catch(fe){ut(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,C=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&Rs(d,p),Ns(C,w);var $=Ns(C,p);for(w=0;w<N.length;w+=2){var Z=N[w],te=N[w+1];Z==="style"?Ps(d,te):Z==="dangerouslySetInnerHTML"?Tl(d,te):Z==="children"?ji(d,te):Q(d,Z,te,$)}switch(C){case"input":Mi(d,p);break;case"textarea":El(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?kn(d,!!p.multiple,ae,!1):X!==!!p.multiple&&(p.defaultValue!=null?kn(d,!!p.multiple,p.defaultValue,!0):kn(d,!!p.multiple,p.multiple?[]:"",!1))}d[va]=p}catch(fe){ut(n,n.return,fe)}}break;case 6:if(bn(i,n),sr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(fe){ut(n,n.return,fe)}}break;case 3:if(bn(i,n),sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ri(i.containerInfo)}catch(fe){ut(n,n.return,fe)}break;case 4:bn(i,n),sr(n);break;case 13:bn(i,n),sr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Qh=Ye())),c&4&&Bm(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(zt=($=zt)||Z,bn(i,n),zt=$):bn(i,n),sr(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!Z&&(n.mode&1)!==0)for(ue=n,Z=n.child;Z!==null;){for(te=ue=Z;ue!==null;){switch(X=ue,ae=X.child,X.tag){case 0:case 11:case 14:case 15:Aa(4,X,X.return);break;case 1:co(X,X.return);var ce=X.stateNode;if(typeof ce.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,ce.props=i.memoizedProps,ce.state=i.memoizedState,ce.componentWillUnmount()}catch(fe){ut(c,a,fe)}}break;case 5:co(X,X.return);break;case 22:if(X.memoizedState!==null){qm(te);continue}}ae!==null?(ae.return=X,ue=ae):qm(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{d=te.stateNode,$?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=te.stateNode,N=te.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=Gr("display",w))}catch(fe){ut(n,n.return,fe)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(fe){ut(n,n.return,fe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:bn(i,n),sr(n),c&4&&Bm(n);break;case 21:break;default:bn(i,n),sr(n)}}function sr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Fm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ji(d,""),c.flags&=-33);var p=Um(n);qh(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Um(n);Wh(n,C,w);break;default:throw Error(t(161))}}catch(N){ut(n,n.return,N)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Dw(n,i,a){ue=n,Hm(n)}function Hm(n,i,a){for(var c=(n.mode&1)!==0;ue!==null;){var d=ue,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||yu;if(!w){var C=d.alternate,N=C!==null&&C.memoizedState!==null||zt;C=yu;var $=zt;if(yu=w,(zt=N)&&!$)for(ue=d;ue!==null;)w=ue,N=w.child,w.tag===22&&w.memoizedState!==null?Km(d):N!==null?(N.return=w,ue=N):Km(d);for(;p!==null;)ue=p,Hm(p),p=p.sibling;ue=d,yu=C,zt=$}Wm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ue=p):Wm(n)}}function Wm(n){for(;ue!==null;){var i=ue;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:zt||vu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!zt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Nn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&qp(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}qp(i,w,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&ri(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||i.flags&512&&Hh(i)}catch(X){ut(i,i.return,X)}}if(i===n){ue=null;break}if(a=i.sibling,a!==null){a.return=i.return,ue=a;break}ue=i.return}}function qm(n){for(;ue!==null;){var i=ue;if(i===n){ue=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ue=a;break}ue=i.return}}function Km(n){for(;ue!==null;){var i=ue;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{vu(4,i)}catch(N){ut(i,a,N)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(N){ut(i,d,N)}}var p=i.return;try{Hh(i)}catch(N){ut(i,p,N)}break;case 5:var w=i.return;try{Hh(i)}catch(N){ut(i,w,N)}}}catch(N){ut(i,i.return,N)}if(i===n){ue=null;break}var C=i.sibling;if(C!==null){C.return=i.return,ue=C;break}ue=i.return}}var bw=Math.ceil,_u=oe.ReactCurrentDispatcher,Kh=oe.ReactCurrentOwner,vn=oe.ReactCurrentBatchConfig,Me=0,It=null,gt=null,Nt=0,hn=0,ho=li(0),wt=0,Pa=null,ss=0,wu=0,Gh=0,Na=null,Xt=null,Qh=0,fo=1/0,Dr=null,Eu=!1,Yh=null,pi=null,Tu=!1,mi=null,Su=0,Da=0,Jh=null,Iu=-1,ku=0;function Gt(){return(Me&6)!==0?Ye():Iu!==-1?Iu:Iu=Ye()}function gi(n){return(n.mode&1)===0?1:(Me&2)!==0&&Nt!==0?Nt&-Nt:gw.transition!==null?(ku===0&&(ku=Zo()),ku):(n=Le,n!==0||(n=window.event,n=n===void 0?16:zs(n.type)),n)}function Ln(n,i,a,c){if(50<Da)throw Da=0,Jh=null,Error(t(185));Ki(n,a,c),((Me&2)===0||n!==It)&&(n===It&&((Me&2)===0&&(wu|=a),wt===4&&yi(n,Nt)),Zt(n,c),a===1&&Me===0&&(i.mode&1)===0&&(fo=Ye()+500,Zl&&ci()))}function Zt(n,i){var a=n.callbackNode;qi(n,i);var c=_r(n,n===It?Nt:0);if(c===0)a!==null&&Ls(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ls(a),i===1)n.tag===0?mw(Qm.bind(null,n)):Lp(Qm.bind(null,n)),hw(function(){(Me&6)===0&&ci()}),a=null;else{switch(qn(c)){case 1:a=Vs;break;case 4:a=Yo;break;case 16:a=Bi;break;case 536870912:a=Os;break;default:a=Bi}a=rg(a,Gm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Gm(n,i){if(Iu=-1,ku=0,(Me&6)!==0)throw Error(t(327));var a=n.callbackNode;if(po()&&n.callbackNode!==a)return null;var c=_r(n,n===It?Nt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Cu(n,c);else{i=c;var d=Me;Me|=2;var p=Jm();(It!==n||Nt!==i)&&(Dr=null,fo=Ye()+500,as(n,i));do try{Ow();break}catch(C){Ym(n,C)}while(!0);mh(),_u.current=p,Me=d,gt!==null?i=0:(It=null,Nt=0,i=wt)}if(i!==0){if(i===2&&(d=Xo(n),d!==0&&(c=d,i=Xh(n,d))),i===1)throw a=Pa,as(n,0),yi(n,c),Zt(n,Ye()),a;if(i===6)yi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Lw(d)&&(i=Cu(n,c),i===2&&(p=Xo(n),p!==0&&(c=p,i=Xh(n,p))),i===1))throw a=Pa,as(n,0),yi(n,c),Zt(n,Ye()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:ls(n,Xt,Dr);break;case 3:if(yi(n,c),(c&130023424)===c&&(i=Qh+500-Ye(),10<i)){if(_r(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Gt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=ih(ls.bind(null,n,Xt,Dr),i);break}ls(n,Xt,Dr);break;case 4:if(yi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-rn(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*bw(c/1960))-c,10<c){n.timeoutHandle=ih(ls.bind(null,n,Xt,Dr),c);break}ls(n,Xt,Dr);break;case 5:ls(n,Xt,Dr);break;default:throw Error(t(329))}}}return Zt(n,Ye()),n.callbackNode===a?Gm.bind(null,n):null}function Xh(n,i){var a=Na;return n.current.memoizedState.isDehydrated&&(as(n,i).flags|=256),n=Cu(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&Zh(i)),n}function Zh(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function Lw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!An(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function yi(n,i){for(i&=~Gh,i&=~wu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-rn(i),c=1<<a;n[a]=-1,i&=~c}}function Qm(n){if((Me&6)!==0)throw Error(t(327));po();var i=_r(n,0);if((i&1)===0)return Zt(n,Ye()),null;var a=Cu(n,i);if(n.tag!==0&&a===2){var c=Xo(n);c!==0&&(i=c,a=Xh(n,c))}if(a===1)throw a=Pa,as(n,0),yi(n,i),Zt(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ls(n,Xt,Dr),Zt(n,Ye()),null}function ed(n,i){var a=Me;Me|=1;try{return n(i)}finally{Me=a,Me===0&&(fo=Ye()+500,Zl&&ci())}}function os(n){mi!==null&&mi.tag===0&&(Me&6)===0&&po();var i=Me;Me|=1;var a=vn.transition,c=Le;try{if(vn.transition=null,Le=1,n)return n()}finally{Le=c,vn.transition=a,Me=i,(Me&6)===0&&ci()}}function td(){hn=ho.current,Xe(ho)}function as(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,cw(a)),gt!==null)for(a=gt.return;a!==null;){var c=a;switch(ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Jl();break;case 3:lo(),Xe(Qt),Xe(jt),Sh();break;case 5:Eh(c);break;case 4:lo();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:gh(c.type._context);break;case 22:case 23:td()}a=a.return}if(It=n,gt=n=vi(n.current,null),Nt=hn=i,wt=0,Pa=null,Gh=wu=ss=0,Xt=Na=null,ns!==null){for(i=0;i<ns.length;i++)if(a=ns[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}ns=null}return n}function Ym(n,i){do{var a=gt;try{if(mh(),uu.current=fu,cu){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}cu=!1}if(is=0,St=_t=rt=null,Ia=!1,ka=0,Kh.current=null,a===null||a.return===null){wt=1,Pa=i,gt=null;break}e:{var p=n,w=a.return,C=a,N=i;if(i=Nt,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,Z=C,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ae=Em(w);if(ae!==null){ae.flags&=-257,Tm(ae,w,C,p,i),ae.mode&1&&wm(p,$,i),i=ae,N=$;var ce=i.updateQueue;if(ce===null){var fe=new Set;fe.add(N),i.updateQueue=fe}else ce.add(N);break e}else{if((i&1)===0){wm(p,$,i),nd();break e}N=Error(t(426))}}else if(et&&C.mode&1){var dt=Em(w);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Tm(dt,w,C,p,i),fh(uo(N,C));break e}}p=N=uo(N,C),wt!==4&&(wt=2),Na===null?Na=[p]:Na.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var F=vm(p,N,i);Wp(p,F);break e;case 1:C=N;var L=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(pi===null||!pi.has(z)))){p.flags|=65536,i&=-i,p.lanes|=i;var ne=_m(p,C,i);Wp(p,ne);break e}}p=p.return}while(p!==null)}Zm(a)}catch(pe){i=pe,gt===a&&a!==null&&(gt=a=a.return);continue}break}while(!0)}function Jm(){var n=_u.current;return _u.current=fu,n===null?fu:n}function nd(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||(ss&268435455)===0&&(wu&268435455)===0||yi(It,Nt)}function Cu(n,i){var a=Me;Me|=2;var c=Jm();(It!==n||Nt!==i)&&(Dr=null,as(n,i));do try{Vw();break}catch(d){Ym(n,d)}while(!0);if(mh(),Me=a,_u.current=c,gt!==null)throw Error(t(261));return It=null,Nt=0,wt}function Vw(){for(;gt!==null;)Xm(gt)}function Ow(){for(;gt!==null&&!zi();)Xm(gt)}function Xm(n){var i=ng(n.alternate,n,hn);n.memoizedProps=n.pendingProps,i===null?Zm(n):gt=i,Kh.current=null}function Zm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=Rw(a,i,hn),a!==null){gt=a;return}}else{if(a=Aw(a,i),a!==null){a.flags&=32767,gt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,gt=null;return}}if(i=i.sibling,i!==null){gt=i;return}gt=i=n}while(i!==null);wt===0&&(wt=5)}function ls(n,i,a){var c=Le,d=vn.transition;try{vn.transition=null,Le=1,Mw(n,i,a,c)}finally{vn.transition=d,Le=c}return null}function Mw(n,i,a,c){do po();while(mi!==null);if((Me&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Bc(n,p),n===It&&(gt=It=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Tu||(Tu=!0,rg(Bi,function(){return po(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=vn.transition,vn.transition=null;var w=Le;Le=1;var C=Me;Me|=4,Kh.current=null,Nw(n,a),$m(a,n),rw(nh),Tr=!!th,nh=th=null,n.current=a,Dw(a),vr(),Me=C,Le=w,vn.transition=p}else n.current=a;if(Tu&&(Tu=!1,mi=n,Su=d),p=n.pendingLanes,p===0&&(pi=null),bl(a.stateNode),Zt(n,Ye()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Eu)throw Eu=!1,n=Yh,Yh=null,n;return(Su&1)!==0&&n.tag!==0&&po(),p=n.pendingLanes,(p&1)!==0?n===Jh?Da++:(Da=0,Jh=n):Da=0,ci(),null}function po(){if(mi!==null){var n=qn(Su),i=vn.transition,a=Le;try{if(vn.transition=null,Le=16>n?16:n,mi===null)var c=!1;else{if(n=mi,mi=null,Su=0,(Me&6)!==0)throw Error(t(331));var d=Me;for(Me|=4,ue=n.current;ue!==null;){var p=ue,w=p.child;if((ue.flags&16)!==0){var C=p.deletions;if(C!==null){for(var N=0;N<C.length;N++){var $=C[N];for(ue=$;ue!==null;){var Z=ue;switch(Z.tag){case 0:case 11:case 15:Aa(8,Z,p)}var te=Z.child;if(te!==null)te.return=Z,ue=te;else for(;ue!==null;){Z=ue;var X=Z.sibling,ae=Z.return;if(jm(Z),Z===$){ue=null;break}if(X!==null){X.return=ae,ue=X;break}ue=ae}}}var ce=p.alternate;if(ce!==null){var fe=ce.child;if(fe!==null){ce.child=null;do{var dt=fe.sibling;fe.sibling=null,fe=dt}while(fe!==null)}}ue=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ue=w;else e:for(;ue!==null;){if(p=ue,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Aa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,ue=F;break e}ue=p.return}}var L=n.current;for(ue=L;ue!==null;){w=ue;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ue=z;else e:for(w=L;ue!==null;){if(C=ue,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:vu(9,C)}}catch(pe){ut(C,C.return,pe)}if(C===w){ue=null;break e}var ne=C.sibling;if(ne!==null){ne.return=C.return,ue=ne;break e}ue=C.return}}if(Me=d,ci(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot($i,n)}catch{}c=!0}return c}finally{Le=a,vn.transition=i}}return!1}function eg(n,i,a){i=uo(a,i),i=vm(n,i,1),n=di(n,i,1),i=Gt(),n!==null&&(Ki(n,1,i),Zt(n,i))}function ut(n,i,a){if(n.tag===3)eg(n,n,a);else for(;i!==null;){if(i.tag===3){eg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(pi===null||!pi.has(c))){n=uo(a,n),n=_m(i,n,1),i=di(i,n,1),n=Gt(),i!==null&&(Ki(i,1,n),Zt(i,n));break}}i=i.return}}function jw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Gt(),n.pingedLanes|=n.suspendedLanes&a,It===n&&(Nt&a)===a&&(wt===4||wt===3&&(Nt&130023424)===Nt&&500>Ye()-Qh?as(n,0):Gh|=a),Zt(n,i)}function tg(n,i){i===0&&((n.mode&1)===0?i=1:(i=ei,ei<<=1,(ei&130023424)===0&&(ei=4194304)));var a=Gt();n=Ar(n,i),n!==null&&(Ki(n,i,a),Zt(n,a))}function Fw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),tg(n,a)}function Uw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),tg(n,a)}var ng;ng=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Qt.current)Jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Jt=!1,xw(n,i,a);Jt=(n.flags&131072)!==0}else Jt=!1,et&&(i.flags&1048576)!==0&&Vp(i,tu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;gu(n,i),n=i.pendingProps;var d=to(i,jt.current);ao(i,a),d=Ch(null,i,c,n,d,a);var p=xh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(c)?(p=!0,Xl(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,_h(i),d.updater=pu,i.stateNode=d,d._reactInternals=i,bh(i,c,n,a),i=Mh(null,i,c,!0,p,a)):(i.tag=0,et&&p&&uh(i),Kt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(gu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=Bw(c),n=Nn(c,n),d){case 0:i=Oh(null,i,c,n,a);break e;case 1:i=Rm(null,i,c,n,a);break e;case 11:i=Sm(null,i,c,n,a);break e;case 14:i=Im(null,i,c,Nn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),Oh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),Rm(n,i,c,d,a);case 3:e:{if(Am(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,Hp(n,i),au(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=uo(Error(t(423)),i),i=Pm(n,i,c,a,d);break e}else if(c!==d){d=uo(Error(t(424)),i),i=Pm(n,i,c,a,d);break e}else for(cn=ai(i.stateNode.containerInfo.firstChild),un=i,et=!0,Pn=null,a=Bp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(io(),c===d){i=Nr(n,i,a);break e}Kt(n,i,c,a)}i=i.child}return i;case 5:return Kp(i),n===null&&dh(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,rh(c,d)?w=null:p!==null&&rh(c,p)&&(i.flags|=32),xm(n,i),Kt(n,i,w,a),i.child;case 6:return n===null&&dh(i),null;case 13:return Nm(n,i,a);case 4:return wh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=so(i,null,c,a):Kt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),Sm(n,i,c,d,a);case 7:return Kt(n,i,i.pendingProps,a),i.child;case 8:return Kt(n,i,i.pendingProps.children,a),i.child;case 12:return Kt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Qe(iu,c._currentValue),c._currentValue=w,p!==null)if(An(p.value,w)){if(p.children===d.children&&!Qt.current){i=Nr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var C=p.dependencies;if(C!==null){w=p.child;for(var N=C.firstContext;N!==null;){if(N.context===c){if(p.tag===1){N=Pr(-1,a&-a),N.tag=2;var $=p.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?N.next=N:(N.next=Z.next,Z.next=N),$.pending=N}}p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),yh(p.return,a,i),C.lanes|=a;break}N=N.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),yh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Kt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,ao(i,a),d=gn(d),c=c(d),i.flags|=1,Kt(n,i,c,a),i.child;case 14:return c=i.type,d=Nn(c,i.pendingProps),d=Nn(c.type,d),Im(n,i,c,d,a);case 15:return km(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),gu(n,i),i.tag=1,Yt(c)?(n=!0,Xl(i)):n=!1,ao(i,a),gm(i,c,d),bh(i,c,d,a),Mh(null,i,c,!0,n,a);case 19:return bm(n,i,a);case 22:return Cm(n,i,a)}throw Error(t(156,i.tag))};function rg(n,i){return Qo(n,i)}function zw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,i,a,c){return new zw(n,i,a,c)}function rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Bw(n){if(typeof n=="function")return rd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===at)return 14}return 2}function vi(n,i){var a=n.alternate;return a===null?(a=_n(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function xu(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")rd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case x:return us(a.children,d,p,i);case I:w=8,d|=8;break;case R:return n=_n(12,a,i,d|2),n.elementType=R,n.lanes=p,n;case A:return n=_n(13,a,i,d),n.elementType=A,n.lanes=p,n;case ze:return n=_n(19,a,i,d),n.elementType=ze,n.lanes=p,n;case We:return Ru(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case D:w=9;break e;case j:w=11;break e;case at:w=14;break e;case tt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=_n(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function us(n,i,a,c){return n=_n(7,n,c,i),n.lanes=a,n}function Ru(n,i,a,c){return n=_n(22,n,c,i),n.elementType=We,n.lanes=a,n.stateNode={isHidden:!1},n}function id(n,i,a){return n=_n(6,n,null,i),n.lanes=a,n}function sd(n,i,a){return i=_n(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function $w(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function od(n,i,a,c,d,p,w,C,N){return n=new $w(n,i,a,C,N),i===1?(i=1,p===!0&&(i|=8)):i=0,p=_n(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(p),n}function Hw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function ig(n){if(!n)return ui;n=n._reactInternals;e:{if(xn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Yt(a))return Dp(n,a,i)}return i}function sg(n,i,a,c,d,p,w,C,N){return n=od(a,c,!0,n,d,p,w,C,N),n.context=ig(null),a=n.current,c=Gt(),d=gi(a),p=Pr(c,d),p.callback=i??null,di(a,p,d),n.current.lanes=d,Ki(n,d,c),Zt(n,c),n}function Au(n,i,a,c){var d=i.current,p=Gt(),w=gi(d);return a=ig(a),i.context===null?i.context=a:i.pendingContext=a,i=Pr(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=di(d,i,w),n!==null&&(Ln(n,d,w,p),ou(n,d,w)),w}function Pu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function og(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ad(n,i){og(n,i),(n=n.alternate)&&og(n,i)}function Ww(){return null}var ag=typeof reportError=="function"?reportError:function(n){console.error(n)};function ld(n){this._internalRoot=n}Nu.prototype.render=ld.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Au(n,i,null,null)},Nu.prototype.unmount=ld.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;os(function(){Au(null,n,null,null)}),i[kr]=null}};function Nu(n){this._internalRoot=n}Nu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ia();n={blockedOn:null,target:n,priority:i};for(var a=0;a<sn.length&&i!==0&&i<sn[a].priority;a++);sn.splice(a,0,n),a===0&&Fs(n)}};function ud(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Du(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lg(){}function qw(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var $=Pu(w);p.call($)}}var w=sg(i,c,n,0,null,!1,!1,"",lg);return n._reactRootContainer=w,n[kr]=w.current,ga(n.nodeType===8?n.parentNode:n),os(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var $=Pu(N);C.call($)}}var N=od(n,0,!1,null,null,!1,!1,"",lg);return n._reactRootContainer=N,n[kr]=N.current,ga(n.nodeType===8?n.parentNode:n),os(function(){Au(i,N,a,c)}),N}function bu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var C=d;d=function(){var N=Pu(w);C.call(N)}}Au(i,w,n,d)}else w=qw(a,i,n,d,c);return Pu(w)}na=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ue(i.pendingLanes);a!==0&&(ta(i,a|1),Zt(i,Ye()),(Me&6)===0&&(fo=Ye()+500,ci()))}break;case 13:os(function(){var c=Ar(n,1);if(c!==null){var d=Gt();Ln(c,n,1,d)}}),ad(n,1)}},Ms=function(n){if(n.tag===13){var i=Ar(n,134217728);if(i!==null){var a=Gt();Ln(i,n,134217728,a)}ad(n,134217728)}},ra=function(n){if(n.tag===13){var i=gi(n),a=Ar(n,i);if(a!==null){var c=Gt();Ln(a,n,i,c)}ad(n,i)}},ia=function(){return Le},sa=function(n,i){var a=Le;try{return Le=n,i()}finally{Le=a}},mr=function(n,i,a){switch(i){case"input":if(Mi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Yl(c);if(!d)throw Error(t(90));Uo(c),Mi(c,d)}}}break;case"textarea":El(n,a);break;case"select":i=a.value,i!=null&&kn(n,!!a.multiple,i,!1)}},Il=ed,kl=os;var Kw={usingClientEntryPoint:!1,Events:[_a,Zs,Yl,Yr,Jr,ed]},ba={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gw={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Dl(n),n===null?null:n.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||Ww,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{$i=Lu.inject(Gw),nn=Lu}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kw,en.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(i))throw Error(t(200));return Hw(n,i,null,a)},en.createRoot=function(n,i){if(!ud(n))throw Error(t(299));var a=!1,c="",d=ag;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=od(n,1,!1,null,null,a,!1,c,d),n[kr]=i.current,ga(n.nodeType===8?n.parentNode:n),new ld(i)},en.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Dl(i),n=n===null?null:n.stateNode,n},en.flushSync=function(n){return os(n)},en.hydrate=function(n,i,a){if(!Du(i))throw Error(t(200));return bu(null,n,i,!0,a)},en.hydrateRoot=function(n,i,a){if(!ud(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=ag;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=sg(i,null,n,1,a??null,d,!1,p,w),n[kr]=i.current,ga(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Nu(i)},en.render=function(n,i,a){if(!Du(i))throw Error(t(200));return bu(null,n,i,!1,a)},en.unmountComponentAtNode=function(n){if(!Du(n))throw Error(t(40));return n._reactRootContainer?(os(function(){bu(null,null,n,!1,function(){n._reactRootContainer=null,n[kr]=null})}),!0):!1},en.unstable_batchedUpdates=ed,en.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Du(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return bu(n,i,a,!1,c)},en.version="18.3.1-next-f1338f8080-20240426",en}var gg;function nE(){if(gg)return dd.exports;gg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dd.exports=tE(),dd.exports}var yg;function rE(){if(yg)return Vu;yg=1;var r=nE();return Vu.createRoot=r.createRoot,Vu.hydrateRoot=r.hydrateRoot,Vu}var iE=rE();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vg="popstate";function sE(r={}){function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Es(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Pd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:Qa(l))}function s(o,l){Tn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return aE(e,t,s,r)}function st(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Tn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oE(){return Math.random().toString(36).substring(2,10)}function _g(r,e){return{usr:r.state,key:r.key,idx:e}}function Pd(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Es(e):e,state:t,key:e&&e.key||s||oE()}}function Qa({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Es(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function aE(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f="POP",g=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function T(){f="POP";let V=E(),J=V==null?null:V-y;y=V,g&&g({action:f,location:B.location,delta:J})}function k(V,J){f="PUSH";let G=Pd(B.location,V,J);t&&t(G,V),y=E()+1;let Q=_g(G,y),oe=B.createHref(G);try{h.pushState(Q,"",oe)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;o.location.assign(oe)}l&&g&&g({action:f,location:B.location,delta:1})}function P(V,J){f="REPLACE";let G=Pd(B.location,V,J);t&&t(G,V),y=E();let Q=_g(G,y),oe=B.createHref(G);h.replaceState(Q,"",oe),l&&g&&g({action:f,location:B.location,delta:0})}function W(V){return lE(V)}let B={get action(){return f},get location(){return r(o,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(vg,T),g=V,()=>{o.removeEventListener(vg,T),g=null}},createHref(V){return e(o,V)},createURL:W,encodeLocation(V){let J=W(V);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:k,replace:P,go(V){return h.go(V)}};return B}function lE(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Qa(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Gy(r,e,t="/"){return uE(r,e,t,!1)}function uE(r,e,t,s){let o=typeof e=="string"?Es(e):e,l=jr(o.pathname||"/",t);if(l==null)return null;let h=Qy(r);cE(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=EE(l);f=_E(h[g],y,s)}return f}function Qy(r,e=[],t=[],s="",o=!1){let l=(h,f,g=o,y)=>{let E={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&g)return;st(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=Or([s,E.relativePath]),k=t.concat(E);h.children&&h.children.length>0&&(st(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Qy(h.children,e,k,T,g)),!(h.path==null&&!h.index)&&e.push({path:T,score:yE(T,h.index),routesMeta:k})};return r.forEach((h,f)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))l(h,f);else for(let y of Yy(h.path))l(h,f,!0,y)}),e}function Yy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Yy(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function cE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:vE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var hE=/^:[\w-]+$/,dE=3,fE=2,pE=1,mE=10,gE=-2,wg=r=>r==="*";function yE(r,e){let t=r.split("/"),s=t.length;return t.some(wg)&&(s+=gE),e&&(s+=fE),t.filter(o=>!wg(o)).reduce((o,l)=>o+(hE.test(l)?dE:l===""?pE:mE),s)}function vE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function _E(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=tc({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},E),k=g.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=tc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Or([l,T.pathname]),pathnameBase:kE(Or([l,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(l=Or([l,T.pathnameBase]))}return h}function tc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=wE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:T},k)=>{if(E==="*"){let W=f[k]||"";h=l.slice(0,l.length-W.length).replace(/(.)\/+$/,"$1")}const P=f[k];return T&&!P?y[E]=void 0:y[E]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function wE(r,e=!1,t=!0){Tn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function EE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function jr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}var Jy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TE=r=>Jy.test(r);function SE(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Es(r):r,l;if(t)if(TE(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Tn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${t}`)}t.startsWith("/")?l=Eg(t.substring(1),"/"):l=Eg(t,e)}else l=e;return{pathname:l,search:CE(s),hash:xE(o)}}function Eg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function md(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xy(r){let e=IE(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Zy(r,e,t,s=!1){let o;typeof r=="string"?o=Es(r):(o={...r},st(!o.pathname||!o.pathname.includes("?"),md("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),md("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),md("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),T-=1;o.pathname=k.join("/")}f=T>=0?e[T]:"/"}let g=SE(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||E)&&(g.pathname+="/"),g}var Or=r=>r.join("/").replace(/\/\/+/g,"/"),kE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),CE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,xE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,RE=class{constructor(r,e,t,s=!1){this.status=r,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function AE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function PE(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tv(r,e){let t=r;if(typeof t!="string"||!Jy.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,o=!1;if(ev)try{let l=new URL(window.location.href),h=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=jr(h.pathname,e);h.origin===l.origin&&f!=null?t=f+h.search+h.hash:o=!0}catch{Tn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nv=["POST","PUT","PATCH","DELETE"];new Set(nv);var NE=["GET",...nv];new Set(NE);var Do=M.createContext(null);Do.displayName="DataRouter";var Sc=M.createContext(null);Sc.displayName="DataRouterState";var DE=M.createContext(!1),rv=M.createContext({isTransitioning:!1});rv.displayName="ViewTransition";var bE=M.createContext(new Map);bE.displayName="Fetchers";var LE=M.createContext(null);LE.displayName="Await";var In=M.createContext(null);In.displayName="Navigation";var al=M.createContext(null);al.displayName="Location";var pr=M.createContext({outlet:null,matches:[],isDataRoute:!1});pr.displayName="Route";var sf=M.createContext(null);sf.displayName="RouteError";var iv="REACT_ROUTER_ERROR",VE="REDIRECT",OE="ROUTE_ERROR_RESPONSE";function ME(r){if(r.startsWith(`${iv}:${VE}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jE(r){if(r.startsWith(`${iv}:${OE}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new RE(e.status,e.statusText,e.data)}catch{}}function FE(r,{relative:e}={}){st(ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=M.useContext(In),{hash:o,pathname:l,search:h}=ul(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Or([t,l])),s.createHref({pathname:f,search:h,hash:o})}function ll(){return M.useContext(al)!=null}function Oi(){return st(ll(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(al).location}var sv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ov(r){M.useContext(In).static||M.useLayoutEffect(r)}function zn(){let{isDataRoute:r}=M.useContext(pr);return r?ZE():UE()}function UE(){st(ll(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(Do),{basename:e,navigator:t}=M.useContext(In),{matches:s}=M.useContext(pr),{pathname:o}=Oi(),l=JSON.stringify(Xy(s)),h=M.useRef(!1);return ov(()=>{h.current=!0}),M.useCallback((g,y={})=>{if(Tn(h.current,sv),!h.current)return;if(typeof g=="number"){t.go(g);return}let E=Zy(g,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Or([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,r])}M.createContext(null);function zE(){let{matches:r}=M.useContext(pr),e=r[r.length-1];return e?e.params:{}}function ul(r,{relative:e}={}){let{matches:t}=M.useContext(pr),{pathname:s}=Oi(),o=JSON.stringify(Xy(t));return M.useMemo(()=>Zy(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function BE(r,e){return av(r,e)}function av(r,e,t,s,o){var G;st(ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(In),{matches:h}=M.useContext(pr),f=h[h.length-1],g=f?f.params:{},y=f?f.pathname:"/",E=f?f.pathnameBase:"/",T=f&&f.route;{let Q=T&&T.path||"";uv(y,!T||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let k=Oi(),P;if(e){let Q=typeof e=="string"?Es(e):e;st(E==="/"||((G=Q.pathname)==null?void 0:G.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),P=Q}else P=k;let W=P.pathname||"/",B=W;if(E!=="/"){let Q=E.replace(/^\//,"").split("/");B="/"+W.replace(/^\//,"").split("/").slice(Q.length).join("/")}let V=Gy(r,{pathname:B});Tn(T||V!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Tn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=KE(V&&V.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:Or([E,l.encodeLocation?l.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?E:Or([E,l.encodeLocation?l.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),h,t,s,o);return e&&J?M.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},J):J}function $E(){let r=XE(),e=AE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:o},t):null,h)}var HE=M.createElement($E,null),lv=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=jE(r.digest);t&&(r=t)}let e=r!==void 0?M.createElement(pr.Provider,{value:this.props.routeContext},M.createElement(sf.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?M.createElement(WE,{error:r},e):e}};lv.contextType=DE;var gd=new WeakMap;function WE({children:r,error:e}){let{basename:t}=M.useContext(In);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=ME(e.digest);if(s){let o=gd.get(e);if(o)throw o;let l=tv(s.location,t);if(ev&&!gd.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw gd.set(e,h),h}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function qE({routeContext:r,match:e,children:t}){let s=M.useContext(Do);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(pr.Provider,{value:r},t)}function KE(r,e=[],t=null,s=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,h=t==null?void 0:t.errors;if(h!=null){let E=l.findIndex(T=>T.route.id&&(h==null?void 0:h[T.route.id])!==void 0);st(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,E+1))}let f=!1,g=-1;if(t)for(let E=0;E<l.length;E++){let T=l[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=E),T.route.id){let{loaderData:k,errors:P}=t,W=T.route.loader&&!k.hasOwnProperty(T.route.id)&&(!P||P[T.route.id]===void 0);if(T.route.lazy||W){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let y=t&&s?(E,T)=>{var k,P;s(E,{location:t.location,params:((P=(k=t.matches)==null?void 0:k[0])==null?void 0:P.params)??{},unstable_pattern:PE(t.matches),errorInfo:T})}:void 0;return l.reduceRight((E,T,k)=>{let P,W=!1,B=null,V=null;t&&(P=h&&T.route.id?h[T.route.id]:void 0,B=T.route.errorElement||HE,f&&(g<0&&k===0?(uv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,V=null):g===k&&(W=!0,V=T.route.hydrateFallbackElement||null)));let J=e.concat(l.slice(0,k+1)),G=()=>{let Q;return P?Q=B:W?Q=V:T.route.Component?Q=M.createElement(T.route.Component,null):T.route.element?Q=T.route.element:Q=E,M.createElement(qE,{match:T,routeContext:{outlet:E,matches:J,isDataRoute:t!=null},children:Q})};return t&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?M.createElement(lv,{location:t.location,revalidation:t.revalidation,component:B,error:P,children:G(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:y}):G()},null)}function of(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GE(r){let e=M.useContext(Do);return st(e,of(r)),e}function QE(r){let e=M.useContext(Sc);return st(e,of(r)),e}function YE(r){let e=M.useContext(pr);return st(e,of(r)),e}function af(r){let e=YE(r),t=e.matches[e.matches.length-1];return st(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function JE(){return af("useRouteId")}function XE(){var s;let r=M.useContext(sf),e=QE("useRouteError"),t=af("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function ZE(){let{router:r}=GE("useNavigate"),e=af("useNavigate"),t=M.useRef(!1);return ov(()=>{t.current=!0}),M.useCallback(async(o,l={})=>{Tn(t.current,sv),t.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Tg={};function uv(r,e,t){!e&&!Tg[r]&&(Tg[r]=!0,Tn(!1,t))}M.memo(eT);function eT({routes:r,future:e,state:t,onError:s}){return av(r,void 0,t,s,e)}function Vn(r){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tT({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1,unstable_useTransitions:h}){st(!ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),g=M.useMemo(()=>({basename:f,navigator:o,static:l,unstable_useTransitions:h,future:{}}),[f,o,l,h]);typeof t=="string"&&(t=Es(t));let{pathname:y="/",search:E="",hash:T="",state:k=null,key:P="default"}=t,W=M.useMemo(()=>{let B=jr(y,f);return B==null?null:{location:{pathname:B,search:E,hash:T,state:k,key:P},navigationType:s}},[f,y,E,T,k,P,s]);return Tn(W!=null,`<Router basename="${f}"> is not able to match the URL "${y}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:M.createElement(In.Provider,{value:g},M.createElement(al.Provider,{children:e,value:W}))}function nT({children:r,location:e}){return BE(Nd(r),e)}function Nd(r,e=[]){let t=[];return M.Children.forEach(r,(s,o)=>{if(!M.isValidElement(s))return;let l=[...e,o];if(s.type===M.Fragment){t.push.apply(t,Nd(s.props.children,l));return}st(s.type===Vn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Nd(s.props.children,l)),t.push(h)}),t}var $u="get",Hu="application/x-www-form-urlencoded";function Ic(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function rT(r){return Ic(r)&&r.tagName.toLowerCase()==="button"}function iT(r){return Ic(r)&&r.tagName.toLowerCase()==="form"}function sT(r){return Ic(r)&&r.tagName.toLowerCase()==="input"}function oT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function aT(r,e){return r.button===0&&(!e||e==="_self")&&!oT(r)}var Ou=null;function lT(){if(Ou===null)try{new FormData(document.createElement("form"),0),Ou=!1}catch{Ou=!0}return Ou}var uT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yd(r){return r!=null&&!uT.has(r)?(Tn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hu}"`),null):r}function cT(r,e){let t,s,o,l,h;if(iT(r)){let f=r.getAttribute("action");s=f?jr(f,e):null,t=r.getAttribute("method")||$u,o=yd(r.getAttribute("enctype"))||Hu,l=new FormData(r)}else if(rT(r)||sT(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||f.getAttribute("action");if(s=g?jr(g,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||$u,o=yd(r.getAttribute("formenctype"))||yd(f.getAttribute("enctype"))||Hu,l=new FormData(f,r),!lT()){let{name:y,type:E,value:T}=r;if(E==="image"){let k=y?`${y}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else y&&l.append(y,T)}}else{if(Ic(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$u,s=null,o=Hu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function hT(r,e,t,s){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&jr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function dT(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function pT(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await dT(l,t);return h.links?h.links():[]}return[]}));return vT(s.flat(1).filter(fT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Sg(r,e,t,s,o,l){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,f=(g,y)=>{var E;return t[y].pathname!==g.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,y)=>h(g,y)||f(g,y)):l==="data"?e.filter((g,y)=>{var T;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,y)||f(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function mT(r,e,{includeHydrateFallback:t}={}){return gT(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function gT(r){return[...new Set(r)]}function yT(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function vT(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(yT(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function cv(){let r=M.useContext(Do);return lf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function _T(){let r=M.useContext(Sc);return lf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var uf=M.createContext(void 0);uf.displayName="FrameworkContext";function hv(){let r=M.useContext(uf);return lf(r,"You must render this element inside a <HydratedRouter> element"),r}function wT(r,e){let t=M.useContext(uf),[s,o]=M.useState(!1),[l,h]=M.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,k=M.useRef(null);M.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let B=J=>{J.forEach(G=>{h(G.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return k.current&&V.observe(k.current),()=>{V.disconnect()}}},[r]),M.useEffect(()=>{if(s){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[s]);let P=()=>{o(!0)},W=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,k,{}]:[l,k,{onFocus:Va(f,P),onBlur:Va(g,W),onMouseEnter:Va(y,P),onMouseLeave:Va(E,W),onTouchStart:Va(T,P)}]:[!1,k,{}]}function Va(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function ET({page:r,...e}){let{router:t}=cv(),s=M.useMemo(()=>Gy(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?M.createElement(ST,{page:r,matches:s,...e}):null}function TT(r){let{manifest:e,routeModules:t}=hv(),[s,o]=M.useState([]);return M.useEffect(()=>{let l=!1;return pT(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function ST({page:r,matches:e,...t}){let s=Oi(),{future:o,manifest:l,routeModules:h}=hv(),{basename:f}=cv(),{loaderData:g,matches:y}=_T(),E=M.useMemo(()=>Sg(r,e,y,l,s,"data"),[r,e,y,l,s]),T=M.useMemo(()=>Sg(r,e,y,l,s,"assets"),[r,e,y,l,s]),k=M.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let B=new Set,V=!1;if(e.forEach(G=>{var oe;let Q=l.routes[G.route.id];!Q||!Q.hasLoader||(!E.some(he=>he.route.id===G.route.id)&&G.route.id in g&&((oe=h[G.route.id])!=null&&oe.shouldRevalidate)||Q.hasClientLoader?V=!0:B.add(G.route.id))}),B.size===0)return[];let J=hT(r,f,o.unstable_trailingSlashAwareDataRequests,"data");return V&&B.size>0&&J.searchParams.set("_routes",e.filter(G=>B.has(G.route.id)).map(G=>G.route.id).join(",")),[J.pathname+J.search]},[f,o.unstable_trailingSlashAwareDataRequests,g,s,l,E,e,r,h]),P=M.useMemo(()=>mT(T,l),[T,l]),W=TT(T);return M.createElement(M.Fragment,null,k.map(B=>M.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),P.map(B=>M.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),W.map(({key:B,link:V})=>M.createElement("link",{key:B,nonce:t.nonce,...V})))}function IT(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kT&&(window.__reactRouterVersion="7.12.0")}catch{}function CT({basename:r,children:e,unstable_useTransitions:t,window:s}){let o=M.useRef();o.current==null&&(o.current=sE({window:s,v5Compat:!0}));let l=o.current,[h,f]=M.useState({action:l.action,location:l.location}),g=M.useCallback(y=>{t===!1?f(y):M.startTransition(()=>f(y))},[t]);return M.useLayoutEffect(()=>l.listen(g),[l,g]),M.createElement(tT,{basename:r,children:e,location:h.location,navigationType:h.action,navigator:l,unstable_useTransitions:t})}var dv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ya=M.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W){let{basename:B,unstable_useTransitions:V}=M.useContext(In),J=typeof y=="string"&&dv.test(y),G=tv(y,B);y=G.to;let Q=FE(y,{relative:o}),[oe,he,K]=wT(s,P),x=PT(y,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:k,unstable_useTransitions:V});function I(b){e&&e(b),b.defaultPrevented||x(b)}let R=M.createElement("a",{...P,...K,href:G.absoluteURL||Q,onClick:G.isExternal||l?e:I,ref:IT(W,he),target:g,"data-discover":!J&&t==="render"?"true":void 0});return oe&&!J?M.createElement(M.Fragment,null,R,M.createElement(ET,{page:Q})):R});Ya.displayName="Link";var xT=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:f,children:g,...y},E){let T=ul(h,{relative:y.relative}),k=Oi(),P=M.useContext(Sc),{navigator:W,basename:B}=M.useContext(In),V=P!=null&&VT(T)&&f===!0,J=W.encodeLocation?W.encodeLocation(T).pathname:T.pathname,G=k.pathname,Q=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(G=G.toLowerCase(),Q=Q?Q.toLowerCase():null,J=J.toLowerCase()),Q&&B&&(Q=jr(Q,B)||Q);const oe=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let he=G===J||!o&&G.startsWith(J)&&G.charAt(oe)==="/",K=Q!=null&&(Q===J||!o&&Q.startsWith(J)&&Q.charAt(J.length)==="/"),x={isActive:he,isPending:K,isTransitioning:V},I=he?e:void 0,R;typeof s=="function"?R=s(x):R=[s,he?"active":null,K?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let b=typeof l=="function"?l(x):l;return M.createElement(Ya,{...y,"aria-current":I,className:R,ref:E,style:b,to:h,viewTransition:f},typeof g=="function"?g(x):g)});xT.displayName="NavLink";var RT=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=$u,action:f,onSubmit:g,relative:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W)=>{let{unstable_useTransitions:B}=M.useContext(In),V=bT(),J=LT(f,{relative:y}),G=h.toLowerCase()==="get"?"get":"post",Q=typeof f=="string"&&dv.test(f),oe=he=>{if(g&&g(he),he.defaultPrevented)return;he.preventDefault();let K=he.nativeEvent.submitter,x=(K==null?void 0:K.getAttribute("formmethod"))||h,I=()=>V(K||he.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:k});B&&t!==!1?M.startTransition(()=>I()):I()};return M.createElement("form",{ref:W,method:G,action:J,onSubmit:s?g:oe,...P,"data-discover":!Q&&r==="render"?"true":void 0})});RT.displayName="Form";function AT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fv(r){let e=M.useContext(Do);return st(e,AT(r)),e}function PT(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:g}={}){let y=zn(),E=Oi(),T=ul(r,{relative:l});return M.useCallback(k=>{if(aT(k,e)){k.preventDefault();let P=t!==void 0?t:Qa(E)===Qa(T),W=()=>y(r,{replace:P,state:s,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:f});g?M.startTransition(()=>W()):W()}},[E,y,T,t,s,e,r,o,l,h,f,g])}var NT=0,DT=()=>`__${String(++NT)}__`;function bT(){let{router:r}=fv("useSubmit"),{basename:e}=M.useContext(In),t=JE(),s=r.fetch,o=r.navigate;return M.useCallback(async(l,h={})=>{let{action:f,method:g,encType:y,formData:E,body:T}=cT(l,e);if(h.navigate===!1){let k=h.fetcherKey||DT();await s(k,t,h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:T,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await o(h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:T,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[s,o,e,t])}function LT(r,{relative:e}={}){let{basename:t}=M.useContext(In),s=M.useContext(pr);st(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...ul(r||".",{relative:e})},h=Oi();if(r==null){l.search=h.search;let f=new URLSearchParams(l.search),g=f.getAll("index");if(g.some(E=>E==="")){f.delete("index"),g.filter(T=>T).forEach(T=>f.append("index",T));let E=f.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Or([t,l.pathname])),Qa(l)}function VT(r,{relative:e}={}){let t=M.useContext(rv);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=fv("useViewTransitionState"),o=ul(r,{relative:e});if(!t.isTransitioning)return!1;let l=jr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=jr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return tc(o.pathname,h)!=null||tc(o.pathname,l)!=null}/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pv=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=M.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...f},g)=>M.createElement("svg",{ref:g,...MT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:pv("lucide",o),...f},[...h.map(([y,E])=>M.createElement(y,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(r,e)=>{const t=M.forwardRef(({className:s,...o},l)=>M.createElement(jT,{ref:l,iconNode:e,className:pv(`lucide-${OT(r)}`,s),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],UT=Ge("Activity",FT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ms=Ge("ArrowLeft",zT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$T=Ge("ArrowRight",BT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]],WT=Ge("BatteryLow",HT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cf=Ge("Calendar",qT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],GT=Ge("Camera",KT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],YT=Ge("ChartNoAxesColumn",QT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mv=Ge("CircleAlert",JT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gv=Ge("CircleCheckBig",XT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],e1=Ge("Clock",ZT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],n1=Ge("Coffee",t1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],i1=Ge("Download",r1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],o1=Ge("House",s1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],l1=Ge("List",a1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],c1=Ge("Loader",u1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],yv=Ge("LogIn",h1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dd=Ge("Plus",d1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],p1=Ge("Save",f1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],vv=Ge("ShieldAlert",m1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],y1=Ge("Target",g1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],_1=Ge("TrendingUp",v1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E1=Ge("TriangleAlert",w1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],S1=Ge("Trophy",T1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],k1=Ge("Upload",I1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],x1=Ge("User",C1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_v=Ge("X",R1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wv=Ge("Zap",A1),P1=()=>{};var Ig={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},N1=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,E=l>>2,T=(l&3)<<4|f>>4;let k=(f&15)<<2|y>>6,P=y&63;g||(P=64,h||(k=64)),s.push(t[E],t[T],t[k],t[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ev(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):N1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new D1;const k=l<<2|f>>4;if(s.push(k),y!==64){const P=f<<4&240|y>>2;if(s.push(P),T!==64){const W=y<<6&192|T;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class D1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b1=function(r){const e=Ev(r);return Tv.encodeByteArray(e,!0)},nc=function(r){return b1(r).replace(/\./g,"")},Sv=function(r){try{return Tv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=()=>L1().__FIREBASE_DEFAULTS__,O1=()=>{if(typeof process>"u"||typeof Ig>"u")return;const r=Ig.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},M1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Sv(r[1]);return e&&JSON.parse(e)},kc=()=>{try{return P1()||V1()||O1()||M1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Iv=r=>{var e,t;return(t=(e=kc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},j1=r=>{const e=Iv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},kv=()=>{var r;return(r=kc())==null?void 0:r.config},Cv=r=>{var e;return(e=kc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[nc(JSON.stringify(t)),nc(JSON.stringify(h)),""].join(".")}const Ba={};function z1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ba))Ba[e]?r.emulator.push(e):r.prod.push(e);return r}function B1(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let kg=!1;function Rv(r,e){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||Ba[r]===e||Ba[r]||kg)return;Ba[r]=e;function t(k){return`__firebase__banner__${k}`}const s="__firebase__banner",l=z1().prod.length>0;function h(){const k=document.getElementById(s);k&&k.remove()}function f(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function g(k,P){k.setAttribute("width","24"),k.setAttribute("id",P),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function y(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{kg=!0,h()},k}function E(k,P){k.setAttribute("id",P),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function T(){const k=B1(s),P=t("text"),W=document.getElementById(P)||document.createElement("span"),B=t("learnmore"),V=document.getElementById(B)||document.createElement("a"),J=t("preprendIcon"),G=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const Q=k.element;f(Q),E(V,B);const oe=y();g(G,J),Q.append(G,W,V,oe),document.body.appendChild(Q)}l?(W.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function H1(){var e;const r=(e=kc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function K1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G1(){const r=Wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Q1(){return!H1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y1(){try{return typeof indexedDB=="object"}catch{return!1}}function J1(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="FirebaseError";class $r extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=X1,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Z1(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new $r(o,f,s)}}function Z1(r,e){return r.replace(eS,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const eS=/\{\$([^}]+)}/g;function tS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gs(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Cg(l)&&Cg(h)){if(!gs(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Cg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function nS(r,e){const t=new rS(r,e);return t.subscribe.bind(t)}class rS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");iS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=vd),o.error===void 0&&(o.error=vd),o.complete===void 0&&(o.complete=vd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iS(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(r){return r&&r._delegate?r._delegate:r}class ys{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new F1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aS(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oS(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oS(r){return r===cs?void 0:r}function aS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ne||(Ne={}));const uS={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},cS=Ne.INFO,hS={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},dS=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=hS[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hf{constructor(e){this.name=e,this._logLevel=cS,this._logHandler=dS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const fS=(r,e)=>e.some(t=>r instanceof t);let xg,Rg;function pS(){return xg||(xg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mS(){return Rg||(Rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Av=new WeakMap,bd=new WeakMap,Pv=new WeakMap,_d=new WeakMap,df=new WeakMap;function gS(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ki(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Av.set(t,r)}).catch(()=>{}),df.set(e,r),e}function yS(r){if(bd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});bd.set(r,e)}let Ld={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return bd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Pv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ki(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vS(r){Ld=r(Ld)}function _S(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(wd(this),e,...t);return Pv.set(s,e.sort?e.sort():[e]),ki(s)}:mS().includes(r)?function(...e){return r.apply(wd(this),e),ki(Av.get(this))}:function(...e){return ki(r.apply(wd(this),e))}}function wS(r){return typeof r=="function"?_S(r):(r instanceof IDBTransaction&&yS(r),fS(r,pS())?new Proxy(r,Ld):r)}function ki(r){if(r instanceof IDBRequest)return gS(r);if(_d.has(r))return _d.get(r);const e=wS(r);return e!==r&&(_d.set(r,e),df.set(e,r)),e}const wd=r=>df.get(r);function ES(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=ki(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ki(h.result),g.oldVersion,g.newVersion,ki(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const TS=["get","getKey","getAll","getAllKeys","count"],SS=["put","add","delete","clear"],Ed=new Map;function Ag(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=SS.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||TS.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Ed.set(e,l),l}vS(r=>({...r,get:(e,t,s)=>Ag(e,t)||r.get(e,t,s),has:(e,t)=>!!Ag(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kS(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function kS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vd="@firebase/app",Pg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new hf("@firebase/app"),CS="@firebase/app-compat",xS="@firebase/analytics-compat",RS="@firebase/analytics",AS="@firebase/app-check-compat",PS="@firebase/app-check",NS="@firebase/auth",DS="@firebase/auth-compat",bS="@firebase/database",LS="@firebase/data-connect",VS="@firebase/database-compat",OS="@firebase/functions",MS="@firebase/functions-compat",jS="@firebase/installations",FS="@firebase/installations-compat",US="@firebase/messaging",zS="@firebase/messaging-compat",BS="@firebase/performance",$S="@firebase/performance-compat",HS="@firebase/remote-config",WS="@firebase/remote-config-compat",qS="@firebase/storage",KS="@firebase/storage-compat",GS="@firebase/firestore",QS="@firebase/ai",YS="@firebase/firestore-compat",JS="firebase",XS="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="[DEFAULT]",ZS={[Vd]:"fire-core",[CS]:"fire-core-compat",[RS]:"fire-analytics",[xS]:"fire-analytics-compat",[PS]:"fire-app-check",[AS]:"fire-app-check-compat",[NS]:"fire-auth",[DS]:"fire-auth-compat",[bS]:"fire-rtdb",[LS]:"fire-data-connect",[VS]:"fire-rtdb-compat",[OS]:"fire-fn",[MS]:"fire-fn-compat",[jS]:"fire-iid",[FS]:"fire-iid-compat",[US]:"fire-fcm",[zS]:"fire-fcm-compat",[BS]:"fire-perf",[$S]:"fire-perf-compat",[HS]:"fire-rc",[WS]:"fire-rc-compat",[qS]:"fire-gcs",[KS]:"fire-gcs-compat",[GS]:"fire-fst",[YS]:"fire-fst-compat",[QS]:"fire-vertex","fire-js":"fire-js",[JS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,eI=new Map,Md=new Map;function Ng(r,e){try{r.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Io(r){const e=r.name;if(Md.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;Md.set(e,r);for(const t of rc.values())Ng(t,r);for(const t of eI.values())Ng(t,r);return!0}function ff(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new cl("app","Firebase",tI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=XS;function Nv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Od,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ci.create("bad-app-name",{appName:String(o)});if(t||(t=kv()),!t)throw Ci.create("no-options");const l=rc.get(o);if(l){if(gs(t,l.options)&&gs(s,l.config))return l;throw Ci.create("duplicate-app",{appName:o})}const h=new lS(o);for(const g of Md.values())h.addComponent(g);const f=new nI(t,s,h);return rc.set(o,f),f}function Dv(r=Od){const e=rc.get(r);if(!e&&r===Od&&kv())return Nv();if(!e)throw Ci.create("no-app",{appName:r});return e}function xi(r,e,t){let s=ZS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(h.join(" "));return}Io(new ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebase-heartbeat-database",iI=1,Ja="firebase-heartbeat-store";let Td=null;function bv(){return Td||(Td=ES(rI,iI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ja)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ci.create("idb-open",{originalErrorMessage:r.message})})),Td}async function sI(r){try{const t=(await bv()).transaction(Ja),s=await t.objectStore(Ja).get(Lv(r));return await t.done,s}catch(e){if(e instanceof $r)Fr.warn(e.message);else{const t=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(t.message)}}}async function Dg(r,e){try{const s=(await bv()).transaction(Ja,"readwrite");await s.objectStore(Ja).put(e,Lv(r)),await s.done}catch(t){if(t instanceof $r)Fr.warn(t.message);else{const s=Ci.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fr.warn(s.message)}}}function Lv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1024,aI=30;class lI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=bg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>aI){const h=hI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bg(),{heartbeatsToSend:s,unsentEntries:o}=uI(this._heartbeatsCache.heartbeats),l=nc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fr.warn(t),""}}}function bg(){return new Date().toISOString().substring(0,10)}function uI(r,e=oI){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Lg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Lg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class cI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y1()?J1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lg(r){return nc(JSON.stringify({version:2,heartbeats:r})).length}function hI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(r){Io(new ys("platform-logger",e=>new IS(e),"PRIVATE")),Io(new ys("heartbeat",e=>new lI(e),"PRIVATE")),xi(Vd,Pg,r),xi(Vd,Pg,"esm2020"),xi("fire-js","")}dI("");var fI="firebase",pI="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(fI,pI,"app");function Vv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mI=Vv,Ov=new cl("auth","Firebase",Vv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new hf("@firebase/auth");function gI(r,...e){ic.logLevel<=Ne.WARN&&ic.warn(`Auth (${Lo}): ${r}`,...e)}function Wu(r,...e){ic.logLevel<=Ne.ERROR&&ic.error(`Auth (${Lo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(r,...e){throw mf(r,...e)}function Fn(r,...e){return mf(r,...e)}function pf(r,e,t){const s={...mI(),[e]:t};return new cl("auth","Firebase",s).create(e,{appName:r.name})}function fs(r){return pf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&hr(r,"argument-error"),pf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Ov.create(r,...e)}function Ie(r,e,...t){if(!r)throw mf(e,...t)}function Lr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Wu(e),new Error(e)}function Ur(r,e){r||Lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function vI(){return Vg()==="http:"||Vg()==="https:"}function Vg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vI()||q1()||"connection"in navigator)?navigator.onLine:!0}function wI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=$1()||K1()}get(){return _I()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r,e){Ur(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SI=new dl(3e4,6e4);function yf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vo(r,e,t,s,o={}){return jv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=hl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return W1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&bo(r.emulatorConfig.host)&&(y.credentials="include"),Mv.fetch()(await Fv(r,r.config.apiHost,t,f),y)})}async function jv(r,e,t){r._canInitEmulator=!1;const s={...EI,...e};try{const o=new kI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Mu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Mu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Mu(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw pf(r,E,y);hr(r,E)}}catch(o){if(o instanceof $r)throw o;hr(r,"network-request-failed",{message:String(o)})}}async function II(r,e,t,s,o={}){const l=await Vo(r,e,t,s,o);return"mfaPendingCredential"in l&&hr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Fv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?gf(r.config,o):`${r.config.apiScheme}://${o}`;return TI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class kI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),SI.get())})}}function Mu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(r,e){return Vo(r,"POST","/v1/accounts:delete",e)}async function sc(r,e){return Vo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xI(r,e=!1){const t=Sn(r),s=await t.getIdToken(e),o=vf(s);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:$a(Sd(o.auth_time)),issuedAtTime:$a(Sd(o.iat)),expirationTime:$a(Sd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sd(r){return Number(r)*1e3}function vf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Sv(t);return o?JSON.parse(o):(Wu("Failed to decode base64 JWT payload"),null)}catch(o){return Wu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Og(r){const e=vf(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof $r&&RI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function RI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(r){var T;const e=r.auth,t=await r.getIdToken(),s=await Xa(r,sc(e,{idToken:t}));Ie(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?Uv(o.providerUserInfo):[],h=NI(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Fd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function PI(r){const e=Sn(r);await oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Uv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(r,e){const t=await jv(r,{},async()=>{const s=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Fv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&bo(r.emulatorConfig.host)&&(g.credentials="include"),Mv.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bI(r,e){return Vo(r,"POST","/v2/accounts:revokeToken",yf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Og(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Og(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await DI(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new _o;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Mn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new AI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xI(this,e)}reload(){return PI(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await oc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await Xa(this,CI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:P,providerData:W,stsTokenManager:B}=t;Ie(T&&B,e,"internal-error");const V=_o.fromJSON(this.name,B);Ie(typeof T=="string",e,"internal-error"),wi(s,e.name),wi(o,e.name),Ie(typeof k=="boolean",e,"internal-error"),Ie(typeof P=="boolean",e,"internal-error"),wi(l,e.name),wi(h,e.name),wi(f,e.name),wi(g,e.name),wi(y,e.name),wi(E,e.name);const J=new Mn({uid:T,auth:e,email:o,emailVerified:k,displayName:s,isAnonymous:P,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:V,createdAt:y,lastLoginAt:E});return W&&Array.isArray(W)&&(J.providerData=W.map(G=>({...G}))),g&&(J._redirectEventId=g),J}static async _fromIdTokenResponse(e,t,s=!1){const o=new _o;o.updateFromServerResponse(t);const l=new Mn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await oc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Uv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new _o;f.updateFromIdToken(s);const g=new Mn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Fd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=new Map;function Vr(r){Ur(r instanceof Function,"Expected a class definition");let e=Mg.get(r);return e?(Ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Mg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zv.type="NONE";const jg=zv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(r,e,t){return`firebase:${r}:${e}:${t}`}class wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sc(this.auth,{idToken:e}).catch(()=>{});return t?Mn._fromGetAccountInfoResponse(this.auth,t,e):null}return Mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wo(Vr(jg),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Vr(jg);const h=qu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){let T;if(typeof E=="string"){const k=await sc(e,{idToken:E}).catch(()=>{});if(!k)break;T=await Mn._fromGetAccountInfoResponse(e,k,E)}else T=Mn._fromJSON(e,E);y!==l&&(f=T),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new wo(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new wo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kv(e))return"Blackberry";if(Gv(e))return"Webos";if($v(e))return"Safari";if((e.includes("chrome/")||Hv(e))&&!e.includes("edge/"))return"Chrome";if(qv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Bv(r=Wt()){return/firefox\//i.test(r)}function $v(r=Wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hv(r=Wt()){return/crios\//i.test(r)}function Wv(r=Wt()){return/iemobile/i.test(r)}function qv(r=Wt()){return/android/i.test(r)}function Kv(r=Wt()){return/blackberry/i.test(r)}function Gv(r=Wt()){return/webos/i.test(r)}function _f(r=Wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LI(r=Wt()){var e;return _f(r)&&!!((e=window.navigator)!=null&&e.standalone)}function VI(){return G1()&&document.documentMode===10}function Qv(r=Wt()){return _f(r)||qv(r)||Gv(r)||Kv(r)||/windows phone/i.test(r)||Wv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r,e=[]){let t;switch(r){case"Browser":t=Fg(Wt());break;case"Worker":t=`${Fg(Wt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(r,e={}){return Vo(r,"GET","/v2/passwordPolicy",yf(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=6;class FI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ug(this),this.idTokenSubscription=new Ug(this),this.beforeStateQueue=new OI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ov,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sc(this,{idToken:e}),s=await Mn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(On(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(fs(this));const t=e?Sn(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MI(this),t=new FI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&gI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Cc(r){return Sn(r)}class Ug{constructor(e){this.auth=e,this.observer=null,this.addObserver=nS(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zI(r){wf=r}function BI(r){return wf.loadJS(r)}function $I(){return wf.gapiScript}function HI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r,e){const t=ff(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(gs(l,e??{}))return o;hr(o,"already-initialized")}return t.initialize({options:e})}function qI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Vr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function KI(r,e,t){const s=Cc(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Jv(e),{host:h,port:f}=GI(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(gs(y,s.config.emulator)&&gs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,bo(h)?(xv(`${l}//${h}${g}`),Rv("Auth",!0)):QI()}function Jv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GI(r){const e=Jv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:zg(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:zg(h)}}}function zg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function QI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,t){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e){return II(r,"POST","/v1/accounts:signInWithIdp",yf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="http://localhost";class vs extends Xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new vs(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Eo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:YI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Ef{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends fl{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return br.credential(t,s)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends fl{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends fl{constructor(){super("twitter.com")}static credential(e,t){return vs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Si.credential(t,s)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Mn._fromIdTokenResponse(e,s,o),h=Bg(s);return new ko({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Bg(s);return new ko({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Bg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends $r{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ac(e,t,s,o)}}function Zv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(r,l,e,s):l})}async function JI(r,e,t=!1){const s=await Xa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ko._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(r,e,t=!1){const{auth:s}=r;if(On(s.app))return Promise.reject(fs(s));const o="reauthenticate";try{const l=await Xa(r,Zv(s,o,e,r),t);Ie(l.idToken,s,"internal-error");const h=vf(l.idToken);Ie(h,s,"internal-error");const{sub:f}=h;return Ie(r.uid===f,s,"user-mismatch"),ko._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&hr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e,t=!1){if(On(r.app))return Promise.reject(fs(r));const s="signIn",o=await Zv(r,s,e),l=await ko._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function ek(r,e,t,s){return Sn(r).onIdTokenChanged(e,t,s)}function tk(r,e,t){return Sn(r).beforeAuthStateChanged(e,t)}function nk(r,e,t,s){return Sn(r).onAuthStateChanged(e,t,s)}function rk(r){return Sn(r).signOut()}const lc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=1e3,sk=10;class t_ extends e_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);VI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,sk):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}t_.type="LOCAL";const ok=t_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends e_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}n_.type="SESSION";const r_=n_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await ak(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Tf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const k=T;if(k.data.eventId===y)switch(k.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(k.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function uk(r){ar().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function ck(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function dk(){return i_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="firebaseLocalStorageDb",fk=1,uc="firebaseLocalStorage",o_="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rc(r,e){return r.transaction([uc],e?"readwrite":"readonly").objectStore(uc)}function pk(){const r=indexedDB.deleteDatabase(s_);return new pl(r).toPromise()}function Ud(){const r=indexedDB.open(s_,fk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(uc,{keyPath:o_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(uc)?e(s):(s.close(),await pk(),e(await Ud()))})})}async function $g(r,e,t){const s=Rc(r,!0).put({[o_]:e,value:t});return new pl(s).toPromise()}async function mk(r,e){const t=Rc(r,!1).get(e),s=await new pl(t).toPromise();return s===void 0?null:s.value}function Hg(r,e){const t=Rc(r,!0).delete(e);return new pl(t).toPromise()}const gk=800,yk=3;class a_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ud(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>yk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(dk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await ck(),!this.activeServiceWorker)return;this.sender=new lk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ud();return await $g(e,lc,"1"),await Hg(e,lc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>$g(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>mk(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Rc(o,!1).getAll();return new pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a_.type="LOCAL";const vk=a_;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r,e){return e?Vr(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _k(r){return ZI(r.auth,new Sf(r),r.bypassAuthState)}function wk(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),XI(t,new Sf(r),r.bypassAuthState)}async function Ek(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),JI(t,new Sf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _k;case"linkViaPopup":case"linkViaRedirect":return Ek;case"reauthViaPopup":case"reauthViaRedirect":return wk;default:hr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new dl(2e3,1e4);async function Sk(r,e,t){if(On(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const s=Cc(r);yI(r,e,Ef);const o=l_(s,t);return new hs(s,"signInViaPopup",e,o).executeNotNull()}class hs extends u_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Tf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tk.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="pendingRedirect",Ku=new Map;class kk extends u_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const s=await Ck(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ck(r,e){const t=Ak(e),s=Rk(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function xk(r,e){Ku.set(r._key(),e)}function Rk(r){return Vr(r._redirectPersistence)}function Ak(r){return qu(Ik,r.config.apiKey,r.name)}async function Pk(r,e,t=!1){if(On(r.app))return Promise.reject(fs(r));const s=Cc(r),o=l_(s,e),h=await new kk(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=600*1e3;class Dk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!c_(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wg(e))}saveEventToCache(e){this.cachedEventUids.add(Wg(e)),this.lastProcessedEventTime=Date.now()}}function Wg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function c_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(r,e={}){return Vo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ok=/^https?/;async function Mk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Lk(r);for(const t of e)try{if(jk(t))return}catch{}hr(r,"unauthorized-domain")}function jk(r){const e=jd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!Ok.test(t))return!1;if(Vk.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new dl(3e4,6e4);function qg(){const r=ar().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Uk(r){return new Promise((e,t)=>{var o,l,h;function s(){qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qg(),t(Fn(r,"network-request-failed"))},timeout:Fk.get()})}if((l=(o=ar().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=ar().gapi)!=null&&h.load)s();else{const f=HI("iframefcb");return ar()[f]=()=>{gapi.load?s():t(Fn(r,"network-request-failed"))},BI(`${$I()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Gu=null,e})}let Gu=null;function zk(r){return Gu=Gu||Uk(r),Gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new dl(5e3,15e3),$k="__/auth/iframe",Hk="emulator/auth/iframe",Wk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kk(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gf(e,Hk):`https://${r.config.authDomain}/${$k}`,s={apiKey:e.apiKey,appName:r.name,v:Lo},o=qk.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${hl(s).slice(1)}`}async function Gk(r){const e=await zk(r),t=ar().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:Kk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wk,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),f=ar().setTimeout(()=>{l(h)},Bk.get());function g(){ar().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yk=500,Jk=600,Xk="_blank",Zk="http://localhost";class Kg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eC(r,e,t,s=Yk,o=Jk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...Qk,width:s.toString(),height:o.toString(),top:l,left:h},y=Wt().toLowerCase();t&&(f=Hv(y)?Xk:t),Bv(y)&&(e=e||Zk,g.scrollbars="yes");const E=Object.entries(g).reduce((k,[P,W])=>`${k}${P}=${W},`,"");if(LI(y)&&f!=="_self")return tC(e||"",f),new Kg(null);const T=window.open(e||"",f,E);Ie(T,r,"popup-blocked");try{T.focus()}catch{}return new Kg(T)}function tC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="__/auth/handler",rC="emulator/auth/handler",iC=encodeURIComponent("fac");async function Gg(r,e,t,s,o,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Lo,eventId:o};if(e instanceof Ef){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",tS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof fl){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),y=g?`#${iC}=${encodeURIComponent(g)}`:"";return`${sC(r)}?${hl(f).slice(1)}${y}`}function sC({config:r}){return r.emulator?gf(r,rC):`https://${r.authDomain}/${nC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="webStorageSupport";class oC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r_,this._completeRedirectFn=Pk,this._overrideRedirectResult=xk}async _openPopup(e,t,s,o){var h;Ur((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Gg(e,t,s,jd(),o);return eC(e,l,Tf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Gg(e,t,s,jd(),o);return uk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Gk(e),s=new Dk(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Id,{type:Id},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Id];l!==void 0&&t(!!l),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Mk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qv()||$v()||_f()}}const aC=oC;var Qg="@firebase/auth",Yg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cC(r){Io(new ys("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yv(r)},y=new UI(s,o,l,g);return qI(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Io(new ys("auth-internal",e=>{const t=Cc(e.getProvider("auth").getImmediate());return(s=>new lC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(Qg,Yg,uC(r)),xi(Qg,Yg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=300,dC=Cv("authIdTokenMaxAge")||hC;let Jg=null;const fC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>dC)return;const o=t==null?void 0:t.token;Jg!==o&&(Jg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pC(r=Dv()){const e=ff(r,"auth");if(e.isInitialized())return e.getImmediate();const t=WI(r,{popupRedirectResolver:aC,persistence:[vk,ok,r_]}),s=Cv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=fC(l.toString());tk(t,h,()=>h(t.currentUser)),ek(t,f=>h(f))}}const o=Iv("auth");return o&&KI(t,`http://${o}`),t}function mC(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}zI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",mC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cC("Browser");var Xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,h_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function R(){}R.prototype=I.prototype,x.F=I.prototype,x.prototype=new R,x.prototype.constructor=x,x.D=function(b,D,j){for(var A=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)A[ze-2]=arguments[ze];return I.prototype[D].apply(b,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,I,R){R||(R=0);const b=Array(16);if(typeof I=="string")for(var D=0;D<16;++D)b[D]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(D=0;D<16;++D)b[D]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=x.g[0],R=x.g[1],D=x.g[2];let j=x.g[3],A;A=I+(j^R&(D^j))+b[0]+3614090360&4294967295,I=R+(A<<7&4294967295|A>>>25),A=j+(D^I&(R^D))+b[1]+3905402710&4294967295,j=I+(A<<12&4294967295|A>>>20),A=D+(R^j&(I^R))+b[2]+606105819&4294967295,D=j+(A<<17&4294967295|A>>>15),A=R+(I^D&(j^I))+b[3]+3250441966&4294967295,R=D+(A<<22&4294967295|A>>>10),A=I+(j^R&(D^j))+b[4]+4118548399&4294967295,I=R+(A<<7&4294967295|A>>>25),A=j+(D^I&(R^D))+b[5]+1200080426&4294967295,j=I+(A<<12&4294967295|A>>>20),A=D+(R^j&(I^R))+b[6]+2821735955&4294967295,D=j+(A<<17&4294967295|A>>>15),A=R+(I^D&(j^I))+b[7]+4249261313&4294967295,R=D+(A<<22&4294967295|A>>>10),A=I+(j^R&(D^j))+b[8]+1770035416&4294967295,I=R+(A<<7&4294967295|A>>>25),A=j+(D^I&(R^D))+b[9]+2336552879&4294967295,j=I+(A<<12&4294967295|A>>>20),A=D+(R^j&(I^R))+b[10]+4294925233&4294967295,D=j+(A<<17&4294967295|A>>>15),A=R+(I^D&(j^I))+b[11]+2304563134&4294967295,R=D+(A<<22&4294967295|A>>>10),A=I+(j^R&(D^j))+b[12]+1804603682&4294967295,I=R+(A<<7&4294967295|A>>>25),A=j+(D^I&(R^D))+b[13]+4254626195&4294967295,j=I+(A<<12&4294967295|A>>>20),A=D+(R^j&(I^R))+b[14]+2792965006&4294967295,D=j+(A<<17&4294967295|A>>>15),A=R+(I^D&(j^I))+b[15]+1236535329&4294967295,R=D+(A<<22&4294967295|A>>>10),A=I+(D^j&(R^D))+b[1]+4129170786&4294967295,I=R+(A<<5&4294967295|A>>>27),A=j+(R^D&(I^R))+b[6]+3225465664&4294967295,j=I+(A<<9&4294967295|A>>>23),A=D+(I^R&(j^I))+b[11]+643717713&4294967295,D=j+(A<<14&4294967295|A>>>18),A=R+(j^I&(D^j))+b[0]+3921069994&4294967295,R=D+(A<<20&4294967295|A>>>12),A=I+(D^j&(R^D))+b[5]+3593408605&4294967295,I=R+(A<<5&4294967295|A>>>27),A=j+(R^D&(I^R))+b[10]+38016083&4294967295,j=I+(A<<9&4294967295|A>>>23),A=D+(I^R&(j^I))+b[15]+3634488961&4294967295,D=j+(A<<14&4294967295|A>>>18),A=R+(j^I&(D^j))+b[4]+3889429448&4294967295,R=D+(A<<20&4294967295|A>>>12),A=I+(D^j&(R^D))+b[9]+568446438&4294967295,I=R+(A<<5&4294967295|A>>>27),A=j+(R^D&(I^R))+b[14]+3275163606&4294967295,j=I+(A<<9&4294967295|A>>>23),A=D+(I^R&(j^I))+b[3]+4107603335&4294967295,D=j+(A<<14&4294967295|A>>>18),A=R+(j^I&(D^j))+b[8]+1163531501&4294967295,R=D+(A<<20&4294967295|A>>>12),A=I+(D^j&(R^D))+b[13]+2850285829&4294967295,I=R+(A<<5&4294967295|A>>>27),A=j+(R^D&(I^R))+b[2]+4243563512&4294967295,j=I+(A<<9&4294967295|A>>>23),A=D+(I^R&(j^I))+b[7]+1735328473&4294967295,D=j+(A<<14&4294967295|A>>>18),A=R+(j^I&(D^j))+b[12]+2368359562&4294967295,R=D+(A<<20&4294967295|A>>>12),A=I+(R^D^j)+b[5]+4294588738&4294967295,I=R+(A<<4&4294967295|A>>>28),A=j+(I^R^D)+b[8]+2272392833&4294967295,j=I+(A<<11&4294967295|A>>>21),A=D+(j^I^R)+b[11]+1839030562&4294967295,D=j+(A<<16&4294967295|A>>>16),A=R+(D^j^I)+b[14]+4259657740&4294967295,R=D+(A<<23&4294967295|A>>>9),A=I+(R^D^j)+b[1]+2763975236&4294967295,I=R+(A<<4&4294967295|A>>>28),A=j+(I^R^D)+b[4]+1272893353&4294967295,j=I+(A<<11&4294967295|A>>>21),A=D+(j^I^R)+b[7]+4139469664&4294967295,D=j+(A<<16&4294967295|A>>>16),A=R+(D^j^I)+b[10]+3200236656&4294967295,R=D+(A<<23&4294967295|A>>>9),A=I+(R^D^j)+b[13]+681279174&4294967295,I=R+(A<<4&4294967295|A>>>28),A=j+(I^R^D)+b[0]+3936430074&4294967295,j=I+(A<<11&4294967295|A>>>21),A=D+(j^I^R)+b[3]+3572445317&4294967295,D=j+(A<<16&4294967295|A>>>16),A=R+(D^j^I)+b[6]+76029189&4294967295,R=D+(A<<23&4294967295|A>>>9),A=I+(R^D^j)+b[9]+3654602809&4294967295,I=R+(A<<4&4294967295|A>>>28),A=j+(I^R^D)+b[12]+3873151461&4294967295,j=I+(A<<11&4294967295|A>>>21),A=D+(j^I^R)+b[15]+530742520&4294967295,D=j+(A<<16&4294967295|A>>>16),A=R+(D^j^I)+b[2]+3299628645&4294967295,R=D+(A<<23&4294967295|A>>>9),A=I+(D^(R|~j))+b[0]+4096336452&4294967295,I=R+(A<<6&4294967295|A>>>26),A=j+(R^(I|~D))+b[7]+1126891415&4294967295,j=I+(A<<10&4294967295|A>>>22),A=D+(I^(j|~R))+b[14]+2878612391&4294967295,D=j+(A<<15&4294967295|A>>>17),A=R+(j^(D|~I))+b[5]+4237533241&4294967295,R=D+(A<<21&4294967295|A>>>11),A=I+(D^(R|~j))+b[12]+1700485571&4294967295,I=R+(A<<6&4294967295|A>>>26),A=j+(R^(I|~D))+b[3]+2399980690&4294967295,j=I+(A<<10&4294967295|A>>>22),A=D+(I^(j|~R))+b[10]+4293915773&4294967295,D=j+(A<<15&4294967295|A>>>17),A=R+(j^(D|~I))+b[1]+2240044497&4294967295,R=D+(A<<21&4294967295|A>>>11),A=I+(D^(R|~j))+b[8]+1873313359&4294967295,I=R+(A<<6&4294967295|A>>>26),A=j+(R^(I|~D))+b[15]+4264355552&4294967295,j=I+(A<<10&4294967295|A>>>22),A=D+(I^(j|~R))+b[6]+2734768916&4294967295,D=j+(A<<15&4294967295|A>>>17),A=R+(j^(D|~I))+b[13]+1309151649&4294967295,R=D+(A<<21&4294967295|A>>>11),A=I+(D^(R|~j))+b[4]+4149444226&4294967295,I=R+(A<<6&4294967295|A>>>26),A=j+(R^(I|~D))+b[11]+3174756917&4294967295,j=I+(A<<10&4294967295|A>>>22),A=D+(I^(j|~R))+b[2]+718787259&4294967295,D=j+(A<<15&4294967295|A>>>17),A=R+(j^(D|~I))+b[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+j&4294967295}s.prototype.v=function(x,I){I===void 0&&(I=x.length);const R=I-this.blockSize,b=this.C;let D=this.h,j=0;for(;j<I;){if(D==0)for(;j<=R;)o(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<I;)if(b[D++]=x.charCodeAt(j++),D==this.blockSize){o(this,b),D=0;break}}else for(;j<I;)if(b[D++]=x[j++],D==this.blockSize){o(this,b),D=0;break}}this.h=D,this.o+=I},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var R=x.length-8;R<x.length;++R)x[R]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,R=0;R<4;++R)for(let b=0;b<32;b+=8)x[I++]=this.g[R]>>>b&255;return x};function l(x,I){var R=f;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=I(x)}function h(x,I){this.h=I;const R=[];let b=!0;for(let D=x.length-1;D>=0;D--){const j=x[D]|0;b&&j==I||(R[D]=j,b=!1)}this.g=R}var f={};function g(x){return-128<=x&&x<128?l(x,function(I){return new h([I|0],I<0?-1:0)}):new h([x|0],x<0?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return V(y(-x));const I=[];let R=1;for(let b=0;x>=R;b++)I[b]=x/R|0,R*=4294967296;return new h(I,0)}function E(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return V(E(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(I,8));let b=T;for(let j=0;j<x.length;j+=8){var D=Math.min(8,x.length-j);const A=parseInt(x.substring(j,j+D),I);D<8?(D=y(Math.pow(I,D)),b=b.j(D).add(y(A))):(b=b.j(R),b=b.add(y(A)))}return b}var T=g(0),k=g(1),P=g(16777216);r=h.prototype,r.m=function(){if(B(this))return-V(this).m();let x=0,I=1;for(let R=0;R<this.g.length;R++){const b=this.i(R);x+=(b>=0?b:4294967296+b)*I,I*=4294967296}return x},r.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(W(this))return"0";if(B(this))return"-"+V(this).toString(x);const I=y(Math.pow(x,6));var R=this;let b="";for(;;){const D=oe(R,I).g;R=J(R,D.j(I));let j=((R.g.length>0?R.g[0]:R.h)>>>0).toString(x);if(R=D,W(R))return j+b;for(;j.length<6;)j="0"+j;b=j+b}},r.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function W(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function B(x){return x.h==-1}r.l=function(x){return x=J(this,x),B(x)?-1:W(x)?0:1};function V(x){const I=x.g.length,R=[];for(let b=0;b<I;b++)R[b]=~x.g[b];return new h(R,~x.h).add(k)}r.abs=function(){return B(this)?V(this):this},r.add=function(x){const I=Math.max(this.g.length,x.g.length),R=[];let b=0;for(let D=0;D<=I;D++){let j=b+(this.i(D)&65535)+(x.i(D)&65535),A=(j>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);b=A>>>16,j&=65535,A&=65535,R[D]=A<<16|j}return new h(R,R[R.length-1]&-2147483648?-1:0)};function J(x,I){return x.add(V(I))}r.j=function(x){if(W(this)||W(x))return T;if(B(this))return B(x)?V(this).j(V(x)):V(V(this).j(x));if(B(x))return V(this.j(V(x)));if(this.l(P)<0&&x.l(P)<0)return y(this.m()*x.m());const I=this.g.length+x.g.length,R=[];for(var b=0;b<2*I;b++)R[b]=0;for(b=0;b<this.g.length;b++)for(let D=0;D<x.g.length;D++){const j=this.i(b)>>>16,A=this.i(b)&65535,ze=x.i(D)>>>16,at=x.i(D)&65535;R[2*b+2*D]+=A*at,G(R,2*b+2*D),R[2*b+2*D+1]+=j*at,G(R,2*b+2*D+1),R[2*b+2*D+1]+=A*ze,G(R,2*b+2*D+1),R[2*b+2*D+2]+=j*ze,G(R,2*b+2*D+2)}for(x=0;x<I;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=I;x<2*I;x++)R[x]=0;return new h(R,0)};function G(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function Q(x,I){this.g=x,this.h=I}function oe(x,I){if(W(I))throw Error("division by zero");if(W(x))return new Q(T,T);if(B(x))return I=oe(V(x),I),new Q(V(I.g),V(I.h));if(B(I))return I=oe(x,V(I)),new Q(V(I.g),I.h);if(x.g.length>30){if(B(x)||B(I))throw Error("slowDivide_ only works with positive integers.");for(var R=k,b=I;b.l(x)<=0;)R=he(R),b=he(b);var D=K(R,1),j=K(b,1);for(b=K(b,2),R=K(R,2);!W(b);){var A=j.add(b);A.l(x)<=0&&(D=D.add(R),j=A),b=K(b,1),R=K(R,1)}return I=J(x,D.j(I)),new Q(D,I)}for(D=T;x.l(I)>=0;){for(R=Math.max(1,Math.floor(x.m()/I.m())),b=Math.ceil(Math.log(R)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),j=y(R),A=j.j(I);B(A)||A.l(x)>0;)R-=b,j=y(R),A=j.j(I);W(j)&&(j=k),D=D.add(j),x=J(x,A)}return new Q(D,x)}r.B=function(x){return oe(this,x).h},r.and=function(x){const I=Math.max(this.g.length,x.g.length),R=[];for(let b=0;b<I;b++)R[b]=this.i(b)&x.i(b);return new h(R,this.h&x.h)},r.or=function(x){const I=Math.max(this.g.length,x.g.length),R=[];for(let b=0;b<I;b++)R[b]=this.i(b)|x.i(b);return new h(R,this.h|x.h)},r.xor=function(x){const I=Math.max(this.g.length,x.g.length),R=[];for(let b=0;b<I;b++)R[b]=this.i(b)^x.i(b);return new h(R,this.h^x.h)};function he(x){const I=x.g.length+1,R=[];for(let b=0;b<I;b++)R[b]=x.i(b)<<1|x.i(b-1)>>>31;return new h(R,x.h)}function K(x,I){const R=I>>5;I%=32;const b=x.g.length-R,D=[];for(let j=0;j<b;j++)D[j]=I>0?x.i(j+R)>>>I|x.i(j+R+1)<<32-I:x.i(j+R);return new h(D,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,h_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Ri=h}).apply(typeof Xg<"u"?Xg:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d_,ja,f_,Qu,zd,p_,m_,g_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var U=u[S];if(!(U in _))break e;_=_[U]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&_.push([S,m[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function E(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,U,H){for(var ie=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ie[xe-2]=arguments[xe];return m.prototype[U].apply(S,ie)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const m=u.length;if(m>0){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function W(u,m){for(let S=1;S<arguments.length;S++){const U=arguments[S];var _=typeof U;if(_=_!="object"?_:U?Array.isArray(U)?"array":_:"null",_=="array"||_=="object"&&typeof U.length=="number"){_=u.length||0;const H=U.length||0;u.length=_+H;for(let ie=0;ie<H;ie++)u[_+ie]=U[ie]}else u.push(U)}}class B{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function V(u){h.setTimeout(()=>{throw u},0)}function J(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class G{constructor(){this.h=this.g=null}add(m,_){const S=Q.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Q=new B(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let he,K=!1,x=new G,I=()=>{const u=Promise.resolve(void 0);he=()=>{u.then(R)}};function R(){for(var u;u=J();){try{u.h.call(u.g)}catch(_){V(_)}var m=Q;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}K=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function ze(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}T(ze,D),ze.prototype.init=function(u,m){const _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),tt=0;function We(u,m,_,S,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=U,this.key=++tt,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function se(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function O(u){const m={};for(const _ in u)m[_]=u[_];return m}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(u,m){let _,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(_ in S)u[_]=S[_];for(let H=0;H<q.length;H++)_=q[H],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,m,_,S,U){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ie=Pe(u,m,S,U);return ie>-1?(m=u[ie],_||(m.fa=!1)):(m=new We(m,this.src,H,!!S,U),m.fa=_,u.push(m)),m};function Ce(u,m){const _=m.type;if(_ in u.g){var S=u.g[_],U=Array.prototype.indexOf.call(S,m,void 0),H;(H=U>=0)&&Array.prototype.splice.call(S,U,1),H&&(re(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Pe(u,m,_,S){for(let U=0;U<u.length;++U){const H=u[U];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==S)return U}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Oe={};function qe(u,m,_,S,U){if(Array.isArray(m)){for(let H=0;H<m.length;H++)qe(u,m[H],_,S,U);return null}return _=zo(_),u&&u[at]?u.J(m,_,f(S)?!!S.capture:!1,U):qt(u,m,_,!1,S,U)}function qt(u,m,_,S,U,H){if(!m)throw Error("Invalid event type");const ie=f(U)?!!U.capture:!!U;let xe=Rs(u);if(xe||(u[Be]=xe=new de(u)),_=xe.add(m,_,S,ie,H),_.proxy)return _;if(S=Cs(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)j||(U=ie),U===void 0&&(U=!1),u.addEventListener(m.toString(),S,U);else if(u.attachEvent)u.attachEvent(xs(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Cs(){function u(_){return m.call(u.src,u.listener,_)}const m=wl;return u}function Uo(u,m,_,S,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)Uo(u,m[H],_,S,U);else S=f(S)?!!S.capture:!!S,_=zo(_),u&&u[at]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],_=Pe(m,_,S,U),_>-1&&(re(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=Rs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Pe(m,_,S,U)),(_=u>-1?m[u]:null)&&Hr(_))}function Hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[at])Ce(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(xs(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=Rs(m))?(Ce(_,u),_.h==0&&(_.src=null,m[Be]=null)):re(u)}}}function xs(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function wl(u,m){if(u.da)u=!0;else{m=new ze(m,this);const _=u.listener,S=u.ha||u.src;u.fa&&Hr(u),u=_.call(S,m)}return u}function Rs(u){return u=u[Be],u instanceof de?u:null}var Mi="__closure_events_fn_"+(Math.random()*1e9>>>0);function zo(u){return typeof u=="function"?u:(u[Mi]||(u[Mi]=function(m){return u.handleEvent(m)}),u[Mi])}function pt(){b.call(this),this.i=new de(this),this.M=this,this.G=null}T(pt,b),pt.prototype[at]=!0,pt.prototype.removeEventListener=function(u,m,_,S){Uo(this,u,m,_,S)};function ct(u,m){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var U=m;m=new D(S,u),ye(m,U)}U=!0;let H,ie;if(_)for(ie=_.length-1;ie>=0;ie--)H=m.g=_[ie],U=kn(H,S,!0,m)&&U;if(H=m.g=u,U=kn(H,S,!0,m)&&U,U=kn(H,S,!1,m)&&U,_)for(ie=0;ie<_.length;ie++)H=m.g=_[ie],U=kn(H,S,!1,m)&&U}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let S=0;S<_.length;S++)re(_[S]);delete u.g[m],u.h--}}this.G=null},pt.prototype.J=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},pt.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function kn(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let H=0;H<m.length;++H){const ie=m[H];if(ie&&!ie.da&&ie.capture==_){const xe=ie.listener,ht=ie.ha||ie.src;ie.fa&&Ce(u.i,ie),U=xe.call(ht,S)!==!1&&U}}return U&&!S.defaultPrevented}function Bo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function $o(u){u.g=Bo(()=>{u.g=null,u.i&&(u.i=!1,$o(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class El extends b{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){b.call(this),this.h=u,this.g={}}T(Wr,b);var Ho=[];function As(u){me(u.g,function(m,_){this.g.hasOwnProperty(_)&&Hr(m)},u),u.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),As(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=h.JSON.stringify,Tl=h.JSON.parse,ji=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Kr(){}function Sl(){}var Gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ps(){D.call(this,"d")}T(Ps,D);function Wo(){D.call(this,"c")}T(Wo,D);var Cn={},Ns=null;function Qr(){return Ns=Ns||new pt}Cn.Ia="serverreachability";function Ds(u){D.call(this,Cn.Ia,u)}T(Ds,D);function mr(u){const m=Qr();ct(m,new Ds(m))}Cn.STAT_EVENT="statevent";function gr(u,m){D.call(this,Cn.STAT_EVENT,u),this.stat=m}T(gr,D);function lt(u){const m=Qr();ct(m,new gr(m,u))}Cn.Ja="timingevent";function qo(u,m){D.call(this,Cn.Ja,u),this.size=m}T(qo,D);function Yr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.ua=function(){this.g=!1};function Il(u,m,_,S,U,H){u.info(function(){if(u.g)if(H){var ie="",xe=H.split("&");for(let He=0;He<xe.length;He++){var ht=xe[He].split("=");if(ht.length>1){const mt=ht[0];ht=ht[1];const ln=mt.split("_");ie=ln.length>=2&&ln[1]=="type"?ie+(mt+"="+ht+"&"):ie+(mt+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+m+`
`+_+`
`+ie})}function kl(u,m,_,S,U,H,ie){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+m+`
`+_+`
`+H+" "+ie})}function Bn(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Fi(u,_)+(S?" "+S:"")})}function Cl(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function Fi(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var _=H[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return qr(H)}catch{return m}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xl;function yr(){}T(yr,Kr),yr.prototype.g=function(){return new XMLHttpRequest},xl=new yr;function $n(u){return encodeURIComponent(String(u))}function bs(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function dn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.S=S||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var Al={},Ko={};function xn(u,m,_){u.M=1,u.A=_r(fn(m)),u.u=_,u.R=!0,Go(u,null)}function Go(u,m){u.F=Date.now(),Ui(u),u.B=fn(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),ia(_.i,"t",S),u.C=0,_=u.j.L,u.h=new Rl,u.g=Fl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new El(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,S=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Ho[0]=U.toString()),U=Ho);for(let H=0;H<U.length;H++){const ie=qe(_,U[H],S||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),mr(),Il(u.i,u.v,u.B,u.l,u.S,u.u)}dn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Yn(u)==3?m.j():this.Y(u)},dn.prototype.Y=function(u){try{if(u==this.g)e:{const xe=Yn(this.g),ht=this.g.ya(),He=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Ml(this.g)))){this.K||xe!=4||ht==7||(ht==8||He<=0?mr(3):mr(2)),Ls(this);var m=this.g.ca();this.X=m;var _=Pl(this);if(this.o=m==200,kl(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var H=S;break t}}H=null}if(u=H)Bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ye(this,u);else{this.o=!1,this.m=3,lt(12),vr(this),zi(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<_.length;)if(mt=Dl(this,_),mt==Ko){xe==4&&(this.m=4,lt(14),u=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Al){this.m=4,lt(15),Bn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Bn(this.i,this.l,mt,null),Ye(this,mt);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||_.length!=0||this.h.h||(this.m=1,lt(16),u=!1),this.o=this.o&&u,!u)Bn(this.i,this.l,_,"[Invalid Chunked Response]"),vr(this),zi(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Yi(ie),ie.P=!0,lt(11))}}else Bn(this.i,this.l,_,null),Ye(this,_);xe==4&&vr(this),this.o&&!this.K&&(xe==4?Hs(this.j,this):(this.o=!1,Ui(this)))}else oa(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),vr(this),zi(this)}}}catch{}finally{}};function Pl(u){if(!Nl(u))return u.g.la();const m=Ml(u.g);if(m==="")return"";let _="";const S=m.length,U=Yn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vr(u),zi(u),"";u.h.i=new h.TextDecoder}for(let H=0;H<S;H++)u.h.h=!0,_+=u.h.i.decode(m[H],{stream:!(U&&H==S-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Nl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Dl(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?Ko:(_=Number(m.substring(_,S)),isNaN(_)?Al:(S+=1,S+_>m.length?Ko:(m=m.slice(S,S+_),u.C=S+_,m)))}dn.prototype.cancel=function(){this.K=!0,vr(this)};function Ui(u){u.T=Date.now()+u.H,Qo(u,u.H)}function Qo(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Yr(y(u.aa,u),m)}function Ls(u){u.D&&(h.clearTimeout(u.D),u.D=null)}dn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Cl(this.i,this.B),this.M!=2&&(mr(),lt(17)),vr(this),this.m=2,zi(this)):Qo(this,this.T-u)};function zi(u){u.j.I==0||u.K||Hs(u.j,u)}function vr(u){Ls(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,As(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ye(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||Jo(_.h,u))){if(!u.L&&Jo(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)$s(_),on(_);else break e;Zn(_),lt(18)}}else _.xa=U[1],0<_.xa-_.K&&U[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Yr(y(_.Va,_),6e3));Bi(_.h)<=1&&_.ta&&(_.ta=void 0)}else an(_,11)}else if((u.L||_.g==u)&&$s(_),!A(m))for(U=_.Ba.g.parse(m),m=0;m<U.length;m++){let He=U[m];const mt=He[0];if(!(mt<=_.K))if(_.K=mt,He=He[1],_.I==2)if(He[0]=="c"){_.M=He[1],_.ba=He[2];const ln=He[3];ln!=null&&(_.ka=ln,_.j.info("VER="+_.ka));const Ir=He[4];Ir!=null&&(_.za=Ir,_.j.info("SVER="+_.za));const er=He[5];er!=null&&typeof er=="number"&&er>0&&(S=1.5*er,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const tr=u.g;if(tr){const Ks=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var H=S.h;H.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Os(H,H.h),H.h=null))}if(S.G){const ua=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;ua&&(S.wa=ua,Ue(S.J,S.G,ua))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var ie=u;if(S.na=la(S,S.L?S.ba:null,S.W),ie.L){$i(S.h,ie);var xe=ie,ht=S.O;ht&&(xe.H=ht),xe.D&&(Ls(xe),Ui(xe)),S.g=ie}else Mt(S);_.i.length>0&&Sr(_)}else He[0]!="stop"&&He[0]!="close"||an(_,7);else _.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?an(_,7):zs(_):He[0]!="noop"&&_.l&&_.l.qa(He),_.A=0)}}mr(4)}catch{}}var zc=class{constructor(u,m){this.g=u,this.map=m}};function Vs(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bi(u){return u.h?1:u.g?u.g.size:0}function Jo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Os(u,m){u.g?u.g.add(m):u.h=m}function $i(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Vs.prototype.cancel=function(){if(this.i=nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return P(u.i)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rn(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const S=u[_].indexOf("=");let U,H=null;S>=0?(U=u[_].substring(0,S),H=u[_].substring(S+1)):U=u[_],m(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Hn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Hn?(this.l=u.l,Hi(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,ei(this,sa(u.i)),this.m=u.m):u&&(m=String(u).match(bl))?(this.l=!1,Hi(this,m[1]||"",!0),this.o=Wi(m[2]||""),this.g=Wi(m[3]||"",!0),Wn(this,m[4]),this.h=Wi(m[5]||"",!0),ei(this,m[6]||"",!0),this.m=Wi(m[7]||"")):(this.l=!1,this.i=new Le(null,this.l))}Hn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(qi(m,Zo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(qi(m,Zo,!0),"@"),u.push($n(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(qi(_,_.charAt(0)=="/"?Ki:ea,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",qi(_,ta)),u.join("")},Hn.prototype.resolve=function(u){const m=fn(this);let _=!!u.j;_?Hi(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var S=u.h;if(_)Wn(m,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=m.h.lastIndexOf("/");U!=-1&&(S=m.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let ie=0;ie<U.length;){const xe=U[ie++];xe=="."?S&&ie==U.length&&H.push(""):xe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ie==U.length&&H.push("")):(H.push(xe),S=!0)}S=H.join("/")}else S=U}return _?m.h=S:_=u.i.toString()!=="",_?ei(m,sa(u.i)):_=!!u.m,_&&(m.m=u.m),m};function fn(u){return new Hn(u)}function Hi(u,m,_){u.j=_?Wi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ei(u,m,_){m instanceof Le?(u.i=m,js(u.i,u.l)):(_||(m=qi(m,Bc)),u.i=new Le(m,u.l))}function Ue(u,m,_){u.i.set(m,_)}function _r(u){return Ue(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Wi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Xo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zo=/[#\/\?@]/g,ea=/[#\?:]/g,Ki=/[#\?]/g,Bc=/[#\?@]/g,ta=/#/g;function Le(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function qn(u){u.g||(u.g=new Map,u.h=0,u.i&&rn(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Le.prototype,r.add=function(u,m){qn(this),this.i=null,u=Kn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function na(u,m){qn(u),m=Kn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ms(u,m){return qn(u),m=Kn(u,m),u.g.has(m)}r.forEach=function(u,m){qn(this),this.g.forEach(function(_,S){_.forEach(function(U){u.call(m,U,S,this)},this)},this)};function ra(u,m){qn(u);let _=[];if(typeof m=="string")Ms(u,m)&&(_=_.concat(u.g.get(Kn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return qn(this),this.i=null,u=Kn(this,u),Ms(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=ra(this,u),u.length>0?String(u[0]):m):m};function ia(u,m,_){na(u,m),_.length>0&&(u.i=null,u.g.set(Kn(u,m),P(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var _=m[S];const U=$n(_);_=ra(this,_);for(let H=0;H<_.length;H++){let ie=U;_[H]!==""&&(ie+="="+$n(_[H])),u.push(ie)}}return this.i=u.join("&")};function sa(u){const m=new Le;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Kn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function js(u,m){m&&!u.j&&(qn(u),u.i=null,u.g.forEach(function(_,S){const U=S.toLowerCase();S!=U&&(na(this,S),ia(this,U,_))},u)),u.j=m}function Gn(u,m){const _=new Jr;if(h.Image){const S=new Image;S.onload=E(Rt,_,"TestLoadImage: loaded",!0,m,S),S.onerror=E(Rt,_,"TestLoadImage: error",!1,m,S),S.onabort=E(Rt,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=E(Rt,_,"TestLoadImage: timeout",!1,m,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Qn(u,m){const _=new Jr,S=new AbortController,U=setTimeout(()=>{S.abort(),Rt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(H=>{clearTimeout(U),H.ok?Rt(_,"TestPingServer: ok",!0,m):Rt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Rt(_,"TestPingServer: error",!1,m)})}function Rt(u,m,_,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(_)}catch{}}function Gi(){this.g=new ji}function wr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(wr,Kr),wr.prototype.g=function(){return new sn(this.i,this.h)};function sn(u,m){pt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(sn,pt),r=sn.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Rn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ti(this):Rn(this),this.readyState==3&&Ll(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ti(this))},r.Na=function(u){this.g&&(this.response=u,ti(this))},r.ga=function(){this.g&&ti(this)};function ti(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Rn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Rn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vl(u){let m="";return me(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function Fs(u,m,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Vl(_),typeof u=="string"?_!=null&&$n(_):Ue(u,m,_))}function Ke(u){pt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Ke,pt);var Ol=/^https?$/i,$c=["POST","PUT"];r=Ke.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xl.g(),this.g.onreadystatechange=k(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){ni(this,H);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)_.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())_.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call($c,m,void 0)>=0)||S||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of _)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ni(this,H)}};function ni(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ri(u),Tr(u)}function ri(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Er(this):this.Xa())},r.Xa=function(){Er(this)};function Er(u){if(u.h&&typeof l<"u"){if(u.v&&Yn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),Yn(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var S;if(S=H===0){let ie=String(u.D).match(bl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),S=!Ol.test(ie?ie.toLowerCase():"")}_=S}if(_)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var U=Yn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ri(u)}}finally{Tr(u)}}}}function Tr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ct(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Tl(m)}};function Ml(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(u){const m={};u=(u.g&&Yn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(A(u[S]))continue;var _=bs(u[S]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[U]||[];m[U]=H,H.push(_)}se(m,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Us(u){this.za=0,this.i=[],this.j=new Jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jn("baseRetryDelayMs",5e3,u),this.Za=Jn("retryDelaySeedMs",1e4,u),this.Ta=Jn("forwardChannelMaxRetries",2,u),this.va=Jn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Vs(u&&u.concurrentRequestLimit),this.Ba=new Gi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Us.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,S){lt(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=la(this,null,this.W),Sr(this)};function zs(u){if(Bs(u),u.I==3){var m=u.V++,_=fn(u.J);if(Ue(_,"SID",u.M),Ue(_,"RID",m),Ue(_,"TYPE","terminate"),Xn(u,_),m=new dn(u,u.j,m),m.M=2,m.A=_r(fn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Fl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ui(m)}Ji(u)}function on(u){u.g&&(Yi(u),u.g.cancel(),u.g=null)}function Bs(u){on(u),u.v&&(h.clearTimeout(u.v),u.v=null),$s(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Sr(u){if(!Yo(u.h)&&!u.m){u.m=!0;var m=u.Ea;he||I(),K||(he(),K=!0),x.add(m,u),u.D=0}}function jl(u,m){return Bi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Yr(y(u.Ea,u,m),Ws(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new dn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=O(H),ye(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=aa(this,U,m),_=fn(this.J),Ue(_,"RID",u),Ue(_,"CVER",22),this.G&&Ue(_,"X-HTTP-Session-Id",this.G),Xn(this,_),H&&(this.R?m="headers="+$n(Vl(H))+"&"+m:this.u&&Fs(_,this.u,H)),Os(this.h,U),this.Ra&&Ue(_,"TYPE","init"),this.S?(Ue(_,"$req",m),Ue(_,"SID","null"),U.U=!0,xn(U,_,null)):xn(U,_,m),this.I=2}}else this.I==3&&(u?Qi(this,u):this.i.length==0||Yo(this.h)||Qi(this))};function Qi(u,m){var _;m?_=m.l:_=u.V++;const S=fn(u.J);Ue(S,"SID",u.M),Ue(S,"RID",_),Ue(S,"AID",u.K),Xn(u,S),u.u&&u.o&&Fs(S,u.u,u.o),_=new dn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=aa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Os(u.h,_),xn(_,S,m)}function Xn(u,m){u.H&&me(u.H,function(_,S){Ue(m,S,_)}),u.l&&me({},function(_,S){Ue(m,S,_)})}function aa(u,m,_){_=Math.min(u.i.length,_);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let xe=-1;for(;;){const ht=["count="+_];xe==-1?_>0?(xe=U[0].g,ht.push("ofs="+xe)):xe=0:ht.push("ofs="+xe);let He=!0;for(let mt=0;mt<_;mt++){var H=U[mt].g;const ln=U[mt].map;if(H-=xe,H<0)xe=Math.max(0,U[mt].g-100),He=!1;else try{H="req"+H+"_"||"";try{var ie=ln instanceof Map?ln:Object.entries(ln);for(const[Ir,er]of ie){let tr=er;f(er)&&(tr=qr(er)),ht.push(H+Ir+"="+encodeURIComponent(tr))}}catch(Ir){throw ht.push(H+"type="+encodeURIComponent("_badmap")),Ir}}catch{S&&S(ln)}}if(He){ie=ht.join("&");break e}}ie=void 0}return u=u.i.splice(0,_),m.G=u,ie}function Mt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;he||I(),K||(he(),K=!0),x.add(m,u),u.A=0}}function Zn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Yr(y(u.Da,u),Ws(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Yr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),on(this),ii(this))};function Yi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ii(u){u.g=new dn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=fn(u.na);Ue(m,"RID","rpc"),Ue(m,"SID",u.M),Ue(m,"AID",u.K),Ue(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ue(m,"TO",u.ia),Ue(m,"TYPE","xmlhttp"),Xn(u,m),u.u&&u.o&&Fs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=_r(fn(m)),_.u=null,_.R=!0,Go(_,u)}r.Va=function(){this.C!=null&&(this.C=null,on(this),Zn(this),lt(19))};function $s(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Hs(u,m){var _=null;if(u.g==m){$s(u),Yi(u),u.g=null;var S=2}else if(Jo(u.h,m))_=m.G,$i(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;S=Qr(),ct(S,new qo(S,_)),Sr(u)}else Mt(u);else if(U=m.m,U==3||U==0&&m.X>0||!(S==1&&jl(u,m)||S==2&&Zn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),U){case 1:an(u,5);break;case 4:an(u,10);break;case 3:an(u,6);break;default:an(u,2)}}}function Ws(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function an(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),S=u.Ua;const U=!S;S=new Hn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hi(S,"https"),_r(S),U?Gn(S.toString(),_):Qn(S.toString(),_)}else lt(2);u.I=0,u.l&&u.l.pa(m),Ji(u),Bs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Ji(u){if(u.I=0,u.ja=[],u.l){const m=nn(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function la(u,m,_){var S=_ instanceof Hn?fn(_):new Hn(_);if(S.g!="")m&&(S.g=m+"."+S.g),Wn(S,S.u);else{var U=h.location;S=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const H=new Hn(null);S&&Hi(H,S),m&&(H.g=m),U&&Wn(H,U),_&&(H.h=_),S=H}return _=u.G,m=u.wa,_&&m&&Ue(S,_,m),Ue(S,"VER",u.ka),Xn(u,S),S}function Fl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ke(new wr({ab:_})):new Ke(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ul(){}r=Ul.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(u,m){return new At(u,m)};function At(u,m){pt.call(this),this.g=new Us(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new si(this)}T(At,pt),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){zs(this.g)},At.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=qr(u),u=_);m.i.push(new zc(m.Ya++,u)),m.I==3&&Sr(m)},At.prototype.N=function(){this.g.l=null,delete this.j,zs(this.g),delete this.g,At.Z.N.call(this)};function zl(u){Ps.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}T(zl,Ps);function Bl(){Wo.call(this),this.status=1}T(Bl,Wo);function si(u){this.g=u}T(si,Ul),si.prototype.ra=function(){ct(this.g,"a")},si.prototype.qa=function(u){ct(this.g,new zl(u))},si.prototype.pa=function(u){ct(this.g,new Bl)},si.prototype.oa=function(){ct(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,g_=function(){return new qs},m_=function(){return Qr()},p_=Cn,zd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Qu=Xr,Zr.COMPLETE="complete",f_=Zr,Sl.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",pt.prototype.listen=pt.prototype.J,ja=Sl,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,d_=Ke}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="12.8.0";function gC(r){Oo=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new hf("@firebase/firestore");function mo(){return _s.logLevel}function le(r,...e){if(_s.logLevel<=Ne.DEBUG){const t=e.map(If);_s.debug(`Firestore (${Oo}): ${r}`,...t)}}function zr(r,...e){if(_s.logLevel<=Ne.ERROR){const t=e.map(If);_s.error(`Firestore (${Oo}): ${r}`,...t)}}function Co(r,...e){if(_s.logLevel<=Ne.WARN){const t=e.map(If);_s.warn(`Firestore (${Oo}): ${r}`,...t)}}function If(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,y_(r,s,t)}function y_(r,e,t){let s=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zr(s),new Error(s)}function $e(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||y_(e,o,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class vC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _C{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ai,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ai)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new v_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class wC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class EC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new wC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Zg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=SC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function De(r,e){return r<e?-1:r>e?1:0}function Bd(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return kd(o)===kd(l)?De(o,l):kd(o)?1:-1}return De(r.length,e.length)}const IC=55296,kC=57343;function kd(r){const e=r.charCodeAt(0);return e>=IC&&e<=kC}function xo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="__name__";class or{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const s=or.isNumericId(e),o=or.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?or.extractNumericId(e).compare(or.extractNumericId(t)):Bd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class it extends or{construct(e,t,s){return new it(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const CC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends or{construct(e,t,s){return new bt(e,t,s)}static isValidIdentifier(e){return CC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ey}static keyField(){return new bt([ey])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(it.fromString(e))}static fromName(e){return new Ee(it.fromString(e).popFirst(5))}static empty(){return new Ee(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r,e,t){if(!t)throw new ge(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function RC(r,e,t,s){if(e===!0&&s===!0)throw new ge(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ty(r){if(!Ee.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function __(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Cf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Za(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(r);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r,e){const t={typeString:r};return e&&(t.value=e),t}function ml(r,e){if(!__(r))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=-62135596800,ry=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*ry);return new Ze(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ny)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ry}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ml(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ny;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:vt("string",Ze._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Ze(0,0))}static max(){return new ke(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=-1;function AC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(s===1e9?new Ze(t+1,0):new Ze(t,s));return new Pi(o,Ee.empty(),e)}function PC(r){return new Pi(r.readTime,r.key,el)}class Pi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Pi(ke.min(),Ee.empty(),el)}static max(){return new Pi(ke.max(),Ee.empty(),el)}}function NC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==DC)throw r;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,s)=>{t(e)}))}static reject(e){return new Y(((t,s)=>{s(e)}))}static waitFor(e){return new Y(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next((o=>o?Y.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Y(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((E=>{h[y]=E,++f,f===l&&s(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new Y(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function LC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ac.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=-1;function Pc(r){return r==null}function cc(r){return r===0&&1/r==-1/0}function VC(r){return typeof r=="number"&&Number.isInteger(r)&&!cc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="";function OC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=iy(e)),e=MC(r.get(t),e);return iy(e)}function MC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case w_:t+="";break;default:t+=l}}return t}function iy(r){return r+w_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ts(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function E_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fu(this.root,e,this.comparator,!0)}}class Fu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Dt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oy(this.data.getIterator())}getIteratorFrom(e){return new oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new jn([])}unionWith(e){let t=new Tt(bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new T_("Invalid base64 string: "+l):l}})(e);return new Ot(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const jC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(r){if($e(!!r,39018),typeof r=="string"){let e=0;const t=jC.exec(r);if($e(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Di(r){return typeof r=="string"?Ot.fromBase64String(r):Ot.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="server_timestamp",I_="__type__",k_="__previous_value__",C_="__local_write_time__";function Rf(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[I_])==null?void 0:s.stringValue)===S_}function Nc(r){const e=r.mapValue.fields[k_];return Rf(e)?Nc(e):e}function tl(r){const e=Ni(r.mapValue.fields[C_].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t,s,o,l,h,f,g,y,E,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E,this.apiKey=T}}const hc="(default)";class nl{constructor(e,t){this.projectId=e,this.database=t||hc}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database===hc}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}function UC(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="__type__",zC="__max__",Uu={mapValue:{}},R_="__vector__",dc="value";function bi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rf(r)?4:$C(r)?9007199254740991:BC(r)?10:11:Te(28295,{value:r})}function dr(r,e){if(r===e)return!0;const t=bi(r);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tl(r).isEqual(tl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ni(o.timestampValue),f=Ni(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Di(o.bytesValue).isEqual(Di(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ft(o.doubleValue),f=ft(l.doubleValue);return h===f?cc(h)===cc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return xo(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(sy(h)!==sy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!dr(h[g],f[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function rl(r,e){return(r.values||[]).find((t=>dr(t,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const t=bi(r),s=bi(e);if(t!==s)return De(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ft(l.integerValue||l.doubleValue),g=ft(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return ay(r.timestampValue,e.timestampValue);case 4:return ay(tl(r),tl(e));case 5:return Bd(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Di(l),g=Di(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const E=De(f[y],g[y]);if(E!==0)return E}return De(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=De(ft(l.latitude),ft(h.latitude));return f!==0?f:De(ft(l.longitude),ft(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ly(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var k,P,W,B;const f=l.fields||{},g=h.fields||{},y=(k=f[dc])==null?void 0:k.arrayValue,E=(P=g[dc])==null?void 0:P.arrayValue,T=De(((W=y==null?void 0:y.values)==null?void 0:W.length)||0,((B=E==null?void 0:E.values)==null?void 0:B.length)||0);return T!==0?T:ly(y,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Uu.mapValue&&h===Uu.mapValue)return 0;if(l===Uu.mapValue)return 1;if(h===Uu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const k=Bd(g[T],E[T]);if(k!==0)return k;const P=Ro(f[g[T]],y[E[T]]);if(P!==0)return P}return De(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function ay(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Ni(r),s=Ni(e),o=De(t.seconds,s.seconds);return o!==0?o:De(t.nanos,s.nanos)}function ly(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ro(t[o],s[o]);if(l)return l}return De(t.length,s.length)}function Ao(r){return $d(r)}function $d(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Ni(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Di(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=$d(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${$d(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function Yu(r){switch(bi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nc(r);return e?16+Yu(e):16;case 5:return 2*r.stringValue.length;case 6:return Di(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Yu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ts(s.fields,((l,h)=>{o+=l.length+Yu(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function Hd(r){return!!r&&"integerValue"in r}function Af(r){return!!r&&"arrayValue"in r}function uy(r){return!!r&&"nullValue"in r}function cy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ju(r){return!!r&&"mapValue"in r}function BC(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[x_])==null?void 0:s.stringValue)===R_}function Ha(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ts(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ha(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ha(r.arrayValue.values[t]);return e}return{...r}}function $C(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===zC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(t)}setAll(e){let t=bt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ha(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ts(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new wn(Ha(this.value))}}function A_(r){const e=[];return Ts(r.fields,((t,s)=>{const o=new bt([t]);if(Ju(s)){const l=A_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ht(e,0,ke.min(),ke.min(),ke.min(),wn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ht(e,1,t,ke.min(),s,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,ke.min(),ke.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,ke.min(),ke.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.position=e,this.inclusive=t}}function hy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),t.key):s=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function dy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function HC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{}class Et extends P_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new qC(e,t,s):t==="array-contains"?new QC(e,s):t==="in"?new YC(e,s):t==="not-in"?new JC(e,s):t==="array-contains-any"?new XC(e,s):new Et(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new KC(e,s):new GC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends P_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fr(e,t)}matches(e){return N_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N_(r){return r.op==="and"}function D_(r){return WC(r)&&N_(r)}function WC(r){for(const e of r.filters)if(e instanceof fr)return!1;return!0}function Wd(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+Ao(r.value);if(D_(r))return r.filters.map((e=>Wd(e))).join(",");{const e=r.filters.map((t=>Wd(t))).join(",");return`${r.op}(${e})`}}function b_(r,e){return r instanceof Et?(function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&dr(s.value,o.value)})(r,e):r instanceof fr?(function(s,o){return o instanceof fr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&b_(h,o.filters[f])),!0):!1})(r,e):void Te(19439)}function L_(r){return r instanceof Et?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ao(t.value)}`})(r):r instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(L_).join(" ,")+"}"})(r):"Filter"}class qC extends Et{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class KC extends Et{constructor(e,t){super(e,"in",t),this.keys=V_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GC extends Et{constructor(e,t){super(e,"not-in",t),this.keys=V_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function V_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class QC extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&rl(t.arrayValue,this.value)}}class YC extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rl(this.value.arrayValue,t)}}class JC extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rl(this.value.arrayValue,t)}}class XC extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>rl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function fy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new ZC(r,e,t,s,o,l,h)}function Pf(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Wd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ao(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ao(s))).join(",")),e.Te=t}return e.Te}function Nf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!HC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!b_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!dy(r.startAt,e.startAt)&&dy(r.endAt,e.endAt)}function qd(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ex(r,e,t,s,o,l,h,f){return new Dc(r,e,t,s,o,l,h,f)}function Df(r){return new Dc(r)}function py(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function tx(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function nx(r){return r.collectionGroup!==null}function Wa(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Tt(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pc(l,s))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new pc(bt.keyField(),s))}return e.Ie}function lr(r){const e=Re(r);return e.Ee||(e.Ee=rx(e,Wa(r))),e.Ee}function rx(r,e){if(r.limitType==="F")return fy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new pc(o.field,l)}));const t=r.endAt?new fc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new fc(r.startAt.position,r.startAt.inclusive):null;return fy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Kd(r,e,t){return new Dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function bc(r,e){return Nf(lr(r),lr(e))&&r.limitType===e.limitType}function O_(r){return`${Pf(lr(r))}|lt:${r.limitType}`}function go(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>L_(o))).join(", ")}]`),Pc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ao(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ao(o))).join(",")),`Target(${s})`})(lr(r))}; limitType=${r.limitType})`}function Lc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Wa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=hy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Wa(s),o)||s.endAt&&!(function(h,f,g){const y=hy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Wa(s),o))})(r,e)}function ix(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function M_(r){return(e,t)=>{let s=!1;for(const o of Wa(r)){const l=sx(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function sx(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Ro(g,y):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return E_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new ot(Ee.comparator);function Br(){return ox}const j_=new ot(Ee.comparator);function Fa(...r){let e=j_;for(const t of r)e=e.insert(t.key,t);return e}function F_(r){let e=j_;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ds(){return qa()}function U_(){return qa()}function qa(){return new Ss((r=>r.toString()),((r,e)=>r.isEqual(e)))}const ax=new ot(Ee.comparator),lx=new Tt(Ee.comparator);function be(...r){let e=lx;for(const t of r)e=e.add(t);return e}const ux=new Tt(De);function cx(){return ux}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function z_(r){return{integerValue:""+r}}function hx(r,e){return VC(e)?z_(e):bf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function dx(r,e,t){return r instanceof mc?(function(o,l){const h={fields:{[I_]:{stringValue:S_},[C_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Rf(l)&&(l=Nc(l)),l&&(h.fields[k_]=l),{mapValue:h}})(t,e):r instanceof il?$_(r,e):r instanceof sl?H_(r,e):(function(o,l){const h=B_(o,l),f=my(h)+my(o.Ae);return Hd(h)&&Hd(o.Ae)?z_(f):bf(o.serializer,f)})(r,e)}function fx(r,e,t){return r instanceof il?$_(r,e):r instanceof sl?H_(r,e):t}function B_(r,e){return r instanceof gc?(function(s){return Hd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class mc extends Vc{}class il extends Vc{constructor(e){super(),this.elements=e}}function $_(r,e){const t=W_(e);for(const s of r.elements)t.some((o=>dr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class sl extends Vc{constructor(e){super(),this.elements=e}}function H_(r,e){let t=W_(e);for(const s of r.elements)t=t.filter((o=>!dr(o,s)));return{arrayValue:{values:t}}}class gc extends Vc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function my(r){return ft(r.integerValue||r.doubleValue)}function W_(r){return Af(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function px(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof il&&o instanceof il||s instanceof sl&&o instanceof sl?xo(s.elements,o.elements,dr):s instanceof gc&&o instanceof gc?dr(s.Ae,o.Ae):s instanceof mc&&o instanceof mc})(r.transform,e.transform)}class mx{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Oc{}function q_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new G_(r.key,Mr.none()):new gl(r.key,r.data,Mr.none());{const t=r.data,s=wn.empty();let o=new Tt(bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Is(r.key,s,new jn(o.toArray()),Mr.none())}}function gx(r,e,t){r instanceof gl?(function(o,l,h){const f=o.value.clone(),g=yy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Is?(function(o,l,h){if(!Xu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=yy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(K_(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ka(r,e,t,s){return r instanceof gl?(function(l,h,f,g){if(!Xu(l.precondition,h))return f;const y=l.value.clone(),E=vy(l.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Is?(function(l,h,f,g){if(!Xu(l.precondition,h))return f;const y=vy(l.fieldTransforms,g,h),E=h.data;return E.setAll(K_(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,s):(function(l,h,f){return Xu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function yx(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=B_(s.transform,o||null);l!=null&&(t===null&&(t=wn.empty()),t.set(s.field,l))}return t||null}function gy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&xo(s,o,((l,h)=>px(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gl extends Oc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Is extends Oc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function K_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function yy(r,e,t){const s=new Map;$e(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,fx(h,f,t[o]))}return s}function vy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,dx(l,h,e))}return s}class G_ extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vx extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&gx(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ka(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ka(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=U_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=q_(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ke.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((t,s)=>gy(t,s)))&&xo(this.baseMutations,e.baseMutations,((t,s)=>gy(t,s)))}}class Lf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return ax})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Lf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ve;function Tx(r){switch(r){case ee.OK:return Te(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function Q_(r){if(r===void 0)return zr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case yt.OK:return ee.OK;case yt.CANCELLED:return ee.CANCELLED;case yt.UNKNOWN:return ee.UNKNOWN;case yt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case yt.INTERNAL:return ee.INTERNAL;case yt.UNAVAILABLE:return ee.UNAVAILABLE;case yt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case yt.NOT_FOUND:return ee.NOT_FOUND;case yt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case yt.ABORTED:return ee.ABORTED;case yt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case yt.DATA_LOSS:return ee.DATA_LOSS;default:return Te(39323,{code:r})}}(Ve=yt||(yt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Ri([4294967295,4294967295],0);function _y(r){const e=Sx().encode(r),t=new h_;return t.update(e),new Uint8Array(t.digest())}function wy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ri([t,s],0),new Ri([o,l],0)]}class Vf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ua(`Invalid padding: ${t}`);if(s<0)throw new Ua(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ri.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ri.fromNumber(s)));return o.compare(Ix)===1&&(o=new Ri([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=_y(e),[s,o]=wy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Vf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=_y(e),[s,o]=wy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Mc(ke.min(),o,new ot(De),Br(),be())}}class yl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yl(s,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Y_{constructor(e,t){this.targetId=e,this.Ce=t}}class J_{constructor(e,t,s=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Ey{constructor(){this.ve=0,this.Fe=Ty(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),s=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}})),new yl(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=Ty()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class kx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Br(),this.He=zu(),this.Je=zu(),this.Ze=new ot(De)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(qd(l))if(s===0){const h=new Ee(l.path);this.et(t,h,Ht.newNoDocument(h,ke.min()))}else $e(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Di(s).toUint8Array()}catch(g){if(g instanceof T_)return Co("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Vf(h,o,l)}catch(g){return Co(g instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&qd(f.target)){const g=new Ee(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Ht.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let s=be();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Mc(e,t,this.Ze,this.je,s);return this.je=Br(),this.He=zu(),this.Je=zu(),this.Ze=new ot(De),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Ey,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Tt(De),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Tt(De),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ey),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zu(){return new ot(Ee.comparator)}function Ty(){return new ot(Ee.comparator)}const Cx={asc:"ASCENDING",desc:"DESCENDING"},xx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rx={and:"AND",or:"OR"};class Ax{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gd(r,e){return r.useProto3Json||Pc(e)?e:{value:e}}function yc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Px(r,e){return yc(r,e.toTimestamp())}function ur(r){return $e(!!r,49232),ke.fromTimestamp((function(t){const s=Ni(t);return new Ze(s.seconds,s.nanos)})(r))}function Of(r,e){return Qd(r,e).canonicalString()}function Qd(r,e){const t=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Z_(r){const e=it.fromString(r);return $e(i0(e),10190,{key:e.toString()}),e}function Yd(r,e){return Of(r.databaseId,e.path)}function Cd(r,e){const t=Z_(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(t0(t))}function e0(r,e){return Of(r.databaseId,e)}function Nx(r){const e=Z_(r);return e.length===4?it.emptyPath():t0(e)}function Jd(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function t0(r){return $e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Sy(r,e,t){return{name:Yd(r,e),fields:t.value.mapValue.fields}}function Dx(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,E){return y.useProto3Json?($e(E===void 0||typeof E=="string",58123),Ot.fromBase64String(E||"")):($e(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ot.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const E=y.code===void 0?ee.UNKNOWN:Q_(y.code);return new ge(E,y.message||"")})(h);t=new J_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Cd(r,s.document.name),l=ur(s.document.updateTime),h=s.document.createTime?ur(s.document.createTime):ke.min(),f=new wn({mapValue:{fields:s.document.fields}}),g=Ht.newFoundDocument(o,l,h,f),y=s.targetIds||[],E=s.removedTargetIds||[];t=new Zu(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Cd(r,s.document),l=s.readTime?ur(s.readTime):ke.min(),h=Ht.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Zu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Cd(r,s.document),l=s.removedTargetIds||[];t=new Zu([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new Ex(o,l),f=s.targetId;t=new Y_(f,h)}}return t}function bx(r,e){let t;if(e instanceof gl)t={update:Sy(r,e.key,e.value)};else if(e instanceof G_)t={delete:Yd(r,e.key)};else if(e instanceof Is)t={update:Sy(r,e.key,e.data),updateMask:Bx(e.fieldMask)};else{if(!(e instanceof vx))return Te(16599,{dt:e.type});t={verify:Yd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof mc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof il)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof sl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Px(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function Lx(r,e){return r&&r.length>0?($e(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ur(o.updateTime):ur(l);return h.isEqual(ke.min())&&(h=ur(l)),new mx(h,o.transformResults||[])})(t,e)))):[]}function Vx(r,e){return{documents:[e0(r,e.path)]}}function Ox(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=e0(r,o);const l=(function(y){if(y.length!==0)return r0(fr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((E=>(function(k){return{field:yo(k.field),direction:Fx(k.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Gd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function Mx(r){let e=Nx(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){$e(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(T){const k=n0(T);return k instanceof fr&&D_(k)?k.getFilters():[k]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((k=>(function(W){return new pc(vo(W.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let k;return k=typeof T=="object"?T.value:T,Pc(k)?null:k})(t.limit));let g=null;t.startAt&&(g=(function(T){const k=!!T.before,P=T.values||[];return new fc(P,k)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const k=!T.before,P=T.values||[];return new fc(P,k)})(t.endAt)),ex(e,o,h,l,f,"F",g,y)}function jx(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=vo(t.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vo(t.unaryFilter.field);return Et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return Et.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Et.create(vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map((s=>n0(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function Fx(r){return Cx[r]}function Ux(r){return xx[r]}function zx(r){return Rx[r]}function yo(r){return{fieldPath:r.canonicalString()}}function vo(r){return bt.fromServerFormat(r.fieldPath)}function r0(r){return r instanceof Et?(function(t){if(t.op==="=="){if(cy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(uy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(uy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:Ux(t.op),value:t.value}}})(r):r instanceof fr?(function(t){const s=t.getFilters().map((o=>r0(o)));return s.length===1?s[0]:{compositeFilter:{op:zx(t.op),filters:s}}})(r):Te(54877,{filter:r})}function Bx(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function s0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,s,o,l=ke.min(),h=ke.min(),f=Ot.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.yt=e}}function Hx(r){const e=Mx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Kd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.Sn=new qx}addToCollectionParentIndex(e,t){return this.Sn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Pi.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class qx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Tt(it.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Tt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o0=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(o0,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Po(0)}static ar(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LruGarbageCollector",Kx=1048576;function Cy([r,e],[t,s]){const o=De(r,t);return o===0?De(e,s):o}class Gx{constructor(e){this.Pr=e,this.buffer=new Tt(Cy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Cy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qx{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){le(ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jo(t)?le(ky,"Ignoring IndexedDB error during garbage collection: ",t):await Mo(t)}await this.Ar(3e5)}))}}class Yx{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Ac.ce);const s=new Gx(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Iy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,h,f,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),mo()<=Ne.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function Jx(r,e){return new Yx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ka(s.mutation,o,jn.empty(),Ze.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=be()){const o=ds();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Fa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=ds();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,be())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Br();const h=qa(),f=(function(){return qa()})();return t.forEach(((g,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Is)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),Ka(E.mutation,y,E.mutation.getFieldMask(),Ze.now())):h.set(y.key,jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,E)=>h.set(y,E))),t.forEach(((y,E)=>f.set(y,new Zx(E,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=qa();let o=new ot(((h,f)=>h-f)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let E=s.get(g)||jn.empty();E=f.applyToLocalView(y,E),s.set(g,E);const T=(o.get(f.batchId)||be()).add(g);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,E=g.value,T=U_();E.forEach((k=>{if(!l.has(k)){const P=q_(t.get(k),s.get(k));P!==null&&T.set(k,P),l=l.add(k)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Y.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return tx(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Y.resolve(ds());let f=el,g=l;return h.next((y=>Y.forEach(y,((E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(e,E).next((k=>{g=g.insert(E,k)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,be()))).next((E=>({batchId:f,changes:F_(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let o=Fa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Fa();return this.indexManager.getCollectionParents(e,l).next((f=>Y.forEach(f,(g=>{const y=(function(T,k){return new Dc(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((T,k)=>{h=h.insert(T,k)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Ht.newInvalidDocument(E)))}));let f=Fa();return h.forEach(((g,y)=>{const E=l.get(g);E!==void 0&&Ka(E.mutation,y,jn.empty(),Ze.now()),Lc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Y.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ur(o.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:Hx(o.bundledQuery),readTime:ur(o.readTime)}})(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.overlays=new ot(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ds();return Y.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),Y.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const o=ds(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let E=l.get(y.largestBatchId);E===null&&(E=ds(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=ds(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>f.set(y,E))),!(f.size()>=o)););return Y.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new wx(t,s));let l=this.Lr.get(t);l===void 0&&(l=be(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.kr=new Tt(Ct.Kr),this.qr=new Tt(Ct.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Ct(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Ct(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Ee(new it([])),s=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.qr.forEachInRange([s,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new it([])),s=new Ct(t,e),o=new Ct(t,e+1);let l=be();return this.qr.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ct(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ct{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Tt(Ct.Kr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new _x(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Jr=this.Jr.add(new Ct(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Y.resolve(h)}lookupMutationBatch(e,t){return Y.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?xf:this.Yn-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(De);return t.forEach((o=>{const l=new Ct(o,0),h=new Ct(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(f=>{s=s.add(f.Hr)}))})),Y.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Ct(new Ee(l),0);let f=new Tt(De);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Hr)),!0)}),h),Y.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return Y.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Ct(t,0),o=this.Jr.firstAfterOrEqual(s);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.ti=e,this.docs=(function(){return new ot(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let s=Br();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ht.newInvalidDocument(o))})),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Br();const h=t.path,f=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||NC(PC(E),s)<=0||(o.has(E.key)||Lc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ni(e,t){return Y.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new oR(this)}getSize(e){return Y.resolve(this.size)}}class oR extends Xx{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),Y.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.persistence=e,this.ri=new Ss((t=>Pf(t)),Nf),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.ii=0,this.si=new Mf,this.targetCount=0,this.oi=Po._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),Y.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.lr(t),Y.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Y.waitFor(l).next((()=>o))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t){this._i={},this.overlays={},this.ai=new Ac(0),this.ui=!1,this.ui=!0,this.ci=new rR,this.referenceDelegate=e(this),this.li=new aR(this),this.indexManager=new Wx,this.remoteDocumentCache=(function(o){return new sR(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new $x(t),this.Pi=new tR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new iR(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const o=new lR(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Y.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class lR extends bC{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Ri=new Mf,this.Ai=null}static Vi(e){return new jf(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.di,(s=>{const o=Ee.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class vc{constructor(e,t){this.persistence=e,this.fi=new Ss((s=>OC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Jx(this,t)}static Vi(e,t){return new vc(e,t)}Ti(){}Ii(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return Y.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?Y.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((f=>{f||(s++,l.removeEntry(h,ke.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Y.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yu(e.data.value)),t}wr(e,t,s){return Y.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return Y.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Ff(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Q1()?8:LC(Wt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new uR;return this.ys(e,t,h).next((f=>{if(l.result=f,this.As)return this.ws(e,t,h,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(mo()<=Ne.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Y.resolve()):(mo()<=Ne.DEBUG&&le("QueryEngine","Query:",go(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(mo()<=Ne.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):Y.resolve())}gs(e,t){if(py(t))return Y.resolve(null);let s=lr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Kd(t,null,"F"),s=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=be(...l);return this.fs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(t,f);return this.Ss(t,y,h,g.readTime)?this.gs(e,Kd(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,s,o){return py(t)||o.isEqual(ke.min())?Y.resolve(null):this.fs.getDocuments(e,s).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,s,o)?Y.resolve(null):(mo()<=Ne.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(t)),this.Ds(e,h,t,AC(o,el)).next((f=>f)))}))}bs(e,t){let s=new Tt(M_(e));return t.forEach(((o,l)=>{Lc(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return mo()<=Ne.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",go(t)),this.fs.getDocumentsMatchingQuery(e,t,Pi.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="LocalStore",hR=3e8;class dR{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new ot(De),this.Fs=new Ss((l=>Pf(l)),Nf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function fR(r,e,t,s){return new dR(r,e,t,s)}async function l0(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=be();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of l){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function pR(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,E){const T=y.batch,k=T.keys();let P=Y.resolve();return k.forEach((W=>{P=P.next((()=>E.getEntry(g,W))).next((B=>{const V=y.docVersions.get(W);$e(V!==null,48541),B.version.compareTo(V)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),E.addEntry(B)))}))})),P.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function u0(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function mR(r,e){const t=Re(r),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((E,T)=>{const k=o.get(T);if(!k)return;f.push(t.li.removeMatchingKeys(l,E.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,E.addedDocuments,T))));let P=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(Ot.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(T,P),(function(B,V,J){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=hR?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(k,P,E)&&f.push(t.li.updateTargetData(l,P))}));let g=Br(),y=be();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(gR(l,h,e.documentUpdates).next((E=>{g=E.Bs,y=E.Ls}))),!s.isEqual(ke.min())){const E=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(E)}return Y.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=o,l)))}function gR(r,e,t){let s=be(),o=be();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Br();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):le(Uf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:o}}))}function yR(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=xf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vR(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,Y.resolve(o)):t.li.allocateTargetId(s).next((h=>(o=new Ii(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Xd(r,e,t){const s=Re(r),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!jo(h))throw h;le(Uf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function xy(r,e,t){const s=Re(r);let o=ke.min(),l=be();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,E){const T=Re(g),k=T.Fs.get(E);return k!==void 0?Y.resolve(T.vs.get(k)):T.li.getTargetData(y,E)})(s,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,t?o:ke.min(),t?l:be()))).next((f=>(_R(s,ix(e),f),{documents:f,ks:l})))))}function _R(r,e,t){let s=r.Ms.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class Ry{constructor(){this.activeTargetIds=cx()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wR{constructor(){this.vo=new Ry,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ry,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="ConnectivityMonitor";class Py{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(Ay,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){le(Ay,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function Zd(){return Bu===null?Bu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="RestConnection",TR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class SR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===hc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const h=Zd(),f=this.Qo(e,t.toUriEncodedString());le(xd,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,l);const{host:y}=new URL(f),E=bo(y);return this.zo(e,f,g,s,E).then((T=>(le(xd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Co(xd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",s),T}))}jo(e,t,s,o,l,h){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=TR[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection",Oa=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class To extends SR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!To.c_){const e=m_();Oa(e,p_.STAT_EVENT,(t=>{t.stat===zd.PROXY?le(Bt,"STAT_EVENT: detected buffering proxy"):t.stat===zd.NOPROXY&&le(Bt,"STAT_EVENT: detected no buffering proxy")})),To.c_=!0}}zo(e,t,s,o,l){const h=Zd();return new Promise(((f,g)=>{const y=new d_;y.setWithCredentials(!0),y.listenOnce(f_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Qu.NO_ERROR:const T=y.getResponseJson();le(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case Qu.TIMEOUT:le(Bt,`RPC '${e}' ${h} timed out`),g(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const k=y.getStatus();if(le(Bt,`RPC '${e}' ${h} failed with status:`,k,"response text:",y.getResponseText()),k>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const W=P==null?void 0:P.error;if(W&&W.status&&W.message){const B=(function(J){const G=J.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(G)>=0?G:ee.UNKNOWN})(W.status);g(new ge(B,W.message))}else g(new ge(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{le(Bt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);le(Bt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=Zd(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=l.join("");le(Bt,`Creating RPC '${e}' stream ${o}: ${y}`,f);const E=h.createWebChannel(y,f);this.I_(E);let T=!1,k=!1;const P=new IR({Ho:W=>{k?le(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(T||(le(Bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),le(Bt,`RPC '${e}' stream ${o} sending:`,W),E.send(W))},Jo:()=>E.close()});return Oa(E,ja.EventType.OPEN,(()=>{k||(le(Bt,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),Oa(E,ja.EventType.CLOSE,(()=>{k||(k=!0,le(Bt,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(E))})),Oa(E,ja.EventType.ERROR,(W=>{k||(k=!0,Co(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),P.o_(new ge(ee.UNAVAILABLE,"The operation could not be completed")))})),Oa(E,ja.EventType.MESSAGE,(W=>{var B;if(!k){const V=W.data[0];$e(!!V,16349);const J=V,G=(J==null?void 0:J.error)||((B=J[0])==null?void 0:B.error);if(G){le(Bt,`RPC '${e}' stream ${o} received error:`,G);const Q=G.status;let oe=(function(x){const I=yt[x];if(I!==void 0)return Q_(I)})(Q),he=G.message;oe===void 0&&(oe=ee.INTERNAL,he="Unknown error status: "+Q+" with message "+G.message),k=!0,P.o_(new ge(oe,he)),E.close()}else le(Bt,`RPC '${e}' stream ${o} received:`,V),P.__(V)}})),To.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return g_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(r){return new To(r)}function Rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(r){return new Ax(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To.c_=!1;class c0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="PersistentStream";class h0{constructor(e,t,s,o,l,h,f,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new c0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ge(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(Ny,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(le(Ny,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CR extends h0{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Dx(this.serializer,e),s=(function(l){if(!("targetChange"in l))return ke.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?ur(h.readTime):ke.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Jd(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=qd(g)?{documents:Vx(l,g)}:{query:Ox(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=X_(l,h.resumeToken);const y=Gd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(ke.min())>0){f.readTime=yc(l,h.snapshotVersion.toTimestamp());const y=Gd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=jx(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Jd(this.serializer),t.removeTarget=e,this.K_(t)}}class xR extends h0{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Lx(e.writeResults,e.commitTime),s=ur(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Jd(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>bx(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{}class AR extends RR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Qd(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ee.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.jo(e,Qd(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function PR(r,e,t,s){return new AR(r,e,t,s)}class NR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zr(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="RemoteStore";class DR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{s.enqueueAndForget((async()=>{ks(this)&&(le(ws,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await vl(y),y.Va.set("Unknown"),y.Ea.delete(4),await Fc(y)})(this))}))})),this.Va=new NR(s,o)}}async function Fc(r){if(ks(r))for(const e of r.Ra)await e(!0)}async function vl(r){for(const e of r.Ra)await e(!1)}function d0(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hf(t)?$f(t):Fo(t).O_()&&Bf(t,e))}function zf(r,e){const t=Re(r),s=Fo(t);t.Ia.delete(e),s.O_()&&f0(t,e),t.Ia.size===0&&(s.O_()?s.L_():ks(t)&&t.Va.set("Unknown"))}function Bf(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fo(r).Z_(e)}function f0(r,e){r.da.$e(e),Fo(r).X_(e)}function $f(r){r.da=new kx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Fo(r).start(),r.Va.ua()}function Hf(r){return ks(r)&&!Fo(r).x_()&&r.Ia.size>0}function ks(r){return Re(r).Ea.size===0}function p0(r){r.da=void 0}async function bR(r){r.Va.set("Online")}async function LR(r){r.Ia.forEach(((e,t)=>{Bf(r,e)}))}async function VR(r,e){p0(r),Hf(r)?(r.Va.ha(e),$f(r)):r.Va.set("Unknown")}async function OR(r,e,t){if(r.Va.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.da.removeTarget(f))})(r,e)}catch(s){le(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _c(r,s)}else if(e instanceof Zu?r.da.Xe(e):e instanceof Y_?r.da.st(e):r.da.tt(e),!t.isEqual(ke.min()))try{const s=await u0(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.da.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ia.get(y);E&&l.Ia.set(y,E.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const E=l.Ia.get(g);if(!E)return;l.Ia.set(g,E.withResumeToken(Ot.EMPTY_BYTE_STRING,E.snapshotVersion)),f0(l,g);const T=new Ii(E.target,g,y,E.sequenceNumber);Bf(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){le(ws,"Failed to raise snapshot:",s),await _c(r,s)}}async function _c(r,e,t){if(!jo(e))throw e;r.Ea.add(1),await vl(r),r.Va.set("Offline"),t||(t=()=>u0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{le(ws,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Fc(r)}))}function m0(r,e){return e().catch((t=>_c(r,t,e)))}async function Uc(r){const e=Re(r),t=Li(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xf;for(;MR(e);)try{const o=await yR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,jR(e,o)}catch(o){await _c(e,o)}g0(e)&&y0(e)}function MR(r){return ks(r)&&r.Ta.length<10}function jR(r,e){r.Ta.push(e);const t=Li(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function g0(r){return ks(r)&&!Li(r).x_()&&r.Ta.length>0}function y0(r){Li(r).start()}async function FR(r){Li(r).ra()}async function UR(r){const e=Li(r);for(const t of r.Ta)e.ea(t.mutations)}async function zR(r,e,t){const s=r.Ta.shift(),o=Lf.from(s,e,t);await m0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Uc(r)}async function BR(r,e){e&&Li(r).Y_&&await(async function(s,o){if((function(h){return Tx(h)&&h!==ee.ABORTED})(o.code)){const l=s.Ta.shift();Li(s).B_(),await m0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Uc(s)}})(r,e),g0(r)&&y0(r)}async function Dy(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),le(ws,"RemoteStore received new credentials");const s=ks(t);t.Ea.add(3),await vl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fc(t)}async function $R(r,e){const t=Re(r);e?(t.Ea.delete(2),await Fc(t)):e||(t.Ea.add(2),await vl(t),t.Va.set("Unknown"))}function Fo(r){return r.ma||(r.ma=(function(t,s,o){const l=Re(t);return l.sa(),new CR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:bR.bind(null,r),Yo:LR.bind(null,r),t_:VR.bind(null,r),J_:OR.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Hf(r)?$f(r):r.Va.set("Unknown")):(await r.ma.stop(),p0(r))}))),r.ma}function Li(r){return r.fa||(r.fa=(function(t,s,o){const l=Re(t);return l.sa(),new xR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:FR.bind(null,r),t_:BR.bind(null,r),ta:UR.bind(null,r),na:zR.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Uc(r)):(await r.fa.stop(),r.Ta.length>0&&(le(ws,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new Wf(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qf(r,e){if(zr("AsyncQueue",`${e}: ${r}`),jo(r))return new ge(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Fa(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new So;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.ga=new ot(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class No{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new No(e,t,So.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class WR{constructor(){this.queries=Ly(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=Ly(),l.forEach(((h,f)=>{for(const g of f.ba)g.onError(s)}))})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function Ly(){return new Ss((r=>O_(r)),bc)}async function qR(r,e){const t=Re(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new HR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=qf(h,`Initialization of query '${go(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Kf(t)}async function KR(r,e){const t=Re(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function GR(r,e){const t=Re(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.ba)f.Fa(o)&&(s=!0);h.wa=o}}s&&Kf(t)}function QR(r,e,t){const s=Re(r),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Kf(r){r.Ca.forEach((e=>{e.next()}))}var ef,Vy;(Vy=ef||(ef={})).Ma="default",Vy.Cache="cache";class YR{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new No(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.key=e}}class _0{constructor(e){this.key=e}}class JR{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=be(),this.mutatedKeys=be(),this.eu=M_(e),this.tu=new So(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new by,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const k=o.get(E),P=Lc(this.query,T)?T:null,W=!!k&&this.mutatedKeys.has(k.key),B=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let V=!1;k&&P?k.data.isEqual(P.data)?W!==B&&(s.track({type:3,doc:P}),V=!0):this.su(k,P)||(s.track({type:2,doc:P}),V=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(f=!0)):!k&&P?(s.track({type:0,doc:P}),V=!0):k&&!P&&(s.track({type:1,doc:k}),V=!0,(g||y)&&(f=!0)),V&&(P?(h=h.add(P),l=B?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,T)=>(function(P,W){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:V})}};return B(P)-B(W)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new No(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new by,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new _0(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new v0(s))})),t}cu(e){this.Za=e.ks,this.Ya=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Gf="SyncEngine";class XR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class ZR{constructor(e){this.key=e,this.hu=!1}}class eA{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ss((f=>O_(f)),bc),this.Iu=new Map,this.Eu=new Set,this.Ru=new ot(Ee.comparator),this.Au=new Map,this.Vu=new Mf,this.du={},this.mu=new Map,this.fu=Po.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tA(r,e,t=!0){const s=k0(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await w0(s,e,t,!0),o}async function nA(r,e){const t=k0(r);await w0(t,e,!0,!1)}async function w0(r,e,t,s){const o=await vR(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await rA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&d0(r.remoteStore,o),f}async function rA(r,e,t,s,o){r.pu=(T,k,P)=>(async function(B,V,J,G){let Q=V.view.ru(J);Q.Ss&&(Q=await xy(B.localStore,V.query,!1).then((({documents:x})=>V.view.ru(x,Q))));const oe=G&&G.targetChanges.get(V.targetId),he=G&&G.targetMismatches.get(V.targetId)!=null,K=V.view.applyChanges(Q,B.isPrimaryClient,oe,he);return My(B,V.targetId,K.au),K.snapshot})(r,T,k,P);const l=await xy(r.localStore,e,!0),h=new JR(e,l.ks),f=h.ru(l.documents),g=yl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);My(r,t,y.au);const E=new XR(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function iA(r,e,t){const s=Re(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!bc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Xd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&zf(s.remoteStore,o.targetId),tf(s,o.targetId)})).catch(Mo)):(tf(s,o.targetId),await Xd(s.localStore,o.targetId,!0))}async function sA(r,e){const t=Re(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),zf(t.remoteStore,s.targetId))}async function oA(r,e,t){const s=fA(r);try{const o=await(function(h,f){const g=Re(h),y=Ze.now(),E=f.reduce(((P,W)=>P.add(W.key)),be());let T,k;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let W=Br(),B=be();return g.xs.getEntries(P,E).next((V=>{W=V,W.forEach(((J,G)=>{G.isValidDocument()||(B=B.add(J))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,W))).next((V=>{T=V;const J=[];for(const G of f){const Q=yx(G,T.get(G.key).overlayedDocument);Q!=null&&J.push(new Is(G.key,Q,A_(Q.value.mapValue),Mr.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,J,f)})).next((V=>{k=V;const J=V.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(P,V.batchId,J)}))})).then((()=>({batchId:k.batchId,changes:F_(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.du[h.currentUser.toKey()];y||(y=new ot(De)),y=y.insert(f,g),h.du[h.currentUser.toKey()]=y})(s,o.batchId,t),await _l(s,o.changes),await Uc(s.remoteStore)}catch(o){const l=qf(o,"Failed to persist write");t.reject(l)}}async function E0(r,e){const t=Re(r);try{const s=await mR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?$e(h.hu,14607):o.removedDocuments.size>0&&($e(h.hu,42227),h.hu=!1))})),await _l(t,s,e)}catch(s){await Mo(s)}}function Oy(r,e,t){const s=Re(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Re(h);g.onlineState=f;let y=!1;g.queries.forEach(((E,T)=>{for(const k of T.ba)k.va(f)&&(y=!0)})),y&&Kf(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function aA(r,e,t){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ot(Ee.comparator);h=h.insert(l,Ht.newNoDocument(l,ke.min()));const f=be().add(l),g=new Mc(ke.min(),new Map,new ot(De),h,f);await E0(s,g),s.Ru=s.Ru.remove(l),s.Au.delete(e),Qf(s)}else await Xd(s.localStore,e,!1).then((()=>tf(s,e,t))).catch(Mo)}async function lA(r,e){const t=Re(r),s=e.batch.batchId;try{const o=await pR(t.localStore,e);S0(t,s,null),T0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await _l(t,o)}catch(o){await Mo(o)}}async function uA(r,e,t){const s=Re(r);try{const o=await(function(h,f){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,f).next((T=>($e(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);S0(s,e,t),T0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await _l(s,o)}catch(o){await Mo(o)}}function T0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function S0(r,e,t){const s=Re(r);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function tf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||I0(r,s)}))}function I0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(zf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Qf(r))}function My(r,e,t){for(const s of t)s instanceof v0?(r.Vu.addReference(s.key,e),cA(r,s)):s instanceof _0?(le(Gf,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||I0(r,s.key)):Te(19791,{wu:s})}function cA(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(le(Gf,"New document in limbo: "+t),r.Eu.add(s),Qf(r))}function Qf(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(it.fromString(e)),s=r.fu.next();r.Au.set(s,new ZR(t)),r.Ru=r.Ru.insert(t,s),d0(r.remoteStore,new Ii(lr(Df(t.path)),s,"TargetPurposeLimboResolution",Ac.ce))}}async function _l(r,e,t){const s=Re(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{var E;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Ff.Es(g.targetId,y);l.push(T)}})))})),await Promise.all(h),s.Pu.J_(o),await(async function(g,y){const E=Re(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Y.forEach(y,(k=>Y.forEach(k.Ts,(P=>E.persistence.referenceDelegate.addReference(T,k.targetId,P))).next((()=>Y.forEach(k.Is,(P=>E.persistence.referenceDelegate.removeReference(T,k.targetId,P)))))))))}catch(T){if(!jo(T))throw T;le(Uf,"Failed to update sequence numbers: "+T)}for(const T of y){const k=T.targetId;if(!T.fromCache){const P=E.vs.get(k),W=P.snapshotVersion,B=P.withLastLimboFreeSnapshotVersion(W);E.vs=E.vs.insert(k,B)}}})(s.localStore,l))}async function hA(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){le(Gf,"User change. New user:",e.toKey());const s=await l0(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ge(ee.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await _l(t,s.Ns)}}function dA(r,e){const t=Re(r),s=t.Au.get(e);if(s&&s.hu)return be().add(s.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function k0(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=E0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aA.bind(null,e),e.Pu.J_=GR.bind(null,e.eventManager),e.Pu.yu=QR.bind(null,e.eventManager),e}function fA(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uA.bind(null,e),e}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fR(this.persistence,new cR,e.initialUser,this.serializer)}Cu(e){return new a0(jf.Vi,this.serializer)}Du(e){return new wR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class pA extends wc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof vc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Qx(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new a0((s=>vc.Vi(s,t)),this.serializer)}}class nf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Oy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=hA.bind(null,this.syncEngine),await $R(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new WR})()}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=kR(e.databaseInfo);return PR(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new DR(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Oy(this.syncEngine,t,0)),(function(){return Py.v()?new Py:new ER})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,E){const T=new eA(o,l,h,f,g,y);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);le(ws,"RemoteStore shutting down."),l.Ea.add(5),await vl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}nf.provider={build:()=>new nf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class gA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=kf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{le(Vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(le(Vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=qf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ad(r,e){r.asyncQueue.verifyOperationInProgress(),le(Vi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await l0(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function jy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await yA(r);le(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Dy(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Dy(e.remoteStore,o))),r._onlineComponents=e}async function yA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){le(Vi,"Using user provided OfflineComponentProvider");try{await Ad(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),await Ad(r,new wc)}}else le(Vi,"Using default OfflineComponentProvider"),await Ad(r,new pA(void 0));return r._offlineComponents}async function C0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(le(Vi,"Using user provided OnlineComponentProvider"),await jy(r,r._uninitializedComponentsProvider._online)):(le(Vi,"Using default OnlineComponentProvider"),await jy(r,new nf))),r._onlineComponents}function vA(r){return C0(r).then((e=>e.syncEngine))}async function _A(r){const e=await C0(r),t=e.eventManager;return t.onListen=tA.bind(null,e.syncEngine),t.onUnlisten=iA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sA.bind(null,e.syncEngine),t}function wA(r,e,t={}){const s=new Ai;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const E=new mA({next:k=>{E.Nu(),h.enqueueAndForget((()=>KR(l,T)));const P=k.docs.has(f);!P&&k.fromCache?y.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&k.fromCache&&g&&g.source==="server"?y.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new YR(Df(f.path),E,{includeMetadataChanges:!0,Ka:!0});return qR(l,T)})(await _A(r),r.asyncQueue,e,t,s))),s.promise}function EA(r,e){const t=new Ai;return r.asyncQueue.enqueueAndForget((async()=>oA(await vA(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="ComponentProvider",Fy=new Map;function SA(r,e,t,s,o){return new FC(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,x0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firestore.googleapis.com",Uy=!0;class zy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R0,this.ssl=Uy}else this.host=e.host,this.ssl=e.ssl??Uy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kx)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new yC;switch(s.type){case"firstParty":return new EC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Fy.get(t);s&&(le(TA,"Removing Datastore"),Fy.delete(t),s.terminate())})(this),Promise.resolve()}}function IA(r,e,t,s={}){var y;r=Za(r,Yf);const o=bo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(xv(`https://${f}`),Rv("Firestore",!0)),l.host!==R0&&l.host!==f&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!gs(g,h)&&(r._setSettings(g),s.mockUserToken)){let E,T;if(typeof s.mockUserToken=="string")E=s.mockUserToken,T=$t.MOCK_USER;else{E=U1(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new $t(k)}r._authCredentials=new vC(new v_(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Jf(this.firestore,e,this._query)}}class xt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ml(t,xt._jsonSchema))return new xt(e,s||null,new Ee(it.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:vt("string",xt._jsonSchemaVersion),referencePath:vt("string")};class ol extends Jf{constructor(e,t,s){super(e,t,Df(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ee(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function A0(r,e,...t){if(r=Sn(r),arguments.length===1&&(e=kf.newId()),xC("doc","path",e),r instanceof Yf){const s=it.fromString(e,...t);return ty(s),new xt(r,null,new Ee(s))}{if(!(r instanceof xt||r instanceof ol))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...t));return ty(s),new xt(r.firestore,r instanceof ol?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="AsyncQueue";class $y{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new c0(this,"async_queue_retry"),this._c=()=>{const s=Rd();s&&le(By,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Rd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ai;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!jo(e))throw e;le(By,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",Hy(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Wf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:Hy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Hy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Xf extends Yf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new $y,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $y(e),this._firestoreClient=void 0,await e}}}function kA(r,e){const t=typeof r=="object"?r:Dv(),s=typeof r=="string"?r:hc,o=ff(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=j1("firestore");l&&IA(o,...l)}return o}function P0(r){if(r._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CA(r),r._firestoreClient}function CA(r){var s,o,l,h;const e=r._freezeSettings(),t=SA(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new gA(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(Ot.fromBase64String(e))}catch(t){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new En(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ml(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:vt("string",En._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(ml(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:vt("string",cr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ml(e,Un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Un(e.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Un._jsonSchemaVersion="firestore/vectorValue/1.0",Un._jsonSchema={type:vt("string",Un._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=/^__.*__$/;class RA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}function b0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:r})}}class Zf{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Zf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ec(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(b0(this.dataSource)&&xA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class AA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}createContext(e,t,s,o=!1){return new Zf({dataSource:e,methodName:t,targetDoc:s,path:bt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PA(r){const e=r._freezeSettings(),t=jc(r._databaseId);return new AA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function NA(r,e,t,s,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);M0("Data must be an object, but it was:",h,s);const f=V0(s,h);let g,y;if(l.merge)g=new jn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const k=ep(e,T,t);if(!h.contains(k))throw new ge(ee.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);LA(E,k)||E.push(k)}g=new jn(E),y=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=h.fieldTransforms;return new RA(new wn(f),g,y)}function L0(r,e){if(O0(r=Sn(r)))return M0("Unsupported field value:",e,r),V0(r,e);if(r instanceof D0)return(function(s,o){if(!b0(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=L0(f,o.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=Sn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return hx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ze.fromDate(s);return{timestampValue:yc(o.serializer,l)}}if(s instanceof Ze){const l=new Ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yc(o.serializer,l)}}if(s instanceof cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof En)return{bytesValue:X_(o.serializer,s._byteString)};if(s instanceof xt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Of(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Un)return(function(h,f){const g=h instanceof Un?h.toArray():h;return{mapValue:{fields:{[x_]:{stringValue:R_},[dc]:{arrayValue:{values:g.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return bf(f.serializer,E)}))}}}}}})(s,o);if(s0(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Cf(s)}`)})(r,e)}function V0(r,e){const t={};return E_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(r,((s,o)=>{const l=L0(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function O0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ze||r instanceof cr||r instanceof En||r instanceof xt||r instanceof D0||r instanceof Un||s0(r))}function M0(r,e,t){if(!O0(t)||!__(t)){const s=Cf(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function ep(r,e,t){if((e=Sn(e))instanceof N0)return e._internalPath;if(typeof e=="string")return bA(r,e);throw Ec("Field path arguments must be of type string or ",r,!1,void 0,t)}const DA=new RegExp("[~\\*/\\[\\]]");function bA(r,e,t){if(e.search(DA)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new N0(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ec(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ge(ee.INVALID_ARGUMENT,f+r+g)}function LA(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ts(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[dc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ft(h.doubleValue)));return new Un(t)}convertGeoPoint(e){return new cr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Nc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=it.fromString(e);$e(i0(s),9688,{name:e});const o=new nl(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA extends VA{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}const Wy="@firebase/firestore",qy="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MA extends j0{data(){return super.data()}}function jA(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ps extends j0{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ep("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ps._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:vt("string",ps._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class ec extends ps{data(e={}){return super.data(e)}}class Ga{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new za(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ec(this._firestore,this._userDataWriter,s.key,s,new za(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new za(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new za(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:FA(f.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:vt("string",Ga._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(r){r=Za(r,xt);const e=Za(r.firestore,Xf),t=P0(e);return wA(t,r._key).then((s=>BA(e,r,s)))}function F0(r,e,t){r=Za(r,xt);const s=Za(r.firestore,Xf),o=jA(r.converter,e,t),l=PA(s);return zA(s,[NA(l,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Mr.none())])}function zA(r,e){const t=P0(r);return EA(t,e)}function BA(r,e,t){const s=t.docs.get(e._key),o=new OA(r);return new ps(r,o,e._key,s,new za(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){gC(Lo),Io(new ys("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Xf(new _C(s.getProvider("auth-internal")),new TC(h,s.getProvider("app-check-internal")),UC(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),xi(Wy,qy,e),xi(Wy,qy,"esm2020")})();const $A={apiKey:"AIzaSyCO5r-8hPDpEJD2qY2llWyf_gAQXVlu4CU",authDomain:"stop-procrastinating-9ffaf.firebaseapp.com",projectId:"stop-procrastinating-9ffaf",storageBucket:"stop-procrastinating-9ffaf.firebasestorage.app",messagingSenderId:"270312713724",appId:"1:270312713724:web:98e212793206ff87511679",measurementId:"G-KYLVPZXV20"},U0=Nv($A),Tc=pC(U0),HA=new br,z0=kA(U0),ve={USER_MOOD:"sp_user_mood",TASKS:"sp_tasks",SCHEDULED_TASKS:"sp_scheduled_tasks",DISTRACTION_LOGS:"sp_distraction_logs",WORK_LOGS:"sp_work_logs",REFLECTIONS:"sp_daily_reflections",USER_STATS:"sp_user_stats"},WA=async(r,e)=>{const t=Tc.currentUser;if(t)try{const s=A0(z0,"users",t.uid),l={[ve.TASKS]:"tasks",[ve.SCHEDULED_TASKS]:"scheduled",[ve.REFLECTIONS]:"reflections",[ve.USER_STATS]:"stats",[ve.USER_MOOD]:"mood"}[r];if(l){const h=typeof e=="object"?JSON.stringify(e):e;await F0(s,{[l]:h},{merge:!0}),console.log(`Synced ${r} to cloud.`)}}catch(s){console.error("Cloud sync failed:",s)}},je=(r,e=null)=>{try{const t=localStorage.getItem(r);return t?JSON.parse(t):e}catch(t){return console.error(`Error reading ${r} from storage:`,t),e}},Lt=(r,e)=>{try{localStorage.setItem(r,JSON.stringify(e)),WA(r,e)}catch(t){console.error(`Error writing ${r} to storage:`,t)}},qA=()=>{const r=new Date().toDateString();let e=je(ve.USER_STATS,{totalPoints:0,currentStreak:0,longestStreak:0,lastActiveDate:null});if(e.lastActiveDate!==r){const t=new Date;t.setDate(t.getDate()-1),e.lastActiveDate===t.toDateString()?e.currentStreak+=1:e.lastActiveDate===null?e.currentStreak=1:e.currentStreak+=1,e.currentStreak>e.longestStreak&&(e.longestStreak=e.currentStreak),e.lastActiveDate=r,Lt(ve.USER_STATS,e)}return e},B0=r=>{let e=je(ve.USER_STATS,{totalPoints:0,currentStreak:0,longestStreak:0,lastActiveDate:null});return e.totalPoints+=r,Lt(ve.USER_STATS,e),e},$0=()=>{Object.values(ve).forEach(r=>{localStorage.removeItem(r)}),localStorage.removeItem("sp_user_name")},Vt=({children:r})=>{const e=Oi(),t=je(ve.USER_STATS,{totalPoints:0,currentStreak:0}),[s,o]=M.useState(null);M.useEffect(()=>{const h=nk(Tc,f=>{o(f)});return()=>h()},[]);const l=()=>{$0(),rk(Tc)};return v.jsxs("div",{className:"layout-wrapper",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[v.jsxs("header",{style:{padding:"1rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",background:"white"},children:[v.jsx(Ya,{to:"/",style:{textDecoration:"none",color:"var(--color-primary)",fontWeight:"bold"},children:"Stop Procrastinating"}),v.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",fontSize:"0.875rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx("span",{role:"img","aria-label":"streak",children:""}),v.jsxs("span",{children:[t.currentStreak," Days"]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx("span",{role:"img","aria-label":"points",children:""}),v.jsxs("span",{children:[t.totalPoints," pts"]})]}),s?v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"0.5rem"},children:[s.photoURL?v.jsx("img",{src:s.photoURL,alt:"User",style:{width:"24px",height:"24px",borderRadius:"50%"}}):v.jsx(x1,{size:20}),v.jsx("button",{onClick:l,style:{background:"none",border:"none",fontSize:"0.75rem",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline"},children:"Sign Out"})]}):v.jsxs(Ya,{to:"/signin",style:{display:"flex",alignItems:"center",gap:"0.25rem",textDecoration:"none",color:"var(--color-primary)",marginLeft:"0.5rem"},children:[v.jsx(yv,{size:18}),v.jsx("span",{children:"Sign In"})]})]})]}),v.jsx("main",{style:{flex:1,paddingBottom:"2rem"},children:r}),v.jsxs("nav",{style:{position:"fixed",bottom:0,left:0,width:"100%",background:"white",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-around",padding:"0.75rem 0",zIndex:100},children:[v.jsx(Ma,{to:"/",icon:v.jsx(o1,{size:20}),label:"Home",active:e.pathname==="/"||e.pathname==="/mood"}),v.jsx(Ma,{to:"/schedule",icon:v.jsx(cf,{size:20}),label:"Tasks",active:e.pathname==="/schedule"}),v.jsx(Ma,{to:"/limit",icon:v.jsx(vv,{size:20}),label:"Limit",active:e.pathname==="/limit"}),v.jsx(Ma,{to:"/reflect",icon:v.jsx(YT,{size:20}),label:"Reflect",active:e.pathname==="/reflect"}),v.jsx(Ma,{to:"/analysis",icon:v.jsx(_1,{size:20}),label:"Analysis",active:e.pathname==="/analysis"})]}),v.jsx("div",{style:{height:"70px"}})]})},Ma=({to:r,icon:e,label:t,active:s})=>v.jsxs(Ya,{to:r,style:{display:"flex",flexDirection:"column",alignItems:"center",textDecoration:"none",color:s?"var(--color-primary)":"var(--color-text-secondary)",fontSize:"0.75rem"},children:[e,v.jsx("span",{style:{marginTop:"0.25rem"},children:t})]}),KA=()=>{const r=zn(),[e,t]=M.useState("Friend"),[s,o]=M.useState(0),[l,h]=M.useState(0),[f,g]=M.useState("Start your day!"),[y,E]=M.useState([]),[T,k]=M.useState(null);return M.useEffect(()=>{t(je(ve.USER_NAME,"Friend"));const P=je(ve.USER_STATS,{currentStreak:0,totalPoints:0});o(P.currentStreak),h(P.totalPoints),(()=>{const B=new Date().setHours(0,0,0,0),J=je(ve.DISTRACTION_LOGS,[]).filter(q=>new Date(q.date).setHours(0,0,0,0)===B),G=J.reduce((q,ye)=>q+parseInt(ye.duration||0),0),Q=J.length,oe={};J.forEach(q=>{oe[q.app]=(oe[q.app]||0)+parseInt(q.duration||0)});const he=Object.entries(oe).sort(([,q],[,ye])=>ye-q).slice(0,3).map(([q,ye])=>({name:q,duration:ye}));E(he);const K=je(ve.TASKS,[]),x=je(ve.SCHEDULED_TASKS,[]),I=K.filter(q=>q.completed&&q.completedAt&&new Date(q.completedAt).setHours(0,0,0,0)===B),R=x.filter(q=>q.completed&&q.completedAt&&new Date(q.completedAt).setHours(0,0,0,0)===B),b=[...I,...R],D=b.reduce((q,ye)=>q+(parseInt(ye.timeTaken)||0),0),A=je(ve.WORK_LOGS,[]).filter(q=>new Date(q.date).setHours(0,0,0,0)===B),ze=A.reduce((q,ye)=>q+parseInt(ye.duration||0),0),at=D+ze,tt=b.length,We=tt*10+A.length*2;let re=0,me=0;const se=at+G;let O="Ready to start?";if(se>0){const q=Math.round(G/se*100);me=q,re=100-q,re>=80?O="You are on fire!  Highly Focused.":re>=50?O="Good flow. Keep working! ":re>=30?O="Distractions are creeping in. ":O="Procrastination is winning. Fight back! "}g(O),k({date:new Date().toISOString(),workScore:re,procrastinationScore:me,tasksDoneCount:tt,pointsScored:We,distractionTime:G,distractionCount:Q,isLive:!0})})()},[]),v.jsx(Vt,{children:v.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"2rem"},children:[v.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"0.5rem",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Stop Procrastinating"}),v.jsx("p",{style:{fontSize:"1.2rem",color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Start small. Be kind to yourself."}),v.jsxs("div",{className:"card",style:{textAlign:"left",marginBottom:"2rem"},children:[v.jsxs("h3",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(S1,{className:"text-secondary",size:20}),"Your Progress"]}),v.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-md)",fontWeight:"500",color:"var(--color-primary)"},children:f}),v.jsxs("ul",{style:{paddingLeft:"1.5rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"1rem"},children:[v.jsxs("li",{children:[v.jsx("strong",{children:s})," Total Days Active"]}),v.jsxs("li",{children:[v.jsx("strong",{children:l})," Focus Points"]})]}),y.length>0&&v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"var(--color-text-primary)"},children:"Top Distractions Today:"}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.5rem"},children:y.map((P,W)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fef2f2",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #fecaca"},children:[v.jsx("span",{style:{color:"#ef4444",fontWeight:"500"},children:P.name}),v.jsxs("span",{style:{fontWeight:"bold",color:"#b91c1c"},children:[P.duration,"m"]})]},W))})]})]}),v.jsx("div",{style:{marginTop:"2rem"},children:v.jsxs("button",{className:"btn-primary",onClick:()=>r("/mood"),children:["Get Started ",v.jsx($T,{size:18,style:{marginLeft:"0.5rem"}})]})}),T&&v.jsxs("div",{style:{marginTop:"3rem",textAlign:"left"},children:[v.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-text-secondary)"},children:[v.jsx(UT,{size:18}),"Today's Live Snapshot"]}),v.jsxs("div",{className:"card",children:[v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.9rem"},children:[v.jsxs("span",{style:{color:"#15803d",fontWeight:"bold"},children:["Work ",T.workScore,"%"]}),v.jsxs("span",{style:{color:"#b91c1c",fontWeight:"bold"},children:["Procrastinate ",T.procrastinationScore,"%"]})]}),v.jsxs("div",{style:{height:"8px",background:"#e2e8f0",borderRadius:"4px",overflow:"hidden",display:"flex"},children:[v.jsx("div",{style:{width:`${T.workScore}%`,background:"#22c55e"}}),v.jsx("div",{style:{width:`${T.procrastinationScore}%`,background:"#ef4444"}})]})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid #f1f5f9"},children:[v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--color-primary)"},children:T.tasksDoneCount||0}),v.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Tasks Done"})]}),v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--color-warning)"},children:T.pointsScored||0}),v.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Points Scored"})]})]}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1.5rem"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:"Distractions"}),v.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:[T.distractionTime||0,"m"]})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:"Count"}),v.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:T.distractionCount||0})]})]}),T.tomorrowGoal&&v.jsxs("div",{style:{padding:"1rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-md)"},children:[v.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[v.jsx(cf,{size:14}),new Date(T.date).toDateString()===new Date().toDateString()?"Goal for Tomorrow":"Target set for Today"]}),v.jsx("div",{style:{fontWeight:500},children:T.tomorrowGoal})]})]})]})]})})},GA=()=>{const r=zn(),e=[{id:"focused",label:"Focused",icon:v.jsx(wv,{size:32}),color:"var(--color-success)",desc:"I'm ready to tackle something big."},{id:"low-energy",label:"Low Energy",icon:v.jsx(WT,{size:32}),color:"var(--color-warning)",desc:"I need something small and easy."},{id:"bored",label:"Bored",icon:v.jsx(n1,{size:32}),color:"var(--color-text-accent)",desc:"I need to get interested."}],t=s=>{Lt(ve.USER_MOOD,s),r("/tasks")};return v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"How are you feeling right now?"}),v.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map(s=>v.jsxs("button",{onClick:()=>t(s.id),className:"card",style:{display:"flex",alignItems:"center",gap:"1rem",textAlign:"left",width:"100%",border:"1px solid transparent",cursor:"pointer",transition:"transform 0.2s, border-color 0.2s"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.02)",o.currentTarget.style.borderColor=s.color},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.borderColor="transparent"},children:[v.jsx("div",{style:{color:s.color},children:s.icon}),v.jsxs("div",{children:[v.jsx("strong",{style:{display:"block",fontSize:"1.1rem"},children:s.label}),v.jsx("span",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)"},children:s.desc})]})]},s.id))})]})})},QA=()=>{const r=zn(),[e,t]=M.useState([]),[s,o]=M.useState(null),[l,h]=M.useState([]);return M.useEffect(()=>{const f=je(ve.USER_MOOD);o(f);const y=je(ve.TASKS,[]).filter(P=>{var W;return!P.completed&&(((W=P.moods)==null?void 0:W.includes(f))||!P.moods||P.moods.length===0)});t(y);const E=je(ve.SCHEDULED_TASKS,[]),T=new Date().setHours(0,0,0,0),k=E.filter(P=>{const W=new Date(P.startDate).setHours(0,0,0,0),B=new Date(P.dueDate).setHours(0,0,0,0);return!P.completed&&T>=W&&T<=B});h(k)},[]),v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("button",{onClick:()=>r("/schedule"),style:{background:"transparent",border:"none",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"1rem",cursor:"pointer",marginBottom:"1rem"},children:[v.jsx(ms,{size:20})," Back"]}),l.length>0&&v.jsxs("div",{style:{background:"var(--color-bg-accent)",padding:"1rem",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",border:"1px solid var(--color-primary)"},children:[v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"start",color:"var(--color-primary)",marginBottom:"0.5rem"},children:[v.jsx(mv,{size:20,style:{marginTop:"0.1rem"}}),v.jsxs("strong",{style:{display:"block"},children:["Daily Commitments (",l.length,")"]})]}),l.map(f=>v.jsx("div",{style:{marginLeft:"1.75rem",marginBottom:"0.5rem",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem"},children:v.jsxs("span",{style:{color:"var(--color-text-primary)"},children:["Planned to work on ",v.jsx("strong",{children:f.workToComplete})," for the ",v.jsx("strong",{children:f.name}),"."]})},f.id))]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[v.jsx("h2",{children:"Suggested for You"}),v.jsxs("button",{className:"btn-primary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},onClick:()=>r("/add-task"),children:[v.jsx(Dd,{size:18})," Add Task"]})]}),e.length===0?v.jsxs("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"2rem"},children:[v.jsxs("p",{children:["No tasks fit your current mood (",s,")."]}),v.jsx("p",{children:"Why not add a small one?"})]}):v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map(f=>v.jsxs("div",{className:"card",children:[v.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:v.jsxs("div",{children:[v.jsx("h3",{style:{margin:"0 0 0.25rem",fontSize:"1.25rem"},children:f.title}),v.jsxs("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem"},children:[v.jsx("strong",{children:"Start with:"})," ",f.smallStep]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[v.jsx(e1,{size:16})," ",f.time]})]})}),v.jsx("div",{style:{marginTop:"1rem",textAlign:"right"},children:v.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.9rem"},onClick:()=>r(`/complete/${f.id}`),children:"Task Done (Add Proof)"})})]},f.id))})]})})},YA=()=>{const r=zn(),[e,t]=M.useState({title:"",smallStep:"",time:"15 mins",moods:[]}),s=[{id:"focused",label:"Focused"},{id:"low-energy",label:"Low Energy"},{id:"bored",label:"Bored"}],o=h=>{h.preventDefault();const f=je(ve.TASKS,[]),g={id:Date.now().toString(),...e,completed:!1,createdAt:new Date().toISOString()};Lt(ve.TASKS,[g,...f]),r("/tasks")},l=h=>{t(f=>{const g=f.moods.includes(h)?f.moods.filter(y=>y!==h):[...f.moods,h];return{...f,moods:g}})};return v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("button",{onClick:()=>r("/schedule"),style:{background:"transparent",border:"none",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"1rem",cursor:"pointer",marginBottom:"1rem"},children:[v.jsx(ms,{size:20})," Back"]}),v.jsx("h2",{children:"Add a New Task"}),v.jsxs("form",{onSubmit:o,className:"card",children:[v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Task Name"}),v.jsx("input",{required:!0,value:e.title,onChange:h=>t({...e,title:h.target.value}),placeholder:"e.g. Study Math"})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Small First Step (Crucial!)"}),v.jsx("input",{required:!0,value:e.smallStep,onChange:h=>t({...e,smallStep:h.target.value}),placeholder:"e.g. Open the textbook to page 50"}),v.jsx("small",{style:{color:"var(--color-text-secondary)"},children:"Just write what you will do in the first 2 minutes."})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Expected Time (Minutes)"}),v.jsx("input",{type:"number",required:!0,value:e.time,onChange:h=>t({...e,time:h.target.value}),placeholder:"e.g. 30"})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{children:"Best for Mood (Optional)"}),v.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:s.map(h=>v.jsx("button",{type:"button",onClick:()=>l(h.id),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",border:"1px solid var(--color-primary)",background:e.moods.includes(h.id)?"var(--color-primary)":"transparent",color:e.moods.includes(h.id)?"white":"var(--color-primary)",fontSize:"0.85rem"},children:h.label},h.id))})]}),v.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save Task"})]})]})})},JA=()=>{const{taskId:r}=zE(),e=zn(),[t,s]=M.useState(null),[o,l]=M.useState(""),[h,f]=M.useState(""),[g,y]=M.useState(null),E=M.useRef(null),T=M.useRef(null),[k,P]=M.useState(!1),[W,B]=M.useState(0);M.useEffect(()=>{let Q=je(ve.TASKS,[]).find(oe=>oe.id===r);if(!Q){const he=je(ve.SCHEDULED_TASKS,[]).find(K=>String(K.id)===r);he&&(Q={...he,title:he.name,smallStep:he.workToComplete||"Scheduled Work",isSchedule:!0})}Q&&s(Q)},[r]);const V=G=>{const Q=G.target.files[0];if(Q){const oe=new FileReader;oe.onloadend=()=>{y(oe.result)},oe.readAsDataURL(Q)}},J=G=>{if(G.preventDefault(),t.isSchedule){const K=je(ve.SCHEDULED_TASKS,[]).map(x=>String(x.id)===r?{...x,completed:!0,completedAt:new Date().toISOString(),timeTaken:parseInt(h)||0,proofImage:g}:x);Lt(ve.SCHEDULED_TASKS,K)}else{const K=je(ve.TASKS,[]).map(x=>x.id===r?{...x,completed:!0,learning:o,completedAt:new Date().toISOString(),timeTaken:parseInt(h)||0,proofImage:g}:x);Lt(ve.TASKS,K)}const Q=new Date().setHours(0,0,0,0);let oe=10;if(t.isSchedule){const he=new Date(t.dueDate).setHours(0,0,0,0);Q<=he?oe=100:oe=10}B0(oe),qA(),B(oe),P(!0)};return t?k?v.jsx(Vt,{children:v.jsxs("div",{className:"container",style:{textAlign:"center",padding:"3rem 1rem"},children:[v.jsx(gv,{size:64,color:"var(--color-success)",style:{margin:"0 auto 1rem"}}),v.jsx("h2",{children:"Well Done!"}),v.jsx("p",{children:"You started despite resistance. That matters."}),v.jsxs("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-lg)"},children:[v.jsxs("h3",{style:{margin:0,color:"var(--color-primary)"},children:["+",W," Focus Points"]}),v.jsx("p",{style:{margin:"0.5rem 0 0"},children:"Streak Updated!"})]}),v.jsx("button",{className:"btn-primary",onClick:()=>e("/"),children:"Back Home"})]})}):v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("h2",{children:['Complete "',t.title,'"']}),v.jsx("div",{className:"card",children:v.jsxs("form",{onSubmit:J,children:[v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{children:"Time Taken (minutes)"}),v.jsx("input",{type:"number",required:!0,min:"1",value:h,onChange:G=>f(G.target.value),placeholder:"e.g. 30",style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-md)",border:"1px solid #cbd5e1",marginTop:"0.5rem"}})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{children:"What did you learn or do? (Optional)"}),v.jsx("textarea",{value:o,onChange:G=>l(G.target.value),placeholder:"I learned that starting wasn't so bad...",rows:2})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem"},children:"Upload Proof (Optional)"}),v.jsx("input",{type:"file",accept:"image/*",ref:E,onChange:V,style:{display:"none"}}),v.jsx("input",{type:"file",accept:"image/*",capture:"environment",id:"cameraInput",ref:T,onChange:V,style:{display:"none"}}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsxs("div",{onClick:()=>{var G;return(G=E.current)==null?void 0:G.click()},style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1.5rem",textAlign:"center",color:"var(--color-text-secondary)",cursor:"pointer",background:g?"#f0fdf4":"transparent"},children:[v.jsx(k1,{size:24,style:{marginBottom:"0.5rem"}}),v.jsx("div",{children:"Upload Image"})]}),v.jsxs("div",{onClick:()=>{var G;return(G=T.current)==null?void 0:G.click()},style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1.5rem",textAlign:"center",color:"var(--color-text-secondary)",cursor:"pointer",background:g?"#f0fdf4":"transparent"},children:[v.jsx(GT,{size:24,style:{marginBottom:"0.5rem"}}),v.jsx("div",{children:"Take Photo"})]})]}),g&&v.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--color-success)",textAlign:"center"},children:"Proof Attached!"})]}),v.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Mark as Completed"})]})})]})}):v.jsx(Vt,{children:v.jsx("div",{children:"Loading..."})})},XA=()=>{const r=zn(),[e,t]=M.useState([]),[s,o]=M.useState([]),[l,h]=M.useState(null),[f,g]=M.useState(""),[y,E]=M.useState(!1),[T,k]=M.useState(!1),[P,W]=M.useState({name:"",workToComplete:"",startDate:"",dueDate:""}),[B,V]=M.useState({title:"",smallStep:"",time:"15 mins",moods:[]}),J=[{id:"focused",label:"Focused"},{id:"low-energy",label:"Low Energy"},{id:"bored",label:"Bored"}];M.useEffect(()=>{t(je(ve.SCHEDULED_TASKS,[])),o(je(ve.TASKS,[]))},[]);const G=K=>{if(K.preventDefault(),!l||!f)return;const x=parseInt(f);if(isNaN(x)||x<=0)return;const I={id:Date.now().toString(),taskId:l.id,taskTitle:l.title||l.name,duration:x,date:new Date().toISOString()},R=je(ve.WORK_LOGS,[]);Lt(ve.WORK_LOGS,[...R,I]),B0(x),h(null),g(""),alert(`Logged ${x} mins of work! Keep it up.`)},Q=K=>{K.preventDefault();const x=[...e,{id:Date.now(),...P}];Lt(ve.SCHEDULED_TASKS,x),t(x),E(!1),W({name:"",workToComplete:"",startDate:"",dueDate:""})},oe=K=>{K.preventDefault();const I=[{id:Date.now().toString(),...B,completed:!1,createdAt:new Date().toISOString()},...s];Lt(ve.TASKS,I),o(I),k(!1),V({title:"",smallStep:"",time:"15 mins",moods:[]})},he=K=>{V(x=>{const I=x.moods.includes(K)?x.moods.filter(R=>R!==K):[...x.moods,K];return{...x,moods:I}})};return v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[v.jsx(ms,{size:18})," Back"]}),v.jsx("h2",{style:{margin:0},children:"Planning Hub"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"3rem"},children:[v.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",border:T?"2px solid var(--color-primary)":"1px solid transparent",transition:"all 0.2s",padding:"2rem 1rem"},onClick:()=>{k(!T),E(!1)},children:[v.jsx("div",{style:{background:"var(--color-bg-accent)",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"var(--color-primary)"},children:v.jsx(wv,{size:24})}),v.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem"},children:"Add Task"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",margin:0},children:"For immediate work today. Small steps."})]}),v.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",border:y?"2px solid var(--color-primary)":"1px solid transparent",padding:"2rem 1rem"},onClick:()=>{E(!y),k(!1)},children:[v.jsx("div",{style:{background:"#f0f9ff",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"#0284c7"},children:v.jsx(cf,{size:24})}),v.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem"},children:"Schedule Future Task"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",margin:0},children:"Plan ahead to reduce uncertainty."})]})]}),T&&v.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"Add a New Task"}),v.jsxs("form",{onSubmit:oe,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid var(--color-primary)"},children:[v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Task Name"}),v.jsx("input",{required:!0,value:B.title,onChange:K=>V({...B,title:K.target.value}),placeholder:"e.g. Study Math",autoFocus:!0})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Small First Step (Crucial!)"}),v.jsx("input",{required:!0,value:B.smallStep,onChange:K=>V({...B,smallStep:K.target.value}),placeholder:"e.g. Open the textbook to page 50"}),v.jsx("small",{style:{color:"var(--color-text-secondary)"},children:"Just write what you will do in the first 2 minutes."})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Expected Time (Minutes)"}),v.jsx("input",{type:"number",required:!0,value:B.time,onChange:K=>V({...B,time:K.target.value}),placeholder:"e.g. 30"})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{children:"Best for Mood (Optional)"}),v.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:J.map(K=>v.jsx("button",{type:"button",onClick:()=>he(K.id),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",border:"1px solid var(--color-primary)",background:B.moods.includes(K.id)?"var(--color-primary)":"transparent",color:B.moods.includes(K.id)?"white":"var(--color-primary)",fontSize:"0.85rem"},children:K.label},K.id))})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[v.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),v.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Task"})]})]})]}),y&&v.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"New Future Plan"}),v.jsxs("form",{onSubmit:Q,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid #0284c7"},children:[v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Task Name"}),v.jsx("input",{required:!0,value:P.name,onChange:K=>W({...P,name:K.target.value}),autoFocus:!0})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Work to Complete"}),v.jsx("input",{value:P.workToComplete,onChange:K=>W({...P,workToComplete:K.target.value}),placeholder:"e.g. Read Chapters 1-3"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[v.jsxs("div",{children:[v.jsx("label",{children:"Start Date"}),v.jsx("input",{type:"date",required:!0,value:P.startDate,onChange:K=>W({...P,startDate:K.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Due Date"}),v.jsx("input",{type:"date",required:!0,value:P.dueDate,onChange:K=>W({...P,dueDate:K.target.value})})]})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[v.jsx("button",{type:"button",onClick:()=>E(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),v.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Plan"})]})]})]}),v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[v.jsx(l1,{size:20,className:"text-secondary"}),v.jsx("h3",{style:{margin:0,color:"var(--color-text-secondary)"},children:"Your Plans"})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[s.length>0&&s.some(K=>!K.completed)&&v.jsx("h4",{style:{margin:"1rem 0 0.5rem",color:"var(--color-primary)",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.25rem"},children:"Daily Commitments"}),s.filter(K=>!K.completed).map(K=>v.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--color-warning)"},children:[v.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[v.jsx("h3",{style:{margin:0},children:K.title}),v.jsx("span",{style:{fontSize:"0.75rem",background:"#fef3c7",color:"#d97706",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"Now"})]}),v.jsx("p",{style:{margin:"0 0 0.5rem",color:"var(--color-text-primary)"},children:K.smallStep})]})}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[v.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:["Duration: ",K.time,"m"]}),v.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>r(`/complete/${K.id}`),children:"Task Done"})]})]},K.id)),e.length>0&&v.jsx("h4",{style:{margin:"1.5rem 0 0.5rem",color:"#0284c7",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.25rem"},children:"Future Schedule"}),e.map(K=>{const x=new Date().setHours(0,0,0,0),I=new Date(K.startDate).setHours(0,0,0,0),R=new Date(K.dueDate).setHours(0,0,0,0),b=x>=I&&x<=R;return R<x||K.completed?null:v.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--color-primary)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[v.jsxs("div",{children:[v.jsx("h3",{style:{margin:"0 0 0.25rem"},children:K.name}),v.jsx("p",{style:{margin:"0 0 0.5rem",color:"var(--color-text-primary)"},children:K.workToComplete})]}),b&&v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--color-primary)",fontSize:"0.8rem",fontWeight:"bold",background:"var(--color-bg-accent)",padding:"0.25rem 0.5rem",borderRadius:"var(--radius-md)"},children:[v.jsx(mv,{size:14}),"Active Today"]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[v.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[v.jsxs("span",{children:["Start: ",K.startDate]}),v.jsxs("span",{children:["Due: ",K.dueDate]})]}),v.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>r(`/complete/${K.id}`),children:"Task Done"}),v.jsx("button",{className:"btn-secondary",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>h(K),children:"Done some work"})]}),(l==null?void 0:l.id)===K.id&&v.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem"},children:"Log Work (Not Done Yet)"}),v.jsxs("form",{onSubmit:G,style:{display:"flex",gap:"0.5rem"},children:[v.jsx("input",{type:"number",placeholder:"Mins",value:f,onChange:D=>g(D.target.value),style:{width:"80px",padding:"0.25rem"},autoFocus:!0}),v.jsxs("button",{type:"submit",className:"btn-primary",style:{padding:"0.25rem 0.75rem",fontSize:"0.85rem"},children:[v.jsx(p1,{size:14})," Save"]}),v.jsx("button",{type:"button",onClick:()=>{h(null),g("")},style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--color-text-secondary)"},children:v.jsx(_v,{size:18})})]})]})]},K.id)}),s.length===0&&e.length===0&&v.jsx("p",{style:{textAlign:"center",padding:"2rem",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)"},children:"No plans yet. Clear mind, clear path."})]})]})]})})},ZA=()=>{const r=zn(),[e,t]=M.useState(0),[s,o]=M.useState(0),[l,h]=M.useState(""),[f,g]=M.useState([]),[y,E]=M.useState([]),[T,k]=M.useState([]),[P,W]=M.useState(!1),[B,V]=M.useState(0),[J,G]=M.useState(0),[Q,oe]=M.useState(0),[he,K]=M.useState(0);M.useEffect(()=>{const I=new Date().setHours(0,0,0,0),b=je(ve.DISTRACTION_LOGS,[]).filter(de=>new Date(de.date).setHours(0,0,0,0)===I);g(b);const D=b.reduce((de,Ce)=>de+parseInt(Ce.duration||0),0);G(D);const j=je(ve.TASKS,[]),A=je(ve.SCHEDULED_TASKS,[]),ze=j.filter(de=>!de.completed||!de.completedAt?!1:new Date(de.completedAt).setHours(0,0,0,0)===I),at=A.filter(de=>!de.completed||!de.completedAt?!1:new Date(de.completedAt).setHours(0,0,0,0)===I),tt=[...ze,...at];E(tt);const re=je(ve.WORK_LOGS,[]).filter(de=>new Date(de.date).setHours(0,0,0,0)===I);k(re);const me=tt.reduce((de,Ce)=>de+(parseInt(Ce.timeTaken)||0),0),se=re.reduce((de,Ce)=>de+parseInt(Ce.duration||0),0),O=me+se;V(O);const q=tt.length;oe(q),K(q*10+re.length*2);const ye=O+D;if(ye>0){const de=Math.round(D/ye*100);t(de),o(100-de)}else o(0),t(0)},[]);const x=I=>{I.preventDefault();const R=je(ve.REFLECTIONS,[]),b={id:Date.now(),date:new Date().toISOString(),procrastinationScore:e,workScore:s,tomorrowGoal:l,distractionCount:f.length,distractionTime:J,tasksDoneCount:Q,taskTime:B,pointsScored:he};Lt(ve.REFLECTIONS,[b,...R]),W(!0)};return P?v.jsx(Vt,{children:v.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"3rem"},children:[v.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),v.jsx("h2",{children:"Reflection Saved"}),v.jsx("p",{children:"Rest well. Tomorrow is a fresh start."}),v.jsx("button",{className:"btn-primary",onClick:()=>r("/"),style:{marginTop:"2rem"},children:"Back Home"}),v.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-lg)",textAlign:"left"},children:[v.jsx("h3",{style:{fontSize:"1.1rem",marginTop:0},children:"Target for Tomorrow:"}),v.jsx("p",{style:{fontSize:"1.2rem",color:"var(--color-primary)",fontWeight:600},children:l})]})]})}):v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[v.jsx(ms,{size:18})," Back"]}),v.jsx("h2",{style:{margin:0},children:"Today's Reflection"})]}),v.jsxs("form",{onSubmit:x,className:"card",children:[v.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"#f0fdf4",borderRadius:"var(--radius-md)",border:"1px solid #bbf7d0",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"0.9rem",color:"#166534",marginBottom:"0.25rem"},children:"Overall Focus Score"}),v.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",color:"#15803d"},children:[s,"%"]})]}),v.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fef2f2",borderRadius:"var(--radius-md)",border:"1px solid #fecaca",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("span",{style:{color:"#991b1b",fontWeight:"500"},children:"Procrastination Level"}),v.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:[e,"%"]})]}),v.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Time Breakdown"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"2rem"},children:[v.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center",background:"var(--color-bg-secondary)"},children:[v.jsx(gv,{size:24,style:{color:"var(--color-success)",marginBottom:"0.5rem"}}),v.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:[B,"m"]}),v.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Work Time"})]}),v.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center",background:"var(--color-bg-secondary)"},children:[v.jsx(E1,{size:24,style:{color:"var(--color-warning)",marginBottom:"0.5rem"}}),v.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:[J,"m"]}),v.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Distracted"})]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Today's Activity Log"}),v.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"Today's Activity Log"}),y.length===0&&f.length===0&&T.length===0?v.jsx("p",{style:{color:"var(--color-text-secondary)",fontStyle:"italic"},children:"No activity recorded yet."}):v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[y.map((I,R)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"var(--radius-sm)",borderLeft:"4px solid var(--color-success)"},children:[v.jsxs("span",{children:[I.title||I.name," ",v.jsx("strong",{style:{color:"var(--color-success)"},children:"(Done)"})]}),v.jsxs("strong",{children:[I.timeTaken||0,"m"]})]},`task-${R}`)),T.map((I,R)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"var(--radius-sm)",borderLeft:"4px solid #3b82f6"},children:[v.jsxs("span",{children:[I.taskTitle," ",v.jsx("small",{children:"(Work Log)"})]}),v.jsxs("strong",{children:[I.duration,"m"]})]},`log-${R}`)),f.map((I,R)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius-sm)",borderLeft:"4px solid var(--color-danger)"},children:[v.jsxs("span",{children:[I.app," ",v.jsxs("small",{children:["(",I.reasons.join(", "),")"]})]}),v.jsxs("strong",{children:[I.duration,"m"]})]},`dist-${R}`))]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(y1,{size:18})," Goal for Tomorrow"]}),v.jsx("input",{required:!0,value:l,onChange:I=>h(I.target.value),placeholder:"e.g. Finish the Math Chapter without phone",style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-md)",border:"1px solid #cbd5e1"}})]}),v.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%",padding:"1rem"},children:"Save & Close Day"})]})]})})},eP=()=>{const r=zn(),[e,t]=M.useState("initial"),[s,o]=M.useState([]),[l,h]=M.useState(""),[f,g]=M.useState(""),[y,E]=M.useState([]),[T,k]=M.useState(null),[P,W]=M.useState([]),[B,V]=M.useState("");M.useEffect(()=>{const K=je("sp_distraction_types",[]);o(K)},[]);const J=()=>{if(!l)return;const K=[...s,{id:Date.now(),name:l,reasons:y.length>0?y:["General"]}];Lt("sp_distraction_types",K),o(K),h(""),E([]),g(""),t("initial")},G=()=>{f&&(E([...y,f]),g(""))},Q=K=>{K.preventDefault();const x=je(ve.DISTRACTION_LOGS,[]),I={id:Date.now(),app:T.name,reasons:P,duration:B,date:new Date().toISOString()};Lt(ve.DISTRACTION_LOGS,[I,...x]),t("success")},oe=K=>{P.includes(K)?W(P.filter(x=>x!==K)):W([...P,K])},he=()=>{k(null),W([]),V("")};return e==="calm"?v.jsx(Vt,{children:v.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"4rem"},children:[v.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),v.jsx("h2",{children:"Great Job!"}),v.jsx("p",{children:"Focusing on your improvement is the best gift you can give yourself."}),v.jsx("button",{className:"btn-primary",onClick:()=>t("initial"),style:{marginTop:"2rem"},children:"Back"})]})}):e==="success"?v.jsx(Vt,{children:v.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"4rem"},children:[v.jsx("h2",{children:"Logged."}),v.jsx("p",{children:"Awareness is the first step. Use this data tomorrow."}),v.jsx("button",{className:"btn-primary",onClick:()=>{t("initial"),he()},style:{marginTop:"2rem"},children:"Done"})]})}):e==="config"?v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h2",{children:"Add Distraction"}),v.jsx("button",{onClick:()=>t("initial"),style:{background:"none",border:"none",cursor:"pointer"},children:v.jsx(_v,{})})]}),v.jsxs("div",{className:"card",children:[v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Distraction Name"}),v.jsx("input",{value:l,onChange:K=>h(K.target.value),placeholder:"e.g. YouTube Shorts"})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{children:"Possible Reasons"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("input",{value:f,onChange:K=>g(K.target.value),placeholder:"e.g. Boredom"}),v.jsx("button",{type:"button",onClick:G,className:"btn-primary",style:{padding:"0.5rem"},children:v.jsx(Dd,{size:16})})]}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:y.map((K,x)=>v.jsx("span",{style:{background:"#f1f5f9",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.85rem"},children:K},x))})]}),v.jsx("button",{className:"btn-primary",onClick:J,style:{width:"100%"},children:"Save"})]})]})}):e==="logging"?v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("button",{onClick:()=>{t("initial"),he()},style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginBottom:"1rem"},children:[v.jsx(ms,{size:18})," Back"]}),v.jsx("h2",{children:"Log Distraction"}),T?v.jsxs("form",{onSubmit:Q,className:"card",children:[v.jsx("h3",{style:{marginTop:0},children:T.name}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{children:"Why did you check it? (Select all that apply)"}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:T.reasons.map((K,x)=>v.jsx("button",{type:"button",onClick:()=>oe(K),style:{padding:"0.5rem 1rem",borderRadius:"2rem",border:"1px solid var(--color-primary)",background:P.includes(K)?"var(--color-primary)":"white",color:P.includes(K)?"white":"var(--color-primary)",cursor:"pointer"},children:K},x))})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{children:"Time Spent (Minutes)"}),v.jsx("input",{type:"number",required:!0,value:B,onChange:K=>V(K.target.value)})]}),v.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save Log"})]}):v.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[v.jsx("p",{children:"Which app did you use?"}),s.map(K=>v.jsx("button",{className:"card",onClick:()=>k(K),style:{textAlign:"left",cursor:"pointer",borderColor:"var(--color-primary)"},children:v.jsx("strong",{children:K.name})},K.id)),s.length===0&&v.jsx("p",{children:"No distractions configured. Go back and add some!"})]})]})}):v.jsx(Vt,{children:v.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"2rem"},children:[v.jsx("div",{style:{position:"absolute",left:"1rem",top:"5rem"},children:v.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500"},children:[v.jsx(ms,{size:18})," Back"]})}),v.jsx(vv,{size:64,style:{color:"var(--color-text-accent)",marginBottom:"1rem"}}),v.jsx("h2",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Distracted?"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsx("button",{className:"btn-primary",style:{padding:"1.5rem",fontSize:"1.25rem",background:"#ef4444"},onClick:()=>{he(),t("logging")},children:"Yes, I gave in."}),v.jsx("button",{className:"btn-primary",style:{padding:"1.5rem",fontSize:"1.25rem",background:"#10b981"},onClick:()=>t("calm"),children:"No, I'm focused."})]}),v.jsx("div",{style:{marginTop:"2rem"},children:v.jsxs("button",{onClick:()=>t("config"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"transparent",border:"1px dashed var(--color-text-secondary)",color:"var(--color-text-secondary)",cursor:"pointer",padding:"0.75rem 1.5rem",borderRadius:"var(--radius-full)",fontSize:"0.9rem",transition:"all 0.2s"},children:[v.jsx(Dd,{size:16})," Add Distraction"]})})]})})},Ky=({data:r,dataKeys:e,colors:t,height:s=200,width:o="100%"})=>{if(!r||r.length===0)return v.jsx("div",{style:{height:s,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",background:"#f8fafc",borderRadius:"8px"},children:"No Data Available"});const l=500,h=200,f=30,g=l-2*f,y=h-2*f,E=r.flatMap(V=>e.map(J=>Number(V[J]||0))),T=Math.max(...E,0),k=T>0?T*1.1:10,P=g/r.length,W=P*.2,B=(P-W)/e.length;return v.jsxs("div",{style:{width:o,overflow:"hidden"},children:[v.jsxs("svg",{viewBox:`0 0 ${l} ${h}`,style:{width:"100%",height:"auto",background:"#fff",borderRadius:"8px",border:"1px solid #f1f5f9"},children:[[0,.25,.5,.75,1].map(V=>v.jsx("line",{x1:f,y1:f+V*y,x2:l-f,y2:f+V*y,stroke:"#e2e8f0",strokeWidth:"1"},V)),r.map((V,J)=>{const G=f+J*P+W/2;return v.jsxs("g",{children:[e.map((Q,oe)=>{const K=Number(V[Q]||0)/k*y,x=G+oe*B,I=f+y-K;return v.jsx("rect",{x,y:I,width:B*.9,height:K,fill:t[oe],rx:"2"},Q)}),v.jsxs("text",{x:G+(P-W)/2,y:h-10,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:[new Date(V.date).getDate(),"/",new Date(V.date).getMonth()+1]})]},J)}),[0,.5,1].map(V=>v.jsx("text",{x:f-5,y:f+(1-V)*y+3,textAnchor:"end",fontSize:"9",fill:"#94a3b8",children:Math.round(V*k)},V))]}),v.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"0.5rem"},children:e.map((V,J)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"#64748b"},children:[v.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",background:t[J]}}),V==="taskTime"?"Work Time":V==="distractionTime"?"Distracted":V==="pointsScored"?"Points":V]},V))})]})},tP=({data:r,dataKeys:e,colors:t,height:s=200,width:o="100%"})=>{if(!r||r.length===0)return v.jsx("div",{style:{height:s,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",background:"#f8fafc",borderRadius:"8px"},children:"No Data Available"});const l=500,h=200,f=20,g=Math.max(...r.map(k=>Math.max(...e.map(P=>Number(k[P]||0))))),y=g>0?g*1.1:10,E=k=>f+k/(r.length-1||1)*(l-2*f),T=k=>h-f-k/y*(h-2*f);return v.jsxs("div",{style:{width:o,overflow:"hidden"},children:[v.jsxs("svg",{viewBox:`0 0 ${l} ${h}`,style:{width:"100%",height:"auto",background:"#fff",borderRadius:"8px",border:"1px solid #f1f5f9"},children:[[0,.25,.5,.75,1].map(k=>v.jsx("line",{x1:f,y1:f+k*(h-2*f),x2:l-f,y2:f+k*(h-2*f),stroke:"#e2e8f0",strokeWidth:"1"},k)),e.map((k,P)=>{const W=r.map((B,V)=>`${E(V)},${T(Number(B[k]||0))}`).join(" ");return v.jsxs("g",{children:[v.jsx("polyline",{fill:"none",stroke:t[P],strokeWidth:"3",points:W,strokeLinecap:"round",strokeLinejoin:"round"}),r.map((B,V)=>v.jsx("circle",{cx:E(V),cy:T(Number(B[k]||0)),r:"3",fill:"#fff",stroke:t[P],strokeWidth:"2"},V))]},k)}),r.map((k,P)=>v.jsxs("text",{x:E(P),y:h-5,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:[new Date(k.date).getDate(),"/",new Date(k.date).getMonth()+1]},P))]}),v.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"0.5rem"},children:e.map((k,P)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"#64748b"},children:[v.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:t[P]}}),k==="workScore"?"Work":k==="procrastinationScore"?"Procrastination":k==="pointsScored"?"Points":k==="distractionTime"?"Time Lost (m)":k]},k))})]})},nP=()=>{const r=zn(),[e,t]=M.useState([]);M.useEffect(()=>{const o=je(ve.REFLECTIONS,[]),l={};o.forEach(f=>{const g=new Date(f.date).toDateString();(!l[g]||new Date(f.date)>new Date(l[g].date))&&(l[g]=f)});const h=Object.values(l).sort((f,g)=>new Date(f.date)-new Date(g.date));t(h)},[]);const s=()=>{if(e.length===0)return;const o=["Date","Work Score (%)","Procrastination Score (%)","Points Earned","Work Time (m)","Distraction Time (m)","Tasks Done"],l=e.map(y=>[new Date(y.date).toLocaleDateString(),y.workScore,y.procrastinationScore,y.pointsScored||0,y.taskTime||0,y.distractionTime||0,y.tasksDoneCount||0]),h="data:text/csv;charset=utf-8,"+o.join(",")+`
`+l.map(y=>y.join(",")).join(`
`),f=encodeURI(h),g=document.createElement("a");g.setAttribute("href",f),g.setAttribute("download","procrastination_data.csv"),document.body.appendChild(g),g.click(),document.body.removeChild(g)};return v.jsx(Vt,{children:v.jsxs("div",{className:"container",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[v.jsx(ms,{size:18})," Back"]}),v.jsx("h2",{style:{flex:1,textAlign:"center",margin:0},children:"Progress Analysis"}),v.jsx("button",{onClick:s,style:{background:"transparent",border:"1px solid var(--color-primary)",color:"var(--color-primary)",padding:"0.5rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Download Data",children:v.jsx(i1,{size:20})})]}),v.jsxs("div",{style:{display:"grid",gap:"2rem"},children:[v.jsxs("div",{className:"card",children:[v.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Work vs Procrastination (%)"}),v.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:["Aim to keep the ",v.jsx("span",{style:{color:"#22c55e",fontWeight:"bold"},children:"Green"})," line above the ",v.jsx("span",{style:{color:"#ef4444",fontWeight:"bold"},children:"Red"})," line."]}),v.jsx(tP,{data:e,dataKeys:["workScore","procrastinationScore"],colors:["#22c55e","#ef4444"]})]}),v.jsxs("div",{className:"card",children:[v.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Time: Work vs Distracted (Minutes)"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"Daily comparison of productive time vs lost time."}),v.jsx(Ky,{data:e,dataKeys:["taskTime","distractionTime"],colors:["#22c55e","#f97316"]})]}),v.jsxs("div",{className:"card",children:[v.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Focus Points Earned"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"Your daily rewards for completing tasks and building habits."}),v.jsx(Ky,{data:e,dataKeys:["pointsScored"],colors:["#a855f7"]})]})]})]})})},rP=()=>{const r=zn(),[e,t]=M.useState(!1),[s,o]=M.useState(null),l=async()=>{t(!0),o(null);try{const f=(await Sk(Tc,HA)).user,g=A0(z0,"users",f.uid),y=await UA(g);if(y.exists()){$0();const E=y.data();E.tasks&&Lt(ve.TASKS,JSON.parse(E.tasks)),E.scheduled&&Lt(ve.SCHEDULED_TASKS,JSON.parse(E.scheduled)),E.reflections&&Lt(ve.REFLECTIONS,JSON.parse(E.reflections)),E.stats&&Lt(ve.USER_STATS,JSON.parse(E.stats)),E.mood&&Lt(ve.USER_MOOD,E.mood),console.log("Data synced from cloud!")}else{const E={email:f.email,displayName:f.displayName,createdAt:new Date().toISOString(),tasks:JSON.stringify(je(ve.TASKS,[])),scheduled:JSON.stringify(je(ve.SCHEDULED_TASKS,[])),reflections:JSON.stringify(je(ve.REFLECTIONS,[])),stats:JSON.stringify(je(ve.USER_STATS,{})),mood:je(ve.USER_MOOD,null)};await F0(g,E),console.log("Local data backed up to cloud!")}r("/")}catch(h){console.error("Login Result Error:",h),o(`Failed to sign in: ${h.message}`)}finally{t(!1)}};return v.jsx(Vt,{children:v.jsx("div",{className:"container",style:{textAlign:"center",marginTop:"4rem"},children:v.jsxs("div",{className:"card",style:{maxWidth:"400px",margin:"0 auto"},children:[v.jsx("h2",{style:{marginBottom:"1rem"},children:"Backup Your Progress"}),v.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Sign in to save your tasks, streaks, and reflections to the cloud. Access them from any device."}),s&&v.jsx("div",{style:{color:"var(--color-danger)",marginBottom:"1rem",fontSize:"0.9rem"},children:s}),v.jsxs("button",{onClick:l,disabled:e,className:"btn-primary",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.75rem",padding:"0.75rem"},children:[e?v.jsx(c1,{className:"spin",size:20}):v.jsx(yv,{size:20}),e?"Signing In...":"Sign in with Google"]})]})})})};function iP(){return v.jsx(CT,{children:v.jsxs(nT,{children:[v.jsx(Vn,{path:"/",element:v.jsx(KA,{})}),v.jsx(Vn,{path:"/analysis",element:v.jsx(nP,{})}),v.jsx(Vn,{path:"/signin",element:v.jsx(rP,{})}),v.jsx(Vn,{path:"/mood",element:v.jsx(GA,{})}),v.jsx(Vn,{path:"/tasks",element:v.jsx(QA,{})}),v.jsx(Vn,{path:"/add-task",element:v.jsx(YA,{})}),v.jsx(Vn,{path:"/complete/:taskId",element:v.jsx(JA,{})}),v.jsx(Vn,{path:"/schedule",element:v.jsx(XA,{})}),v.jsx(Vn,{path:"/reflect",element:v.jsx(ZA,{})}),v.jsx(Vn,{path:"/limit",element:v.jsx(eP,{})})]})})}iE.createRoot(document.getElementById("root")).render(v.jsx(M.StrictMode,{children:v.jsx(iP,{})}));
