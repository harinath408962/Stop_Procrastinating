(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var cd={exports:{}},Va={},hd={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function QE(){if(cg)return Ae;cg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,B={};function j(L,G,Re){this.props=L,this.context=G,this.refs=B,this.updater=Re||N}j.prototype.isReactComponent={},j.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function $(){}$.prototype=j.prototype;function Y(L,G,Re){this.props=L,this.context=G,this.refs=B,this.updater=Re||N}var Q=Y.prototype=new $;Q.constructor=Y,q(Q,j.prototype),Q.isPureReactComponent=!0;var fe=Array.isArray,ie=Object.prototype.hasOwnProperty,me={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(L,G,Re){var ke,xe={},Pe=null,Ue=null;if(G!=null)for(ke in G.ref!==void 0&&(Ue=G.ref),G.key!==void 0&&(Pe=""+G.key),G)ie.call(G,ke)&&!x.hasOwnProperty(ke)&&(xe[ke]=G[ke]);var Oe=arguments.length-2;if(Oe===1)xe.children=Re;else if(1<Oe){for(var He=Array(Oe),qt=0;qt<Oe;qt++)He[qt]=arguments[qt+2];xe.children=He}if(L&&L.defaultProps)for(ke in Oe=L.defaultProps,Oe)xe[ke]===void 0&&(xe[ke]=Oe[ke]);return{$$typeof:r,type:L,key:Pe,ref:Ue,props:xe,_owner:me.current}}function A(L,G){return{$$typeof:r,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function D(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Re){return G[Re]})}var O=/\/+/g;function k(L,G){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):G.toString(36)}function qe(L,G,Re,ke,xe){var Pe=typeof L;(Pe==="undefined"||Pe==="boolean")&&(L=null);var Ue=!1;if(L===null)Ue=!0;else switch(Pe){case"string":case"number":Ue=!0;break;case"object":switch(L.$$typeof){case r:case e:Ue=!0}}if(Ue)return Ue=L,xe=xe(Ue),L=ke===""?"."+k(Ue,0):ke,fe(xe)?(Re="",L!=null&&(Re=L.replace(O,"$&/")+"/"),qe(xe,G,Re,"",function(qt){return qt})):xe!=null&&(V(xe)&&(xe=A(xe,Re+(!xe.key||Ue&&Ue.key===xe.key?"":(""+xe.key).replace(O,"$&/")+"/")+L)),G.push(xe)),1;if(Ue=0,ke=ke===""?".":ke+":",fe(L))for(var Oe=0;Oe<L.length;Oe++){Pe=L[Oe];var He=ke+k(Pe,Oe);Ue+=qe(Pe,G,Re,He,xe)}else if(He=I(L),typeof He=="function")for(L=He.call(L),Oe=0;!(Pe=L.next()).done;)Pe=Pe.value,He=ke+k(Pe,Oe++),Ue+=qe(Pe,G,Re,He,xe);else if(Pe==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Et(L,G,Re){if(L==null)return L;var ke=[],xe=0;return qe(L,ke,"","",function(Pe){return G.call(Re,Pe,xe++)}),ke}function Lt(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(Re){(L._status===0||L._status===-1)&&(L._status=1,L._result=Re)},function(Re){(L._status===0||L._status===-1)&&(L._status=2,L._result=Re)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var Xe={current:null},re={transition:null},pe={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:re,ReactCurrentOwner:me};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:Et,forEach:function(L,G,Re){Et(L,function(){G.apply(this,arguments)},Re)},count:function(L){var G=0;return Et(L,function(){G++}),G},toArray:function(L){return Et(L,function(G){return G})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ae.Component=j,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=Y,Ae.StrictMode=s,Ae.Suspense=g,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ae.act=ae,Ae.cloneElement=function(L,G,Re){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ke=q({},L.props),xe=L.key,Pe=L.ref,Ue=L._owner;if(G!=null){if(G.ref!==void 0&&(Pe=G.ref,Ue=me.current),G.key!==void 0&&(xe=""+G.key),L.type&&L.type.defaultProps)var Oe=L.type.defaultProps;for(He in G)ie.call(G,He)&&!x.hasOwnProperty(He)&&(ke[He]=G[He]===void 0&&Oe!==void 0?Oe[He]:G[He])}var He=arguments.length-2;if(He===1)ke.children=Re;else if(1<He){Oe=Array(He);for(var qt=0;qt<He;qt++)Oe[qt]=arguments[qt+2];ke.children=Oe}return{$$typeof:r,type:L.type,key:xe,ref:Pe,props:ke,_owner:Ue}},Ae.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ae.createElement=C,Ae.createFactory=function(L){var G=C.bind(null,L);return G.type=L,G},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(L){return{$$typeof:f,render:L}},Ae.isValidElement=V,Ae.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:Lt}},Ae.memo=function(L,G){return{$$typeof:y,type:L,compare:G===void 0?null:G}},Ae.startTransition=function(L){var G=re.transition;re.transition={};try{L()}finally{re.transition=G}},Ae.unstable_act=ae,Ae.useCallback=function(L,G){return Xe.current.useCallback(L,G)},Ae.useContext=function(L){return Xe.current.useContext(L)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(L){return Xe.current.useDeferredValue(L)},Ae.useEffect=function(L,G){return Xe.current.useEffect(L,G)},Ae.useId=function(){return Xe.current.useId()},Ae.useImperativeHandle=function(L,G,Re){return Xe.current.useImperativeHandle(L,G,Re)},Ae.useInsertionEffect=function(L,G){return Xe.current.useInsertionEffect(L,G)},Ae.useLayoutEffect=function(L,G){return Xe.current.useLayoutEffect(L,G)},Ae.useMemo=function(L,G){return Xe.current.useMemo(L,G)},Ae.useReducer=function(L,G,Re){return Xe.current.useReducer(L,G,Re)},Ae.useRef=function(L){return Xe.current.useRef(L)},Ae.useState=function(L){return Xe.current.useState(L)},Ae.useSyncExternalStore=function(L,G,Re){return Xe.current.useSyncExternalStore(L,G,Re)},Ae.useTransition=function(){return Xe.current.useTransition()},Ae.version="18.3.1",Ae}var hg;function sf(){return hg||(hg=1,hd.exports=QE()),hd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function JE(){if(dg)return Va;dg=1;var r=sf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var E,T={},I=null,N=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(N=g.ref);for(E in g)s.call(g,E)&&!l.hasOwnProperty(E)&&(T[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)T[E]===void 0&&(T[E]=g[E]);return{$$typeof:e,type:f,key:I,ref:N,props:T,_owner:o.current}}return Va.Fragment=t,Va.jsx=h,Va.jsxs=h,Va}var fg;function YE(){return fg||(fg=1,cd.exports=JE()),cd.exports}var _=YE(),M=sf(),Lu={},dd={exports:{}},en={},fd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg;function XE(){return pg||(pg=1,(function(r){function e(re,pe){var ae=re.length;re.push(pe);e:for(;0<ae;){var L=ae-1>>>1,G=re[L];if(0<o(G,pe))re[L]=pe,re[ae]=G,ae=L;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var pe=re[0],ae=re.pop();if(ae!==pe){re[0]=ae;e:for(var L=0,G=re.length,Re=G>>>1;L<Re;){var ke=2*(L+1)-1,xe=re[ke],Pe=ke+1,Ue=re[Pe];if(0>o(xe,ae))Pe<G&&0>o(Ue,xe)?(re[L]=Ue,re[Pe]=ae,L=Pe):(re[L]=xe,re[ke]=ae,L=ke);else if(Pe<G&&0>o(Ue,ae))re[L]=Ue,re[Pe]=ae,L=Pe;else break e}}return pe}function o(re,pe){var ae=re.sortIndex-pe.sortIndex;return ae!==0?ae:re.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],E=1,T=null,I=3,N=!1,q=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(re){for(var pe=t(y);pe!==null;){if(pe.callback===null)s(y);else if(pe.startTime<=re)s(y),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=t(y)}}function fe(re){if(B=!1,Q(re),!q)if(t(g)!==null)q=!0,Lt(ie);else{var pe=t(y);pe!==null&&Xe(fe,pe.startTime-re)}}function ie(re,pe){q=!1,B&&(B=!1,$(C),C=-1),N=!0;var ae=I;try{for(Q(pe),T=t(g);T!==null&&(!(T.expirationTime>pe)||re&&!D());){var L=T.callback;if(typeof L=="function"){T.callback=null,I=T.priorityLevel;var G=L(T.expirationTime<=pe);pe=r.unstable_now(),typeof G=="function"?T.callback=G:T===t(g)&&s(g),Q(pe)}else s(g);T=t(g)}if(T!==null)var Re=!0;else{var ke=t(y);ke!==null&&Xe(fe,ke.startTime-pe),Re=!1}return Re}finally{T=null,I=ae,N=!1}}var me=!1,x=null,C=-1,A=5,V=-1;function D(){return!(r.unstable_now()-V<A)}function O(){if(x!==null){var re=r.unstable_now();V=re;var pe=!0;try{pe=x(!0,re)}finally{pe?k():(me=!1,x=null)}}else me=!1}var k;if(typeof Y=="function")k=function(){Y(O)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Et=qe.port2;qe.port1.onmessage=O,k=function(){Et.postMessage(null)}}else k=function(){j(O,0)};function Lt(re){x=re,me||(me=!0,k())}function Xe(re,pe){C=j(function(){re(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){q||N||(q=!0,Lt(ie))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(I){case 1:case 2:case 3:var pe=3;break;default:pe=I}var ae=I;I=pe;try{return re()}finally{I=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,pe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=I;I=re;try{return pe()}finally{I=ae}},r.unstable_scheduleCallback=function(re,pe,ae){var L=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,re){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,re={id:E++,callback:pe,priorityLevel:re,startTime:ae,expirationTime:G,sortIndex:-1},ae>L?(re.sortIndex=ae,e(y,re),t(g)===null&&re===t(y)&&(B?($(C),C=-1):B=!0,Xe(fe,ae-L))):(re.sortIndex=G,e(g,re),q||N||(q=!0,Lt(ie))),re},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(re){var pe=I;return function(){var ae=I;I=pe;try{return re.apply(this,arguments)}finally{I=ae}}}})(pd)),pd}var mg;function ZE(){return mg||(mg=1,fd.exports=XE()),fd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function e0(){if(gg)return en;gg=1;var r=sf(),e=ZE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function I(n){return g.call(T,n)?!0:g.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function N(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||N(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function B(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new B(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Y(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace($,Y);j[i]=new B(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace($,Y);j[i]=new B(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace($,Y);j[i]=new B(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,i,a,c){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var fe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),me=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),re=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function G(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Re=!1;function ke(n,i){if(!n||Re)return"";Re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var c=H}Reflect.construct(n,[],i)}else{try{i.call()}catch(H){c=H}n.call(i.prototype)}else{try{throw Error()}catch(H){c=H}n()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var d=H.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,R=p.length-1;1<=w&&0<=R&&d[w]!==p[R];)R--;for(;1<=w&&0<=R;w--,R--)if(d[w]!==p[R]){if(w!==1||R!==1)do if(w--,R--,0>R||d[w]!==p[R]){var P=`
`+d[w].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=w&&0<=R);break}}}finally{Re=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function xe(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case me:return"Portal";case A:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case V:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Et:return i=n.displayName||null,i!==null?i:Pe(n.type)||"Memo";case Lt:i=n._payload,n=n._init;try{return Pe(n(i))}catch{}}return null}function Ue(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qt(n){var i=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Rs(n){n._valueTracker||(n._valueTracker=qt(n))}function Uo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ks(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function wl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Oe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function As(n,i){i=i.checked,i!=null&&Q(n,"checked",i,!1)}function Mi(n,i){As(n,i);var a=Oe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?dt(n,i.type,a):i.hasOwnProperty("defaultValue")&&dt(n,i.type,Oe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function zo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function dt(n,i,a){(i!=="number"||Hr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var lt=Array.isArray;function Cn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Oe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Bo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $o(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Oe(a)}}function El(n,i){var a=Oe(i.value),c=Oe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Wr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Ho(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xs(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Ho(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qr,Tl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function ji(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sl=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(n){Sl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Kr[i]=Kr[n]})});function Gr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Kr.hasOwnProperty(n)&&Kr[n]?(""+i).trim():i+"px"}function Ps(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Gr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Wo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(n,i){if(i){if(Wo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ns(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Ds(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mr=null,gr=null,ot=null;function qo(n){if(n=_a(n)){if(typeof mr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Jl(i),mr(n.stateNode,n.type,i))}}function Jr(n){gr?ot?ot.push(n):ot=[n]:gr=n}function Yr(){if(gr){var n=gr,i=ot;if(ot=gr=null,qo(n),i)for(n=0;n<i.length;n++)qo(i[n])}}function Il(n,i){return n(i)}function Cl(){}var Bn=!1;function Rl(n,i,a){if(Bn)return n(i,a);Bn=!0;try{return Il(n,i,a)}finally{Bn=!1,(gr!==null||ot!==null)&&(Cl(),Yr())}}function Fi(n,i){var a=n.stateNode;if(a===null)return null;var c=Jl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Xr=!1;if(f)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Xr=!1}function kl(n,i,a,c,d,p,w,R,P){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(X){this.onError(X)}}var yr=!1,$n=null,bs=!1,dn=null,Al={onError:function(n){yr=!0,$n=n}};function xl(n,i,a,c,d,p,w,R,P){yr=!1,$n=null,kl.apply(Al,arguments)}function Ko(n,i,a,c,d,p,w,R,P){if(xl.apply(this,arguments),yr){if(yr){var H=$n;yr=!1,$n=null}else throw Error(t(198));bs||(bs=!0,dn=H)}}function kn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Go(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Pl(n){if(kn(n)!==n)throw Error(t(188))}function Nl(n){var i=n.alternate;if(!i){if(i=kn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Pl(d),n;if(p===c)return Pl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,R=d.child;R;){if(R===a){w=!0,a=d,c=p;break}if(R===c){w=!0,c=d,a=p;break}R=R.sibling}if(!w){for(R=p.child;R;){if(R===a){w=!0,a=p,c=d;break}if(R===c){w=!0,c=p,a=d;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Dl(n){return n=Nl(n),n!==null?Ui(n):null}function Ui(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ui(n);if(i!==null)return i;n=n.sibling}return null}var Qo=e.unstable_scheduleCallback,Vs=e.unstable_cancelCallback,zi=e.unstable_shouldYield,vr=e.unstable_requestPaint,Ge=e.unstable_now,zc=e.unstable_getCurrentPriorityLevel,Ls=e.unstable_ImmediatePriority,Jo=e.unstable_UserBlockingPriority,Bi=e.unstable_NormalPriority,Yo=e.unstable_LowPriority,Os=e.unstable_IdlePriority,$i=null,nn=null;function bl(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot($i,n,void 0,(n.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Hi,Hn=Math.log,fn=Math.LN2;function Hi(n){return n>>>=0,n===0?32:31-(Hn(n)/fn|0)|0}var Wn=64,ei=4194304;function Fe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _r(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var R=w&~d;R!==0?c=Fe(R):(p&=w,p!==0&&(c=Fe(p)))}else w=a&~d,w!==0?c=Fe(w):p!==0&&(c=Fe(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-rn(i),d=1<<a,c|=n[a],i&=~d;return c}function Wi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qi(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-rn(p),R=1<<w,P=d[w];P===-1?((R&a)===0||(R&c)!==0)&&(d[w]=Wi(R,i)):P<=i&&(n.expiredLanes|=R),p&=~R}}function Xo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zo(){var n=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),n}function ea(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ki(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-rn(i),n[i]=a}function Bc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-rn(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ta(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-rn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Ve=0;function qn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var na,Ms,ra,ia,sa,Kn=!1,js=[],Gn=null,Qn=null,kt=null,Gi=new Map,wr=new Map,sn=[],Vl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ti(n,i){switch(n){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Gi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":wr.delete(i.pointerId)}}function An(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=_a(i),i!==null&&Ms(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Ll(n,i,a,c,d){switch(i){case"focusin":return Gn=An(Gn,n,i,a,c,d),!0;case"dragenter":return Qn=An(Qn,n,i,a,c,d),!0;case"mouseover":return kt=An(kt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return Gi.set(p,An(Gi.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,wr.set(p,An(wr.get(p)||null,n,i,a,c,d)),!0}return!1}function Fs(n){var i=Xi(n.target);if(i!==null){var a=kn(i);if(a!==null){if(i=a.tag,i===13){if(i=Go(a),i!==null){n.blockedOn=i,sa(n.priority,function(){ra(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function We(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Us(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Qr=c,a.target.dispatchEvent(c),Qr=null}else return i=_a(a),i!==null&&Ms(i),n.blockedOn=a,!1;i.shift()}return!0}function Ol(n,i,a){We(n)&&a.delete(i)}function $c(){Kn=!1,Gn!==null&&We(Gn)&&(Gn=null),Qn!==null&&We(Qn)&&(Qn=null),kt!==null&&We(kt)&&(kt=null),Gi.forEach(Ol),wr.forEach(Ol)}function ni(n,i){n.blockedOn===i&&(n.blockedOn=null,Kn||(Kn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$c)))}function ri(n){function i(d){return ni(d,n)}if(0<js.length){ni(js[0],n);for(var a=1;a<js.length;a++){var c=js[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Gn!==null&&ni(Gn,n),Qn!==null&&ni(Qn,n),kt!==null&&ni(kt,n),Gi.forEach(i),wr.forEach(i),a=0;a<sn.length;a++)c=sn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<sn.length&&(a=sn[0],a.blockedOn===null);)Fs(a),a.blockedOn===null&&sn.shift()}var Er=fe.ReactCurrentBatchConfig,Tr=!0;function Jn(n,i,a,c){var d=Ve,p=Er.transition;Er.transition=null;try{Ve=1,oa(n,i,a,c)}finally{Ve=d,Er.transition=p}}function Ml(n,i,a,c){var d=Ve,p=Er.transition;Er.transition=null;try{Ve=4,oa(n,i,a,c)}finally{Ve=d,Er.transition=p}}function oa(n,i,a,c){if(Tr){var d=Us(n,i,a,c);if(d===null)eh(n,i,c,Yn,a),ti(n,c);else if(Ll(d,n,i,a,c))c.stopPropagation();else if(ti(n,c),i&4&&-1<Vl.indexOf(n)){for(;d!==null;){var p=_a(d);if(p!==null&&na(p),p=Us(n,i,a,c),p===null&&eh(n,i,c,Yn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else eh(n,i,c,null,a)}}var Yn=null;function Us(n,i,a,c){if(Yn=null,n=Ds(c),n=Xi(n),n!==null)if(i=kn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Go(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Yn=n,null}function zs(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zc()){case Ls:return 1;case Jo:return 4;case Bi:case Yo:return 16;case Os:return 536870912;default:return 16}default:return 16}}var on=null,Bs=null,Sr=null;function jl(){if(Sr)return Sr;var n,i=Bs,a=i.length,c,d="value"in on?on.value:on.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return Sr=d.slice(n,1<c?1-c:void 0)}function Qi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function aa(){return!1}function Ot(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xn:aa,this.isPropagationStopped=aa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),i}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=Ot(Zn),ii=ae({},Zn,{view:0,detail:0}),$s=Ot(ii),Hs,Ws,an,Yi=ae({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ie,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==an&&(an&&n.type==="mousemove"?(Hs=n.screenX-an.screenX,Ws=n.screenY-an.screenY):Ws=Hs=0,an=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Ws}}),la=Ot(Yi),Fl=ae({},Yi,{dataTransfer:0}),Ul=Ot(Fl),qs=ae({},ii,{relatedTarget:0}),At=Ot(qs),zl=ae({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Bl=Ot(zl),si=ae({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ot(si),m=ae({},Zn,{data:0}),v=Ot(m),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=W[n])?!!i[n]:!1}function Ie(){return ne}var ut=ae({},ii,{key:function(n){if(n.key){var i=S[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ie,charCode:function(n){return n.type==="keypress"?Qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Be=Ot(ut),ft=ae({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ln=Ot(ft),Ir=ae({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ie}),er=Ot(Ir),tr=ae({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ks=Ot(tr),ua=ae({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$w=Ot(ua),Hw=[9,13,27,32],Hc=f&&"CompositionEvent"in window,ca=null;f&&"documentMode"in document&&(ca=document.documentMode);var Ww=f&&"TextEvent"in window&&!ca,np=f&&(!Hc||ca&&8<ca&&11>=ca),rp=" ",ip=!1;function sp(n,i){switch(n){case"keyup":return Hw.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function op(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gs=!1;function qw(n,i){switch(n){case"compositionend":return op(i);case"keypress":return i.which!==32?null:(ip=!0,rp);case"textInput":return n=i.data,n===rp&&ip?null:n;default:return null}}function Kw(n,i){if(Gs)return n==="compositionend"||!Hc&&sp(n,i)?(n=jl(),Sr=Bs=on=null,Gs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return np&&i.locale!=="ko"?null:i.data;default:return null}}var Gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Gw[n.type]:i==="textarea"}function lp(n,i,a,c){Jr(c),i=Kl(i,"onChange"),0<i.length&&(a=new Ji("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ha=null,da=null;function Qw(n){Rp(n,0)}function $l(n){var i=Zs(n);if(Uo(i))return n}function Jw(n,i){if(n==="change")return i}var up=!1;if(f){var Wc;if(f){var qc="oninput"in document;if(!qc){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),qc=typeof cp.oninput=="function"}Wc=qc}else Wc=!1;up=Wc&&(!document.documentMode||9<document.documentMode)}function hp(){ha&&(ha.detachEvent("onpropertychange",dp),da=ha=null)}function dp(n){if(n.propertyName==="value"&&$l(da)){var i=[];lp(i,da,n,Ds(n)),Rl(Qw,i)}}function Yw(n,i,a){n==="focusin"?(hp(),ha=i,da=a,ha.attachEvent("onpropertychange",dp)):n==="focusout"&&hp()}function Xw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $l(da)}function Zw(n,i){if(n==="click")return $l(i)}function eE(n,i){if(n==="input"||n==="change")return $l(i)}function tE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:tE;function fa(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!xn(n[d],i[d]))return!1}return!0}function fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pp(n,i){var a=fp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fp(a)}}function mp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?mp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function gp(){for(var n=window,i=Hr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Hr(n.document)}return i}function Kc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function nE(n){var i=gp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&mp(a.ownerDocument.documentElement,a)){if(c!==null&&Kc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=pp(a,p);var w=pp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var rE=f&&"documentMode"in document&&11>=document.documentMode,Qs=null,Gc=null,pa=null,Qc=!1;function yp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qc||Qs==null||Qs!==Hr(c)||(c=Qs,"selectionStart"in c&&Kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pa&&fa(pa,c)||(pa=c,c=Kl(Gc,"onSelect"),0<c.length&&(i=new Ji("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Qs)))}function Hl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Js={animationend:Hl("Animation","AnimationEnd"),animationiteration:Hl("Animation","AnimationIteration"),animationstart:Hl("Animation","AnimationStart"),transitionend:Hl("Transition","TransitionEnd")},Jc={},vp={};f&&(vp=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Wl(n){if(Jc[n])return Jc[n];if(!Js[n])return n;var i=Js[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in vp)return Jc[n]=i[a];return n}var _p=Wl("animationend"),wp=Wl("animationiteration"),Ep=Wl("animationstart"),Tp=Wl("transitionend"),Sp=new Map,Ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(n,i){Sp.set(n,i),l(i,[n])}for(var Yc=0;Yc<Ip.length;Yc++){var Xc=Ip[Yc],iE=Xc.toLowerCase(),sE=Xc[0].toUpperCase()+Xc.slice(1);oi(iE,"on"+sE)}oi(_p,"onAnimationEnd"),oi(wp,"onAnimationIteration"),oi(Ep,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(Tp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Cp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Ko(c,i,void 0,n),n.currentTarget=null}function Rp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var R=c[w],P=R.instance,H=R.currentTarget;if(R=R.listener,P!==p&&d.isPropagationStopped())break e;Cp(d,R,H),p=P}else for(w=0;w<c.length;w++){if(R=c[w],P=R.instance,H=R.currentTarget,R=R.listener,P!==p&&d.isPropagationStopped())break e;Cp(d,R,H),p=P}}}if(bs)throw n=dn,bs=!1,dn=null,n}function Qe(n,i){var a=i[oh];a===void 0&&(a=i[oh]=new Set);var c=n+"__bubble";a.has(c)||(kp(i,n,2,!1),a.add(c))}function Zc(n,i,a){var c=0;i&&(c|=4),kp(a,n,c,i)}var ql="_reactListening"+Math.random().toString(36).slice(2);function ga(n){if(!n[ql]){n[ql]=!0,s.forEach(function(a){a!=="selectionchange"&&(oE.has(a)||Zc(a,!1,n),Zc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ql]||(i[ql]=!0,Zc("selectionchange",!1,i))}}function kp(n,i,a,c){switch(zs(i)){case 1:var d=Jn;break;case 4:d=Ml;break;default:d=oa}a=d.bind(null,i,a,n),d=void 0,!Xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function eh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&(P=w.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;w=w.return}for(;R!==null;){if(w=Xi(R),w===null)return;if(P=w.tag,P===5||P===6){c=p=w;continue e}R=R.parentNode}}c=c.return}Rl(function(){var H=p,X=Ds(a),ee=[];e:{var J=Sp.get(n);if(J!==void 0){var se=Ji,ue=n;switch(n){case"keypress":if(Qi(a)===0)break e;case"keydown":case"keyup":se=Be;break;case"focusin":ue="focus",se=At;break;case"focusout":ue="blur",se=At;break;case"beforeblur":case"afterblur":se=At;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=er;break;case _p:case wp:case Ep:se=Bl;break;case Tp:se=Ks;break;case"scroll":se=$s;break;case"wheel":se=$w;break;case"copy":case"cut":case"paste":se=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ln}var ce=(i&4)!==0,ct=!ce&&n==="scroll",F=ce?J!==null?J+"Capture":null:J;ce=[];for(var b=H,z;b!==null;){z=b;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,F!==null&&(te=Fi(b,F),te!=null&&ce.push(ya(b,te,z)))),ct)break;b=b.return}0<ce.length&&(J=new se(J,ue,null,a,X),ee.push({event:J,listeners:ce}))}}if((i&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",J&&a!==Qr&&(ue=a.relatedTarget||a.fromElement)&&(Xi(ue)||ue[Cr]))break e;if((se||J)&&(J=X.window===X?X:(J=X.ownerDocument)?J.defaultView||J.parentWindow:window,se?(ue=a.relatedTarget||a.toElement,se=H,ue=ue?Xi(ue):null,ue!==null&&(ct=kn(ue),ue!==ct||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(se=null,ue=H),se!==ue)){if(ce=la,te="onMouseLeave",F="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(ce=ln,te="onPointerLeave",F="onPointerEnter",b="pointer"),ct=se==null?J:Zs(se),z=ue==null?J:Zs(ue),J=new ce(te,b+"leave",se,a,X),J.target=ct,J.relatedTarget=z,te=null,Xi(X)===H&&(ce=new ce(F,b+"enter",ue,a,X),ce.target=z,ce.relatedTarget=ct,te=ce),ct=te,se&&ue)t:{for(ce=se,F=ue,b=0,z=ce;z;z=Ys(z))b++;for(z=0,te=F;te;te=Ys(te))z++;for(;0<b-z;)ce=Ys(ce),b--;for(;0<z-b;)F=Ys(F),z--;for(;b--;){if(ce===F||F!==null&&ce===F.alternate)break t;ce=Ys(ce),F=Ys(F)}ce=null}else ce=null;se!==null&&Ap(ee,J,se,ce,!1),ue!==null&&ct!==null&&Ap(ee,ct,ue,ce,!0)}}e:{if(J=H?Zs(H):window,se=J.nodeName&&J.nodeName.toLowerCase(),se==="select"||se==="input"&&J.type==="file")var he=Jw;else if(ap(J))if(up)he=eE;else{he=Xw;var ge=Yw}else(se=J.nodeName)&&se.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(he=Zw);if(he&&(he=he(n,H))){lp(ee,he,a,X);break e}ge&&ge(n,J,H),n==="focusout"&&(ge=J._wrapperState)&&ge.controlled&&J.type==="number"&&dt(J,"number",J.value)}switch(ge=H?Zs(H):window,n){case"focusin":(ap(ge)||ge.contentEditable==="true")&&(Qs=ge,Gc=H,pa=null);break;case"focusout":pa=Gc=Qs=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,yp(ee,a,X);break;case"selectionchange":if(rE)break;case"keydown":case"keyup":yp(ee,a,X)}var ye;if(Hc)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Gs?sp(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(np&&a.locale!=="ko"&&(Gs||we!=="onCompositionStart"?we==="onCompositionEnd"&&Gs&&(ye=jl()):(on=X,Bs="value"in on?on.value:on.textContent,Gs=!0)),ge=Kl(H,we),0<ge.length&&(we=new v(we,n,null,a,X),ee.push({event:we,listeners:ge}),ye?we.data=ye:(ye=op(a),ye!==null&&(we.data=ye)))),(ye=Ww?qw(n,a):Kw(n,a))&&(H=Kl(H,"onBeforeInput"),0<H.length&&(X=new v("onBeforeInput","beforeinput",null,a,X),ee.push({event:X,listeners:H}),X.data=ye))}Rp(ee,i)})}function ya(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Kl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Fi(n,a),p!=null&&c.unshift(ya(n,p,d)),p=Fi(n,i),p!=null&&c.push(ya(n,p,d))),n=n.return}return c}function Ys(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ap(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var R=a,P=R.alternate,H=R.stateNode;if(P!==null&&P===c)break;R.tag===5&&H!==null&&(R=H,d?(P=Fi(a,p),P!=null&&w.unshift(ya(a,P,R))):d||(P=Fi(a,p),P!=null&&w.push(ya(a,P,R)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var aE=/\r\n?/g,lE=/\u0000|\uFFFD/g;function xp(n){return(typeof n=="string"?n:""+n).replace(aE,`
`).replace(lE,"")}function Gl(n,i,a){if(i=xp(i),xp(n)!==i&&a)throw Error(t(425))}function Ql(){}var th=null,nh=null;function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,uE=typeof clearTimeout=="function"?clearTimeout:void 0,Pp=typeof Promise=="function"?Promise:void 0,cE=typeof queueMicrotask=="function"?queueMicrotask:typeof Pp<"u"?function(n){return Pp.resolve(null).then(n).catch(hE)}:ih;function hE(n){setTimeout(function(){throw n})}function sh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ri(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ri(i)}function ai(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Np(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),nr="__reactFiber$"+Xs,va="__reactProps$"+Xs,Cr="__reactContainer$"+Xs,oh="__reactEvents$"+Xs,dE="__reactListeners$"+Xs,fE="__reactHandles$"+Xs;function Xi(n){var i=n[nr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Cr]||a[nr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Np(n);n!==null;){if(a=n[nr])return a;n=Np(n)}return i}n=a,a=n.parentNode}return null}function _a(n){return n=n[nr]||n[Cr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Jl(n){return n[va]||null}var ah=[],eo=-1;function li(n){return{current:n}}function Je(n){0>eo||(n.current=ah[eo],ah[eo]=null,eo--)}function Ke(n,i){eo++,ah[eo]=n.current,n.current=i}var ui={},Mt=li(ui),Qt=li(!1),Zi=ui;function to(n,i){var a=n.type.contextTypes;if(!a)return ui;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Jt(n){return n=n.childContextTypes,n!=null}function Yl(){Je(Qt),Je(Mt)}function Dp(n,i,a){if(Mt.current!==ui)throw Error(t(168));Ke(Mt,i),Ke(Qt,a)}function bp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Ue(n)||"Unknown",d));return ae({},a,c)}function Xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ui,Zi=Mt.current,Ke(Mt,n),Ke(Qt,Qt.current),!0}function Vp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=bp(n,i,Zi),c.__reactInternalMemoizedMergedChildContext=n,Je(Qt),Je(Mt),Ke(Mt,n)):Je(Qt),Ke(Qt,a)}var Rr=null,Zl=!1,lh=!1;function Lp(n){Rr===null?Rr=[n]:Rr.push(n)}function pE(n){Zl=!0,Lp(n)}function ci(){if(!lh&&Rr!==null){lh=!0;var n=0,i=Ve;try{var a=Rr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Rr=null,Zl=!1}catch(d){throw Rr!==null&&(Rr=Rr.slice(n+1)),Qo(Ls,ci),d}finally{Ve=i,lh=!1}}return null}var no=[],ro=0,eu=null,tu=0,pn=[],mn=0,es=null,kr=1,Ar="";function ts(n,i){no[ro++]=tu,no[ro++]=eu,eu=n,tu=i}function Op(n,i,a){pn[mn++]=kr,pn[mn++]=Ar,pn[mn++]=es,es=n;var c=kr;n=Ar;var d=32-rn(c)-1;c&=~(1<<d),a+=1;var p=32-rn(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,kr=1<<32-rn(i)+d|a<<d|c,Ar=p+n}else kr=1<<p|a<<d|c,Ar=n}function uh(n){n.return!==null&&(ts(n,1),Op(n,1,0))}function ch(n){for(;n===eu;)eu=no[--ro],no[ro]=null,tu=no[--ro],no[ro]=null;for(;n===es;)es=pn[--mn],pn[mn]=null,Ar=pn[--mn],pn[mn]=null,kr=pn[--mn],pn[mn]=null}var un=null,cn=null,Ze=!1,Pn=null;function Mp(n,i){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function jp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,un=n,cn=ai(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,un=n,cn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=es!==null?{id:kr,overflow:Ar}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,un=n,cn=null,!0):!1;default:return!1}}function hh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dh(n){if(Ze){var i=cn;if(i){var a=i;if(!jp(n,i)){if(hh(n))throw Error(t(418));i=ai(a.nextSibling);var c=un;i&&jp(n,i)?Mp(c,a):(n.flags=n.flags&-4097|2,Ze=!1,un=n)}}else{if(hh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,un=n}}}function Fp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function nu(n){if(n!==un)return!1;if(!Ze)return Fp(n),Ze=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!rh(n.type,n.memoizedProps)),i&&(i=cn)){if(hh(n))throw Up(),Error(t(418));for(;i;)Mp(n,i),i=ai(i.nextSibling)}if(Fp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){cn=ai(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}cn=null}}else cn=un?ai(n.stateNode.nextSibling):null;return!0}function Up(){for(var n=cn;n;)n=ai(n.nextSibling)}function io(){cn=un=null,Ze=!1}function fh(n){Pn===null?Pn=[n]:Pn.push(n)}var mE=fe.ReactCurrentBatchConfig;function wa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var R=d.refs;w===null?delete R[p]:R[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ru(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function zp(n){var i=n._init;return i(n._payload)}function Bp(n){function i(F,b){if(n){var z=F.deletions;z===null?(F.deletions=[b],F.flags|=16):z.push(b)}}function a(F,b){if(!n)return null;for(;b!==null;)i(F,b),b=b.sibling;return null}function c(F,b){for(F=new Map;b!==null;)b.key!==null?F.set(b.key,b):F.set(b.index,b),b=b.sibling;return F}function d(F,b){return F=vi(F,b),F.index=0,F.sibling=null,F}function p(F,b,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<b?(F.flags|=2,b):z):(F.flags|=2,b)):(F.flags|=1048576,b)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function R(F,b,z,te){return b===null||b.tag!==6?(b=id(z,F.mode,te),b.return=F,b):(b=d(b,z),b.return=F,b)}function P(F,b,z,te){var he=z.type;return he===x?X(F,b,z.props.children,te,z.key):b!==null&&(b.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Lt&&zp(he)===b.type)?(te=d(b,z.props),te.ref=wa(F,b,z),te.return=F,te):(te=ku(z.type,z.key,z.props,null,F.mode,te),te.ref=wa(F,b,z),te.return=F,te)}function H(F,b,z,te){return b===null||b.tag!==4||b.stateNode.containerInfo!==z.containerInfo||b.stateNode.implementation!==z.implementation?(b=sd(z,F.mode,te),b.return=F,b):(b=d(b,z.children||[]),b.return=F,b)}function X(F,b,z,te,he){return b===null||b.tag!==7?(b=us(z,F.mode,te,he),b.return=F,b):(b=d(b,z),b.return=F,b)}function ee(F,b,z){if(typeof b=="string"&&b!==""||typeof b=="number")return b=id(""+b,F.mode,z),b.return=F,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ie:return z=ku(b.type,b.key,b.props,null,F.mode,z),z.ref=wa(F,null,b),z.return=F,z;case me:return b=sd(b,F.mode,z),b.return=F,b;case Lt:var te=b._init;return ee(F,te(b._payload),z)}if(lt(b)||pe(b))return b=us(b,F.mode,z,null),b.return=F,b;ru(F,b)}return null}function J(F,b,z,te){var he=b!==null?b.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return he!==null?null:R(F,b,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:return z.key===he?P(F,b,z,te):null;case me:return z.key===he?H(F,b,z,te):null;case Lt:return he=z._init,J(F,b,he(z._payload),te)}if(lt(z)||pe(z))return he!==null?null:X(F,b,z,te,null);ru(F,z)}return null}function se(F,b,z,te,he){if(typeof te=="string"&&te!==""||typeof te=="number")return F=F.get(z)||null,R(b,F,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case ie:return F=F.get(te.key===null?z:te.key)||null,P(b,F,te,he);case me:return F=F.get(te.key===null?z:te.key)||null,H(b,F,te,he);case Lt:var ge=te._init;return se(F,b,z,ge(te._payload),he)}if(lt(te)||pe(te))return F=F.get(z)||null,X(b,F,te,he,null);ru(b,te)}return null}function ue(F,b,z,te){for(var he=null,ge=null,ye=b,we=b=0,It=null;ye!==null&&we<z.length;we++){ye.index>we?(It=ye,ye=null):It=ye.sibling;var je=J(F,ye,z[we],te);if(je===null){ye===null&&(ye=It);break}n&&ye&&je.alternate===null&&i(F,ye),b=p(je,b,we),ge===null?he=je:ge.sibling=je,ge=je,ye=It}if(we===z.length)return a(F,ye),Ze&&ts(F,we),he;if(ye===null){for(;we<z.length;we++)ye=ee(F,z[we],te),ye!==null&&(b=p(ye,b,we),ge===null?he=ye:ge.sibling=ye,ge=ye);return Ze&&ts(F,we),he}for(ye=c(F,ye);we<z.length;we++)It=se(ye,F,we,z[we],te),It!==null&&(n&&It.alternate!==null&&ye.delete(It.key===null?we:It.key),b=p(It,b,we),ge===null?he=It:ge.sibling=It,ge=It);return n&&ye.forEach(function(_i){return i(F,_i)}),Ze&&ts(F,we),he}function ce(F,b,z,te){var he=pe(z);if(typeof he!="function")throw Error(t(150));if(z=he.call(z),z==null)throw Error(t(151));for(var ge=he=null,ye=b,we=b=0,It=null,je=z.next();ye!==null&&!je.done;we++,je=z.next()){ye.index>we?(It=ye,ye=null):It=ye.sibling;var _i=J(F,ye,je.value,te);if(_i===null){ye===null&&(ye=It);break}n&&ye&&_i.alternate===null&&i(F,ye),b=p(_i,b,we),ge===null?he=_i:ge.sibling=_i,ge=_i,ye=It}if(je.done)return a(F,ye),Ze&&ts(F,we),he;if(ye===null){for(;!je.done;we++,je=z.next())je=ee(F,je.value,te),je!==null&&(b=p(je,b,we),ge===null?he=je:ge.sibling=je,ge=je);return Ze&&ts(F,we),he}for(ye=c(F,ye);!je.done;we++,je=z.next())je=se(ye,F,we,je.value,te),je!==null&&(n&&je.alternate!==null&&ye.delete(je.key===null?we:je.key),b=p(je,b,we),ge===null?he=je:ge.sibling=je,ge=je);return n&&ye.forEach(function(GE){return i(F,GE)}),Ze&&ts(F,we),he}function ct(F,b,z,te){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:e:{for(var he=z.key,ge=b;ge!==null;){if(ge.key===he){if(he=z.type,he===x){if(ge.tag===7){a(F,ge.sibling),b=d(ge,z.props.children),b.return=F,F=b;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Lt&&zp(he)===ge.type){a(F,ge.sibling),b=d(ge,z.props),b.ref=wa(F,ge,z),b.return=F,F=b;break e}a(F,ge);break}else i(F,ge);ge=ge.sibling}z.type===x?(b=us(z.props.children,F.mode,te,z.key),b.return=F,F=b):(te=ku(z.type,z.key,z.props,null,F.mode,te),te.ref=wa(F,b,z),te.return=F,F=te)}return w(F);case me:e:{for(ge=z.key;b!==null;){if(b.key===ge)if(b.tag===4&&b.stateNode.containerInfo===z.containerInfo&&b.stateNode.implementation===z.implementation){a(F,b.sibling),b=d(b,z.children||[]),b.return=F,F=b;break e}else{a(F,b);break}else i(F,b);b=b.sibling}b=sd(z,F.mode,te),b.return=F,F=b}return w(F);case Lt:return ge=z._init,ct(F,b,ge(z._payload),te)}if(lt(z))return ue(F,b,z,te);if(pe(z))return ce(F,b,z,te);ru(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,b!==null&&b.tag===6?(a(F,b.sibling),b=d(b,z),b.return=F,F=b):(a(F,b),b=id(z,F.mode,te),b.return=F,F=b),w(F)):a(F,b)}return ct}var so=Bp(!0),$p=Bp(!1),iu=li(null),su=null,oo=null,ph=null;function mh(){ph=oo=su=null}function gh(n){var i=iu.current;Je(iu),n._currentValue=i}function yh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function ao(n,i){su=n,ph=oo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Yt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(ph!==n)if(n={context:n,memoizedValue:i,next:null},oo===null){if(su===null)throw Error(t(308));oo=n,su.dependencies={lanes:0,firstContext:n}}else oo=oo.next=n;return i}var ns=null;function vh(n){ns===null?ns=[n]:ns.push(n)}function Hp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,vh(i)):(a.next=d.next,d.next=a),i.interleaved=a,xr(n,c)}function xr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var hi=!1;function _h(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function di(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,xr(n,a)}return d=c.interleaved,d===null?(i.next=i,vh(c)):(i.next=d.next,d.next=i),c.interleaved=i,xr(n,a)}function ou(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ta(n,a)}}function qp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function au(n,i,a,c){var d=n.updateQueue;hi=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var P=R,H=P.next;P.next=null,w===null?p=H:w.next=H,w=P;var X=n.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==w&&(R===null?X.firstBaseUpdate=H:R.next=H,X.lastBaseUpdate=P))}if(p!==null){var ee=d.baseState;w=0,X=H=P=null,R=p;do{var J=R.lane,se=R.eventTime;if((c&J)===J){X!==null&&(X=X.next={eventTime:se,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ue=n,ce=R;switch(J=i,se=a,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){ee=ue.call(se,ee,J);break e}ee=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,J=typeof ue=="function"?ue.call(se,ee,J):ue,J==null)break e;ee=ae({},ee,J);break e;case 2:hi=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,J=d.effects,J===null?d.effects=[R]:J.push(R))}else se={eventTime:se,lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(H=X=se,P=ee):X=X.next=se,w|=J;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;J=R,R=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(X===null&&(P=ee),d.baseState=P,d.firstBaseUpdate=H,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);ss|=w,n.lanes=w,n.memoizedState=ee}}function Kp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ea={},rr=li(Ea),Ta=li(Ea),Sa=li(Ea);function rs(n){if(n===Ea)throw Error(t(174));return n}function wh(n,i){switch(Ke(Sa,i),Ke(Ta,n),Ke(rr,Ea),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:xs(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=xs(i,n)}Je(rr),Ke(rr,i)}function lo(){Je(rr),Je(Ta),Je(Sa)}function Gp(n){rs(Sa.current);var i=rs(rr.current),a=xs(i,n.type);i!==a&&(Ke(Ta,n),Ke(rr,a))}function Eh(n){Ta.current===n&&(Je(rr),Je(Ta))}var et=li(0);function lu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Th=[];function Sh(){for(var n=0;n<Th.length;n++)Th[n]._workInProgressVersionPrimary=null;Th.length=0}var uu=fe.ReactCurrentDispatcher,Ih=fe.ReactCurrentBatchConfig,is=0,tt=null,yt=null,Tt=null,cu=!1,Ia=!1,Ca=0,gE=0;function jt(){throw Error(t(321))}function Ch(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!xn(n[a],i[a]))return!1;return!0}function Rh(n,i,a,c,d,p){if(is=p,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,uu.current=n===null||n.memoizedState===null?wE:EE,n=a(c,d),Ia){p=0;do{if(Ia=!1,Ca=0,25<=p)throw Error(t(301));p+=1,Tt=yt=null,i.updateQueue=null,uu.current=TE,n=a(c,d)}while(Ia)}if(uu.current=fu,i=yt!==null&&yt.next!==null,is=0,Tt=yt=tt=null,cu=!1,i)throw Error(t(300));return n}function kh(){var n=Ca!==0;return Ca=0,n}function ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?tt.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function yn(){if(yt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var i=Tt===null?tt.memoizedState:Tt.next;if(i!==null)Tt=i,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?tt.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function Ra(n,i){return typeof i=="function"?i(n):i}function Ah(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var R=w=null,P=null,H=p;do{var X=H.lane;if((is&X)===X)P!==null&&(P=P.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:n(c,H.action);else{var ee={lane:X,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};P===null?(R=P=ee,w=c):P=P.next=ee,tt.lanes|=X,ss|=X}H=H.next}while(H!==null&&H!==p);P===null?w=c:P.next=R,xn(c,i.memoizedState)||(Yt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,tt.lanes|=p,ss|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function xh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);xn(p,i.memoizedState)||(Yt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Qp(){}function Jp(n,i){var a=tt,c=yn(),d=i(),p=!xn(c.memoizedState,d);if(p&&(c.memoizedState=d,Yt=!0),c=c.queue,Ph(Zp.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,ka(9,Xp.bind(null,a,c,d,i),void 0,null),St===null)throw Error(t(349));(is&30)!==0||Yp(a,i,d)}return d}function Yp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Xp(n,i,a,c){i.value=a,i.getSnapshot=c,em(i)&&tm(n)}function Zp(n,i,a){return a(function(){em(i)&&tm(n)})}function em(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!xn(n,a)}catch{return!0}}function tm(n){var i=xr(n,1);i!==null&&Vn(i,n,1,-1)}function nm(n){var i=ir();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:n},i.queue=n,n=n.dispatch=_E.bind(null,tt,n),[i.memoizedState,n]}function ka(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function rm(){return yn().memoizedState}function hu(n,i,a,c){var d=ir();tt.flags|=n,d.memoizedState=ka(1|i,a,void 0,c===void 0?null:c)}function du(n,i,a,c){var d=yn();c=c===void 0?null:c;var p=void 0;if(yt!==null){var w=yt.memoizedState;if(p=w.destroy,c!==null&&Ch(c,w.deps)){d.memoizedState=ka(i,a,p,c);return}}tt.flags|=n,d.memoizedState=ka(1|i,a,p,c)}function im(n,i){return hu(8390656,8,n,i)}function Ph(n,i){return du(2048,8,n,i)}function sm(n,i){return du(4,2,n,i)}function om(n,i){return du(4,4,n,i)}function am(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function lm(n,i,a){return a=a!=null?a.concat([n]):null,du(4,4,am.bind(null,i,n),a)}function Nh(){}function um(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Ch(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function cm(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Ch(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function hm(n,i,a){return(is&21)===0?(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=a):(xn(a,i)||(a=Zo(),tt.lanes|=a,ss|=a,n.baseState=!0),i)}function yE(n,i){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=Ih.transition;Ih.transition={};try{n(!1),i()}finally{Ve=a,Ih.transition=c}}function dm(){return yn().memoizedState}function vE(n,i,a){var c=gi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},fm(n))pm(i,a);else if(a=Hp(n,i,a,c),a!==null){var d=Gt();Vn(a,n,c,d),mm(a,i,c)}}function _E(n,i,a){var c=gi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(fm(n))pm(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,R=p(w,a);if(d.hasEagerState=!0,d.eagerState=R,xn(R,w)){var P=i.interleaved;P===null?(d.next=d,vh(i)):(d.next=P.next,P.next=d),i.interleaved=d;return}}catch{}finally{}a=Hp(n,i,d,c),a!==null&&(d=Gt(),Vn(a,n,c,d),mm(a,i,c))}}function fm(n){var i=n.alternate;return n===tt||i!==null&&i===tt}function pm(n,i){Ia=cu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function mm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ta(n,a)}}var fu={readContext:gn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},wE={readContext:gn,useCallback:function(n,i){return ir().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:im,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,hu(4194308,4,am.bind(null,i,n),a)},useLayoutEffect:function(n,i){return hu(4194308,4,n,i)},useInsertionEffect:function(n,i){return hu(4,2,n,i)},useMemo:function(n,i){var a=ir();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=ir();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=vE.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var i=ir();return n={current:n},i.memoizedState=n},useState:nm,useDebugValue:Nh,useDeferredValue:function(n){return ir().memoizedState=n},useTransition:function(){var n=nm(!1),i=n[0];return n=yE.bind(null,n[1]),ir().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=tt,d=ir();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),St===null)throw Error(t(349));(is&30)!==0||Yp(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,im(Zp.bind(null,c,p,n),[n]),c.flags|=2048,ka(9,Xp.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=ir(),i=St.identifierPrefix;if(Ze){var a=Ar,c=kr;a=(c&~(1<<32-rn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ca++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=gE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},EE={readContext:gn,useCallback:um,useContext:gn,useEffect:Ph,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:om,useMemo:cm,useReducer:Ah,useRef:rm,useState:function(){return Ah(Ra)},useDebugValue:Nh,useDeferredValue:function(n){var i=yn();return hm(i,yt.memoizedState,n)},useTransition:function(){var n=Ah(Ra)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Qp,useSyncExternalStore:Jp,useId:dm,unstable_isNewReconciler:!1},TE={readContext:gn,useCallback:um,useContext:gn,useEffect:Ph,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:om,useMemo:cm,useReducer:xh,useRef:rm,useState:function(){return xh(Ra)},useDebugValue:Nh,useDeferredValue:function(n){var i=yn();return yt===null?i.memoizedState=n:hm(i,yt.memoizedState,n)},useTransition:function(){var n=xh(Ra)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Qp,useSyncExternalStore:Jp,useId:dm,unstable_isNewReconciler:!1};function Nn(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Dh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var pu={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Gt(),d=gi(n),p=Pr(c,d);p.payload=i,a!=null&&(p.callback=a),i=di(n,p,d),i!==null&&(Vn(i,n,d,c),ou(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Gt(),d=gi(n),p=Pr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=di(n,p,d),i!==null&&(Vn(i,n,d,c),ou(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Gt(),c=gi(n),d=Pr(a,c);d.tag=2,i!=null&&(d.callback=i),i=di(n,d,c),i!==null&&(Vn(i,n,c,a),ou(i,n,c))}};function gm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!fa(a,c)||!fa(d,p):!0}function ym(n,i,a){var c=!1,d=ui,p=i.contextType;return typeof p=="object"&&p!==null?p=gn(p):(d=Jt(i)?Zi:Mt.current,c=i.contextTypes,p=(c=c!=null)?to(n,d):ui),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=pu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function vm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&pu.enqueueReplaceState(i,i.state,null)}function bh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},_h(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=gn(p):(p=Jt(i)?Zi:Mt.current,d.context=to(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Dh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&pu.enqueueReplaceState(d,d.state,null),au(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function uo(n,i){try{var a="",c=i;do a+=xe(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Vh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Lh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var SE=typeof WeakMap=="function"?WeakMap:Map;function _m(n,i,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Eu||(Eu=!0,Jh=c),Lh(n,i)},a}function wm(n,i,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Lh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Lh(n,i),typeof c!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Em(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new SE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=ME.bind(null,n,i,a),i.then(n,n))}function Tm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Sm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Pr(-1,1),i.tag=2,di(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var IE=fe.ReactCurrentOwner,Yt=!1;function Kt(n,i,a,c){i.child=n===null?$p(i,null,a,c):so(i,n.child,a,c)}function Im(n,i,a,c,d){a=a.render;var p=i.ref;return ao(i,d),c=Rh(n,i,a,c,p,d),a=kh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(Ze&&a&&uh(i),i.flags|=1,Kt(n,i,c,d),i.child)}function Cm(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!rd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,Rm(n,i,p,c,d)):(n=ku(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:fa,a(w,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=vi(p,c),n.ref=i.ref,n.return=i,i.child=n}function Rm(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(fa(p,c)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Yt=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return Oh(n,i,a,c,d)}function km(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ho,hn),hn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ke(ho,hn),hn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ke(ho,hn),hn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ke(ho,hn),hn|=c;return Kt(n,i,d,a),i.child}function Am(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Oh(n,i,a,c,d){var p=Jt(a)?Zi:Mt.current;return p=to(i,p),ao(i,d),a=Rh(n,i,a,c,p,d),c=kh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(Ze&&c&&uh(i),i.flags|=1,Kt(n,i,a,d),i.child)}function xm(n,i,a,c,d){if(Jt(a)){var p=!0;Xl(i)}else p=!1;if(ao(i,d),i.stateNode===null)gu(n,i),ym(i,a,c),bh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,R=i.memoizedProps;w.props=R;var P=w.context,H=a.contextType;typeof H=="object"&&H!==null?H=gn(H):(H=Jt(a)?Zi:Mt.current,H=to(i,H));var X=a.getDerivedStateFromProps,ee=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||P!==H)&&vm(i,w,c,H),hi=!1;var J=i.memoizedState;w.state=J,au(i,c,w,d),P=i.memoizedState,R!==c||J!==P||Qt.current||hi?(typeof X=="function"&&(Dh(i,a,X,c),P=i.memoizedState),(R=hi||gm(i,a,R,c,J,P,H))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=P),w.props=c,w.state=P,w.context=H,c=R):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,Wp(n,i),R=i.memoizedProps,H=i.type===i.elementType?R:Nn(i.type,R),w.props=H,ee=i.pendingProps,J=w.context,P=a.contextType,typeof P=="object"&&P!==null?P=gn(P):(P=Jt(a)?Zi:Mt.current,P=to(i,P));var se=a.getDerivedStateFromProps;(X=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==ee||J!==P)&&vm(i,w,c,P),hi=!1,J=i.memoizedState,w.state=J,au(i,c,w,d);var ue=i.memoizedState;R!==ee||J!==ue||Qt.current||hi?(typeof se=="function"&&(Dh(i,a,se,c),ue=i.memoizedState),(H=hi||gm(i,a,H,c,J,ue,P)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ue,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ue,P)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),w.props=c,w.state=ue,w.context=P,c=H):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),c=!1)}return Mh(n,i,a,c,p,d)}function Mh(n,i,a,c,d,p){Am(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&Vp(i,a,!1),Nr(n,i,p);c=i.stateNode,IE.current=i;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=so(i,n.child,null,p),i.child=so(i,null,R,p)):Kt(n,i,R,p),i.memoizedState=c.state,d&&Vp(i,a,!0),i.child}function Pm(n){var i=n.stateNode;i.pendingContext?Dp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Dp(n,i.context,!1),wh(n,i.containerInfo)}function Nm(n,i,a,c,d){return io(),fh(d),i.flags|=256,Kt(n,i,a,c),i.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function Fh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Dm(n,i,a){var c=i.pendingProps,d=et.current,p=!1,w=(i.flags&128)!==0,R;if((R=w)||(R=n!==null&&n.memoizedState===null?!1:(d&2)!==0),R?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ke(et,d&1),n===null)return dh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Au(w,c,0,null),n=us(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Fh(a),i.memoizedState=jh,n):Uh(i,w));if(d=n.memoizedState,d!==null&&(R=d.dehydrated,R!==null))return CE(n,i,w,c,R,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,R=d.sibling;var P={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=P,i.deletions=null):(c=vi(d,P),c.subtreeFlags=d.subtreeFlags&14680064),R!==null?p=vi(R,p):(p=us(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?Fh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=jh,c}return p=n.child,n=p.sibling,c=vi(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Uh(n,i){return i=Au({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function mu(n,i,a,c){return c!==null&&fh(c),so(i,n.child,null,a),n=Uh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function CE(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Vh(Error(t(422))),mu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Au({mode:"visible",children:c.children},d,0,null),p=us(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&so(i,n.child,null,w),i.child.memoizedState=Fh(w),i.memoizedState=jh,p);if((i.mode&1)===0)return mu(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var R=c.dgst;return c=R,p=Error(t(419)),c=Vh(p,c,void 0),mu(n,i,w,c)}if(R=(w&n.childLanes)!==0,Yt||R){if(c=St,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,xr(n,d),Vn(c,n,d,-1))}return nd(),c=Vh(Error(t(421))),mu(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=jE.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,cn=ai(d.nextSibling),un=i,Ze=!0,Pn=null,n!==null&&(pn[mn++]=kr,pn[mn++]=Ar,pn[mn++]=es,kr=n.id,Ar=n.overflow,es=i),i=Uh(i,c.children),i.flags|=4096,i)}function bm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),yh(n.return,i,a)}function zh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Vm(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Kt(n,i,c.children,a),c=et.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bm(n,a,i);else if(n.tag===19)bm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ke(et,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&lu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),zh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&lu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}zh(i,!0,a,null,p);break;case"together":zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function gu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ss|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=vi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=vi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function RE(n,i,a){switch(i.tag){case 3:Pm(i),io();break;case 5:Gp(i);break;case 1:Jt(i.type)&&Xl(i);break;case 4:wh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ke(iu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ke(et,et.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Dm(n,i,a):(Ke(et,et.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Ke(et,et.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Vm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ke(et,et.current),c)break;return null;case 22:case 23:return i.lanes=0,km(n,i,a)}return Nr(n,i,a)}var Lm,Bh,Om,Mm;Lm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bh=function(){},Om=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,rs(rr.current);var p=null;switch(a){case"input":d=ks(n,d),c=ks(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Bo(n,d),c=Bo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ql)}Rn(a,c);var w;a=null;for(H in d)if(!c.hasOwnProperty(H)&&d.hasOwnProperty(H)&&d[H]!=null)if(H==="style"){var R=d[H];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?p||(p=[]):(p=p||[]).push(H,null));for(H in c){var P=c[H];if(R=d!=null?d[H]:void 0,c.hasOwnProperty(H)&&P!==R&&(P!=null||R!=null))if(H==="style")if(R){for(w in R)!R.hasOwnProperty(w)||P&&P.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in P)P.hasOwnProperty(w)&&R[w]!==P[w]&&(a||(a={}),a[w]=P[w])}else a||(p||(p=[]),p.push(H,a)),a=P;else H==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,R=R?R.__html:void 0,P!=null&&R!==P&&(p=p||[]).push(H,P)):H==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(H,""+P):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(P!=null&&H==="onScroll"&&Qe("scroll",n),p||R===P||(p=[])):(p=p||[]).push(H,P))}a&&(p=p||[]).push("style",a);var H=p;(i.updateQueue=H)&&(i.flags|=4)}},Mm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Aa(n,i){if(!Ze)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function kE(n,i,a){var c=i.pendingProps;switch(ch(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(i),null;case 1:return Jt(i.type)&&Yl(),Ft(i),null;case 3:return c=i.stateNode,lo(),Je(Qt),Je(Mt),Sh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(nu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pn!==null&&(Zh(Pn),Pn=null))),Bh(n,i),Ft(i),null;case 5:Eh(i);var d=rs(Sa.current);if(a=i.type,n!==null&&i.stateNode!=null)Om(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ft(i),null}if(n=rs(rr.current),nu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[nr]=i,c[va]=p,n=(i.mode&1)!==0,a){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(d=0;d<ma.length;d++)Qe(ma[d],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":wl(c,p),Qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Qe("invalid",c);break;case"textarea":$o(c,p),Qe("invalid",c)}Rn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var R=p[w];w==="children"?typeof R=="string"?c.textContent!==R&&(p.suppressHydrationWarning!==!0&&Gl(c.textContent,R,n),d=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(p.suppressHydrationWarning!==!0&&Gl(c.textContent,R,n),d=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&Qe("scroll",c)}switch(a){case"input":Rs(c),zo(c,p,!0);break;case"textarea":Rs(c),Wr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Ql)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ho(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[nr]=i,n[va]=c,Lm(n,i,!1,!1),i.stateNode=n;e:{switch(w=Ns(a,c),a){case"dialog":Qe("cancel",n),Qe("close",n),d=c;break;case"iframe":case"object":case"embed":Qe("load",n),d=c;break;case"video":case"audio":for(d=0;d<ma.length;d++)Qe(ma[d],n);d=c;break;case"source":Qe("error",n),d=c;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),d=c;break;case"details":Qe("toggle",n),d=c;break;case"input":wl(n,c),d=ks(n,c),Qe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Qe("invalid",n);break;case"textarea":$o(n,c),d=Bo(n,c),Qe("invalid",n);break;default:d=c}Rn(a,d),R=d;for(p in R)if(R.hasOwnProperty(p)){var P=R[p];p==="style"?Ps(n,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Tl(n,P)):p==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&ji(n,P):typeof P=="number"&&ji(n,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?P!=null&&p==="onScroll"&&Qe("scroll",n):P!=null&&Q(n,p,P,w))}switch(a){case"input":Rs(n),zo(n,c,!1);break;case"textarea":Rs(n),Wr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Cn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Cn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ql)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ft(i),null;case 6:if(n&&i.stateNode!=null)Mm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=rs(Sa.current),rs(rr.current),nu(i)){if(c=i.stateNode,a=i.memoizedProps,c[nr]=i,(p=c.nodeValue!==a)&&(n=un,n!==null))switch(n.tag){case 3:Gl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gl(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=i,i.stateNode=c}return Ft(i),null;case 13:if(Je(et),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&cn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Up(),io(),i.flags|=98560,p=!1;else if(p=nu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[nr]=i}else io(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),p=!1}else Pn!==null&&(Zh(Pn),Pn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(et.current&1)!==0?vt===0&&(vt=3):nd())),i.updateQueue!==null&&(i.flags|=4),Ft(i),null);case 4:return lo(),Bh(n,i),n===null&&ga(i.stateNode.containerInfo),Ft(i),null;case 10:return gh(i.type._context),Ft(i),null;case 17:return Jt(i.type)&&Yl(),Ft(i),null;case 19:if(Je(et),p=i.memoizedState,p===null)return Ft(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)Aa(p,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=lu(n),w!==null){for(i.flags|=128,Aa(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(et,et.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ge()>fo&&(i.flags|=128,c=!0,Aa(p,!1),i.lanes=4194304)}else{if(!c)if(n=lu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Aa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!Ze)return Ft(i),null}else 2*Ge()-p.renderingStartTime>fo&&a!==1073741824&&(i.flags|=128,c=!0,Aa(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ge(),i.sibling=null,a=et.current,Ke(et,c?a&1|2:a&1),i):(Ft(i),null);case 22:case 23:return td(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(hn&1073741824)!==0&&(Ft(i),i.subtreeFlags&6&&(i.flags|=8192)):Ft(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function AE(n,i){switch(ch(i),i.tag){case 1:return Jt(i.type)&&Yl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return lo(),Je(Qt),Je(Mt),Sh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Eh(i),null;case 13:if(Je(et),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));io()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Je(et),null;case 4:return lo(),null;case 10:return gh(i.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var yu=!1,Ut=!1,xE=typeof WeakSet=="function"?WeakSet:Set,le=null;function co(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,i,c)}else a.current=null}function $h(n,i,a){try{a()}catch(c){at(n,i,c)}}var jm=!1;function PE(n,i){if(th=Tr,n=gp(),Kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,R=-1,P=-1,H=0,X=0,ee=n,J=null;t:for(;;){for(var se;ee!==a||d!==0&&ee.nodeType!==3||(R=w+d),ee!==p||c!==0&&ee.nodeType!==3||(P=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(se=ee.firstChild)!==null;)J=ee,ee=se;for(;;){if(ee===n)break t;if(J===a&&++H===d&&(R=w),J===p&&++X===c&&(P=w),(se=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=se}a=R===-1||P===-1?null:{start:R,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(nh={focusedElem:n,selectionRange:a},Tr=!1,le=i;le!==null;)if(i=le,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,le=n;else for(;le!==null;){i=le;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,ct=ue.memoizedState,F=i.stateNode,b=F.getSnapshotBeforeUpdate(i.elementType===i.type?ce:Nn(i.type,ce),ct);F.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){at(i,i.return,te)}if(n=i.sibling,n!==null){n.return=i.return,le=n;break}le=i.return}return ue=jm,jm=!1,ue}function xa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&$h(i,a,p)}d=d.next}while(d!==c)}}function vu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Hh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Fm(n){var i=n.alternate;i!==null&&(n.alternate=null,Fm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[nr],delete i[va],delete i[oh],delete i[dE],delete i[fE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Um(n){return n.tag===5||n.tag===3||n.tag===4}function zm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Um(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ql));else if(c!==4&&(n=n.child,n!==null))for(Wh(n,i,a),n=n.sibling;n!==null;)Wh(n,i,a),n=n.sibling}function qh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(qh(n,i,a),n=n.sibling;n!==null;)qh(n,i,a),n=n.sibling}var xt=null,Dn=!1;function fi(n,i,a){for(a=a.child;a!==null;)Bm(n,i,a),a=a.sibling}function Bm(n,i,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount($i,a)}catch{}switch(a.tag){case 5:Ut||co(a,i);case 6:var c=xt,d=Dn;xt=null,fi(n,i,a),xt=c,Dn=d,xt!==null&&(Dn?(n=xt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):xt.removeChild(a.stateNode));break;case 18:xt!==null&&(Dn?(n=xt,a=a.stateNode,n.nodeType===8?sh(n.parentNode,a):n.nodeType===1&&sh(n,a),ri(n)):sh(xt,a.stateNode));break;case 4:c=xt,d=Dn,xt=a.stateNode.containerInfo,Dn=!0,fi(n,i,a),xt=c,Dn=d;break;case 0:case 11:case 14:case 15:if(!Ut&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&$h(a,i,w),d=d.next}while(d!==c)}fi(n,i,a);break;case 1:if(!Ut&&(co(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){at(a,i,R)}fi(n,i,a);break;case 21:fi(n,i,a);break;case 22:a.mode&1?(Ut=(c=Ut)||a.memoizedState!==null,fi(n,i,a),Ut=c):fi(n,i,a);break;default:fi(n,i,a)}}function $m(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new xE),i.forEach(function(c){var d=FE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function bn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,R=w;e:for(;R!==null;){switch(R.tag){case 5:xt=R.stateNode,Dn=!1;break e;case 3:xt=R.stateNode.containerInfo,Dn=!0;break e;case 4:xt=R.stateNode.containerInfo,Dn=!0;break e}R=R.return}if(xt===null)throw Error(t(160));Bm(p,w,d),xt=null,Dn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(H){at(d,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Hm(i,n),i=i.sibling}function Hm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bn(i,n),sr(n),c&4){try{xa(3,n,n.return),vu(3,n)}catch(ce){at(n,n.return,ce)}try{xa(5,n,n.return)}catch(ce){at(n,n.return,ce)}}break;case 1:bn(i,n),sr(n),c&512&&a!==null&&co(a,a.return);break;case 5:if(bn(i,n),sr(n),c&512&&a!==null&&co(a,a.return),n.flags&32){var d=n.stateNode;try{ji(d,"")}catch(ce){at(n,n.return,ce)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,R=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{R==="input"&&p.type==="radio"&&p.name!=null&&As(d,p),Ns(R,w);var H=Ns(R,p);for(w=0;w<P.length;w+=2){var X=P[w],ee=P[w+1];X==="style"?Ps(d,ee):X==="dangerouslySetInnerHTML"?Tl(d,ee):X==="children"?ji(d,ee):Q(d,X,ee,H)}switch(R){case"input":Mi(d,p);break;case"textarea":El(d,p);break;case"select":var J=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var se=p.value;se!=null?Cn(d,!!p.multiple,se,!1):J!==!!p.multiple&&(p.defaultValue!=null?Cn(d,!!p.multiple,p.defaultValue,!0):Cn(d,!!p.multiple,p.multiple?[]:"",!1))}d[va]=p}catch(ce){at(n,n.return,ce)}}break;case 6:if(bn(i,n),sr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(ce){at(n,n.return,ce)}}break;case 3:if(bn(i,n),sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ri(i.containerInfo)}catch(ce){at(n,n.return,ce)}break;case 4:bn(i,n),sr(n);break;case 13:bn(i,n),sr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Qh=Ge())),c&4&&$m(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Ut=(H=Ut)||X,bn(i,n),Ut=H):bn(i,n),sr(n),c&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!X&&(n.mode&1)!==0)for(le=n,X=n.child;X!==null;){for(ee=le=X;le!==null;){switch(J=le,se=J.child,J.tag){case 0:case 11:case 14:case 15:xa(4,J,J.return);break;case 1:co(J,J.return);var ue=J.stateNode;if(typeof ue.componentWillUnmount=="function"){c=J,a=J.return;try{i=c,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(ce){at(c,a,ce)}}break;case 5:co(J,J.return);break;case 22:if(J.memoizedState!==null){Km(ee);continue}}se!==null?(se.return=J,le=se):Km(ee)}X=X.sibling}e:for(X=null,ee=n;;){if(ee.tag===5){if(X===null){X=ee;try{d=ee.stateNode,H?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(R=ee.stateNode,P=ee.memoizedProps.style,w=P!=null&&P.hasOwnProperty("display")?P.display:null,R.style.display=Gr("display",w))}catch(ce){at(n,n.return,ce)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=H?"":ee.memoizedProps}catch(ce){at(n,n.return,ce)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:bn(i,n),sr(n),c&4&&$m(n);break;case 21:break;default:bn(i,n),sr(n)}}function sr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Um(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ji(d,""),c.flags&=-33);var p=zm(n);qh(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,R=zm(n);Wh(n,R,w);break;default:throw Error(t(161))}}catch(P){at(n,n.return,P)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function NE(n,i,a){le=n,Wm(n)}function Wm(n,i,a){for(var c=(n.mode&1)!==0;le!==null;){var d=le,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||yu;if(!w){var R=d.alternate,P=R!==null&&R.memoizedState!==null||Ut;R=yu;var H=Ut;if(yu=w,(Ut=P)&&!H)for(le=d;le!==null;)w=le,P=w.child,w.tag===22&&w.memoizedState!==null?Gm(d):P!==null?(P.return=w,le=P):Gm(d);for(;p!==null;)le=p,Wm(p),p=p.sibling;le=d,yu=R,Ut=H}qm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,le=p):qm(n)}}function qm(n){for(;le!==null;){var i=le;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ut||vu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Ut)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Nn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Kp(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Kp(i,w,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var X=H.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&ri(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||i.flags&512&&Hh(i)}catch(J){at(i,i.return,J)}}if(i===n){le=null;break}if(a=i.sibling,a!==null){a.return=i.return,le=a;break}le=i.return}}function Km(n){for(;le!==null;){var i=le;if(i===n){le=null;break}var a=i.sibling;if(a!==null){a.return=i.return,le=a;break}le=i.return}}function Gm(n){for(;le!==null;){var i=le;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{vu(4,i)}catch(P){at(i,a,P)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(P){at(i,d,P)}}var p=i.return;try{Hh(i)}catch(P){at(i,p,P)}break;case 5:var w=i.return;try{Hh(i)}catch(P){at(i,w,P)}}}catch(P){at(i,i.return,P)}if(i===n){le=null;break}var R=i.sibling;if(R!==null){R.return=i.return,le=R;break}le=i.return}}var DE=Math.ceil,_u=fe.ReactCurrentDispatcher,Kh=fe.ReactCurrentOwner,vn=fe.ReactCurrentBatchConfig,Me=0,St=null,pt=null,Pt=0,hn=0,ho=li(0),vt=0,Pa=null,ss=0,wu=0,Gh=0,Na=null,Xt=null,Qh=0,fo=1/0,Dr=null,Eu=!1,Jh=null,pi=null,Tu=!1,mi=null,Su=0,Da=0,Yh=null,Iu=-1,Cu=0;function Gt(){return(Me&6)!==0?Ge():Iu!==-1?Iu:Iu=Ge()}function gi(n){return(n.mode&1)===0?1:(Me&2)!==0&&Pt!==0?Pt&-Pt:mE.transition!==null?(Cu===0&&(Cu=Zo()),Cu):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:zs(n.type)),n)}function Vn(n,i,a,c){if(50<Da)throw Da=0,Yh=null,Error(t(185));Ki(n,a,c),((Me&2)===0||n!==St)&&(n===St&&((Me&2)===0&&(wu|=a),vt===4&&yi(n,Pt)),Zt(n,c),a===1&&Me===0&&(i.mode&1)===0&&(fo=Ge()+500,Zl&&ci()))}function Zt(n,i){var a=n.callbackNode;qi(n,i);var c=_r(n,n===St?Pt:0);if(c===0)a!==null&&Vs(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Vs(a),i===1)n.tag===0?pE(Jm.bind(null,n)):Lp(Jm.bind(null,n)),cE(function(){(Me&6)===0&&ci()}),a=null;else{switch(qn(c)){case 1:a=Ls;break;case 4:a=Jo;break;case 16:a=Bi;break;case 536870912:a=Os;break;default:a=Bi}a=ig(a,Qm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Qm(n,i){if(Iu=-1,Cu=0,(Me&6)!==0)throw Error(t(327));var a=n.callbackNode;if(po()&&n.callbackNode!==a)return null;var c=_r(n,n===St?Pt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Ru(n,c);else{i=c;var d=Me;Me|=2;var p=Xm();(St!==n||Pt!==i)&&(Dr=null,fo=Ge()+500,as(n,i));do try{LE();break}catch(R){Ym(n,R)}while(!0);mh(),_u.current=p,Me=d,pt!==null?i=0:(St=null,Pt=0,i=vt)}if(i!==0){if(i===2&&(d=Xo(n),d!==0&&(c=d,i=Xh(n,d))),i===1)throw a=Pa,as(n,0),yi(n,c),Zt(n,Ge()),a;if(i===6)yi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!bE(d)&&(i=Ru(n,c),i===2&&(p=Xo(n),p!==0&&(c=p,i=Xh(n,p))),i===1))throw a=Pa,as(n,0),yi(n,c),Zt(n,Ge()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:ls(n,Xt,Dr);break;case 3:if(yi(n,c),(c&130023424)===c&&(i=Qh+500-Ge(),10<i)){if(_r(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Gt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=ih(ls.bind(null,n,Xt,Dr),i);break}ls(n,Xt,Dr);break;case 4:if(yi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-rn(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Ge()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*DE(c/1960))-c,10<c){n.timeoutHandle=ih(ls.bind(null,n,Xt,Dr),c);break}ls(n,Xt,Dr);break;case 5:ls(n,Xt,Dr);break;default:throw Error(t(329))}}}return Zt(n,Ge()),n.callbackNode===a?Qm.bind(null,n):null}function Xh(n,i){var a=Na;return n.current.memoizedState.isDehydrated&&(as(n,i).flags|=256),n=Ru(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&Zh(i)),n}function Zh(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function bE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!xn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function yi(n,i){for(i&=~Gh,i&=~wu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-rn(i),c=1<<a;n[a]=-1,i&=~c}}function Jm(n){if((Me&6)!==0)throw Error(t(327));po();var i=_r(n,0);if((i&1)===0)return Zt(n,Ge()),null;var a=Ru(n,i);if(n.tag!==0&&a===2){var c=Xo(n);c!==0&&(i=c,a=Xh(n,c))}if(a===1)throw a=Pa,as(n,0),yi(n,i),Zt(n,Ge()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ls(n,Xt,Dr),Zt(n,Ge()),null}function ed(n,i){var a=Me;Me|=1;try{return n(i)}finally{Me=a,Me===0&&(fo=Ge()+500,Zl&&ci())}}function os(n){mi!==null&&mi.tag===0&&(Me&6)===0&&po();var i=Me;Me|=1;var a=vn.transition,c=Ve;try{if(vn.transition=null,Ve=1,n)return n()}finally{Ve=c,vn.transition=a,Me=i,(Me&6)===0&&ci()}}function td(){hn=ho.current,Je(ho)}function as(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,uE(a)),pt!==null)for(a=pt.return;a!==null;){var c=a;switch(ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Yl();break;case 3:lo(),Je(Qt),Je(Mt),Sh();break;case 5:Eh(c);break;case 4:lo();break;case 13:Je(et);break;case 19:Je(et);break;case 10:gh(c.type._context);break;case 22:case 23:td()}a=a.return}if(St=n,pt=n=vi(n.current,null),Pt=hn=i,vt=0,Pa=null,Gh=wu=ss=0,Xt=Na=null,ns!==null){for(i=0;i<ns.length;i++)if(a=ns[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}ns=null}return n}function Ym(n,i){do{var a=pt;try{if(mh(),uu.current=fu,cu){for(var c=tt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}cu=!1}if(is=0,Tt=yt=tt=null,Ia=!1,Ca=0,Kh.current=null,a===null||a.return===null){vt=1,Pa=i,pt=null;break}e:{var p=n,w=a.return,R=a,P=i;if(i=Pt,R.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var H=P,X=R,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=X.alternate;J?(X.updateQueue=J.updateQueue,X.memoizedState=J.memoizedState,X.lanes=J.lanes):(X.updateQueue=null,X.memoizedState=null)}var se=Tm(w);if(se!==null){se.flags&=-257,Sm(se,w,R,p,i),se.mode&1&&Em(p,H,i),i=se,P=H;var ue=i.updateQueue;if(ue===null){var ce=new Set;ce.add(P),i.updateQueue=ce}else ue.add(P);break e}else{if((i&1)===0){Em(p,H,i),nd();break e}P=Error(t(426))}}else if(Ze&&R.mode&1){var ct=Tm(w);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Sm(ct,w,R,p,i),fh(uo(P,R));break e}}p=P=uo(P,R),vt!==4&&(vt=2),Na===null?Na=[p]:Na.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var F=_m(p,P,i);qp(p,F);break e;case 1:R=P;var b=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(pi===null||!pi.has(z)))){p.flags|=65536,i&=-i,p.lanes|=i;var te=wm(p,R,i);qp(p,te);break e}}p=p.return}while(p!==null)}eg(a)}catch(he){i=he,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Xm(){var n=_u.current;return _u.current=fu,n===null?fu:n}function nd(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||(ss&268435455)===0&&(wu&268435455)===0||yi(St,Pt)}function Ru(n,i){var a=Me;Me|=2;var c=Xm();(St!==n||Pt!==i)&&(Dr=null,as(n,i));do try{VE();break}catch(d){Ym(n,d)}while(!0);if(mh(),Me=a,_u.current=c,pt!==null)throw Error(t(261));return St=null,Pt=0,vt}function VE(){for(;pt!==null;)Zm(pt)}function LE(){for(;pt!==null&&!zi();)Zm(pt)}function Zm(n){var i=rg(n.alternate,n,hn);n.memoizedProps=n.pendingProps,i===null?eg(n):pt=i,Kh.current=null}function eg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=kE(a,i,hn),a!==null){pt=a;return}}else{if(a=AE(a,i),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vt=6,pt=null;return}}if(i=i.sibling,i!==null){pt=i;return}pt=i=n}while(i!==null);vt===0&&(vt=5)}function ls(n,i,a){var c=Ve,d=vn.transition;try{vn.transition=null,Ve=1,OE(n,i,a,c)}finally{vn.transition=d,Ve=c}return null}function OE(n,i,a,c){do po();while(mi!==null);if((Me&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Bc(n,p),n===St&&(pt=St=null,Pt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Tu||(Tu=!0,ig(Bi,function(){return po(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=vn.transition,vn.transition=null;var w=Ve;Ve=1;var R=Me;Me|=4,Kh.current=null,PE(n,a),Hm(a,n),nE(nh),Tr=!!th,nh=th=null,n.current=a,NE(a),vr(),Me=R,Ve=w,vn.transition=p}else n.current=a;if(Tu&&(Tu=!1,mi=n,Su=d),p=n.pendingLanes,p===0&&(pi=null),bl(a.stateNode),Zt(n,Ge()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Eu)throw Eu=!1,n=Jh,Jh=null,n;return(Su&1)!==0&&n.tag!==0&&po(),p=n.pendingLanes,(p&1)!==0?n===Yh?Da++:(Da=0,Yh=n):Da=0,ci(),null}function po(){if(mi!==null){var n=qn(Su),i=vn.transition,a=Ve;try{if(vn.transition=null,Ve=16>n?16:n,mi===null)var c=!1;else{if(n=mi,mi=null,Su=0,(Me&6)!==0)throw Error(t(331));var d=Me;for(Me|=4,le=n.current;le!==null;){var p=le,w=p.child;if((le.flags&16)!==0){var R=p.deletions;if(R!==null){for(var P=0;P<R.length;P++){var H=R[P];for(le=H;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:xa(8,X,p)}var ee=X.child;if(ee!==null)ee.return=X,le=ee;else for(;le!==null;){X=le;var J=X.sibling,se=X.return;if(Fm(X),X===H){le=null;break}if(J!==null){J.return=se,le=J;break}le=se}}}var ue=p.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var ct=ce.sibling;ce.sibling=null,ce=ct}while(ce!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,le=w;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:xa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,le=F;break e}le=p.return}}var b=n.current;for(le=b;le!==null;){w=le;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,le=z;else e:for(w=b;le!==null;){if(R=le,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:vu(9,R)}}catch(he){at(R,R.return,he)}if(R===w){le=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,le=te;break e}le=R.return}}if(Me=d,ci(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot($i,n)}catch{}c=!0}return c}finally{Ve=a,vn.transition=i}}return!1}function tg(n,i,a){i=uo(a,i),i=_m(n,i,1),n=di(n,i,1),i=Gt(),n!==null&&(Ki(n,1,i),Zt(n,i))}function at(n,i,a){if(n.tag===3)tg(n,n,a);else for(;i!==null;){if(i.tag===3){tg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(pi===null||!pi.has(c))){n=uo(a,n),n=wm(i,n,1),i=di(i,n,1),n=Gt(),i!==null&&(Ki(i,1,n),Zt(i,n));break}}i=i.return}}function ME(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Gt(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(Pt&a)===a&&(vt===4||vt===3&&(Pt&130023424)===Pt&&500>Ge()-Qh?as(n,0):Gh|=a),Zt(n,i)}function ng(n,i){i===0&&((n.mode&1)===0?i=1:(i=ei,ei<<=1,(ei&130023424)===0&&(ei=4194304)));var a=Gt();n=xr(n,i),n!==null&&(Ki(n,i,a),Zt(n,a))}function jE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),ng(n,a)}function FE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),ng(n,a)}var rg;rg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Qt.current)Yt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Yt=!1,RE(n,i,a);Yt=(n.flags&131072)!==0}else Yt=!1,Ze&&(i.flags&1048576)!==0&&Op(i,tu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;gu(n,i),n=i.pendingProps;var d=to(i,Mt.current);ao(i,a),d=Rh(null,i,c,n,d,a);var p=kh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Jt(c)?(p=!0,Xl(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,_h(i),d.updater=pu,i.stateNode=d,d._reactInternals=i,bh(i,c,n,a),i=Mh(null,i,c,!0,p,a)):(i.tag=0,Ze&&p&&uh(i),Kt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(gu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=zE(c),n=Nn(c,n),d){case 0:i=Oh(null,i,c,n,a);break e;case 1:i=xm(null,i,c,n,a);break e;case 11:i=Im(null,i,c,n,a);break e;case 14:i=Cm(null,i,c,Nn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),Oh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),xm(n,i,c,d,a);case 3:e:{if(Pm(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,Wp(n,i),au(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=uo(Error(t(423)),i),i=Nm(n,i,c,a,d);break e}else if(c!==d){d=uo(Error(t(424)),i),i=Nm(n,i,c,a,d);break e}else for(cn=ai(i.stateNode.containerInfo.firstChild),un=i,Ze=!0,Pn=null,a=$p(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(io(),c===d){i=Nr(n,i,a);break e}Kt(n,i,c,a)}i=i.child}return i;case 5:return Gp(i),n===null&&dh(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,rh(c,d)?w=null:p!==null&&rh(c,p)&&(i.flags|=32),Am(n,i),Kt(n,i,w,a),i.child;case 6:return n===null&&dh(i),null;case 13:return Dm(n,i,a);case 4:return wh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=so(i,null,c,a):Kt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),Im(n,i,c,d,a);case 7:return Kt(n,i,i.pendingProps,a),i.child;case 8:return Kt(n,i,i.pendingProps.children,a),i.child;case 12:return Kt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Ke(iu,c._currentValue),c._currentValue=w,p!==null)if(xn(p.value,w)){if(p.children===d.children&&!Qt.current){i=Nr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var R=p.dependencies;if(R!==null){w=p.child;for(var P=R.firstContext;P!==null;){if(P.context===c){if(p.tag===1){P=Pr(-1,a&-a),P.tag=2;var H=p.updateQueue;if(H!==null){H=H.shared;var X=H.pending;X===null?P.next=P:(P.next=X.next,X.next=P),H.pending=P}}p.lanes|=a,P=p.alternate,P!==null&&(P.lanes|=a),yh(p.return,a,i),R.lanes|=a;break}P=P.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),yh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Kt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,ao(i,a),d=gn(d),c=c(d),i.flags|=1,Kt(n,i,c,a),i.child;case 14:return c=i.type,d=Nn(c,i.pendingProps),d=Nn(c.type,d),Cm(n,i,c,d,a);case 15:return Rm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Nn(c,d),gu(n,i),i.tag=1,Jt(c)?(n=!0,Xl(i)):n=!1,ao(i,a),ym(i,c,d),bh(i,c,d,a),Mh(null,i,c,!0,n,a);case 19:return Vm(n,i,a);case 22:return km(n,i,a)}throw Error(t(156,i.tag))};function ig(n,i){return Qo(n,i)}function UE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,i,a,c){return new UE(n,i,a,c)}function rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zE(n){if(typeof n=="function")return rd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===Et)return 14}return 2}function vi(n,i){var a=n.alternate;return a===null?(a=_n(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ku(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")rd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case x:return us(a.children,d,p,i);case C:w=8,d|=8;break;case A:return n=_n(12,a,i,d|2),n.elementType=A,n.lanes=p,n;case k:return n=_n(13,a,i,d),n.elementType=k,n.lanes=p,n;case qe:return n=_n(19,a,i,d),n.elementType=qe,n.lanes=p,n;case Xe:return Au(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case V:w=10;break e;case D:w=9;break e;case O:w=11;break e;case Et:w=14;break e;case Lt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=_n(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function us(n,i,a,c){return n=_n(7,n,c,i),n.lanes=a,n}function Au(n,i,a,c){return n=_n(22,n,c,i),n.elementType=Xe,n.lanes=a,n.stateNode={isHidden:!1},n}function id(n,i,a){return n=_n(6,n,null,i),n.lanes=a,n}function sd(n,i,a){return i=_n(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function BE(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function od(n,i,a,c,d,p,w,R,P){return n=new BE(n,i,a,R,P),i===1?(i=1,p===!0&&(i|=8)):i=0,p=_n(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(p),n}function $E(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function sg(n){if(!n)return ui;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return bp(n,a,i)}return i}function og(n,i,a,c,d,p,w,R,P){return n=od(a,c,!0,n,d,p,w,R,P),n.context=sg(null),a=n.current,c=Gt(),d=gi(a),p=Pr(c,d),p.callback=i??null,di(a,p,d),n.current.lanes=d,Ki(n,d,c),Zt(n,c),n}function xu(n,i,a,c){var d=i.current,p=Gt(),w=gi(d);return a=sg(a),i.context===null?i.context=a:i.pendingContext=a,i=Pr(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=di(d,i,w),n!==null&&(Vn(n,d,w,p),ou(n,d,w)),w}function Pu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ag(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ad(n,i){ag(n,i),(n=n.alternate)&&ag(n,i)}function HE(){return null}var lg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ld(n){this._internalRoot=n}Nu.prototype.render=ld.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));xu(n,i,null,null)},Nu.prototype.unmount=ld.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;os(function(){xu(null,n,null,null)}),i[Cr]=null}};function Nu(n){this._internalRoot=n}Nu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ia();n={blockedOn:null,target:n,priority:i};for(var a=0;a<sn.length&&i!==0&&i<sn[a].priority;a++);sn.splice(a,0,n),a===0&&Fs(n)}};function ud(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Du(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ug(){}function WE(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var H=Pu(w);p.call(H)}}var w=og(i,c,n,0,null,!1,!1,"",ug);return n._reactRootContainer=w,n[Cr]=w.current,ga(n.nodeType===8?n.parentNode:n),os(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var R=c;c=function(){var H=Pu(P);R.call(H)}}var P=od(n,0,!1,null,null,!1,!1,"",ug);return n._reactRootContainer=P,n[Cr]=P.current,ga(n.nodeType===8?n.parentNode:n),os(function(){xu(i,P,a,c)}),P}function bu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var R=d;d=function(){var P=Pu(w);R.call(P)}}xu(i,w,n,d)}else w=WE(a,i,n,d,c);return Pu(w)}na=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Fe(i.pendingLanes);a!==0&&(ta(i,a|1),Zt(i,Ge()),(Me&6)===0&&(fo=Ge()+500,ci()))}break;case 13:os(function(){var c=xr(n,1);if(c!==null){var d=Gt();Vn(c,n,1,d)}}),ad(n,1)}},Ms=function(n){if(n.tag===13){var i=xr(n,134217728);if(i!==null){var a=Gt();Vn(i,n,134217728,a)}ad(n,134217728)}},ra=function(n){if(n.tag===13){var i=gi(n),a=xr(n,i);if(a!==null){var c=Gt();Vn(a,n,i,c)}ad(n,i)}},ia=function(){return Ve},sa=function(n,i){var a=Ve;try{return Ve=n,i()}finally{Ve=a}},mr=function(n,i,a){switch(i){case"input":if(Mi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Jl(c);if(!d)throw Error(t(90));Uo(c),Mi(c,d)}}}break;case"textarea":El(n,a);break;case"select":i=a.value,i!=null&&Cn(n,!!a.multiple,i,!1)}},Il=ed,Cl=os;var qE={usingClientEntryPoint:!1,Events:[_a,Zs,Jl,Jr,Yr,ed]},ba={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KE={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Dl(n),n===null?null:n.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||HE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{$i=Vu.inject(KE),nn=Vu}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qE,en.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(i))throw Error(t(200));return $E(n,i,null,a)},en.createRoot=function(n,i){if(!ud(n))throw Error(t(299));var a=!1,c="",d=lg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=od(n,1,!1,null,null,a,!1,c,d),n[Cr]=i.current,ga(n.nodeType===8?n.parentNode:n),new ld(i)},en.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Dl(i),n=n===null?null:n.stateNode,n},en.flushSync=function(n){return os(n)},en.hydrate=function(n,i,a){if(!Du(i))throw Error(t(200));return bu(null,n,i,!0,a)},en.hydrateRoot=function(n,i,a){if(!ud(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=lg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=og(i,null,n,1,a??null,d,!1,p,w),n[Cr]=i.current,ga(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Nu(i)},en.render=function(n,i,a){if(!Du(i))throw Error(t(200));return bu(null,n,i,!1,a)},en.unmountComponentAtNode=function(n){if(!Du(n))throw Error(t(40));return n._reactRootContainer?(os(function(){bu(null,null,n,!1,function(){n._reactRootContainer=null,n[Cr]=null})}),!0):!1},en.unstable_batchedUpdates=ed,en.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Du(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return bu(n,i,a,!1,c)},en.version="18.3.1-next-f1338f8080-20240426",en}var yg;function t0(){if(yg)return dd.exports;yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dd.exports=e0(),dd.exports}var vg;function n0(){if(vg)return Lu;vg=1;var r=t0();return Lu.createRoot=r.createRoot,Lu.hydrateRoot=r.hydrateRoot,Lu}var r0=n0();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _g="popstate";function i0(r={}){function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Es(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Nd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:Qa(l))}function s(o,l){Tn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return o0(e,t,s,r)}function rt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Tn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s0(){return Math.random().toString(36).substring(2,10)}function wg(r,e){return{usr:r.state,key:r.key,idx:e}}function Nd(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Es(e):e,state:t,key:e&&e.key||s||s0()}}function Qa({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Es(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function o0(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f="POP",g=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function T(){f="POP";let j=E(),$=j==null?null:j-y;y=j,g&&g({action:f,location:B.location,delta:$})}function I(j,$){f="PUSH";let Y=Nd(B.location,j,$);t&&t(Y,j),y=E()+1;let Q=wg(Y,y),fe=B.createHref(Y);try{h.pushState(Q,"",fe)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(fe)}l&&g&&g({action:f,location:B.location,delta:1})}function N(j,$){f="REPLACE";let Y=Nd(B.location,j,$);t&&t(Y,j),y=E();let Q=wg(Y,y),fe=B.createHref(Y);h.replaceState(Q,"",fe),l&&g&&g({action:f,location:B.location,delta:0})}function q(j){return a0(j)}let B={get action(){return f},get location(){return r(o,h)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(_g,T),g=j,()=>{o.removeEventListener(_g,T),g=null}},createHref(j){return e(o,j)},createURL:q,encodeLocation(j){let $=q(j);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:I,replace:N,go(j){return h.go(j)}};return B}function a0(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),rt(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Qa(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Gy(r,e,t="/"){return l0(r,e,t,!1)}function l0(r,e,t,s){let o=typeof e=="string"?Es(e):e,l=jr(o.pathname||"/",t);if(l==null)return null;let h=Qy(r);u0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=w0(l);f=v0(h[g],y,s)}return f}function Qy(r,e=[],t=[],s="",o=!1){let l=(h,f,g=o,y)=>{let E={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&g)return;rt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=Or([s,E.relativePath]),I=t.concat(E);h.children&&h.children.length>0&&(rt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Qy(h.children,e,I,T,g)),!(h.path==null&&!h.index)&&e.push({path:T,score:g0(T,h.index),routesMeta:I})};return r.forEach((h,f)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))l(h,f);else for(let y of Jy(h.path))l(h,f,!0,y)}),e}function Jy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Jy(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function u0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:y0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var c0=/^:[\w-]+$/,h0=3,d0=2,f0=1,p0=10,m0=-2,Eg=r=>r==="*";function g0(r,e){let t=r.split("/"),s=t.length;return t.some(Eg)&&(s+=m0),e&&(s+=d0),t.filter(o=>!Eg(o)).reduce((o,l)=>o+(c0.test(l)?h0:l===""?f0:p0),s)}function y0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function v0(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=tc({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},E),I=g.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=tc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Or([l,T.pathname]),pathnameBase:I0(Or([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=Or([l,T.pathnameBase]))}return h}function tc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=_0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:T},I)=>{if(E==="*"){let q=f[I]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const N=f[I];return T&&!N?y[E]=void 0:y[E]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function _0(r,e=!1,t=!0){Tn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function w0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function jr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}var Yy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E0=r=>Yy.test(r);function T0(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Es(r):r,l;if(t)if(E0(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Tn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${t}`)}t.startsWith("/")?l=Tg(t.substring(1),"/"):l=Tg(t,e)}else l=e;return{pathname:l,search:C0(s),hash:R0(o)}}function Tg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function md(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xy(r){let e=S0(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Zy(r,e,t,s=!1){let o;typeof r=="string"?o=Es(r):(o={...r},rt(!o.pathname||!o.pathname.includes("?"),md("?","pathname","search",o)),rt(!o.pathname||!o.pathname.includes("#"),md("#","pathname","hash",o)),rt(!o.search||!o.search.includes("#"),md("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}f=T>=0?e[T]:"/"}let g=T0(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||E)&&(g.pathname+="/"),g}var Or=r=>r.join("/").replace(/\/\/+/g,"/"),I0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),C0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,R0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,k0=class{constructor(r,e,t,s=!1){this.status=r,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function A0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function x0(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tv(r,e){let t=r;if(typeof t!="string"||!Yy.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,o=!1;if(ev)try{let l=new URL(window.location.href),h=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=jr(h.pathname,e);h.origin===l.origin&&f!=null?t=f+h.search+h.hash:o=!0}catch{Tn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nv=["POST","PUT","PATCH","DELETE"];new Set(nv);var P0=["GET",...nv];new Set(P0);var Do=M.createContext(null);Do.displayName="DataRouter";var Sc=M.createContext(null);Sc.displayName="DataRouterState";var N0=M.createContext(!1),rv=M.createContext({isTransitioning:!1});rv.displayName="ViewTransition";var D0=M.createContext(new Map);D0.displayName="Fetchers";var b0=M.createContext(null);b0.displayName="Await";var In=M.createContext(null);In.displayName="Navigation";var al=M.createContext(null);al.displayName="Location";var pr=M.createContext({outlet:null,matches:[],isDataRoute:!1});pr.displayName="Route";var of=M.createContext(null);of.displayName="RouteError";var iv="REACT_ROUTER_ERROR",V0="REDIRECT",L0="ROUTE_ERROR_RESPONSE";function O0(r){if(r.startsWith(`${iv}:${V0}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function M0(r){if(r.startsWith(`${iv}:${L0}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new k0(e.status,e.statusText,e.data)}catch{}}function j0(r,{relative:e}={}){rt(ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=M.useContext(In),{hash:o,pathname:l,search:h}=ul(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Or([t,l])),s.createHref({pathname:f,search:h,hash:o})}function ll(){return M.useContext(al)!=null}function Oi(){return rt(ll(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(al).location}var sv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ov(r){M.useContext(In).static||M.useLayoutEffect(r)}function zn(){let{isDataRoute:r}=M.useContext(pr);return r?X0():F0()}function F0(){rt(ll(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(Do),{basename:e,navigator:t}=M.useContext(In),{matches:s}=M.useContext(pr),{pathname:o}=Oi(),l=JSON.stringify(Xy(s)),h=M.useRef(!1);return ov(()=>{h.current=!0}),M.useCallback((g,y={})=>{if(Tn(h.current,sv),!h.current)return;if(typeof g=="number"){t.go(g);return}let E=Zy(g,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Or([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,r])}M.createContext(null);function U0(){let{matches:r}=M.useContext(pr),e=r[r.length-1];return e?e.params:{}}function ul(r,{relative:e}={}){let{matches:t}=M.useContext(pr),{pathname:s}=Oi(),o=JSON.stringify(Xy(t));return M.useMemo(()=>Zy(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function z0(r,e){return av(r,e)}function av(r,e,t,s,o){var Y;rt(ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(In),{matches:h}=M.useContext(pr),f=h[h.length-1],g=f?f.params:{},y=f?f.pathname:"/",E=f?f.pathnameBase:"/",T=f&&f.route;{let Q=T&&T.path||"";uv(y,!T||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let I=Oi(),N;if(e){let Q=typeof e=="string"?Es(e):e;rt(E==="/"||((Y=Q.pathname)==null?void 0:Y.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),N=Q}else N=I;let q=N.pathname||"/",B=q;if(E!=="/"){let Q=E.replace(/^\//,"").split("/");B="/"+q.replace(/^\//,"").split("/").slice(Q.length).join("/")}let j=Gy(r,{pathname:B});Tn(T||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Tn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=q0(j&&j.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:Or([E,l.encodeLocation?l.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?E:Or([E,l.encodeLocation?l.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),h,t,s,o);return e&&$?M.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},$):$}function B0(){let r=Y0(),e=A0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:o},t):null,h)}var $0=M.createElement(B0,null),lv=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=M0(r.digest);t&&(r=t)}let e=r!==void 0?M.createElement(pr.Provider,{value:this.props.routeContext},M.createElement(of.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?M.createElement(H0,{error:r},e):e}};lv.contextType=N0;var gd=new WeakMap;function H0({children:r,error:e}){let{basename:t}=M.useContext(In);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=O0(e.digest);if(s){let o=gd.get(e);if(o)throw o;let l=tv(s.location,t);if(ev&&!gd.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw gd.set(e,h),h}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function W0({routeContext:r,match:e,children:t}){let s=M.useContext(Do);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(pr.Provider,{value:r},t)}function q0(r,e=[],t=null,s=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,h=t==null?void 0:t.errors;if(h!=null){let E=l.findIndex(T=>T.route.id&&(h==null?void 0:h[T.route.id])!==void 0);rt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,E+1))}let f=!1,g=-1;if(t)for(let E=0;E<l.length;E++){let T=l[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=E),T.route.id){let{loaderData:I,errors:N}=t,q=T.route.loader&&!I.hasOwnProperty(T.route.id)&&(!N||N[T.route.id]===void 0);if(T.route.lazy||q){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let y=t&&s?(E,T)=>{var I,N;s(E,{location:t.location,params:((N=(I=t.matches)==null?void 0:I[0])==null?void 0:N.params)??{},unstable_pattern:x0(t.matches),errorInfo:T})}:void 0;return l.reduceRight((E,T,I)=>{let N,q=!1,B=null,j=null;t&&(N=h&&T.route.id?h[T.route.id]:void 0,B=T.route.errorElement||$0,f&&(g<0&&I===0?(uv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,j=null):g===I&&(q=!0,j=T.route.hydrateFallbackElement||null)));let $=e.concat(l.slice(0,I+1)),Y=()=>{let Q;return N?Q=B:q?Q=j:T.route.Component?Q=M.createElement(T.route.Component,null):T.route.element?Q=T.route.element:Q=E,M.createElement(W0,{match:T,routeContext:{outlet:E,matches:$,isDataRoute:t!=null},children:Q})};return t&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?M.createElement(lv,{location:t.location,revalidation:t.revalidation,component:B,error:N,children:Y(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:y}):Y()},null)}function af(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K0(r){let e=M.useContext(Do);return rt(e,af(r)),e}function G0(r){let e=M.useContext(Sc);return rt(e,af(r)),e}function Q0(r){let e=M.useContext(pr);return rt(e,af(r)),e}function lf(r){let e=Q0(r),t=e.matches[e.matches.length-1];return rt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function J0(){return lf("useRouteId")}function Y0(){var s;let r=M.useContext(of),e=G0("useRouteError"),t=lf("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function X0(){let{router:r}=K0("useNavigate"),e=lf("useNavigate"),t=M.useRef(!1);return ov(()=>{t.current=!0}),M.useCallback(async(o,l={})=>{Tn(t.current,sv),t.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Sg={};function uv(r,e,t){!e&&!Sg[r]&&(Sg[r]=!0,Tn(!1,t))}M.memo(Z0);function Z0({routes:r,future:e,state:t,onError:s}){return av(r,void 0,t,s,e)}function Ln(r){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eT({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1,unstable_useTransitions:h}){rt(!ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),g=M.useMemo(()=>({basename:f,navigator:o,static:l,unstable_useTransitions:h,future:{}}),[f,o,l,h]);typeof t=="string"&&(t=Es(t));let{pathname:y="/",search:E="",hash:T="",state:I=null,key:N="default"}=t,q=M.useMemo(()=>{let B=jr(y,f);return B==null?null:{location:{pathname:B,search:E,hash:T,state:I,key:N},navigationType:s}},[f,y,E,T,I,N,s]);return Tn(q!=null,`<Router basename="${f}"> is not able to match the URL "${y}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:M.createElement(In.Provider,{value:g},M.createElement(al.Provider,{children:e,value:q}))}function tT({children:r,location:e}){return z0(Dd(r),e)}function Dd(r,e=[]){let t=[];return M.Children.forEach(r,(s,o)=>{if(!M.isValidElement(s))return;let l=[...e,o];if(s.type===M.Fragment){t.push.apply(t,Dd(s.props.children,l));return}rt(s.type===Ln,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Dd(s.props.children,l)),t.push(h)}),t}var $u="get",Hu="application/x-www-form-urlencoded";function Ic(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function nT(r){return Ic(r)&&r.tagName.toLowerCase()==="button"}function rT(r){return Ic(r)&&r.tagName.toLowerCase()==="form"}function iT(r){return Ic(r)&&r.tagName.toLowerCase()==="input"}function sT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function oT(r,e){return r.button===0&&(!e||e==="_self")&&!sT(r)}var Ou=null;function aT(){if(Ou===null)try{new FormData(document.createElement("form"),0),Ou=!1}catch{Ou=!0}return Ou}var lT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yd(r){return r!=null&&!lT.has(r)?(Tn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hu}"`),null):r}function uT(r,e){let t,s,o,l,h;if(rT(r)){let f=r.getAttribute("action");s=f?jr(f,e):null,t=r.getAttribute("method")||$u,o=yd(r.getAttribute("enctype"))||Hu,l=new FormData(r)}else if(nT(r)||iT(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||f.getAttribute("action");if(s=g?jr(g,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||$u,o=yd(r.getAttribute("formenctype"))||yd(f.getAttribute("enctype"))||Hu,l=new FormData(f,r),!aT()){let{name:y,type:E,value:T}=r;if(E==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,T)}}else{if(Ic(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$u,s=null,o=Hu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function cT(r,e,t,s){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&jr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function hT(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function fT(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await hT(l,t);return h.links?h.links():[]}return[]}));return yT(s.flat(1).filter(dT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ig(r,e,t,s,o,l){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,f=(g,y)=>{var E;return t[y].pathname!==g.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,y)=>h(g,y)||f(g,y)):l==="data"?e.filter((g,y)=>{var T;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,y)||f(g,y))return!0;if(g.route.shouldRevalidate){let I=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function pT(r,e,{includeHydrateFallback:t}={}){return mT(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function mT(r){return[...new Set(r)]}function gT(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function yT(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(gT(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function cv(){let r=M.useContext(Do);return uf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function vT(){let r=M.useContext(Sc);return uf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cf=M.createContext(void 0);cf.displayName="FrameworkContext";function hv(){let r=M.useContext(cf);return uf(r,"You must render this element inside a <HydratedRouter> element"),r}function _T(r,e){let t=M.useContext(cf),[s,o]=M.useState(!1),[l,h]=M.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,I=M.useRef(null);M.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let B=$=>{$.forEach(Y=>{h(Y.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return I.current&&j.observe(I.current),()=>{j.disconnect()}}},[r]),M.useEffect(()=>{if(s){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[s]);let N=()=>{o(!0)},q=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:La(f,N),onBlur:La(g,q),onMouseEnter:La(y,N),onMouseLeave:La(E,q),onTouchStart:La(T,N)}]:[!1,I,{}]}function La(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function wT({page:r,...e}){let{router:t}=cv(),s=M.useMemo(()=>Gy(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?M.createElement(TT,{page:r,matches:s,...e}):null}function ET(r){let{manifest:e,routeModules:t}=hv(),[s,o]=M.useState([]);return M.useEffect(()=>{let l=!1;return fT(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function TT({page:r,matches:e,...t}){let s=Oi(),{future:o,manifest:l,routeModules:h}=hv(),{basename:f}=cv(),{loaderData:g,matches:y}=vT(),E=M.useMemo(()=>Ig(r,e,y,l,s,"data"),[r,e,y,l,s]),T=M.useMemo(()=>Ig(r,e,y,l,s,"assets"),[r,e,y,l,s]),I=M.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let B=new Set,j=!1;if(e.forEach(Y=>{var fe;let Q=l.routes[Y.route.id];!Q||!Q.hasLoader||(!E.some(ie=>ie.route.id===Y.route.id)&&Y.route.id in g&&((fe=h[Y.route.id])!=null&&fe.shouldRevalidate)||Q.hasClientLoader?j=!0:B.add(Y.route.id))}),B.size===0)return[];let $=cT(r,f,o.unstable_trailingSlashAwareDataRequests,"data");return j&&B.size>0&&$.searchParams.set("_routes",e.filter(Y=>B.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[$.pathname+$.search]},[f,o.unstable_trailingSlashAwareDataRequests,g,s,l,E,e,r,h]),N=M.useMemo(()=>pT(T,l),[T,l]),q=ET(T);return M.createElement(M.Fragment,null,I.map(B=>M.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),N.map(B=>M.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),q.map(({key:B,link:j})=>M.createElement("link",{key:B,nonce:t.nonce,...j})))}function ST(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IT&&(window.__reactRouterVersion="7.12.0")}catch{}function CT({basename:r,children:e,unstable_useTransitions:t,window:s}){let o=M.useRef();o.current==null&&(o.current=i0({window:s,v5Compat:!0}));let l=o.current,[h,f]=M.useState({action:l.action,location:l.location}),g=M.useCallback(y=>{t===!1?f(y):M.startTransition(()=>f(y))},[t]);return M.useLayoutEffect(()=>l.listen(g),[l,g]),M.createElement(eT,{basename:r,children:e,location:h.location,navigationType:h.action,navigator:l,unstable_useTransitions:t})}var dv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ja=M.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:I,...N},q){let{basename:B,unstable_useTransitions:j}=M.useContext(In),$=typeof y=="string"&&dv.test(y),Y=tv(y,B);y=Y.to;let Q=j0(y,{relative:o}),[fe,ie,me]=_T(s,N),x=xT(y,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:I,unstable_useTransitions:j});function C(V){e&&e(V),V.defaultPrevented||x(V)}let A=M.createElement("a",{...N,...me,href:Y.absoluteURL||Q,onClick:Y.isExternal||l?e:C,ref:ST(q,ie),target:g,"data-discover":!$&&t==="render"?"true":void 0});return fe&&!$?M.createElement(M.Fragment,null,A,M.createElement(wT,{page:Q})):A});Ja.displayName="Link";var RT=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:f,children:g,...y},E){let T=ul(h,{relative:y.relative}),I=Oi(),N=M.useContext(Sc),{navigator:q,basename:B}=M.useContext(In),j=N!=null&&VT(T)&&f===!0,$=q.encodeLocation?q.encodeLocation(T).pathname:T.pathname,Y=I.pathname,Q=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),Q=Q?Q.toLowerCase():null,$=$.toLowerCase()),Q&&B&&(Q=jr(Q,B)||Q);const fe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ie=Y===$||!o&&Y.startsWith($)&&Y.charAt(fe)==="/",me=Q!=null&&(Q===$||!o&&Q.startsWith($)&&Q.charAt($.length)==="/"),x={isActive:ie,isPending:me,isTransitioning:j},C=ie?e:void 0,A;typeof s=="function"?A=s(x):A=[s,ie?"active":null,me?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(x):l;return M.createElement(Ja,{...y,"aria-current":C,className:A,ref:E,style:V,to:h,viewTransition:f},typeof g=="function"?g(x):g)});RT.displayName="NavLink";var kT=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=$u,action:f,onSubmit:g,relative:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:I,...N},q)=>{let{unstable_useTransitions:B}=M.useContext(In),j=DT(),$=bT(f,{relative:y}),Y=h.toLowerCase()==="get"?"get":"post",Q=typeof f=="string"&&dv.test(f),fe=ie=>{if(g&&g(ie),ie.defaultPrevented)return;ie.preventDefault();let me=ie.nativeEvent.submitter,x=(me==null?void 0:me.getAttribute("formmethod"))||h,C=()=>j(me||ie.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:I});B&&t!==!1?M.startTransition(()=>C()):C()};return M.createElement("form",{ref:q,method:Y,action:$,onSubmit:s?g:fe,...N,"data-discover":!Q&&r==="render"?"true":void 0})});kT.displayName="Form";function AT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fv(r){let e=M.useContext(Do);return rt(e,AT(r)),e}function xT(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:g}={}){let y=zn(),E=Oi(),T=ul(r,{relative:l});return M.useCallback(I=>{if(oT(I,e)){I.preventDefault();let N=t!==void 0?t:Qa(E)===Qa(T),q=()=>y(r,{replace:N,state:s,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:f});g?M.startTransition(()=>q()):q()}},[E,y,T,t,s,e,r,o,l,h,f,g])}var PT=0,NT=()=>`__${String(++PT)}__`;function DT(){let{router:r}=fv("useSubmit"),{basename:e}=M.useContext(In),t=J0(),s=r.fetch,o=r.navigate;return M.useCallback(async(l,h={})=>{let{action:f,method:g,encType:y,formData:E,body:T}=uT(l,e);if(h.navigate===!1){let I=h.fetcherKey||NT();await s(I,t,h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:T,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await o(h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:T,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[s,o,e,t])}function bT(r,{relative:e}={}){let{basename:t}=M.useContext(In),s=M.useContext(pr);rt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...ul(r||".",{relative:e})},h=Oi();if(r==null){l.search=h.search;let f=new URLSearchParams(l.search),g=f.getAll("index");if(g.some(E=>E==="")){f.delete("index"),g.filter(T=>T).forEach(T=>f.append("index",T));let E=f.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Or([t,l.pathname])),Qa(l)}function VT(r,{relative:e}={}){let t=M.useContext(rv);rt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=fv("useViewTransitionState"),o=ul(r,{relative:e});if(!t.isTransitioning)return!1;let l=jr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=jr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return tc(o.pathname,h)!=null||tc(o.pathname,l)!=null}/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pv=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=M.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...f},g)=>M.createElement("svg",{ref:g,...OT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:pv("lucide",o),...f},[...h.map(([y,E])=>M.createElement(y,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(r,e)=>{const t=M.forwardRef(({className:s,...o},l)=>M.createElement(MT,{ref:l,iconNode:e,className:pv(`lucide-${LT(r)}`,s),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],FT=st("Activity",jT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ms=st("ArrowLeft",UT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],BT=st("ArrowRight",zT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]],HT=st("BatteryLow",$T);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hf=st("Calendar",WT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],KT=st("ChartNoAxesColumn",qT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mv=st("CircleAlert",GT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gv=st("CircleCheckBig",QT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],yv=st("Clock",JT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],XT=st("Coffee",YT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],e1=st("House",ZT);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],n1=st("List",t1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],i1=st("Loader",r1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],vv=st("LogIn",s1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bd=st("Plus",o1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],_v=st("ShieldAlert",a1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],u1=st("Target",l1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],h1=st("TrendingUp",c1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],wv=st("Trophy",d1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],p1=st("Upload",f1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],g1=st("User",m1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],v1=st("X",y1);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ev=st("Zap",_1),w1=()=>{};var Cg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},E1=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,E=l>>2,T=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,N=y&63;g||(N=64,h||(I=64)),s.push(t[E],t[T],t[I],t[N])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Tv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):E1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new T1;const I=l<<2|f>>4;if(s.push(I),y!==64){const N=f<<4&240|y>>2;if(s.push(N),T!==64){const q=y<<6&192|T;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class T1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S1=function(r){const e=Tv(r);return Sv.encodeByteArray(e,!0)},nc=function(r){return S1(r).replace(/\./g,"")},Iv=function(r){try{return Sv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=()=>I1().__FIREBASE_DEFAULTS__,R1=()=>{if(typeof process>"u"||typeof Cg>"u")return;const r=Cg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},k1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Iv(r[1]);return e&&JSON.parse(e)},Cc=()=>{try{return w1()||C1()||R1()||k1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Cv=r=>{var e,t;return(t=(e=Cc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},A1=r=>{const e=Cv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Rv=()=>{var r;return(r=Cc())==null?void 0:r.config},kv=r=>{var e;return(e=Cc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Av(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[nc(JSON.stringify(t)),nc(JSON.stringify(h)),""].join(".")}const Ba={};function N1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ba))Ba[e]?r.emulator.push(e):r.prod.push(e);return r}function D1(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Rg=!1;function xv(r,e){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||Ba[r]===e||Ba[r]||Rg)return;Ba[r]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=N1().prod.length>0;function h(){const I=document.getElementById(s);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,N){I.setAttribute("width","24"),I.setAttribute("id",N),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Rg=!0,h()},I}function E(I,N){I.setAttribute("id",N),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=D1(s),N=t("text"),q=document.getElementById(N)||document.createElement("span"),B=t("learnmore"),j=document.getElementById(B)||document.createElement("a"),$=t("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const Q=I.element;f(Q),E(j,B);const fe=y();g(Y,$),Q.append(Y,q,j,fe),document.body.appendChild(Q)}l?(q.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function V1(){var e;const r=(e=Cc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function M1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const r=Wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function F1(){return!V1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U1(){try{return typeof indexedDB=="object"}catch{return!1}}function z1(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="FirebaseError";class $r extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=B1,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?$1(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new $r(o,f,s)}}function $1(r,e){return r.replace(H1,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const H1=/\{\$([^}]+)}/g;function W1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gs(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(kg(l)&&kg(h)){if(!gs(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function kg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function q1(r,e){const t=new K1(r,e);return t.subscribe.bind(t)}class K1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");G1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=vd),o.error===void 0&&(o.error=vd),o.complete===void 0&&(o.complete=vd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(r){return r&&r._delegate?r._delegate:r}class ys{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new x1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y1(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:J1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J1(r){return r===cs?void 0:r}function Y1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Q1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ne||(Ne={}));const Z1={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},eS=Ne.INFO,tS={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},nS=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=tS[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class df{constructor(e){this.name=e,this._logLevel=eS,this._logHandler=nS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const rS=(r,e)=>e.some(t=>r instanceof t);let Ag,xg;function iS(){return Ag||(Ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sS(){return xg||(xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pv=new WeakMap,Vd=new WeakMap,Nv=new WeakMap,_d=new WeakMap,ff=new WeakMap;function oS(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ci(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Pv.set(t,r)}).catch(()=>{}),ff.set(e,r),e}function aS(r){if(Vd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Vd.set(r,e)}let Ld={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Vd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Nv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function lS(r){Ld=r(Ld)}function uS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(wd(this),e,...t);return Nv.set(s,e.sort?e.sort():[e]),Ci(s)}:sS().includes(r)?function(...e){return r.apply(wd(this),e),Ci(Pv.get(this))}:function(...e){return Ci(r.apply(wd(this),e))}}function cS(r){return typeof r=="function"?uS(r):(r instanceof IDBTransaction&&aS(r),rS(r,iS())?new Proxy(r,Ld):r)}function Ci(r){if(r instanceof IDBRequest)return oS(r);if(_d.has(r))return _d.get(r);const e=cS(r);return e!==r&&(_d.set(r,e),ff.set(e,r)),e}const wd=r=>ff.get(r);function hS(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ci(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ci(h.result),g.oldVersion,g.newVersion,Ci(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const dS=["get","getKey","getAll","getAllKeys","count"],fS=["put","add","delete","clear"],Ed=new Map;function Pg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=fS.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||dS.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Ed.set(e,l),l}lS(r=>({...r,get:(e,t,s)=>Pg(e,t)||r.get(e,t,s),has:(e,t)=>!!Pg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mS(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function mS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Od="@firebase/app",Ng="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new df("@firebase/app"),gS="@firebase/app-compat",yS="@firebase/analytics-compat",vS="@firebase/analytics",_S="@firebase/app-check-compat",wS="@firebase/app-check",ES="@firebase/auth",TS="@firebase/auth-compat",SS="@firebase/database",IS="@firebase/data-connect",CS="@firebase/database-compat",RS="@firebase/functions",kS="@firebase/functions-compat",AS="@firebase/installations",xS="@firebase/installations-compat",PS="@firebase/messaging",NS="@firebase/messaging-compat",DS="@firebase/performance",bS="@firebase/performance-compat",VS="@firebase/remote-config",LS="@firebase/remote-config-compat",OS="@firebase/storage",MS="@firebase/storage-compat",jS="@firebase/firestore",FS="@firebase/ai",US="@firebase/firestore-compat",zS="firebase",BS="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="[DEFAULT]",$S={[Od]:"fire-core",[gS]:"fire-core-compat",[vS]:"fire-analytics",[yS]:"fire-analytics-compat",[wS]:"fire-app-check",[_S]:"fire-app-check-compat",[ES]:"fire-auth",[TS]:"fire-auth-compat",[SS]:"fire-rtdb",[IS]:"fire-data-connect",[CS]:"fire-rtdb-compat",[RS]:"fire-fn",[kS]:"fire-fn-compat",[AS]:"fire-iid",[xS]:"fire-iid-compat",[PS]:"fire-fcm",[NS]:"fire-fcm-compat",[DS]:"fire-perf",[bS]:"fire-perf-compat",[VS]:"fire-rc",[LS]:"fire-rc-compat",[OS]:"fire-gcs",[MS]:"fire-gcs-compat",[jS]:"fire-fst",[US]:"fire-fst-compat",[FS]:"fire-vertex","fire-js":"fire-js",[zS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,HS=new Map,jd=new Map;function Dg(r,e){try{r.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Io(r){const e=r.name;if(jd.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;jd.set(e,r);for(const t of rc.values())Dg(t,r);for(const t of HS.values())Dg(t,r);return!0}function pf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new cl("app","Firebase",WS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=BS;function Dv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Md,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ri.create("bad-app-name",{appName:String(o)});if(t||(t=Rv()),!t)throw Ri.create("no-options");const l=rc.get(o);if(l){if(gs(t,l.options)&&gs(s,l.config))return l;throw Ri.create("duplicate-app",{appName:o})}const h=new X1(o);for(const g of jd.values())h.addComponent(g);const f=new qS(t,s,h);return rc.set(o,f),f}function bv(r=Md){const e=rc.get(r);if(!e&&r===Md&&Rv())return Dv();if(!e)throw Ri.create("no-app",{appName:r});return e}function ki(r,e,t){let s=$S[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(h.join(" "));return}Io(new ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="firebase-heartbeat-database",GS=1,Ya="firebase-heartbeat-store";let Td=null;function Vv(){return Td||(Td=hS(KS,GS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ya)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ri.create("idb-open",{originalErrorMessage:r.message})})),Td}async function QS(r){try{const t=(await Vv()).transaction(Ya),s=await t.objectStore(Ya).get(Lv(r));return await t.done,s}catch(e){if(e instanceof $r)Fr.warn(e.message);else{const t=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(t.message)}}}async function bg(r,e){try{const s=(await Vv()).transaction(Ya,"readwrite");await s.objectStore(Ya).put(e,Lv(r)),await s.done}catch(t){if(t instanceof $r)Fr.warn(t.message);else{const s=Ri.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fr.warn(s.message)}}}function Lv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=1024,YS=30;class XS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Vg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>YS){const h=tI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vg(),{heartbeatsToSend:s,unsentEntries:o}=ZS(this._heartbeatsCache.heartbeats),l=nc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fr.warn(t),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function ZS(r,e=JS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Lg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Lg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class eI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U1()?z1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return bg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return bg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lg(r){return nc(JSON.stringify({version:2,heartbeats:r})).length}function tI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(r){Io(new ys("platform-logger",e=>new pS(e),"PRIVATE")),Io(new ys("heartbeat",e=>new XS(e),"PRIVATE")),ki(Od,Ng,r),ki(Od,Ng,"esm2020"),ki("fire-js","")}nI("");var rI="firebase",iI="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(rI,iI,"app");function Ov(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sI=Ov,Mv=new cl("auth","Firebase",Ov());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new df("@firebase/auth");function oI(r,...e){ic.logLevel<=Ne.WARN&&ic.warn(`Auth (${Vo}): ${r}`,...e)}function Wu(r,...e){ic.logLevel<=Ne.ERROR&&ic.error(`Auth (${Vo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(r,...e){throw gf(r,...e)}function Fn(r,...e){return gf(r,...e)}function mf(r,e,t){const s={...sI(),[e]:t};return new cl("auth","Firebase",s).create(e,{appName:r.name})}function fs(r){return mf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&hr(r,"argument-error"),mf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Mv.create(r,...e)}function Te(r,e,...t){if(!r)throw gf(e,...t)}function Vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Wu(e),new Error(e)}function Ur(r,e){r||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function lI(){return Og()==="http:"||Og()==="https:"}function Og(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lI()||O1()||"connection"in navigator)?navigator.onLine:!0}function cI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=b1()||M1()}get(){return uI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(r,e){Ur(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fI=new dl(3e4,6e4);function vf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Lo(r,e,t,s,o={}){return Fv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=hl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return L1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&bo(r.emulatorConfig.host)&&(y.credentials="include"),jv.fetch()(await Uv(r,r.config.apiHost,t,f),y)})}async function Fv(r,e,t){r._canInitEmulator=!1;const s={...hI,...e};try{const o=new mI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Mu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Mu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Mu(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw mf(r,E,y);hr(r,E)}}catch(o){if(o instanceof $r)throw o;hr(r,"network-request-failed",{message:String(o)})}}async function pI(r,e,t,s,o={}){const l=await Lo(r,e,t,s,o);return"mfaPendingCredential"in l&&hr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Uv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?yf(r.config,o):`${r.config.apiScheme}://${o}`;return dI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class mI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),fI.get())})}}function Mu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(r,e){return Lo(r,"POST","/v1/accounts:delete",e)}async function sc(r,e){return Lo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yI(r,e=!1){const t=Sn(r),s=await t.getIdToken(e),o=_f(s);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:$a(Sd(o.auth_time)),issuedAtTime:$a(Sd(o.iat)),expirationTime:$a(Sd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sd(r){return Number(r)*1e3}function _f(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Iv(t);return o?JSON.parse(o):(Wu("Failed to decode base64 JWT payload"),null)}catch(o){return Wu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Mg(r){const e=_f(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof $r&&vI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function vI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(r){var T;const e=r.auth,t=await r.getIdToken(),s=await Xa(r,sc(e,{idToken:t}));Te(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?zv(o.providerUserInfo):[],h=EI(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ud(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function wI(r){const e=Sn(r);await oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function zv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(r,e){const t=await Fv(r,{},async()=>{const s=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Uv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&bo(r.emulatorConfig.host)&&(g.credentials="include"),jv.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SI(r,e){return Lo(r,"POST","/v2/accounts:revokeToken",vf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Mg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await TI(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new _o;return s&&(Te(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Mn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new _I(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ud(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yI(this,e)}reload(){return wI(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await oc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await Xa(this,gI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:I,isAnonymous:N,providerData:q,stsTokenManager:B}=t;Te(T&&B,e,"internal-error");const j=_o.fromJSON(this.name,B);Te(typeof T=="string",e,"internal-error"),wi(s,e.name),wi(o,e.name),Te(typeof I=="boolean",e,"internal-error"),Te(typeof N=="boolean",e,"internal-error"),wi(l,e.name),wi(h,e.name),wi(f,e.name),wi(g,e.name),wi(y,e.name),wi(E,e.name);const $=new Mn({uid:T,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:N,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:j,createdAt:y,lastLoginAt:E});return q&&Array.isArray(q)&&($.providerData=q.map(Y=>({...Y}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,s=!1){const o=new _o;o.updateFromServerResponse(t);const l=new Mn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await oc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?zv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new _o;f.updateFromIdToken(s);const g=new Mn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ud(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;function Lr(r){Ur(r instanceof Function,"Expected a class definition");let e=jg.get(r);return e?(Ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,jg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bv.type="NONE";const Fg=Bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(r,e,t){return`firebase:${r}:${e}:${t}`}class wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sc(this.auth,{idToken:e}).catch(()=>{});return t?Mn._fromGetAccountInfoResponse(this.auth,t,e):null}return Mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wo(Lr(Fg),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(Fg);const h=qu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){let T;if(typeof E=="string"){const I=await sc(e,{idToken:E}).catch(()=>{});if(!I)break;T=await Mn._fromGetAccountInfoResponse(e,I,E)}else T=Mn._fromJSON(e,E);y!==l&&(f=T),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new wo(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new wo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($v(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gv(e))return"Blackberry";if(Qv(e))return"Webos";if(Hv(e))return"Safari";if((e.includes("chrome/")||Wv(e))&&!e.includes("edge/"))return"Chrome";if(Kv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function $v(r=Wt()){return/firefox\//i.test(r)}function Hv(r=Wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wv(r=Wt()){return/crios\//i.test(r)}function qv(r=Wt()){return/iemobile/i.test(r)}function Kv(r=Wt()){return/android/i.test(r)}function Gv(r=Wt()){return/blackberry/i.test(r)}function Qv(r=Wt()){return/webos/i.test(r)}function wf(r=Wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function II(r=Wt()){var e;return wf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function CI(){return j1()&&document.documentMode===10}function Jv(r=Wt()){return wf(r)||Kv(r)||Qv(r)||Gv(r)||/windows phone/i.test(r)||qv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r,e=[]){let t;switch(r){case"Browser":t=Ug(Wt());break;case"Worker":t=`${Ug(Wt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(r,e={}){return Lo(r,"GET","/v2/passwordPolicy",vf(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=6;class xI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zg(this),this.idTokenSubscription=new zg(this),this.beforeStateQueue=new RI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sc(this,{idToken:e}),s=await Mn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(On(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(fs(this));const t=e?Sn(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kI(this),t=new xI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await SI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&oI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rc(r){return Sn(r)}class zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=q1(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NI(r){Ef=r}function DI(r){return Ef.loadJS(r)}function bI(){return Ef.gapiScript}function VI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r,e){const t=pf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(gs(l,e??{}))return o;hr(o,"already-initialized")}return t.initialize({options:e})}function OI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Lr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function MI(r,e,t){const s=Rc(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Xv(e),{host:h,port:f}=jI(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(gs(y,s.config.emulator)&&gs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,bo(h)?(Av(`${l}//${h}${g}`),xv("Auth",!0)):FI()}function Xv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function jI(r){const e=Xv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Bg(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Bg(h)}}}function Bg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function FI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e){return pI(r,"POST","/v1/accounts:signInWithIdp",vf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="http://localhost";class vs extends Zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new vs(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Eo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:UI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends fl{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return br.credential(t,s)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends fl{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends fl{constructor(){super("twitter.com")}static credential(e,t){return vs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Si.credential(t,s)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Mn._fromIdTokenResponse(e,s,o),h=$g(s);return new Co({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=$g(s);return new Co({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function $g(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends $r{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ac(e,t,s,o)}}function e_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(r,l,e,s):l})}async function zI(r,e,t=!1){const s=await Xa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Co._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(r,e,t=!1){const{auth:s}=r;if(On(s.app))return Promise.reject(fs(s));const o="reauthenticate";try{const l=await Xa(r,e_(s,o,e,r),t);Te(l.idToken,s,"internal-error");const h=_f(l.idToken);Te(h,s,"internal-error");const{sub:f}=h;return Te(r.uid===f,s,"user-mismatch"),Co._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&hr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(r,e,t=!1){if(On(r.app))return Promise.reject(fs(r));const s="signIn",o=await e_(r,s,e),l=await Co._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function HI(r,e,t,s){return Sn(r).onIdTokenChanged(e,t,s)}function WI(r,e,t){return Sn(r).beforeAuthStateChanged(e,t)}function qI(r,e,t,s){return Sn(r).onAuthStateChanged(e,t,s)}function KI(r){return Sn(r).signOut()}const lc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=1e3,QI=10;class n_ extends t_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);CI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,QI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},GI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}n_.type="LOCAL";const JI=n_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends t_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}r_.type="SESSION";const i_=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new kc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await YI(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Sf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function ZI(r){ar().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function eC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function nC(){return s_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="firebaseLocalStorageDb",rC=1,uc="firebaseLocalStorage",a_="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ac(r,e){return r.transaction([uc],e?"readwrite":"readonly").objectStore(uc)}function iC(){const r=indexedDB.deleteDatabase(o_);return new pl(r).toPromise()}function zd(){const r=indexedDB.open(o_,rC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(uc,{keyPath:a_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(uc)?e(s):(s.close(),await iC(),e(await zd()))})})}async function Hg(r,e,t){const s=Ac(r,!0).put({[a_]:e,value:t});return new pl(s).toPromise()}async function sC(r,e){const t=Ac(r,!1).get(e),s=await new pl(t).toPromise();return s===void 0?null:s.value}function Wg(r,e){const t=Ac(r,!0).delete(e);return new pl(t).toPromise()}const oC=800,aC=3;class l_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>aC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(nC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await eC(),!this.activeServiceWorker)return;this.sender=new XI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zd();return await Hg(e,lc,"1"),await Wg(e,lc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>sC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ac(o,!1).getAll();return new pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l_.type="LOCAL";const lC=l_;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(r,e){return e?Lr(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uC(r){return $I(r.auth,new If(r),r.bypassAuthState)}function cC(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),BI(t,new If(r),r.bypassAuthState)}async function hC(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),zI(t,new If(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uC;case"linkViaPopup":case"linkViaRedirect":return hC;case"reauthViaPopup":case"reauthViaRedirect":return cC;default:hr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new dl(2e3,1e4);async function fC(r,e,t){if(On(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const s=Rc(r);aI(r,e,Tf);const o=u_(s,t);return new hs(s,"signInViaPopup",e,o).executeNotNull()}class hs extends c_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dC.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",Ku=new Map;class mC extends c_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const s=await gC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gC(r,e){const t=_C(e),s=vC(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function yC(r,e){Ku.set(r._key(),e)}function vC(r){return Lr(r._redirectPersistence)}function _C(r){return qu(pC,r.config.apiKey,r.name)}async function wC(r,e,t=!1){if(On(r.app))return Promise.reject(fs(r));const s=Rc(r),o=u_(s,e),h=await new mC(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=600*1e3;class TC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!h_(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EC&&this.cachedEventUids.clear(),this.cachedEventUids.has(qg(e))}saveEventToCache(e){this.cachedEventUids.add(qg(e)),this.lastProcessedEventTime=Date.now()}}function qg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function h_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(r,e={}){return Lo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function kC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await IC(r);for(const t of e)try{if(AC(t))return}catch{}hr(r,"unauthorized-domain")}function AC(r){const e=Fd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!RC.test(t))return!1;if(CC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new dl(3e4,6e4);function Kg(){const r=ar().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function PC(r){return new Promise((e,t)=>{var o,l,h;function s(){Kg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kg(),t(Fn(r,"network-request-failed"))},timeout:xC.get()})}if((l=(o=ar().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=ar().gapi)!=null&&h.load)s();else{const f=VI("iframefcb");return ar()[f]=()=>{gapi.load?s():t(Fn(r,"network-request-failed"))},DI(`${bI()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Gu=null,e})}let Gu=null;function NC(r){return Gu=Gu||PC(r),Gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new dl(5e3,15e3),bC="__/auth/iframe",VC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MC(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?yf(e,VC):`https://${r.config.authDomain}/${bC}`,s={apiKey:e.apiKey,appName:r.name,v:Vo},o=OC.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${hl(s).slice(1)}`}async function jC(r){const e=await NC(r),t=ar().gapi;return Te(t,r,"internal-error"),e.open({where:document.body,url:MC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),f=ar().setTimeout(()=>{l(h)},DC.get());function g(){ar().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UC=500,zC=600,BC="_blank",$C="http://localhost";class Gg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HC(r,e,t,s=UC,o=zC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...FC,width:s.toString(),height:o.toString(),top:l,left:h},y=Wt().toLowerCase();t&&(f=Wv(y)?BC:t),$v(y)&&(e=e||$C,g.scrollbars="yes");const E=Object.entries(g).reduce((I,[N,q])=>`${I}${N}=${q},`,"");if(II(y)&&f!=="_self")return WC(e||"",f),new Gg(null);const T=window.open(e||"",f,E);Te(T,r,"popup-blocked");try{T.focus()}catch{}return new Gg(T)}function WC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="__/auth/handler",KC="emulator/auth/handler",GC=encodeURIComponent("fac");async function Qg(r,e,t,s,o,l){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Vo,eventId:o};if(e instanceof Tf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",W1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof fl){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),y=g?`#${GC}=${encodeURIComponent(g)}`:"";return`${QC(r)}?${hl(f).slice(1)}${y}`}function QC({config:r}){return r.emulator?yf(r,KC):`https://${r.authDomain}/${qC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="webStorageSupport";class JC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i_,this._completeRedirectFn=wC,this._overrideRedirectResult=yC}async _openPopup(e,t,s,o){var h;Ur((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Qg(e,t,s,Fd(),o);return HC(e,l,Sf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Qg(e,t,s,Fd(),o);return ZI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await jC(e),s=new TC(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Id,{type:Id},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Id];l!==void 0&&t(!!l),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jv()||Hv()||wf()}}const YC=JC;var Jg="@firebase/auth",Yg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eR(r){Io(new ys("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Te(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yv(r)},y=new PI(s,o,l,g);return OI(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Io(new ys("auth-internal",e=>{const t=Rc(e.getProvider("auth").getImmediate());return(s=>new XC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(Jg,Yg,ZC(r)),ki(Jg,Yg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=300,nR=kv("authIdTokenMaxAge")||tR;let Xg=null;const rR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>nR)return;const o=t==null?void 0:t.token;Xg!==o&&(Xg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function iR(r=bv()){const e=pf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=LI(r,{popupRedirectResolver:YC,persistence:[lC,JI,i_]}),s=kv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=rR(l.toString());WI(t,h,()=>h(t.currentUser)),HI(t,f=>h(f))}}const o=Cv("auth");return o&&MI(t,`http://${o}`),t}function sR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}NI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",sR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eR("Browser");var Zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,d_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,C){function A(){}A.prototype=C.prototype,x.F=C.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(V,D,O){for(var k=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)k[qe-2]=arguments[qe];return C.prototype[D].apply(V,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,A){A||(A=0);const V=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)V[D]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(D=0;D<16;++D)V[D]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=x.g[0],A=x.g[1],D=x.g[2];let O=x.g[3],k;k=C+(O^A&(D^O))+V[0]+3614090360&4294967295,C=A+(k<<7&4294967295|k>>>25),k=O+(D^C&(A^D))+V[1]+3905402710&4294967295,O=C+(k<<12&4294967295|k>>>20),k=D+(A^O&(C^A))+V[2]+606105819&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(C^D&(O^C))+V[3]+3250441966&4294967295,A=D+(k<<22&4294967295|k>>>10),k=C+(O^A&(D^O))+V[4]+4118548399&4294967295,C=A+(k<<7&4294967295|k>>>25),k=O+(D^C&(A^D))+V[5]+1200080426&4294967295,O=C+(k<<12&4294967295|k>>>20),k=D+(A^O&(C^A))+V[6]+2821735955&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(C^D&(O^C))+V[7]+4249261313&4294967295,A=D+(k<<22&4294967295|k>>>10),k=C+(O^A&(D^O))+V[8]+1770035416&4294967295,C=A+(k<<7&4294967295|k>>>25),k=O+(D^C&(A^D))+V[9]+2336552879&4294967295,O=C+(k<<12&4294967295|k>>>20),k=D+(A^O&(C^A))+V[10]+4294925233&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(C^D&(O^C))+V[11]+2304563134&4294967295,A=D+(k<<22&4294967295|k>>>10),k=C+(O^A&(D^O))+V[12]+1804603682&4294967295,C=A+(k<<7&4294967295|k>>>25),k=O+(D^C&(A^D))+V[13]+4254626195&4294967295,O=C+(k<<12&4294967295|k>>>20),k=D+(A^O&(C^A))+V[14]+2792965006&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(C^D&(O^C))+V[15]+1236535329&4294967295,A=D+(k<<22&4294967295|k>>>10),k=C+(D^O&(A^D))+V[1]+4129170786&4294967295,C=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(C^A))+V[6]+3225465664&4294967295,O=C+(k<<9&4294967295|k>>>23),k=D+(C^A&(O^C))+V[11]+643717713&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^C&(D^O))+V[0]+3921069994&4294967295,A=D+(k<<20&4294967295|k>>>12),k=C+(D^O&(A^D))+V[5]+3593408605&4294967295,C=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(C^A))+V[10]+38016083&4294967295,O=C+(k<<9&4294967295|k>>>23),k=D+(C^A&(O^C))+V[15]+3634488961&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^C&(D^O))+V[4]+3889429448&4294967295,A=D+(k<<20&4294967295|k>>>12),k=C+(D^O&(A^D))+V[9]+568446438&4294967295,C=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(C^A))+V[14]+3275163606&4294967295,O=C+(k<<9&4294967295|k>>>23),k=D+(C^A&(O^C))+V[3]+4107603335&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^C&(D^O))+V[8]+1163531501&4294967295,A=D+(k<<20&4294967295|k>>>12),k=C+(D^O&(A^D))+V[13]+2850285829&4294967295,C=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(C^A))+V[2]+4243563512&4294967295,O=C+(k<<9&4294967295|k>>>23),k=D+(C^A&(O^C))+V[7]+1735328473&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^C&(D^O))+V[12]+2368359562&4294967295,A=D+(k<<20&4294967295|k>>>12),k=C+(A^D^O)+V[5]+4294588738&4294967295,C=A+(k<<4&4294967295|k>>>28),k=O+(C^A^D)+V[8]+2272392833&4294967295,O=C+(k<<11&4294967295|k>>>21),k=D+(O^C^A)+V[11]+1839030562&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^C)+V[14]+4259657740&4294967295,A=D+(k<<23&4294967295|k>>>9),k=C+(A^D^O)+V[1]+2763975236&4294967295,C=A+(k<<4&4294967295|k>>>28),k=O+(C^A^D)+V[4]+1272893353&4294967295,O=C+(k<<11&4294967295|k>>>21),k=D+(O^C^A)+V[7]+4139469664&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^C)+V[10]+3200236656&4294967295,A=D+(k<<23&4294967295|k>>>9),k=C+(A^D^O)+V[13]+681279174&4294967295,C=A+(k<<4&4294967295|k>>>28),k=O+(C^A^D)+V[0]+3936430074&4294967295,O=C+(k<<11&4294967295|k>>>21),k=D+(O^C^A)+V[3]+3572445317&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^C)+V[6]+76029189&4294967295,A=D+(k<<23&4294967295|k>>>9),k=C+(A^D^O)+V[9]+3654602809&4294967295,C=A+(k<<4&4294967295|k>>>28),k=O+(C^A^D)+V[12]+3873151461&4294967295,O=C+(k<<11&4294967295|k>>>21),k=D+(O^C^A)+V[15]+530742520&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^C)+V[2]+3299628645&4294967295,A=D+(k<<23&4294967295|k>>>9),k=C+(D^(A|~O))+V[0]+4096336452&4294967295,C=A+(k<<6&4294967295|k>>>26),k=O+(A^(C|~D))+V[7]+1126891415&4294967295,O=C+(k<<10&4294967295|k>>>22),k=D+(C^(O|~A))+V[14]+2878612391&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~C))+V[5]+4237533241&4294967295,A=D+(k<<21&4294967295|k>>>11),k=C+(D^(A|~O))+V[12]+1700485571&4294967295,C=A+(k<<6&4294967295|k>>>26),k=O+(A^(C|~D))+V[3]+2399980690&4294967295,O=C+(k<<10&4294967295|k>>>22),k=D+(C^(O|~A))+V[10]+4293915773&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~C))+V[1]+2240044497&4294967295,A=D+(k<<21&4294967295|k>>>11),k=C+(D^(A|~O))+V[8]+1873313359&4294967295,C=A+(k<<6&4294967295|k>>>26),k=O+(A^(C|~D))+V[15]+4264355552&4294967295,O=C+(k<<10&4294967295|k>>>22),k=D+(C^(O|~A))+V[6]+2734768916&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~C))+V[13]+1309151649&4294967295,A=D+(k<<21&4294967295|k>>>11),k=C+(D^(A|~O))+V[4]+4149444226&4294967295,C=A+(k<<6&4294967295|k>>>26),k=O+(A^(C|~D))+V[11]+3174756917&4294967295,O=C+(k<<10&4294967295|k>>>22),k=D+(C^(O|~A))+V[2]+718787259&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~C))+V[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+O&4294967295}s.prototype.v=function(x,C){C===void 0&&(C=x.length);const A=C-this.blockSize,V=this.C;let D=this.h,O=0;for(;O<C;){if(D==0)for(;O<=A;)o(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<C;)if(V[D++]=x.charCodeAt(O++),D==this.blockSize){o(this,V),D=0;break}}else for(;O<C;)if(V[D++]=x[O++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=C},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;C=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=C&255,C/=256;for(this.v(x),x=Array(16),C=0,A=0;A<4;++A)for(let V=0;V<32;V+=8)x[C++]=this.g[A]>>>V&255;return x};function l(x,C){var A=f;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=C(x)}function h(x,C){this.h=C;const A=[];let V=!0;for(let D=x.length-1;D>=0;D--){const O=x[D]|0;V&&O==C||(A[D]=O,V=!1)}this.g=A}var f={};function g(x){return-128<=x&&x<128?l(x,function(C){return new h([C|0],C<0?-1:0)}):new h([x|0],x<0?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return j(y(-x));const C=[];let A=1;for(let V=0;x>=A;V++)C[V]=x/A|0,A*=4294967296;return new h(C,0)}function E(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return j(E(x.substring(1),C));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(C,8));let V=T;for(let O=0;O<x.length;O+=8){var D=Math.min(8,x.length-O);const k=parseInt(x.substring(O,O+D),C);D<8?(D=y(Math.pow(C,D)),V=V.j(D).add(y(k))):(V=V.j(A),V=V.add(y(k)))}return V}var T=g(0),I=g(1),N=g(16777216);r=h.prototype,r.m=function(){if(B(this))return-j(this).m();let x=0,C=1;for(let A=0;A<this.g.length;A++){const V=this.i(A);x+=(V>=0?V:4294967296+V)*C,C*=4294967296}return x},r.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(q(this))return"0";if(B(this))return"-"+j(this).toString(x);const C=y(Math.pow(x,6));var A=this;let V="";for(;;){const D=fe(A,C).g;A=$(A,D.j(C));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=D,q(A))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},r.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function q(x){if(x.h!=0)return!1;for(let C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function B(x){return x.h==-1}r.l=function(x){return x=$(this,x),B(x)?-1:q(x)?0:1};function j(x){const C=x.g.length,A=[];for(let V=0;V<C;V++)A[V]=~x.g[V];return new h(A,~x.h).add(I)}r.abs=function(){return B(this)?j(this):this},r.add=function(x){const C=Math.max(this.g.length,x.g.length),A=[];let V=0;for(let D=0;D<=C;D++){let O=V+(this.i(D)&65535)+(x.i(D)&65535),k=(O>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);V=k>>>16,O&=65535,k&=65535,A[D]=k<<16|O}return new h(A,A[A.length-1]&-2147483648?-1:0)};function $(x,C){return x.add(j(C))}r.j=function(x){if(q(this)||q(x))return T;if(B(this))return B(x)?j(this).j(j(x)):j(j(this).j(x));if(B(x))return j(this.j(j(x)));if(this.l(N)<0&&x.l(N)<0)return y(this.m()*x.m());const C=this.g.length+x.g.length,A=[];for(var V=0;V<2*C;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<x.g.length;D++){const O=this.i(V)>>>16,k=this.i(V)&65535,qe=x.i(D)>>>16,Et=x.i(D)&65535;A[2*V+2*D]+=k*Et,Y(A,2*V+2*D),A[2*V+2*D+1]+=O*Et,Y(A,2*V+2*D+1),A[2*V+2*D+1]+=k*qe,Y(A,2*V+2*D+1),A[2*V+2*D+2]+=O*qe,Y(A,2*V+2*D+2)}for(x=0;x<C;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=C;x<2*C;x++)A[x]=0;return new h(A,0)};function Y(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function Q(x,C){this.g=x,this.h=C}function fe(x,C){if(q(C))throw Error("division by zero");if(q(x))return new Q(T,T);if(B(x))return C=fe(j(x),C),new Q(j(C.g),j(C.h));if(B(C))return C=fe(x,j(C)),new Q(j(C.g),C.h);if(x.g.length>30){if(B(x)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var A=I,V=C;V.l(x)<=0;)A=ie(A),V=ie(V);var D=me(A,1),O=me(V,1);for(V=me(V,2),A=me(A,2);!q(V);){var k=O.add(V);k.l(x)<=0&&(D=D.add(A),O=k),V=me(V,1),A=me(A,1)}return C=$(x,D.j(C)),new Q(D,C)}for(D=T;x.l(C)>=0;){for(A=Math.max(1,Math.floor(x.m()/C.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=y(A),k=O.j(C);B(k)||k.l(x)>0;)A-=V,O=y(A),k=O.j(C);q(O)&&(O=I),D=D.add(O),x=$(x,k)}return new Q(D,x)}r.B=function(x){return fe(this,x).h},r.and=function(x){const C=Math.max(this.g.length,x.g.length),A=[];for(let V=0;V<C;V++)A[V]=this.i(V)&x.i(V);return new h(A,this.h&x.h)},r.or=function(x){const C=Math.max(this.g.length,x.g.length),A=[];for(let V=0;V<C;V++)A[V]=this.i(V)|x.i(V);return new h(A,this.h|x.h)},r.xor=function(x){const C=Math.max(this.g.length,x.g.length),A=[];for(let V=0;V<C;V++)A[V]=this.i(V)^x.i(V);return new h(A,this.h^x.h)};function ie(x){const C=x.g.length+1,A=[];for(let V=0;V<C;V++)A[V]=x.i(V)<<1|x.i(V-1)>>>31;return new h(A,x.h)}function me(x,C){const A=C>>5;C%=32;const V=x.g.length-A,D=[];for(let O=0;O<V;O++)D[O]=C>0?x.i(O+A)>>>C|x.i(O+A+1)<<32-C:x.i(O+A);return new h(D,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,d_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Ai=h}).apply(typeof Zg<"u"?Zg:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f_,ja,p_,Qu,Bd,m_,g_,y_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var v=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var U=u[S];if(!(U in v))break e;v=v[U]}u=u[u.length-1],S=v[u],m=m(S),m!=S&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=g,y.apply(null,arguments)}function E(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,U,W){for(var ne=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ne[Ie-2]=arguments[Ie];return m.prototype[U].apply(S,ne)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function N(u){const m=u.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=u[S];return v}return[]}function q(u,m){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=u.length||0;const W=U.length||0;u.length=v+W;for(let ne=0;ne<W;ne++)u[v+ne]=U[ne]}else u.push(U)}}class B{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function j(u){h.setTimeout(()=>{throw u},0)}function $(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Y{constructor(){this.h=this.g=null}add(m,v){const S=Q.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Q=new B(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,me=!1,x=new Y,C=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(A)}};function A(){for(var u;u=$();){try{u.h.call(u.g)}catch(v){j(v)}var m=Q;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}me=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function qe(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}T(qe,D),qe.prototype.init=function(u,m){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Et="closure_listenable_"+(Math.random()*1e6|0),Lt=0;function Xe(u,m,v,S,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=U,this.key=++Lt,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u,m,v){for(const S in u)m.call(v,u[S],S,u)}function ae(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function L(u){const m={};for(const v in u)m[v]=u[v];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(u,m){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)u[v]=S[v];for(let W=0;W<G.length;W++)v=G[W],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,m,v,S,U){const W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);const ne=Pe(u,m,S,U);return ne>-1?(m=u[ne],v||(m.fa=!1)):(m=new Xe(m,this.src,W,!!S,U),m.fa=v,u.push(m)),m};function xe(u,m){const v=m.type;if(v in u.g){var S=u.g[v],U=Array.prototype.indexOf.call(S,m,void 0),W;(W=U>=0)&&Array.prototype.splice.call(S,U,1),W&&(re(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Pe(u,m,v,S){for(let U=0;U<u.length;++U){const W=u[U];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==S)return U}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Oe={};function He(u,m,v,S,U){if(Array.isArray(m)){for(let W=0;W<m.length;W++)He(u,m[W],v,S,U);return null}return v=zo(v),u&&u[Et]?u.J(m,v,f(S)?!!S.capture:!1,U):qt(u,m,v,!1,S,U)}function qt(u,m,v,S,U,W){if(!m)throw Error("Invalid event type");const ne=f(U)?!!U.capture:!!U;let Ie=As(u);if(Ie||(u[Ue]=Ie=new ke(u)),v=Ie.add(m,v,S,ne,W),v.proxy)return v;if(S=Rs(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)O||(U=ne),U===void 0&&(U=!1),u.addEventListener(m.toString(),S,U);else if(u.attachEvent)u.attachEvent(ks(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Rs(){function u(v){return m.call(u.src,u.listener,v)}const m=wl;return u}function Uo(u,m,v,S,U){if(Array.isArray(m))for(var W=0;W<m.length;W++)Uo(u,m[W],v,S,U);else S=f(S)?!!S.capture:!!S,v=zo(v),u&&u[Et]?(u=u.i,W=String(m).toString(),W in u.g&&(m=u.g[W],v=Pe(m,v,S,U),v>-1&&(re(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[W],u.h--)))):u&&(u=As(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Pe(m,v,S,U)),(v=u>-1?m[u]:null)&&Hr(v))}function Hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Et])xe(m.i,u);else{var v=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(v,S,u.capture):m.detachEvent?m.detachEvent(ks(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=As(m))?(xe(v,u),v.h==0&&(v.src=null,m[Ue]=null)):re(u)}}}function ks(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function wl(u,m){if(u.da)u=!0;else{m=new qe(m,this);const v=u.listener,S=u.ha||u.src;u.fa&&Hr(u),u=v.call(S,m)}return u}function As(u){return u=u[Ue],u instanceof ke?u:null}var Mi="__closure_events_fn_"+(Math.random()*1e9>>>0);function zo(u){return typeof u=="function"?u:(u[Mi]||(u[Mi]=function(m){return u.handleEvent(m)}),u[Mi])}function dt(){V.call(this),this.i=new ke(this),this.M=this,this.G=null}T(dt,V),dt.prototype[Et]=!0,dt.prototype.removeEventListener=function(u,m,v,S){Uo(this,u,m,v,S)};function lt(u,m){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var U=m;m=new D(S,u),Re(m,U)}U=!0;let W,ne;if(v)for(ne=v.length-1;ne>=0;ne--)W=m.g=v[ne],U=Cn(W,S,!0,m)&&U;if(W=m.g=u,U=Cn(W,S,!0,m)&&U,U=Cn(W,S,!1,m)&&U,v)for(ne=0;ne<v.length;ne++)W=m.g=v[ne],U=Cn(W,S,!1,m)&&U}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let S=0;S<v.length;S++)re(v[S]);delete u.g[m],u.h--}}this.G=null},dt.prototype.J=function(u,m,v,S){return this.i.add(String(u),m,!1,v,S)},dt.prototype.K=function(u,m,v,S){return this.i.add(String(u),m,!0,v,S)};function Cn(u,m,v,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let W=0;W<m.length;++W){const ne=m[W];if(ne&&!ne.da&&ne.capture==v){const Ie=ne.listener,ut=ne.ha||ne.src;ne.fa&&xe(u.i,ne),U=Ie.call(ut,S)!==!1&&U}}return U&&!S.defaultPrevented}function Bo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function $o(u){u.g=Bo(()=>{u.g=null,u.i&&(u.i=!1,$o(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class El extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){V.call(this),this.h=u,this.g={}}T(Wr,V);var Ho=[];function xs(u){pe(u.g,function(m,v){this.g.hasOwnProperty(v)&&Hr(m)},u),u.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),xs(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=h.JSON.stringify,Tl=h.JSON.parse,ji=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Kr(){}function Sl(){}var Gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ps(){D.call(this,"d")}T(Ps,D);function Wo(){D.call(this,"c")}T(Wo,D);var Rn={},Ns=null;function Qr(){return Ns=Ns||new dt}Rn.Ia="serverreachability";function Ds(u){D.call(this,Rn.Ia,u)}T(Ds,D);function mr(u){const m=Qr();lt(m,new Ds(m))}Rn.STAT_EVENT="statevent";function gr(u,m){D.call(this,Rn.STAT_EVENT,u),this.stat=m}T(gr,D);function ot(u){const m=Qr();lt(m,new gr(m,u))}Rn.Ja="timingevent";function qo(u,m){D.call(this,Rn.Ja,u),this.size=m}T(qo,D);function Jr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Yr(){this.g=!0}Yr.prototype.ua=function(){this.g=!1};function Il(u,m,v,S,U,W){u.info(function(){if(u.g)if(W){var ne="",Ie=W.split("&");for(let Be=0;Be<Ie.length;Be++){var ut=Ie[Be].split("=");if(ut.length>1){const ft=ut[0];ut=ut[1];const ln=ft.split("_");ne=ln.length>=2&&ln[1]=="type"?ne+(ft+"="+ut+"&"):ne+(ft+"=redacted&")}}}else ne=null;else ne=W;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+m+`
`+v+`
`+ne})}function Cl(u,m,v,S,U,W,ne){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+m+`
`+v+`
`+W+" "+ne})}function Bn(u,m,v,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Fi(u,v)+(S?" "+S:"")})}function Rl(u,m){u.info(function(){return"TIMEOUT: "+m})}Yr.prototype.info=function(){};function Fi(u,m){if(!u.g)return m;if(!m)return null;try{const W=JSON.parse(m);if(W){for(u=0;u<W.length;u++)if(Array.isArray(W[u])){var v=W[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ne=1;ne<S.length;ne++)S[ne]=""}}}}return qr(W)}catch{return m}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kl;function yr(){}T(yr,Kr),yr.prototype.g=function(){return new XMLHttpRequest},kl=new yr;function $n(u){return encodeURIComponent(String(u))}function bs(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function dn(u,m,v,S){this.j=u,this.i=m,this.l=v,this.S=S||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Al}function Al(){this.i=null,this.g="",this.h=!1}var xl={},Ko={};function kn(u,m,v){u.M=1,u.A=_r(fn(m)),u.u=v,u.R=!0,Go(u,null)}function Go(u,m){u.F=Date.now(),Ui(u),u.B=fn(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),ia(v.i,"t",S),u.C=0,v=u.j.L,u.h=new Al,u.g=Fl(u.j,v?m:null,!u.u),u.P>0&&(u.O=new El(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,S=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Ho[0]=U.toString()),U=Ho);for(let W=0;W<U.length;W++){const ne=He(v,U[W],S||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),mr(),Il(u.i,u.v,u.B,u.l,u.S,u.u)}dn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Jn(u)==3?m.j():this.Y(u)},dn.prototype.Y=function(u){try{if(u==this.g)e:{const Ie=Jn(this.g),ut=this.g.ya(),Be=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Ml(this.g)))){this.K||Ie!=4||ut==7||(ut==8||Be<=0?mr(3):mr(2)),Vs(this);var m=this.g.ca();this.X=m;var v=Pl(this);if(this.o=m==200,Cl(this.i,this.v,this.B,this.l,this.S,Ie,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(S)){var W=S;break t}}W=null}if(u=W)Bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ge(this,u);else{this.o=!1,this.m=3,ot(12),vr(this),zi(this);break e}}if(this.R){u=!0;let ft;for(;!this.K&&this.C<v.length;)if(ft=Dl(this,v),ft==Ko){Ie==4&&(this.m=4,ot(14),u=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==xl){this.m=4,ot(15),Bn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Bn(this.i,this.l,ft,null),Ge(this,ft);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||v.length!=0||this.h.h||(this.m=1,ot(16),u=!1),this.o=this.o&&u,!u)Bn(this.i,this.l,v,"[Invalid Chunked Response]"),vr(this),zi(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ji(ne),ne.P=!0,ot(11))}}else Bn(this.i,this.l,v,null),Ge(this,v);Ie==4&&vr(this),this.o&&!this.K&&(Ie==4?Hs(this.j,this):(this.o=!1,Ui(this)))}else oa(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),vr(this),zi(this)}}}catch{}finally{}};function Pl(u){if(!Nl(u))return u.g.la();const m=Ml(u.g);if(m==="")return"";let v="";const S=m.length,U=Jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vr(u),zi(u),"";u.h.i=new h.TextDecoder}for(let W=0;W<S;W++)u.h.h=!0,v+=u.h.i.decode(m[W],{stream:!(U&&W==S-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function Nl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Dl(u,m){var v=u.C,S=m.indexOf(`
`,v);return S==-1?Ko:(v=Number(m.substring(v,S)),isNaN(v)?xl:(S+=1,S+v>m.length?Ko:(m=m.slice(S,S+v),u.C=S+v,m)))}dn.prototype.cancel=function(){this.K=!0,vr(this)};function Ui(u){u.T=Date.now()+u.H,Qo(u,u.H)}function Qo(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Jr(y(u.aa,u),m)}function Vs(u){u.D&&(h.clearTimeout(u.D),u.D=null)}dn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Rl(this.i,this.B),this.M!=2&&(mr(),ot(17)),vr(this),this.m=2,zi(this)):Qo(this,this.T-u)};function zi(u){u.j.I==0||u.K||Hs(u.j,u)}function vr(u){Vs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,xs(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ge(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||Yo(v.h,u))){if(!u.L&&Yo(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)$s(v),on(v);else break e;Zn(v),ot(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Jr(y(v.Va,v),6e3));Bi(v.h)<=1&&v.ta&&(v.ta=void 0)}else an(v,11)}else if((u.L||v.g==u)&&$s(v),!k(m))for(U=v.Ba.g.parse(m),m=0;m<U.length;m++){let Be=U[m];const ft=Be[0];if(!(ft<=v.K))if(v.K=ft,Be=Be[1],v.I==2)if(Be[0]=="c"){v.M=Be[1],v.ba=Be[2];const ln=Be[3];ln!=null&&(v.ka=ln,v.j.info("VER="+v.ka));const Ir=Be[4];Ir!=null&&(v.za=Ir,v.j.info("SVER="+v.za));const er=Be[5];er!=null&&typeof er=="number"&&er>0&&(S=1.5*er,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const tr=u.g;if(tr){const Ks=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var W=S.h;W.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Os(W,W.h),W.h=null))}if(S.G){const ua=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;ua&&(S.wa=ua,Fe(S.J,S.G,ua))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ne=u;if(S.na=la(S,S.L?S.ba:null,S.W),ne.L){$i(S.h,ne);var Ie=ne,ut=S.O;ut&&(Ie.H=ut),Ie.D&&(Vs(Ie),Ui(Ie)),S.g=ne}else Ot(S);v.i.length>0&&Sr(v)}else Be[0]!="stop"&&Be[0]!="close"||an(v,7);else v.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?an(v,7):zs(v):Be[0]!="noop"&&v.l&&v.l.qa(Be),v.A=0)}}mr(4)}catch{}}var zc=class{constructor(u,m){this.g=u,this.map=m}};function Ls(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bi(u){return u.h?1:u.g?u.g.size:0}function Yo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Os(u,m){u.g?u.g.add(m):u.h=m}function $i(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ls.prototype.cancel=function(){if(this.i=nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return N(u.i)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rn(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let U,W=null;S>=0?(U=u[v].substring(0,S),W=u[v].substring(S+1)):U=u[v],m(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Hn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Hn?(this.l=u.l,Hi(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,ei(this,sa(u.i)),this.m=u.m):u&&(m=String(u).match(bl))?(this.l=!1,Hi(this,m[1]||"",!0),this.o=Wi(m[2]||""),this.g=Wi(m[3]||"",!0),Wn(this,m[4]),this.h=Wi(m[5]||"",!0),ei(this,m[6]||"",!0),this.m=Wi(m[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}Hn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(qi(m,Zo,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(qi(m,Zo,!0),"@"),u.push($n(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(qi(v,v.charAt(0)=="/"?Ki:ea,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",qi(v,ta)),u.join("")},Hn.prototype.resolve=function(u){const m=fn(this);let v=!!u.j;v?Hi(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var S=u.h;if(v)Wn(m,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=m.h.lastIndexOf("/");U!=-1&&(S=m.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let ne=0;ne<U.length;){const Ie=U[ne++];Ie=="."?S&&ne==U.length&&W.push(""):Ie==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),S&&ne==U.length&&W.push("")):(W.push(Ie),S=!0)}S=W.join("/")}else S=U}return v?m.h=S:v=u.i.toString()!=="",v?ei(m,sa(u.i)):v=!!u.m,v&&(m.m=u.m),m};function fn(u){return new Hn(u)}function Hi(u,m,v){u.j=v?Wi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ei(u,m,v){m instanceof Ve?(u.i=m,js(u.i,u.l)):(v||(m=qi(m,Bc)),u.i=new Ve(m,u.l))}function Fe(u,m,v){u.i.set(m,v)}function _r(u){return Fe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Wi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qi(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Xo),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zo=/[#\/\?@]/g,ea=/[#\?:]/g,Ki=/[#\?]/g,Bc=/[#\?@]/g,ta=/#/g;function Ve(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function qn(u){u.g||(u.g=new Map,u.h=0,u.i&&rn(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Ve.prototype,r.add=function(u,m){qn(this),this.i=null,u=Kn(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function na(u,m){qn(u),m=Kn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ms(u,m){return qn(u),m=Kn(u,m),u.g.has(m)}r.forEach=function(u,m){qn(this),this.g.forEach(function(v,S){v.forEach(function(U){u.call(m,U,S,this)},this)},this)};function ra(u,m){qn(u);let v=[];if(typeof m=="string")Ms(u,m)&&(v=v.concat(u.g.get(Kn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}r.set=function(u,m){return qn(this),this.i=null,u=Kn(this,u),Ms(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=ra(this,u),u.length>0?String(u[0]):m):m};function ia(u,m,v){na(u,m),v.length>0&&(u.i=null,u.g.set(Kn(u,m),N(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const U=$n(v);v=ra(this,v);for(let W=0;W<v.length;W++){let ne=U;v[W]!==""&&(ne+="="+$n(v[W])),u.push(ne)}}return this.i=u.join("&")};function sa(u){const m=new Ve;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Kn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function js(u,m){m&&!u.j&&(qn(u),u.i=null,u.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(na(this,S),ia(this,U,v))},u)),u.j=m}function Gn(u,m){const v=new Yr;if(h.Image){const S=new Image;S.onload=E(kt,v,"TestLoadImage: loaded",!0,m,S),S.onerror=E(kt,v,"TestLoadImage: error",!1,m,S),S.onabort=E(kt,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=E(kt,v,"TestLoadImage: timeout",!1,m,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Qn(u,m){const v=new Yr,S=new AbortController,U=setTimeout(()=>{S.abort(),kt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(W=>{clearTimeout(U),W.ok?kt(v,"TestPingServer: ok",!0,m):kt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),kt(v,"TestPingServer: error",!1,m)})}function kt(u,m,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Gi(){this.g=new ji}function wr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(wr,Kr),wr.prototype.g=function(){return new sn(this.i,this.h)};function sn(u,m){dt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(sn,dt),r=sn.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,An(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ti(this):An(this),this.readyState==3&&Vl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ti(this))},r.Na=function(u){this.g&&(this.response=u,ti(this))},r.ga=function(){this.g&&ti(this)};function ti(u){u.readyState=4,u.l=null,u.j=null,u.B=null,An(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function An(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ll(u){let m="";return pe(u,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function Fs(u,m,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ll(v),typeof u=="string"?v!=null&&$n(v):Fe(u,m,v))}function We(u){dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(We,dt);var Ol=/^https?$/i,$c=["POST","PUT"];r=We.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kl.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){ni(this,W);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call($c,m,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of v)this.g.setRequestHeader(W,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(W){ni(this,W)}};function ni(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ri(u),Tr(u)}function ri(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),Tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),We.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Er(this):this.Xa())},r.Xa=function(){Er(this)};function Er(u){if(u.h&&typeof l<"u"){if(u.v&&Jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const W=u.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var S;if(S=W===0){let ne=String(u.D).match(bl)[1]||null;!ne&&h.self&&h.self.location&&(ne=h.self.location.protocol.slice(0,-1)),S=!Ol.test(ne?ne.toLowerCase():"")}v=S}if(v)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var U=Jn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ri(u)}}finally{Tr(u)}}}}function Tr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||lt(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Tl(m)}};function Ml(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(u){const m={};u=(u.g&&Jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(k(u[S]))continue;var v=bs(u[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[U]||[];m[U]=W,W.push(v)}ae(m,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Us(u){this.za=0,this.i=[],this.j=new Yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yn("baseRetryDelayMs",5e3,u),this.Za=Yn("retryDelaySeedMs",1e4,u),this.Ta=Yn("forwardChannelMaxRetries",2,u),this.va=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ls(u&&u.concurrentRequestLimit),this.Ba=new Gi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Us.prototype,r.ka=8,r.I=1,r.connect=function(u,m,v,S){ot(0),this.W=u,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=la(this,null,this.W),Sr(this)};function zs(u){if(Bs(u),u.I==3){var m=u.V++,v=fn(u.J);if(Fe(v,"SID",u.M),Fe(v,"RID",m),Fe(v,"TYPE","terminate"),Xn(u,v),m=new dn(u,u.j,m),m.M=2,m.A=_r(fn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.A,v=!0),v||(m.g=Fl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ui(m)}Yi(u)}function on(u){u.g&&(Ji(u),u.g.cancel(),u.g=null)}function Bs(u){on(u),u.v&&(h.clearTimeout(u.v),u.v=null),$s(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Sr(u){if(!Jo(u.h)&&!u.m){u.m=!0;var m=u.Ea;ie||C(),me||(ie(),me=!0),x.add(m,u),u.D=0}}function jl(u,m){return Bi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Jr(y(u.Ea,u,m),Ws(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new dn(this,this.j,u);let W=this.o;if(this.U&&(W?(W=L(W),Re(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=aa(this,U,m),v=fn(this.J),Fe(v,"RID",u),Fe(v,"CVER",22),this.G&&Fe(v,"X-HTTP-Session-Id",this.G),Xn(this,v),W&&(this.R?m="headers="+$n(Ll(W))+"&"+m:this.u&&Fs(v,this.u,W)),Os(this.h,U),this.Ra&&Fe(v,"TYPE","init"),this.S?(Fe(v,"$req",m),Fe(v,"SID","null"),U.U=!0,kn(U,v,null)):kn(U,v,m),this.I=2}}else this.I==3&&(u?Qi(this,u):this.i.length==0||Jo(this.h)||Qi(this))};function Qi(u,m){var v;m?v=m.l:v=u.V++;const S=fn(u.J);Fe(S,"SID",u.M),Fe(S,"RID",v),Fe(S,"AID",u.K),Xn(u,S),u.u&&u.o&&Fs(S,u.u,u.o),v=new dn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=aa(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Os(u.h,v),kn(v,S,m)}function Xn(u,m){u.H&&pe(u.H,function(v,S){Fe(m,S,v)}),u.l&&pe({},function(v,S){Fe(m,S,v)})}function aa(u,m,v){v=Math.min(u.i.length,v);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let Ie=-1;for(;;){const ut=["count="+v];Ie==-1?v>0?(Ie=U[0].g,ut.push("ofs="+Ie)):Ie=0:ut.push("ofs="+Ie);let Be=!0;for(let ft=0;ft<v;ft++){var W=U[ft].g;const ln=U[ft].map;if(W-=Ie,W<0)Ie=Math.max(0,U[ft].g-100),Be=!1;else try{W="req"+W+"_"||"";try{var ne=ln instanceof Map?ln:Object.entries(ln);for(const[Ir,er]of ne){let tr=er;f(er)&&(tr=qr(er)),ut.push(W+Ir+"="+encodeURIComponent(tr))}}catch(Ir){throw ut.push(W+"type="+encodeURIComponent("_badmap")),Ir}}catch{S&&S(ln)}}if(Be){ne=ut.join("&");break e}}ne=void 0}return u=u.i.splice(0,v),m.G=u,ne}function Ot(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ie||C(),me||(ie(),me=!0),x.add(m,u),u.A=0}}function Zn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Jr(y(u.Da,u),Ws(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Jr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),on(this),ii(this))};function Ji(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ii(u){u.g=new dn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=fn(u.na);Fe(m,"RID","rpc"),Fe(m,"SID",u.M),Fe(m,"AID",u.K),Fe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Fe(m,"TO",u.ia),Fe(m,"TYPE","xmlhttp"),Xn(u,m),u.u&&u.o&&Fs(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=_r(fn(m)),v.u=null,v.R=!0,Go(v,u)}r.Va=function(){this.C!=null&&(this.C=null,on(this),Zn(this),ot(19))};function $s(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Hs(u,m){var v=null;if(u.g==m){$s(u),Ji(u),u.g=null;var S=2}else if(Yo(u.h,m))v=m.G,$i(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;S=Qr(),lt(S,new qo(S,v)),Sr(u)}else Ot(u);else if(U=m.m,U==3||U==0&&m.X>0||!(S==1&&jl(u,m)||S==2&&Zn(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),U){case 1:an(u,5);break;case 4:an(u,10);break;case 3:an(u,6);break;default:an(u,2)}}}function Ws(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function an(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),S=u.Ua;const U=!S;S=new Hn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hi(S,"https"),_r(S),U?Gn(S.toString(),v):Qn(S.toString(),v)}else ot(2);u.I=0,u.l&&u.l.pa(m),Yi(u),Bs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Yi(u){if(u.I=0,u.ja=[],u.l){const m=nn(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.oa()}}function la(u,m,v){var S=v instanceof Hn?fn(v):new Hn(v);if(S.g!="")m&&(S.g=m+"."+S.g),Wn(S,S.u);else{var U=h.location;S=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const W=new Hn(null);S&&Hi(W,S),m&&(W.g=m),U&&Wn(W,U),v&&(W.h=v),S=W}return v=u.G,m=u.wa,v&&m&&Fe(S,v,m),Fe(S,"VER",u.ka),Xn(u,S),S}function Fl(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new We(new wr({ab:v})):new We(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ul(){}r=Ul.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(u,m){return new At(u,m)};function At(u,m){dt.call(this),this.g=new Us(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!k(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new si(this)}T(At,dt),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){zs(this.g)},At.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=qr(u),u=v);m.i.push(new zc(m.Ya++,u)),m.I==3&&Sr(m)},At.prototype.N=function(){this.g.l=null,delete this.j,zs(this.g),delete this.g,At.Z.N.call(this)};function zl(u){Ps.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}T(zl,Ps);function Bl(){Wo.call(this),this.status=1}T(Bl,Wo);function si(u){this.g=u}T(si,Ul),si.prototype.ra=function(){lt(this.g,"a")},si.prototype.qa=function(u){lt(this.g,new zl(u))},si.prototype.pa=function(u){lt(this.g,new Bl)},si.prototype.oa=function(){lt(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,y_=function(){return new qs},g_=function(){return Qr()},m_=Rn,Bd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Qu=Xr,Zr.COMPLETE="complete",p_=Zr,Sl.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",dt.prototype.listen=dt.prototype.J,ja=Sl,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,f_=We}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="12.8.0";function oR(r){Oo=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new df("@firebase/firestore");function mo(){return _s.logLevel}function oe(r,...e){if(_s.logLevel<=Ne.DEBUG){const t=e.map(Cf);_s.debug(`Firestore (${Oo}): ${r}`,...t)}}function zr(r,...e){if(_s.logLevel<=Ne.ERROR){const t=e.map(Cf);_s.error(`Firestore (${Oo}): ${r}`,...t)}}function Ro(r,...e){if(_s.logLevel<=Ne.WARN){const t=e.map(Cf);_s.warn(`Firestore (${Oo}): ${r}`,...t)}}function Cf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,v_(r,s,t)}function v_(r,e,t){let s=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zr(s),new Error(s)}function ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||v_(e,o,s)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bt.UNAUTHENTICATED)))}shutdown(){}}class lR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uR{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new __(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class cR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new cR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ey(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=fR(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function De(r,e){return r<e?-1:r>e?1:0}function $d(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Cd(o)===Cd(l)?De(o,l):Cd(o)?1:-1}return De(r.length,e.length)}const pR=55296,mR=57343;function Cd(r){const e=r.charCodeAt(0);return e>=pR&&e<=mR}function ko(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="__name__";class or{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const s=or.isNumericId(e),o=or.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?or.extractNumericId(e).compare(or.extractNumericId(t)):$d(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class nt extends or{construct(e,t,s){return new nt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const gR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends or{construct(e,t,s){return new Dt(e,t,s)}static isValidIdentifier(e){return gR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ty}static keyField(){return new Dt([ty])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(nt.fromString(e))}static fromName(e){return new ve(nt.fromString(e).popFirst(5))}static empty(){return new ve(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(r,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vR(r,e,t,s){if(e===!0&&s===!0)throw new de(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ny(r){if(!ve.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function w_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Za(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kf(r);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,e){const t={typeString:r};return e&&(t.value=e),t}function ml(r,e){if(!w_(r))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=-62135596800,iy=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*iy);return new Ye(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ry)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iy}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ml(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ry;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:gt("string",Ye._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ye(0,0))}static max(){return new Se(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=-1;function _R(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Ye(t+1,0):new Ye(t,s));return new Pi(o,ve.empty(),e)}function wR(r){return new Pi(r.readTime,r.key,el)}class Pi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Pi(Se.min(),ve.empty(),el)}static max(){return new Pi(Se.max(),ve.empty(),el)}}function ER(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==TR)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((E=>{h[y]=E,++f,f===l&&s(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new K(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function IR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=-1;function Pc(r){return r==null}function cc(r){return r===0&&1/r==-1/0}function CR(r){return typeof r=="number"&&Number.isInteger(r)&&!cc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="";function RR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=sy(e)),e=kR(r.get(t),e);return sy(e)}function kR(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case E_:t+="";break;default:t+=l}}return t}function sy(r){return r+E_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ts(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function T_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fu(this.root,e,this.comparator,!0)}}class Fu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Nt.RED,this.left=o??Nt.EMPTY,this.right=l??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Nt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ay(this.data.getIterator())}getIteratorFrom(e){return new ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wt(this.comparator);return t.data=e,t}}class ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new jn([])}unionWith(e){let t=new wt(Dt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new S_("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=AR.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Di(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="server_timestamp",C_="__type__",R_="__previous_value__",k_="__local_write_time__";function xf(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[C_])==null?void 0:s.stringValue)===I_}function Nc(r){const e=r.mapValue.fields[R_];return xf(e)?Nc(e):e}function tl(r){const e=Ni(r.mapValue.fields[k_].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t,s,o,l,h,f,g,y,E,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E,this.apiKey=T}}const hc="(default)";class nl{constructor(e,t){this.projectId=e,this.database=t||hc}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database===hc}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}function PR(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="__type__",NR="__max__",Uu={mapValue:{}},x_="__vector__",dc="value";function bi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xf(r)?4:bR(r)?9007199254740991:DR(r)?10:11:_e(28295,{value:r})}function dr(r,e){if(r===e)return!0;const t=bi(r);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tl(r).isEqual(tl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ni(o.timestampValue),f=Ni(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Di(o.bytesValue).isEqual(Di(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),f=ht(l.doubleValue);return h===f?cc(h)===cc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return ko(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(oy(h)!==oy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!dr(h[g],f[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function rl(r,e){return(r.values||[]).find((t=>dr(t,e)))!==void 0}function Ao(r,e){if(r===e)return 0;const t=bi(r),s=bi(e);if(t!==s)return De(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ht(l.integerValue||l.doubleValue),g=ht(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return ly(r.timestampValue,e.timestampValue);case 4:return ly(tl(r),tl(e));case 5:return $d(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Di(l),g=Di(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const E=De(f[y],g[y]);if(E!==0)return E}return De(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=De(ht(l.latitude),ht(h.latitude));return f!==0?f:De(ht(l.longitude),ht(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return uy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,N,q,B;const f=l.fields||{},g=h.fields||{},y=(I=f[dc])==null?void 0:I.arrayValue,E=(N=g[dc])==null?void 0:N.arrayValue,T=De(((q=y==null?void 0:y.values)==null?void 0:q.length)||0,((B=E==null?void 0:E.values)==null?void 0:B.length)||0);return T!==0?T:uy(y,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Uu.mapValue&&h===Uu.mapValue)return 0;if(l===Uu.mapValue)return 1;if(h===Uu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const I=$d(g[T],E[T]);if(I!==0)return I;const N=Ao(f[g[T]],y[E[T]]);if(N!==0)return N}return De(g.length,E.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function ly(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Ni(r),s=Ni(e),o=De(t.seconds,s.seconds);return o!==0?o:De(t.nanos,s.nanos)}function uy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ao(t[o],s[o]);if(l)return l}return De(t.length,s.length)}function xo(r){return Hd(r)}function Hd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Ni(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Di(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ve.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Hd(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Hd(t.fields[h])}`;return o+"}"})(r.mapValue):_e(61005,{value:r})}function Ju(r){switch(bi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nc(r);return e?16+Ju(e):16;case 5:return 2*r.stringValue.length;case 6:return Di(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Ju(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ts(s.fields,((l,h)=>{o+=l.length+Ju(h)})),o})(r.mapValue);default:throw _e(13486,{value:r})}}function Wd(r){return!!r&&"integerValue"in r}function Pf(r){return!!r&&"arrayValue"in r}function cy(r){return!!r&&"nullValue"in r}function hy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Yu(r){return!!r&&"mapValue"in r}function DR(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[A_])==null?void 0:s.stringValue)===x_}function Ha(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ts(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ha(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ha(r.arrayValue.values[t]);return e}return{...r}}function bR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(t)}setAll(e){let t=Dt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ha(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Yu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ts(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new wn(Ha(this.value))}}function P_(r){const e=[];return Ts(r.fields,((t,s)=>{const o=new Dt([t]);if(Yu(s)){const l=P_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),wn.empty(),0)}static newFoundDocument(e,t,s,o){return new $t(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Se.min(),Se.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Se.min(),Se.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.position=e,this.inclusive=t}}function dy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(h.referenceValue),t.key):s=Ao(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function fy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function VR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class _t extends N_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new OR(e,t,s):t==="array-contains"?new FR(e,s):t==="in"?new UR(e,s):t==="not-in"?new zR(e,s):t==="array-contains-any"?new BR(e,s):new _t(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new MR(e,s):new jR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ao(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(Ao(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends N_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fr(e,t)}matches(e){return D_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function D_(r){return r.op==="and"}function b_(r){return LR(r)&&D_(r)}function LR(r){for(const e of r.filters)if(e instanceof fr)return!1;return!0}function qd(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(b_(r))return r.filters.map((e=>qd(e))).join(",");{const e=r.filters.map((t=>qd(t))).join(",");return`${r.op}(${e})`}}function V_(r,e){return r instanceof _t?(function(s,o){return o instanceof _t&&s.op===o.op&&s.field.isEqual(o.field)&&dr(s.value,o.value)})(r,e):r instanceof fr?(function(s,o){return o instanceof fr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&V_(h,o.filters[f])),!0):!1})(r,e):void _e(19439)}function L_(r){return r instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${xo(t.value)}`})(r):r instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(L_).join(" ,")+"}"})(r):"Filter"}class OR extends _t{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class MR extends _t{constructor(e,t){super(e,"in",t),this.keys=O_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jR extends _t{constructor(e,t){super(e,"not-in",t),this.keys=O_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function O_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class FR extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pf(t)&&rl(t.arrayValue,this.value)}}class UR extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rl(this.value.arrayValue,t)}}class zR extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rl(this.value.arrayValue,t)}}class BR extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>rl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function py(r,e=null,t=[],s=[],o=null,l=null,h=null){return new $R(r,e,t,s,o,l,h)}function Nf(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>qd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>xo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>xo(s))).join(",")),e.Te=t}return e.Te}function Df(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!VR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!V_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!fy(r.startAt,e.startAt)&&fy(r.endAt,e.endAt)}function Kd(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function HR(r,e,t,s,o,l,h,f){return new Dc(r,e,t,s,o,l,h,f)}function bf(r){return new Dc(r)}function my(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function WR(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function qR(r){return r.collectionGroup!==null}function Wa(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new wt(Dt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pc(l,s))})),t.has(Dt.keyField().canonicalString())||e.Ie.push(new pc(Dt.keyField(),s))}return e.Ie}function lr(r){const e=Ce(r);return e.Ee||(e.Ee=KR(e,Wa(r))),e.Ee}function KR(r,e){if(r.limitType==="F")return py(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new pc(o.field,l)}));const t=r.endAt?new fc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new fc(r.startAt.position,r.startAt.inclusive):null;return py(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Gd(r,e,t){return new Dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function bc(r,e){return Df(lr(r),lr(e))&&r.limitType===e.limitType}function M_(r){return`${Nf(lr(r))}|lt:${r.limitType}`}function go(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>L_(o))).join(", ")}]`),Pc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>xo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>xo(o))).join(",")),`Target(${s})`})(lr(r))}; limitType=${r.limitType})`}function Vc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Wa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=dy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Wa(s),o)||s.endAt&&!(function(h,f,g){const y=dy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Wa(s),o))})(r,e)}function GR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function j_(r){return(e,t)=>{let s=!1;for(const o of Wa(r)){const l=QR(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function QR(r,e,t){const s=r.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Ao(g,y):_e(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return T_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new it(ve.comparator);function Br(){return JR}const F_=new it(ve.comparator);function Fa(...r){let e=F_;for(const t of r)e=e.insert(t.key,t);return e}function U_(r){let e=F_;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ds(){return qa()}function z_(){return qa()}function qa(){return new Ss((r=>r.toString()),((r,e)=>r.isEqual(e)))}const YR=new it(ve.comparator),XR=new wt(ve.comparator);function be(...r){let e=XR;for(const t of r)e=e.add(t);return e}const ZR=new wt(De);function ek(){return ZR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function B_(r){return{integerValue:""+r}}function tk(r,e){return CR(e)?B_(e):Vf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function nk(r,e,t){return r instanceof mc?(function(o,l){const h={fields:{[C_]:{stringValue:I_},[k_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&xf(l)&&(l=Nc(l)),l&&(h.fields[R_]=l),{mapValue:h}})(t,e):r instanceof il?H_(r,e):r instanceof sl?W_(r,e):(function(o,l){const h=$_(o,l),f=gy(h)+gy(o.Ae);return Wd(h)&&Wd(o.Ae)?B_(f):Vf(o.serializer,f)})(r,e)}function rk(r,e,t){return r instanceof il?H_(r,e):r instanceof sl?W_(r,e):t}function $_(r,e){return r instanceof gc?(function(s){return Wd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class mc extends Lc{}class il extends Lc{constructor(e){super(),this.elements=e}}function H_(r,e){const t=q_(e);for(const s of r.elements)t.some((o=>dr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class sl extends Lc{constructor(e){super(),this.elements=e}}function W_(r,e){let t=q_(e);for(const s of r.elements)t=t.filter((o=>!dr(o,s)));return{arrayValue:{values:t}}}class gc extends Lc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function gy(r){return ht(r.integerValue||r.doubleValue)}function q_(r){return Pf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function ik(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof il&&o instanceof il||s instanceof sl&&o instanceof sl?ko(s.elements,o.elements,dr):s instanceof gc&&o instanceof gc?dr(s.Ae,o.Ae):s instanceof mc&&o instanceof mc})(r.transform,e.transform)}class sk{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Oc{}function K_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Q_(r.key,Mr.none()):new gl(r.key,r.data,Mr.none());{const t=r.data,s=wn.empty();let o=new wt(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Is(r.key,s,new jn(o.toArray()),Mr.none())}}function ok(r,e,t){r instanceof gl?(function(o,l,h){const f=o.value.clone(),g=vy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Is?(function(o,l,h){if(!Xu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=vy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(G_(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ka(r,e,t,s){return r instanceof gl?(function(l,h,f,g){if(!Xu(l.precondition,h))return f;const y=l.value.clone(),E=_y(l.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Is?(function(l,h,f,g){if(!Xu(l.precondition,h))return f;const y=_y(l.fieldTransforms,g,h),E=h.data;return E.setAll(G_(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,s):(function(l,h,f){return Xu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function ak(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=$_(s.transform,o||null);l!=null&&(t===null&&(t=wn.empty()),t.set(s.field,l))}return t||null}function yy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ko(s,o,((l,h)=>ik(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gl extends Oc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Is extends Oc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function G_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function vy(r,e,t){const s=new Map;ze(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,rk(h,f,t[o]))}return s}function _y(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,nk(l,h,e))}return s}class Q_ extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lk extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&ok(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ka(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ka(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=z_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=K_(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,((t,s)=>yy(t,s)))&&ko(this.baseMutations,e.baseMutations,((t,s)=>yy(t,s)))}}class Lf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return YR})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Lf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Le;function dk(r){switch(r){case Z.OK:return _e(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function J_(r){if(r===void 0)return zr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case mt.OK:return Z.OK;case mt.CANCELLED:return Z.CANCELLED;case mt.UNKNOWN:return Z.UNKNOWN;case mt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case mt.INTERNAL:return Z.INTERNAL;case mt.UNAVAILABLE:return Z.UNAVAILABLE;case mt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case mt.NOT_FOUND:return Z.NOT_FOUND;case mt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case mt.ABORTED:return Z.ABORTED;case mt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case mt.DATA_LOSS:return Z.DATA_LOSS;default:return _e(39323,{code:r})}}(Le=mt||(mt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new Ai([4294967295,4294967295],0);function wy(r){const e=fk().encode(r),t=new d_;return t.update(e),new Uint8Array(t.digest())}function Ey(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ai([t,s],0),new Ai([o,l],0)]}class Of{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ua(`Invalid padding: ${t}`);if(s<0)throw new Ua(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ai.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ai.fromNumber(s)));return o.compare(pk)===1&&(o=new Ai([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=wy(e),[s,o]=Ey(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Of(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=wy(e),[s,o]=Ey(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Mc(Se.min(),o,new it(De),Br(),be())}}class yl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yl(s,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Y_{constructor(e,t){this.targetId=e,this.Ce=t}}class X_{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Ty{constructor(){this.ve=0,this.Fe=Sy(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),s=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new yl(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=Sy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class mk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Br(),this.He=zu(),this.Je=zu(),this.Ze=new it(De)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Kd(l))if(s===0){const h=new ve(l.path);this.et(t,h,$t.newNoDocument(h,Se.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Di(s).toUint8Array()}catch(g){if(g instanceof S_)return Ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Of(h,o,l)}catch(g){return Ro(g instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&Kd(f.target)){const g=new ve(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,$t.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let s=be();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Mc(e,t,this.Ze,this.je,s);return this.je=Br(),this.He=zu(),this.Je=zu(),this.Ze=new it(De),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Ty,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new wt(De),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new wt(De),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ty),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zu(){return new it(ve.comparator)}function Sy(){return new it(ve.comparator)}const gk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class _k{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qd(r,e){return r.useProto3Json||Pc(e)?e:{value:e}}function yc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wk(r,e){return yc(r,e.toTimestamp())}function ur(r){return ze(!!r,49232),Se.fromTimestamp((function(t){const s=Ni(t);return new Ye(s.seconds,s.nanos)})(r))}function Mf(r,e){return Jd(r,e).canonicalString()}function Jd(r,e){const t=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function ew(r){const e=nt.fromString(r);return ze(sw(e),10190,{key:e.toString()}),e}function Yd(r,e){return Mf(r.databaseId,e.path)}function Rd(r,e){const t=ew(e);if(t.get(1)!==r.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(nw(t))}function tw(r,e){return Mf(r.databaseId,e)}function Ek(r){const e=ew(r);return e.length===4?nt.emptyPath():nw(e)}function Xd(r){return new nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function nw(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Iy(r,e,t){return{name:Yd(r,e),fields:t.value.mapValue.fields}}function Tk(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,E){return y.useProto3Json?(ze(E===void 0||typeof E=="string",58123),Vt.fromBase64String(E||"")):(ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Vt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const E=y.code===void 0?Z.UNKNOWN:J_(y.code);return new de(E,y.message||"")})(h);t=new X_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Rd(r,s.document.name),l=ur(s.document.updateTime),h=s.document.createTime?ur(s.document.createTime):Se.min(),f=new wn({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(o,l,h,f),y=s.targetIds||[],E=s.removedTargetIds||[];t=new Zu(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Rd(r,s.document),l=s.readTime?ur(s.readTime):Se.min(),h=$t.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Zu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Rd(r,s.document),l=s.removedTargetIds||[];t=new Zu([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new hk(o,l),f=s.targetId;t=new Y_(f,h)}}return t}function Sk(r,e){let t;if(e instanceof gl)t={update:Iy(r,e.key,e.value)};else if(e instanceof Q_)t={delete:Yd(r,e.key)};else if(e instanceof Is)t={update:Iy(r,e.key,e.data),updateMask:Dk(e.fieldMask)};else{if(!(e instanceof lk))return _e(16599,{dt:e.type});t={verify:Yd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof mc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof il)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof sl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw _e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:wk(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(r,e.precondition)),t}function Ik(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ur(o.updateTime):ur(l);return h.isEqual(Se.min())&&(h=ur(l)),new sk(h,o.transformResults||[])})(t,e)))):[]}function Ck(r,e){return{documents:[tw(r,e.path)]}}function Rk(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=tw(r,o);const l=(function(y){if(y.length!==0)return iw(fr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((E=>(function(I){return{field:yo(I.field),direction:xk(I.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Qd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function kk(r){let e=Ek(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(T){const I=rw(T);return I instanceof fr&&b_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((I=>(function(q){return new pc(vo(q.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let I;return I=typeof T=="object"?T.value:T,Pc(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(T){const I=!!T.before,N=T.values||[];return new fc(N,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const I=!T.before,N=T.values||[];return new fc(N,I)})(t.endAt)),HR(e,o,h,l,f,"F",g,y)}function Ak(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=vo(t.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vo(t.unaryFilter.field);return _t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return _t.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return _t.create(vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map((s=>rw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(r):_e(30097,{filter:r})}function xk(r){return gk[r]}function Pk(r){return yk[r]}function Nk(r){return vk[r]}function yo(r){return{fieldPath:r.canonicalString()}}function vo(r){return Dt.fromServerFormat(r.fieldPath)}function iw(r){return r instanceof _t?(function(t){if(t.op==="=="){if(hy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(cy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(cy(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:Pk(t.op),value:t.value}}})(r):r instanceof fr?(function(t){const s=t.getFilters().map((o=>iw(o)));return s.length===1?s[0]:{compositeFilter:{op:Nk(t.op),filters:s}}})(r):_e(54877,{filter:r})}function Dk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function ow(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,s,o,l=Se.min(),h=Se.min(),f=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.yt=e}}function Vk(r){const e=kk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.Sn=new Ok}addToCollectionParentIndex(e,t){return this.Sn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Pi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class Ok{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new wt(nt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new wt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(aw,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Po(0)}static ar(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LruGarbageCollector",Mk=1048576;function ky([r,e],[t,s]){const o=De(r,t);return o===0?De(e,s):o}class jk{constructor(e){this.Pr=e,this.buffer=new wt(ky),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ky(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fk{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){oe(Ry,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jo(t)?oe(Ry,"Ignoring IndexedDB error during garbage collection: ",t):await Mo(t)}await this.Ar(3e5)}))}}class Uk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(xc.ce);const s=new jk(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Cy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,h,f,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),mo()<=Ne.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function zk(r,e){return new Uk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ka(s.mutation,o,jn.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=be()){const o=ds();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Fa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=ds();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,be())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Br();const h=qa(),f=(function(){return qa()})();return t.forEach(((g,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Is)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),Ka(E.mutation,y,E.mutation.getFieldMask(),Ye.now())):h.set(y.key,jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,E)=>h.set(y,E))),t.forEach(((y,E)=>f.set(y,new $k(E,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=qa();let o=new it(((h,f)=>h-f)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let E=s.get(g)||jn.empty();E=f.applyToLocalView(y,E),s.set(g,E);const T=(o.get(f.batchId)||be()).add(g);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,E=g.value,T=z_();E.forEach((I=>{if(!l.has(I)){const N=K_(t.get(I),s.get(I));N!==null&&T.set(I,N),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return K.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return WR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(ds());let f=el,g=l;return h.next((y=>K.forEach(y,((E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{g=g.insert(E,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,be()))).next((E=>({batchId:f,changes:U_(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((s=>{let o=Fa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Fa();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(g=>{const y=(function(T,I){return new Dc(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((T,I)=>{h=h.insert(T,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,$t.newInvalidDocument(E)))}));let f=Fa();return h.forEach(((g,y)=>{const E=l.get(g);E!==void 0&&Ka(E.mutation,y,jn.empty(),Ye.now()),Vc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return K.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ur(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:Vk(o.bundledQuery),readTime:ur(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.overlays=new it(ve.comparator),this.Lr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ds();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=ds(),l=t.length+1,h=new ve(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new it(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let E=l.get(y.largestBatchId);E===null&&(E=ds(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=ds(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>f.set(y,E))),!(f.size()>=o)););return K.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new ck(t,s));let l=this.Lr.get(t);l===void 0&&(l=be(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.kr=new wt(Ct.Kr),this.qr=new wt(Ct.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Ct(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Ct(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new ve(new nt([])),s=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.qr.forEachInRange([s,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ve(new nt([])),s=new Ct(t,e),o=new Ct(t,e+1);let l=be();return this.qr.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ct(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ct{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ve.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new wt(Ct.Kr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new uk(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Jr=this.Jr.add(new Ct(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Af:this.Yn-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new wt(De);return t.forEach((o=>{const l=new Ct(o,0),h=new Ct(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(f=>{s=s.add(f.Hr)}))})),K.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const h=new Ct(new ve(l),0);let f=new wt(De);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Hr)),!0)}),h),K.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return K.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Ct(t,0),o=this.Jr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.ti=e,this.docs=(function(){return new it(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=Br();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Br();const h=t.path,f=new ve(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||ER(wR(E),s)<=0||(o.has(E.key)||Vc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ni(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Jk(this)}getSize(e){return K.resolve(this.size)}}class Jk extends Bk{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.persistence=e,this.ri=new Ss((t=>Nf(t)),Df),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new jf,this.targetCount=0,this.oi=Po._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),K.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.lr(t),K.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this._i={},this.overlays={},this.ai=new xc(0),this.ui=!1,this.ui=!0,this.ci=new Kk,this.referenceDelegate=e(this),this.li=new Yk(this),this.indexManager=new Lk,this.remoteDocumentCache=(function(o){return new Qk(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new bk(t),this.Pi=new Wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new Gk(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new Xk(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return K.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class Xk extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class Ff{constructor(e){this.persistence=e,this.Ri=new jf,this.Ai=null}static Vi(e){return new Ff(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.di,(s=>{const o=ve.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class vc{constructor(e,t){this.persistence=e,this.fi=new Ss((s=>RR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=zk(this,t)}static Vi(e,t){return new vc(e,t)}Ti(){}Ii(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return K.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),K.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ju(e.data.value)),t}wr(e,t,s){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Uf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return F1()?8:IR(Wt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new Zk;return this.ys(e,t,h).next((f=>{if(l.result=f,this.As)return this.ws(e,t,h,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(mo()<=Ne.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(mo()<=Ne.DEBUG&&oe("QueryEngine","Query:",go(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(mo()<=Ne.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):K.resolve())}gs(e,t){if(my(t))return K.resolve(null);let s=lr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Gd(t,null,"F"),s=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=be(...l);return this.fs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(t,f);return this.Ss(t,y,h,g.readTime)?this.gs(e,Gd(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,s,o){return my(t)||o.isEqual(Se.min())?K.resolve(null):this.fs.getDocuments(e,s).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,s,o)?K.resolve(null):(mo()<=Ne.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(t)),this.Ds(e,h,t,_R(o,el)).next((f=>f)))}))}bs(e,t){let s=new wt(j_(e));return t.forEach(((o,l)=>{Vc(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return mo()<=Ne.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",go(t)),this.fs.getDocumentsMatchingQuery(e,t,Pi.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="LocalStore",tA=3e8;class nA{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new it(De),this.Fs=new Ss((l=>Nf(l)),Df),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function rA(r,e,t,s){return new nA(r,e,t,s)}async function uw(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=be();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of l){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function iA(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,E){const T=y.batch,I=T.keys();let N=K.resolve();return I.forEach((q=>{N=N.next((()=>E.getEntry(g,q))).next((B=>{const j=y.docVersions.get(q);ze(j!==null,48541),B.version.compareTo(j)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),E.addEntry(B)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function cw(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function sA(r,e){const t=Ce(r),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((E,T)=>{const I=o.get(T);if(!I)return;f.push(t.li.removeMatchingKeys(l,E.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,E.addedDocuments,T))));let N=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(Vt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,s)),o=o.insert(T,N),(function(B,j,$){return B.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=tA?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(I,N,E)&&f.push(t.li.updateTargetData(l,N))}));let g=Br(),y=be();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(oA(l,h,e.documentUpdates).next((E=>{g=E.Bs,y=E.Ls}))),!s.isEqual(Se.min())){const E=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(E)}return K.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=o,l)))}function oA(r,e,t){let s=be(),o=be();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Br();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):oe(zf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:o}}))}function aA(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Af),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function lA(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,K.resolve(o)):t.li.allocateTargetId(s).next((h=>(o=new Ii(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Zd(r,e,t){const s=Ce(r),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!jo(h))throw h;oe(zf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Ay(r,e,t){const s=Ce(r);let o=Se.min(),l=be();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,E){const T=Ce(g),I=T.Fs.get(E);return I!==void 0?K.resolve(T.vs.get(I)):T.li.getTargetData(y,E)})(s,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?l:be()))).next((f=>(uA(s,GR(e),f),{documents:f,ks:l})))))}function uA(r,e,t){let s=r.Ms.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class xy{constructor(){this.activeTargetIds=ek()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cA{constructor(){this.vo=new xy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new xy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="ConnectivityMonitor";class Ny{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){oe(Py,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){oe(Py,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function ef(){return Bu===null?Bu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="RestConnection",dA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class fA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===hc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const h=ef(),f=this.Qo(e,t.toUriEncodedString());oe(kd,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,l);const{host:y}=new URL(f),E=bo(y);return this.zo(e,f,g,s,E).then((T=>(oe(kd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Ro(kd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",s),T}))}jo(e,t,s,o,l,h){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=dA[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection",Oa=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class To extends fA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!To.c_){const e=g_();Oa(e,m_.STAT_EVENT,(t=>{t.stat===Bd.PROXY?oe(zt,"STAT_EVENT: detected buffering proxy"):t.stat===Bd.NOPROXY&&oe(zt,"STAT_EVENT: detected no buffering proxy")})),To.c_=!0}}zo(e,t,s,o,l){const h=ef();return new Promise(((f,g)=>{const y=new f_;y.setWithCredentials(!0),y.listenOnce(p_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Qu.NO_ERROR:const T=y.getResponseJson();oe(zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case Qu.TIMEOUT:oe(zt,`RPC '${e}' ${h} timed out`),g(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const I=y.getStatus();if(oe(zt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const q=N==null?void 0:N.error;if(q&&q.status&&q.message){const B=(function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Y)>=0?Y:Z.UNKNOWN})(q.status);g(new de(B,q.message))}else g(new de(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new de(Z.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{oe(zt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);oe(zt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=ef(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=l.join("");oe(zt,`Creating RPC '${e}' stream ${o}: ${y}`,f);const E=h.createWebChannel(y,f);this.I_(E);let T=!1,I=!1;const N=new pA({Ho:q=>{I?oe(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(T||(oe(zt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),oe(zt,`RPC '${e}' stream ${o} sending:`,q),E.send(q))},Jo:()=>E.close()});return Oa(E,ja.EventType.OPEN,(()=>{I||(oe(zt,`RPC '${e}' stream ${o} transport opened.`),N.i_())})),Oa(E,ja.EventType.CLOSE,(()=>{I||(I=!0,oe(zt,`RPC '${e}' stream ${o} transport closed`),N.o_(),this.E_(E))})),Oa(E,ja.EventType.ERROR,(q=>{I||(I=!0,Ro(zt,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),N.o_(new de(Z.UNAVAILABLE,"The operation could not be completed")))})),Oa(E,ja.EventType.MESSAGE,(q=>{var B;if(!I){const j=q.data[0];ze(!!j,16349);const $=j,Y=($==null?void 0:$.error)||((B=$[0])==null?void 0:B.error);if(Y){oe(zt,`RPC '${e}' stream ${o} received error:`,Y);const Q=Y.status;let fe=(function(x){const C=mt[x];if(C!==void 0)return J_(C)})(Q),ie=Y.message;fe===void 0&&(fe=Z.INTERNAL,ie="Unknown error status: "+Q+" with message "+Y.message),I=!0,N.o_(new de(fe,ie)),E.close()}else oe(zt,`RPC '${e}' stream ${o} received:`,j),N.__(j)}})),To.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return y_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(r){return new To(r)}function Ad(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(r){return new _k(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To.c_=!1;class hw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="PersistentStream";class dw{constructor(e,t,s,o,l,h,f,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new de(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(Dy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(oe(Dy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gA extends dw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Tk(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?ur(h.readTime):Se.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Xd(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=Kd(g)?{documents:Ck(l,g)}:{query:Rk(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Z_(l,h.resumeToken);const y=Qd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Se.min())>0){f.readTime=yc(l,h.snapshotVersion.toTimestamp());const y=Qd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=Ak(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Xd(this.serializer),t.removeTarget=e,this.K_(t)}}class yA extends dw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ik(e.writeResults,e.commitTime),s=ur(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Xd(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Sk(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class _A extends vA{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Jd(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(Z.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.jo(e,Jd(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function wA(r,e,t,s){return new _A(r,e,t,s)}class EA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zr(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="RemoteStore";class TA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{s.enqueueAndForget((async()=>{Cs(this)&&(oe(ws,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await vl(y),y.Va.set("Unknown"),y.Ea.delete(4),await Fc(y)})(this))}))})),this.Va=new EA(s,o)}}async function Fc(r){if(Cs(r))for(const e of r.Ra)await e(!0)}async function vl(r){for(const e of r.Ra)await e(!1)}function fw(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Wf(t)?Hf(t):Fo(t).O_()&&$f(t,e))}function Bf(r,e){const t=Ce(r),s=Fo(t);t.Ia.delete(e),s.O_()&&pw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Cs(t)&&t.Va.set("Unknown"))}function $f(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fo(r).Z_(e)}function pw(r,e){r.da.$e(e),Fo(r).X_(e)}function Hf(r){r.da=new mk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Fo(r).start(),r.Va.ua()}function Wf(r){return Cs(r)&&!Fo(r).x_()&&r.Ia.size>0}function Cs(r){return Ce(r).Ea.size===0}function mw(r){r.da=void 0}async function SA(r){r.Va.set("Online")}async function IA(r){r.Ia.forEach(((e,t)=>{$f(r,e)}))}async function CA(r,e){mw(r),Wf(r)?(r.Va.ha(e),Hf(r)):r.Va.set("Unknown")}async function RA(r,e,t){if(r.Va.set("Online"),e instanceof X_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.da.removeTarget(f))})(r,e)}catch(s){oe(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _c(r,s)}else if(e instanceof Zu?r.da.Xe(e):e instanceof Y_?r.da.st(e):r.da.tt(e),!t.isEqual(Se.min()))try{const s=await cw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.da.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ia.get(y);E&&l.Ia.set(y,E.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const E=l.Ia.get(g);if(!E)return;l.Ia.set(g,E.withResumeToken(Vt.EMPTY_BYTE_STRING,E.snapshotVersion)),pw(l,g);const T=new Ii(E.target,g,y,E.sequenceNumber);$f(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){oe(ws,"Failed to raise snapshot:",s),await _c(r,s)}}async function _c(r,e,t){if(!jo(e))throw e;r.Ea.add(1),await vl(r),r.Va.set("Offline"),t||(t=()=>cw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{oe(ws,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Fc(r)}))}function gw(r,e){return e().catch((t=>_c(r,t,e)))}async function Uc(r){const e=Ce(r),t=Vi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Af;for(;kA(e);)try{const o=await aA(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,AA(e,o)}catch(o){await _c(e,o)}yw(e)&&vw(e)}function kA(r){return Cs(r)&&r.Ta.length<10}function AA(r,e){r.Ta.push(e);const t=Vi(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function yw(r){return Cs(r)&&!Vi(r).x_()&&r.Ta.length>0}function vw(r){Vi(r).start()}async function xA(r){Vi(r).ra()}async function PA(r){const e=Vi(r);for(const t of r.Ta)e.ea(t.mutations)}async function NA(r,e,t){const s=r.Ta.shift(),o=Lf.from(s,e,t);await gw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Uc(r)}async function DA(r,e){e&&Vi(r).Y_&&await(async function(s,o){if((function(h){return dk(h)&&h!==Z.ABORTED})(o.code)){const l=s.Ta.shift();Vi(s).B_(),await gw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Uc(s)}})(r,e),yw(r)&&vw(r)}async function by(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),oe(ws,"RemoteStore received new credentials");const s=Cs(t);t.Ea.add(3),await vl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fc(t)}async function bA(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Fc(t)):e||(t.Ea.add(2),await vl(t),t.Va.set("Unknown"))}function Fo(r){return r.ma||(r.ma=(function(t,s,o){const l=Ce(t);return l.sa(),new gA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:SA.bind(null,r),Yo:IA.bind(null,r),t_:CA.bind(null,r),J_:RA.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Wf(r)?Hf(r):r.Va.set("Unknown")):(await r.ma.stop(),mw(r))}))),r.ma}function Vi(r){return r.fa||(r.fa=(function(t,s,o){const l=Ce(t);return l.sa(),new yA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:xA.bind(null,r),t_:DA.bind(null,r),ta:PA.bind(null,r),na:NA.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Uc(r)):(await r.fa.stop(),r.Ta.length>0&&(oe(ws,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new qf(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kf(r,e){if(zr("AsyncQueue",`${e}: ${r}`),jo(r))return new de(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Fa(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new So;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.ga=new it(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class No{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new No(e,t,So.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class LA{constructor(){this.queries=Ly(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ce(t),l=o.queries;o.queries=Ly(),l.forEach(((h,f)=>{for(const g of f.ba)g.onError(s)}))})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function Ly(){return new Ss((r=>M_(r)),bc)}async function OA(r,e){const t=Ce(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new VA,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Kf(h,`Initialization of query '${go(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Gf(t)}async function MA(r,e){const t=Ce(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function jA(r,e){const t=Ce(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.ba)f.Fa(o)&&(s=!0);h.wa=o}}s&&Gf(t)}function FA(r,e,t){const s=Ce(r),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Gf(r){r.Ca.forEach((e=>{e.next()}))}var tf,Oy;(Oy=tf||(tf={})).Ma="default",Oy.Cache="cache";class UA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new No(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class ww{constructor(e){this.key=e}}class zA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=be(),this.mutatedKeys=be(),this.eu=j_(e),this.tu=new So(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new Vy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const I=o.get(E),N=Vc(this.query,T)?T:null,q=!!I&&this.mutatedKeys.has(I.key),B=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let j=!1;I&&N?I.data.isEqual(N.data)?q!==B&&(s.track({type:3,doc:N}),j=!0):this.su(I,N)||(s.track({type:2,doc:N}),j=!0,(g&&this.eu(N,g)>0||y&&this.eu(N,y)<0)&&(f=!0)):!I&&N?(s.track({type:0,doc:N}),j=!0):I&&!N&&(s.track({type:1,doc:I}),j=!0,(g||y)&&(f=!0)),j&&(N?(h=h.add(N),l=B?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,T)=>(function(N,q){const B=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:j})}};return B(N)-B(q)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new No(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new ww(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new _w(s))})),t}cu(e){this.Za=e.ks,this.Ya=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Qf="SyncEngine";class BA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class $A{constructor(e){this.key=e,this.hu=!1}}class HA{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ss((f=>M_(f)),bc),this.Iu=new Map,this.Eu=new Set,this.Ru=new it(ve.comparator),this.Au=new Map,this.Vu=new jf,this.du={},this.mu=new Map,this.fu=Po.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WA(r,e,t=!0){const s=Rw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Ew(s,e,t,!0),o}async function qA(r,e){const t=Rw(r);await Ew(t,e,!0,!1)}async function Ew(r,e,t,s){const o=await lA(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await KA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&fw(r.remoteStore,o),f}async function KA(r,e,t,s,o){r.pu=(T,I,N)=>(async function(B,j,$,Y){let Q=j.view.ru($);Q.Ss&&(Q=await Ay(B.localStore,j.query,!1).then((({documents:x})=>j.view.ru(x,Q))));const fe=Y&&Y.targetChanges.get(j.targetId),ie=Y&&Y.targetMismatches.get(j.targetId)!=null,me=j.view.applyChanges(Q,B.isPrimaryClient,fe,ie);return jy(B,j.targetId,me.au),me.snapshot})(r,T,I,N);const l=await Ay(r.localStore,e,!0),h=new zA(e,l.ks),f=h.ru(l.documents),g=yl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);jy(r,t,y.au);const E=new BA(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function GA(r,e,t){const s=Ce(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!bc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Zd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Bf(s.remoteStore,o.targetId),nf(s,o.targetId)})).catch(Mo)):(nf(s,o.targetId),await Zd(s.localStore,o.targetId,!0))}async function QA(r,e){const t=Ce(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bf(t.remoteStore,s.targetId))}async function JA(r,e,t){const s=rx(r);try{const o=await(function(h,f){const g=Ce(h),y=Ye.now(),E=f.reduce(((N,q)=>N.add(q.key)),be());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let q=Br(),B=be();return g.xs.getEntries(N,E).next((j=>{q=j,q.forEach((($,Y)=>{Y.isValidDocument()||(B=B.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,q))).next((j=>{T=j;const $=[];for(const Y of f){const Q=ak(Y,T.get(Y.key).overlayedDocument);Q!=null&&$.push(new Is(Y.key,Q,P_(Q.value.mapValue),Mr.exists(!0)))}return g.mutationQueue.addMutationBatch(N,y,$,f)})).next((j=>{I=j;const $=j.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(N,j.batchId,$)}))})).then((()=>({batchId:I.batchId,changes:U_(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.du[h.currentUser.toKey()];y||(y=new it(De)),y=y.insert(f,g),h.du[h.currentUser.toKey()]=y})(s,o.batchId,t),await _l(s,o.changes),await Uc(s.remoteStore)}catch(o){const l=Kf(o,"Failed to persist write");t.reject(l)}}async function Tw(r,e){const t=Ce(r);try{const s=await sA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ze(h.hu,14607):o.removedDocuments.size>0&&(ze(h.hu,42227),h.hu=!1))})),await _l(t,s,e)}catch(s){await Mo(s)}}function My(r,e,t){const s=Ce(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ce(h);g.onlineState=f;let y=!1;g.queries.forEach(((E,T)=>{for(const I of T.ba)I.va(f)&&(y=!0)})),y&&Gf(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function YA(r,e,t){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new it(ve.comparator);h=h.insert(l,$t.newNoDocument(l,Se.min()));const f=be().add(l),g=new Mc(Se.min(),new Map,new it(De),h,f);await Tw(s,g),s.Ru=s.Ru.remove(l),s.Au.delete(e),Jf(s)}else await Zd(s.localStore,e,!1).then((()=>nf(s,e,t))).catch(Mo)}async function XA(r,e){const t=Ce(r),s=e.batch.batchId;try{const o=await iA(t.localStore,e);Iw(t,s,null),Sw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await _l(t,o)}catch(o){await Mo(o)}}async function ZA(r,e,t){const s=Ce(r);try{const o=await(function(h,f){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,f).next((T=>(ze(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);Iw(s,e,t),Sw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await _l(s,o)}catch(o){await Mo(o)}}function Sw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Iw(r,e,t){const s=Ce(r);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function nf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||Cw(r,s)}))}function Cw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Bf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Jf(r))}function jy(r,e,t){for(const s of t)s instanceof _w?(r.Vu.addReference(s.key,e),ex(r,s)):s instanceof ww?(oe(Qf,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||Cw(r,s.key)):_e(19791,{wu:s})}function ex(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(oe(Qf,"New document in limbo: "+t),r.Eu.add(s),Jf(r))}function Jf(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ve(nt.fromString(e)),s=r.fu.next();r.Au.set(s,new $A(t)),r.Ru=r.Ru.insert(t,s),fw(r.remoteStore,new Ii(lr(bf(t.path)),s,"TargetPurposeLimboResolution",xc.ce))}}async function _l(r,e,t){const s=Ce(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{var E;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Uf.Es(g.targetId,y);l.push(T)}})))})),await Promise.all(h),s.Pu.J_(o),await(async function(g,y){const E=Ce(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>K.forEach(y,(I=>K.forEach(I.Ts,(N=>E.persistence.referenceDelegate.addReference(T,I.targetId,N))).next((()=>K.forEach(I.Is,(N=>E.persistence.referenceDelegate.removeReference(T,I.targetId,N)))))))))}catch(T){if(!jo(T))throw T;oe(zf,"Failed to update sequence numbers: "+T)}for(const T of y){const I=T.targetId;if(!T.fromCache){const N=E.vs.get(I),q=N.snapshotVersion,B=N.withLastLimboFreeSnapshotVersion(q);E.vs=E.vs.insert(I,B)}}})(s.localStore,l))}async function tx(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){oe(Qf,"User change. New user:",e.toKey());const s=await uw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new de(Z.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await _l(t,s.Ns)}}function nx(r,e){const t=Ce(r),s=t.Au.get(e);if(s&&s.hu)return be().add(s.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Rw(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YA.bind(null,e),e.Pu.J_=jA.bind(null,e.eventManager),e.Pu.yu=FA.bind(null,e.eventManager),e}function rx(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZA.bind(null,e),e}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rA(this.persistence,new eA,e.initialUser,this.serializer)}Cu(e){return new lw(Ff.Vi,this.serializer)}Du(e){return new cA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class ix extends wc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof vc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Fk(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new lw((s=>vc.Vi(s,t)),this.serializer)}}class rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>My(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tx.bind(null,this.syncEngine),await bA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new LA})()}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=mA(e.databaseInfo);return wA(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new TA(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>My(this.syncEngine,t,0)),(function(){return Ny.v()?new Ny:new hA})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,E){const T=new HA(o,l,h,f,g,y);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);oe(ws,"RemoteStore shutting down."),l.Ea.add(5),await vl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}rf.provider={build:()=>new rf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="FirestoreClient";class ox{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=Bt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{oe(Li,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(oe(Li,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Kf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function xd(r,e){r.asyncQueue.verifyOperationInProgress(),oe(Li,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await uw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Fy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await ax(r);oe(Li,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>by(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>by(e.remoteStore,o))),r._onlineComponents=e}async function ax(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(Li,"Using user provided OfflineComponentProvider");try{await xd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await xd(r,new wc)}}else oe(Li,"Using default OfflineComponentProvider"),await xd(r,new ix(void 0));return r._offlineComponents}async function kw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(Li,"Using user provided OnlineComponentProvider"),await Fy(r,r._uninitializedComponentsProvider._online)):(oe(Li,"Using default OnlineComponentProvider"),await Fy(r,new rf))),r._onlineComponents}function lx(r){return kw(r).then((e=>e.syncEngine))}async function ux(r){const e=await kw(r),t=e.eventManager;return t.onListen=WA.bind(null,e.syncEngine),t.onUnlisten=GA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QA.bind(null,e.syncEngine),t}function cx(r,e,t={}){const s=new xi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const E=new sx({next:I=>{E.Nu(),h.enqueueAndForget((()=>MA(l,T)));const N=I.docs.has(f);!N&&I.fromCache?y.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&I.fromCache&&g&&g.source==="server"?y.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new UA(bf(f.path),E,{includeMetadataChanges:!0,Ka:!0});return OA(l,T)})(await ux(r),r.asyncQueue,e,t,s))),s.promise}function hx(r,e){const t=new xi;return r.asyncQueue.enqueueAndForget((async()=>JA(await lx(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="ComponentProvider",Uy=new Map;function fx(r,e,t,s,o){return new xR(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Aw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="firestore.googleapis.com",zy=!0;class By{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xw,this.ssl=zy}else this.host=e.host,this.ssl=e.ssl??zy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Mk)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Aw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new By({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new By(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new aR;switch(s.type){case"firstParty":return new hR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Uy.get(t);s&&(oe(dx,"Removing Datastore"),Uy.delete(t),s.terminate())})(this),Promise.resolve()}}function px(r,e,t,s={}){var y;r=Za(r,Yf);const o=bo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(Av(`https://${f}`),xv("Firestore",!0)),l.host!==xw&&l.host!==f&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!gs(g,h)&&(r._setSettings(g),s.mockUserToken)){let E,T;if(typeof s.mockUserToken=="string")E=s.mockUserToken,T=Bt.MOCK_USER;else{E=P1(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Bt(I)}r._authCredentials=new lR(new __(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xf(this.firestore,e,this._query)}}class Rt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ml(t,Rt._jsonSchema))return new Rt(e,s||null,new ve(nt.fromString(t.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:gt("string",Rt._jsonSchemaVersion),referencePath:gt("string")};class ol extends Xf{constructor(e,t,s){super(e,t,bf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ve(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function Pw(r,e,...t){if(r=Sn(r),arguments.length===1&&(e=Rf.newId()),yR("doc","path",e),r instanceof Yf){const s=nt.fromString(e,...t);return ny(s),new Rt(r,null,new ve(s))}{if(!(r instanceof Rt||r instanceof ol))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...t));return ny(s),new Rt(r.firestore,r instanceof ol?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="AsyncQueue";class Hy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hw(this,"async_queue_retry"),this._c=()=>{const s=Ad();s&&oe($y,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ad();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ad();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!jo(e))throw e;oe($y,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",Wy(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=qf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:Wy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Wy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Zf extends Yf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Hy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hy(e),this._firestoreClient=void 0,await e}}}function mx(r,e){const t=typeof r=="object"?r:bv(),s=typeof r=="string"?r:hc,o=pf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=A1("firestore");l&&px(o,...l)}return o}function Nw(r){if(r._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gx(r),r._firestoreClient}function gx(r){var s,o,l,h;const e=r._freezeSettings(),t=fx(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new ox(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(Vt.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new En(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ml(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:gt("string",En._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(ml(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:gt("string",cr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ml(e,Un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Un(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Un._jsonSchemaVersion="firestore/vectorValue/1.0",Un._jsonSchema={type:gt("string",Un._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=/^__.*__$/;class vx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}function Vw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:r})}}class ep{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ep({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ec(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Vw(this.dataSource)&&yx.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class _x{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}createContext(e,t,s,o=!1){return new ep({dataSource:e,methodName:t,targetDoc:s,path:Dt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wx(r){const e=r._freezeSettings(),t=jc(r._databaseId);return new _x(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Ex(r,e,t,s,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);jw("Data must be an object, but it was:",h,s);const f=Ow(s,h);let g,y;if(l.merge)g=new jn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const I=tp(e,T,t);if(!h.contains(I))throw new de(Z.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Ix(E,I)||E.push(I)}g=new jn(E),y=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=h.fieldTransforms;return new vx(new wn(f),g,y)}function Lw(r,e){if(Mw(r=Sn(r)))return jw("Unsupported field value:",e,r),Ow(r,e);if(r instanceof bw)return(function(s,o){if(!Vw(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Lw(f,o.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=Sn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return tk(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ye.fromDate(s);return{timestampValue:yc(o.serializer,l)}}if(s instanceof Ye){const l=new Ye(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yc(o.serializer,l)}}if(s instanceof cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof En)return{bytesValue:Z_(o.serializer,s._byteString)};if(s instanceof Rt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Mf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Un)return(function(h,f){const g=h instanceof Un?h.toArray():h;return{mapValue:{fields:{[A_]:{stringValue:x_},[dc]:{arrayValue:{values:g.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return Vf(f.serializer,E)}))}}}}}})(s,o);if(ow(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${kf(s)}`)})(r,e)}function Ow(r,e){const t={};return T_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(r,((s,o)=>{const l=Lw(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Mw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ye||r instanceof cr||r instanceof En||r instanceof Rt||r instanceof bw||r instanceof Un||ow(r))}function jw(r,e,t){if(!Mw(t)||!w_(t)){const s=kf(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function tp(r,e,t){if((e=Sn(e))instanceof Dw)return e._internalPath;if(typeof e=="string")return Sx(r,e);throw Ec("Field path arguments must be of type string or ",r,!1,void 0,t)}const Tx=new RegExp("[~\\*/\\[\\]]");function Sx(r,e,t){if(e.search(Tx)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Dw(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ec(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new de(Z.INVALID_ARGUMENT,f+r+g)}function Ix(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ts(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[dc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ht(h.doubleValue)));return new Un(t)}convertGeoPoint(e){return new cr(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Nc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=nt.fromString(e);ze(sw(s),9688,{name:e});const o=new nl(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return o.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx extends Cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}const qy="@firebase/firestore",Ky="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(tp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kx extends Fw{data(){return super.data()}}function Ax(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ps extends Fw{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(tp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ps._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:gt("string",ps._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class ec extends ps{data(e={}){return super.data(e)}}class Ga{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new za(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ec(this._firestore,this._userDataWriter,s.key,s,new za(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new za(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new za(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:xx(f.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xx(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:gt("string",Ga._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(r){r=Za(r,Rt);const e=Za(r.firestore,Zf),t=Nw(e);return cx(t,r._key).then((s=>Dx(e,r,s)))}function Uw(r,e,t){r=Za(r,Rt);const s=Za(r.firestore,Zf),o=Ax(r.converter,e,t),l=wx(s);return Nx(s,[Ex(l,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Mr.none())])}function Nx(r,e){const t=Nw(r);return hx(t,e)}function Dx(r,e,t){const s=t.docs.get(e._key),o=new Rx(r);return new ps(r,o,e._key,s,new za(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){oR(Vo),Io(new ys("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Zf(new uR(s.getProvider("auth-internal")),new dR(h,s.getProvider("app-check-internal")),PR(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ki(qy,Ky,e),ki(qy,Ky,"esm2020")})();const bx={apiKey:"AIzaSyCO5r-8hPDpEJD2qY2llWyf_gAQXVlu4CU",authDomain:"stop-procrastinating-9ffaf.firebaseapp.com",projectId:"stop-procrastinating-9ffaf",storageBucket:"stop-procrastinating-9ffaf.firebasestorage.app",messagingSenderId:"270312713724",appId:"1:270312713724:web:98e212793206ff87511679",measurementId:"G-KYLVPZXV20"},zw=Dv(bx),Tc=iR(zw),Vx=new br,Bw=mx(zw),Ee={USER_MOOD:"sp_user_mood",TASKS:"sp_tasks",SCHEDULED_TASKS:"sp_scheduled_tasks",DISTRACTION_LOGS:"sp_distraction_logs",REFLECTIONS:"sp_daily_reflections",USER_STATS:"sp_user_stats"},Lx=async(r,e)=>{const t=Tc.currentUser;if(t)try{const s=Pw(Bw,"users",t.uid),l={[Ee.TASKS]:"tasks",[Ee.SCHEDULED_TASKS]:"scheduled",[Ee.REFLECTIONS]:"reflections",[Ee.USER_STATS]:"stats",[Ee.USER_MOOD]:"mood"}[r];if(l){const h=typeof e=="object"?JSON.stringify(e):e;await Uw(s,{[l]:h},{merge:!0}),console.log(`Synced ${r} to cloud.`)}}catch(s){console.error("Cloud sync failed:",s)}},$e=(r,e=null)=>{try{const t=localStorage.getItem(r);return t?JSON.parse(t):e}catch(t){return console.error(`Error reading ${r} from storage:`,t),e}},Ht=(r,e)=>{try{localStorage.setItem(r,JSON.stringify(e)),Lx(r,e)}catch(t){console.error(`Error writing ${r} to storage:`,t)}},Ox=()=>{const r=new Date().toDateString();let e=$e(Ee.USER_STATS,{totalPoints:0,currentStreak:0,longestStreak:0,lastActiveDate:null});if(e.lastActiveDate!==r){const t=new Date;if(t.setDate(t.getDate()-1),e.lastActiveDate===t.toDateString())e.currentStreak+=1;else if(e.lastActiveDate===null)e.currentStreak=1;else{const s=new Date(e.lastActiveDate),o=Math.abs(new Date(r)-s);Math.ceil(o/(1e3*60*60*24))>1&&(e.currentStreak=1)}e.currentStreak>e.longestStreak&&(e.longestStreak=e.currentStreak),e.lastActiveDate=r,Ht(Ee.USER_STATS,e)}return e},Mx=r=>{let e=$e(Ee.USER_STATS,{totalPoints:0,currentStreak:0,longestStreak:0,lastActiveDate:null});return e.totalPoints+=r,Ht(Ee.USER_STATS,e),e},bt=({children:r})=>{const e=Oi(),t=$e(Ee.USER_STATS,{totalPoints:0,currentStreak:0}),[s,o]=M.useState(null);M.useEffect(()=>{const h=qI(Tc,f=>{o(f)});return()=>h()},[]);const l=()=>{KI(Tc)};return _.jsxs("div",{className:"layout-wrapper",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[_.jsxs("header",{style:{padding:"1rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",background:"white"},children:[_.jsx(Ja,{to:"/",style:{textDecoration:"none",color:"var(--color-primary)",fontWeight:"bold"},children:"Stop Procrastinating"}),_.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",fontSize:"0.875rem"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.jsx("span",{role:"img","aria-label":"streak",children:""}),_.jsxs("span",{children:[t.currentStreak," Days"]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.jsx("span",{role:"img","aria-label":"points",children:""}),_.jsxs("span",{children:[t.totalPoints," pts"]})]}),s?_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"0.5rem"},children:[s.photoURL?_.jsx("img",{src:s.photoURL,alt:"User",style:{width:"24px",height:"24px",borderRadius:"50%"}}):_.jsx(g1,{size:20}),_.jsx("button",{onClick:l,style:{background:"none",border:"none",fontSize:"0.75rem",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline"},children:"Sign Out"})]}):_.jsxs(Ja,{to:"/signin",style:{display:"flex",alignItems:"center",gap:"0.25rem",textDecoration:"none",color:"var(--color-primary)",marginLeft:"0.5rem"},children:[_.jsx(vv,{size:18}),_.jsx("span",{children:"Sign In"})]})]})]}),_.jsx("main",{style:{flex:1,paddingBottom:"2rem"},children:r}),_.jsxs("nav",{style:{position:"fixed",bottom:0,left:0,width:"100%",background:"white",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-around",padding:"0.75rem 0",zIndex:100},children:[_.jsx(Ma,{to:"/",icon:_.jsx(e1,{size:20}),label:"Home",active:e.pathname==="/"||e.pathname==="/mood"}),_.jsx(Ma,{to:"/schedule",icon:_.jsx(hf,{size:20}),label:"Tasks",active:e.pathname==="/schedule"}),_.jsx(Ma,{to:"/limit",icon:_.jsx(_v,{size:20}),label:"Limit",active:e.pathname==="/limit"}),_.jsx(Ma,{to:"/reflect",icon:_.jsx(KT,{size:20}),label:"Reflect",active:e.pathname==="/reflect"}),_.jsx(Ma,{to:"/analysis",icon:_.jsx(h1,{size:20}),label:"Analysis",active:e.pathname==="/analysis"})]}),_.jsx("div",{style:{height:"70px"}})]})},Ma=({to:r,icon:e,label:t,active:s})=>_.jsxs(Ja,{to:r,style:{display:"flex",flexDirection:"column",alignItems:"center",textDecoration:"none",color:s?"var(--color-primary)":"var(--color-text-secondary)",fontSize:"0.75rem"},children:[e,_.jsx("span",{style:{marginTop:"0.25rem"},children:t})]}),jx=()=>{const r=zn(),[e,t]=M.useState("Friend"),[s,o]=M.useState(0),[l,h]=M.useState(0),[f,g]=M.useState(null);return M.useEffect(()=>{t($e(Ee.USER_NAME,"Friend"));const y=$e(Ee.USER_STATS,{currentStreak:0,totalPoints:0});o(y.currentStreak),h(y.totalPoints);const E=$e(Ee.REFLECTIONS,[]);E.length>0&&g(E[0])},[]),_.jsx(bt,{children:_.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"2rem"},children:[_.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"0.5rem",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Stop Procrastinating"}),_.jsx("p",{style:{fontSize:"1.2rem",color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Start small. Be kind to yourself."}),_.jsxs("div",{className:"card",style:{textAlign:"left",marginBottom:"2rem"},children:[_.jsxs("h3",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.jsx(wv,{className:"text-secondary",size:20}),"Your Progress"]}),_.jsxs("ul",{style:{paddingLeft:"1.5rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[_.jsxs("li",{children:[_.jsx("strong",{children:s})," Day Streak"]}),_.jsxs("li",{children:[_.jsx("strong",{children:l})," Focus Points"]})]})]}),_.jsx("div",{style:{marginTop:"2rem"},children:_.jsxs("button",{className:"btn-primary",onClick:()=>r("/mood"),children:["Get Started ",_.jsx(BT,{size:18,style:{marginLeft:"0.5rem"}})]})}),f&&_.jsxs("div",{style:{marginTop:"3rem",textAlign:"left"},children:[_.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-text-secondary)"},children:[_.jsx(FT,{size:18}),new Date(f.date).toDateString()===new Date().toDateString()?"Today's Snapshot":"Yesterday's Results"]}),_.jsxs("div",{className:"card",children:[_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.9rem"},children:[_.jsxs("span",{style:{color:"#15803d",fontWeight:"bold"},children:["Work ",f.workScore,"%"]}),_.jsxs("span",{style:{color:"#b91c1c",fontWeight:"bold"},children:["Procrastinate ",f.procrastinationScore,"%"]})]}),_.jsxs("div",{style:{height:"8px",background:"#e2e8f0",borderRadius:"4px",overflow:"hidden",display:"flex"},children:[_.jsx("div",{style:{width:`${f.workScore}%`,background:"#22c55e"}}),_.jsx("div",{style:{width:`${f.procrastinationScore}%`,background:"#ef4444"}})]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid #f1f5f9"},children:[_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--color-primary)"},children:f.tasksDoneCount||0}),_.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Tasks Done"})]}),_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--color-warning)"},children:f.pointsScored||0}),_.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Points Scored"})]})]}),_.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1.5rem"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:"Distractions"}),_.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:[f.distractionTime||0,"m"]})]}),_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:"Count"}),_.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:f.distractionCount||0})]})]}),f.tomorrowGoal&&_.jsxs("div",{style:{padding:"1rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-md)"},children:[_.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.25rem"},children:[_.jsx(hf,{size:14}),new Date(f.date).toDateString()===new Date().toDateString()?"Goal for Tomorrow":"Target set for Today"]}),_.jsx("div",{style:{fontWeight:500},children:f.tomorrowGoal})]})]})]})]})})},Fx=()=>{const r=zn(),e=[{id:"focused",label:"Focused",icon:_.jsx(Ev,{size:32}),color:"var(--color-success)",desc:"I'm ready to tackle something big."},{id:"low-energy",label:"Low Energy",icon:_.jsx(HT,{size:32}),color:"var(--color-warning)",desc:"I need something small and easy."},{id:"bored",label:"Bored",icon:_.jsx(XT,{size:32}),color:"var(--color-text-accent)",desc:"I need to get interested."}],t=s=>{Ht(Ee.USER_MOOD,s),r("/tasks")};return _.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"How are you feeling right now?"}),_.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map(s=>_.jsxs("button",{onClick:()=>t(s.id),className:"card",style:{display:"flex",alignItems:"center",gap:"1rem",textAlign:"left",width:"100%",border:"1px solid transparent",cursor:"pointer",transition:"transform 0.2s, border-color 0.2s"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.02)",o.currentTarget.style.borderColor=s.color},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.borderColor="transparent"},children:[_.jsx("div",{style:{color:s.color},children:s.icon}),_.jsxs("div",{children:[_.jsx("strong",{style:{display:"block",fontSize:"1.1rem"},children:s.label}),_.jsx("span",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)"},children:s.desc})]})]},s.id))})]})})},Ux=()=>{const r=zn(),[e,t]=M.useState([]),[s,o]=M.useState(null),[l,h]=M.useState([]);return M.useEffect(()=>{const f=$e(Ee.USER_MOOD);o(f);const y=$e(Ee.TASKS,[]).filter(N=>{var q;return!N.completed&&(((q=N.moods)==null?void 0:q.includes(f))||!N.moods||N.moods.length===0)});t(y);const E=$e(Ee.SCHEDULED_TASKS,[]),T=new Date().setHours(0,0,0,0),I=E.filter(N=>{const q=new Date(N.startDate).setHours(0,0,0,0),B=new Date(N.dueDate).setHours(0,0,0,0);return!N.completed&&T>=q&&T<=B});h(I)},[]),_.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("button",{onClick:()=>r("/schedule"),style:{background:"transparent",border:"none",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"1rem",cursor:"pointer",marginBottom:"1rem"},children:[_.jsx(ms,{size:20})," Back"]}),l.length>0&&_.jsxs("div",{style:{background:"var(--color-bg-accent)",padding:"1rem",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",border:"1px solid var(--color-primary)"},children:[_.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"start",color:"var(--color-primary)",marginBottom:"0.5rem"},children:[_.jsx(mv,{size:20,style:{marginTop:"0.1rem"}}),_.jsxs("strong",{style:{display:"block"},children:["Daily Commitments (",l.length,")"]})]}),l.map(f=>_.jsx("div",{style:{marginLeft:"1.75rem",marginBottom:"0.5rem",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem"},children:_.jsxs("span",{style:{color:"var(--color-text-primary)"},children:["Planned to work on ",_.jsx("strong",{children:f.workToComplete})," for the ",_.jsx("strong",{children:f.name}),"."]})},f.id))]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[_.jsx("h2",{children:"Suggested for You"}),_.jsxs("button",{className:"btn-primary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},onClick:()=>r("/add-task"),children:[_.jsx(bd,{size:18})," Add Task"]})]}),e.length===0?_.jsxs("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"2rem"},children:[_.jsxs("p",{children:["No tasks fit your current mood (",s,")."]}),_.jsx("p",{children:"Why not add a small one?"})]}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map(f=>_.jsxs("div",{className:"card",children:[_.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:_.jsxs("div",{children:[_.jsx("h3",{style:{margin:"0 0 0.25rem",fontSize:"1.25rem"},children:f.title}),_.jsxs("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem"},children:[_.jsx("strong",{children:"Start with:"})," ",f.smallStep]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[_.jsx(yv,{size:16})," ",f.time]})]})}),_.jsx("div",{style:{marginTop:"1rem",textAlign:"right"},children:_.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.9rem"},onClick:()=>r(`/complete/${f.id}`),children:"Task Done (Add Proof)"})})]},f.id))})]})})},zx=()=>{const r=zn(),[e,t]=M.useState({title:"",smallStep:"",time:"15 mins",moods:[]}),s=[{id:"focused",label:"Focused"},{id:"low-energy",label:"Low Energy"},{id:"bored",label:"Bored"}],o=h=>{h.preventDefault();const f=$e(Ee.TASKS,[]),g={id:Date.now().toString(),...e,completed:!1,createdAt:new Date().toISOString()};Ht(Ee.TASKS,[g,...f]),r("/tasks")},l=h=>{t(f=>{const g=f.moods.includes(h)?f.moods.filter(y=>y!==h):[...f.moods,h];return{...f,moods:g}})};return _.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("button",{onClick:()=>r("/schedule"),style:{background:"transparent",border:"none",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",fontSize:"1rem",cursor:"pointer",marginBottom:"1rem"},children:[_.jsx(ms,{size:20})," Back"]}),_.jsx("h2",{children:"Add a New Task"}),_.jsxs("form",{onSubmit:o,className:"card",children:[_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Task Name"}),_.jsx("input",{required:!0,value:e.title,onChange:h=>t({...e,title:h.target.value}),placeholder:"e.g. Study Math"})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Small First Step (Crucial!)"}),_.jsx("input",{required:!0,value:e.smallStep,onChange:h=>t({...e,smallStep:h.target.value}),placeholder:"e.g. Open the textbook to page 50"}),_.jsx("small",{style:{color:"var(--color-text-secondary)"},children:"Just write what you will do in the first 2 minutes."})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Expected Time (Minutes)"}),_.jsx("input",{type:"number",required:!0,value:e.time,onChange:h=>t({...e,time:h.target.value}),placeholder:"e.g. 30"})]}),_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsx("label",{children:"Best for Mood (Optional)"}),_.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:s.map(h=>_.jsx("button",{type:"button",onClick:()=>l(h.id),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",border:"1px solid var(--color-primary)",background:e.moods.includes(h.id)?"var(--color-primary)":"transparent",color:e.moods.includes(h.id)?"white":"var(--color-primary)",fontSize:"0.85rem"},children:h.label},h.id))})]}),_.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save Task"})]})]})})},Bx=()=>{const{taskId:r}=U0(),e=zn(),[t,s]=M.useState(null),[o,l]=M.useState(""),[h,f]=M.useState(""),[g,y]=M.useState(!1),[E,T]=M.useState(0);M.useEffect(()=>{let q=$e(Ee.TASKS,[]).find(B=>B.id===r);if(!q){const j=$e(Ee.SCHEDULED_TASKS,[]).find($=>String($.id)===r);j&&(q={...j,title:j.name,smallStep:j.workToComplete||"Scheduled Work",isSchedule:!0})}q&&s(q)},[r]);const I=N=>{if(N.preventDefault(),t.isSchedule){const j=$e(Ee.SCHEDULED_TASKS,[]).map($=>String($.id)===r?{...$,completed:!0,completedAt:new Date().toISOString()}:$);Ht(Ee.SCHEDULED_TASKS,j)}else{const j=$e(Ee.TASKS,[]).map($=>$.id===r?{...$,completed:!0,reflection:o,learning:h,completedAt:new Date().toISOString()}:$);Ht(Ee.TASKS,j)}const q=10;Mx(q),Ox(),T(q),y(!0)};return t?g?_.jsx(bt,{children:_.jsxs("div",{className:"container",style:{textAlign:"center",padding:"3rem 1rem"},children:[_.jsx(gv,{size:64,color:"var(--color-success)",style:{margin:"0 auto 1rem"}}),_.jsx("h2",{children:"Well Done!"}),_.jsx("p",{children:"You started despite resistance. That matters."}),_.jsxs("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-lg)"},children:[_.jsxs("h3",{style:{margin:0,color:"var(--color-primary)"},children:["+",E," Focus Points"]}),_.jsx("p",{style:{margin:"0.5rem 0 0"},children:"Streak Updated!"})]}),_.jsx("button",{className:"btn-primary",onClick:()=>e("/"),children:"Back Home"})]})}):_.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("h2",{children:['Complete "',t.title,'"']}),_.jsx("div",{className:"card",children:_.jsxs("form",{onSubmit:I,children:[_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsx("label",{children:"What did you actually do?"}),_.jsx("textarea",{required:!0,value:o,onChange:N=>l(N.target.value),placeholder:"I read 5 pages...",rows:3})]}),_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsx("label",{children:"What did you learn? (Optional)"}),_.jsx("textarea",{value:h,onChange:N=>f(N.target.value),placeholder:"I learned that starting wasn't so bad...",rows:2})]}),_.jsxs("div",{style:{marginBottom:"2rem"},children:[_.jsx("label",{children:"Upload Proof (Optional)"}),_.jsxs("div",{style:{border:"2px dashed #cbd5e1",borderRadius:"var(--radius-md)",padding:"1.5rem",textAlign:"center",color:"var(--color-text-secondary)",cursor:"pointer"},children:[_.jsx(p1,{size:24,style:{marginBottom:"0.5rem"}}),_.jsx("div",{children:"Click to upload image"})]})]}),_.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Mark as Completed"})]})})]})}):_.jsx(bt,{children:_.jsx("div",{children:"Loading..."})})},$x=()=>{const r=zn(),[e,t]=M.useState([]),[s,o]=M.useState([]),[l,h]=M.useState(!1),[f,g]=M.useState(!1),[y,E]=M.useState({name:"",workToComplete:"",startDate:"",dueDate:""}),[T,I]=M.useState({title:"",smallStep:"",time:"15 mins",moods:[]}),N=[{id:"focused",label:"Focused"},{id:"low-energy",label:"Low Energy"},{id:"bored",label:"Bored"}];M.useEffect(()=>{t($e(Ee.SCHEDULED_TASKS,[])),o($e(Ee.TASKS,[]))},[]);const q=$=>{$.preventDefault();const Y=[...e,{id:Date.now(),...y}];Ht(Ee.SCHEDULED_TASKS,Y),t(Y),h(!1),E({name:"",workToComplete:"",startDate:"",dueDate:""})},B=$=>{$.preventDefault();const Q=[{id:Date.now().toString(),...T,completed:!1,createdAt:new Date().toISOString()},...s];Ht(Ee.TASKS,Q),o(Q),g(!1),I({title:"",smallStep:"",time:"15 mins",moods:[]})},j=$=>{I(Y=>{const Q=Y.moods.includes($)?Y.moods.filter(fe=>fe!==$):[...Y.moods,$];return{...Y,moods:Q}})};return _.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[_.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[_.jsx(ms,{size:18})," Back"]}),_.jsx("h2",{style:{margin:0},children:"Planning Hub"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"3rem"},children:[_.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",border:f?"2px solid var(--color-primary)":"1px solid transparent",transition:"all 0.2s",padding:"2rem 1rem"},onClick:()=>{g(!f),h(!1)},children:[_.jsx("div",{style:{background:"var(--color-bg-accent)",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"var(--color-primary)"},children:_.jsx(Ev,{size:24})}),_.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem"},children:"Add Task"}),_.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",margin:0},children:"For immediate work today. Small steps."})]}),_.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",border:l?"2px solid var(--color-primary)":"1px solid transparent",padding:"2rem 1rem"},onClick:()=>{h(!l),g(!1)},children:[_.jsx("div",{style:{background:"#f0f9ff",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"#0284c7"},children:_.jsx(hf,{size:24})}),_.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem"},children:"Schedule Future Task"}),_.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",margin:0},children:"Plan ahead to reduce uncertainty."})]})]}),f&&_.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[_.jsx("h3",{style:{marginBottom:"1rem"},children:"Add a New Task"}),_.jsxs("form",{onSubmit:B,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid var(--color-primary)"},children:[_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Task Name"}),_.jsx("input",{required:!0,value:T.title,onChange:$=>I({...T,title:$.target.value}),placeholder:"e.g. Study Math",autoFocus:!0})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Small First Step (Crucial!)"}),_.jsx("input",{required:!0,value:T.smallStep,onChange:$=>I({...T,smallStep:$.target.value}),placeholder:"e.g. Open the textbook to page 50"}),_.jsx("small",{style:{color:"var(--color-text-secondary)"},children:"Just write what you will do in the first 2 minutes."})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Expected Time (Minutes)"}),_.jsx("input",{type:"number",required:!0,value:T.time,onChange:$=>I({...T,time:$.target.value}),placeholder:"e.g. 30"})]}),_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsx("label",{children:"Best for Mood (Optional)"}),_.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:N.map($=>_.jsx("button",{type:"button",onClick:()=>j($.id),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-full)",border:"1px solid var(--color-primary)",background:T.moods.includes($.id)?"var(--color-primary)":"transparent",color:T.moods.includes($.id)?"white":"var(--color-primary)",fontSize:"0.85rem"},children:$.label},$.id))})]}),_.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[_.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),_.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Task"})]})]})]}),l&&_.jsxs("div",{style:{animation:"fadeIn 0.3s ease-in-out"},children:[_.jsx("h3",{style:{marginBottom:"1rem"},children:"New Future Plan"}),_.jsxs("form",{onSubmit:q,className:"card",style:{marginBottom:"3rem",borderLeft:"4px solid #0284c7"},children:[_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Task Name"}),_.jsx("input",{required:!0,value:y.name,onChange:$=>E({...y,name:$.target.value}),autoFocus:!0})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Work to Complete"}),_.jsx("input",{value:y.workToComplete,onChange:$=>E({...y,workToComplete:$.target.value}),placeholder:"e.g. Read Chapters 1-3"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[_.jsxs("div",{children:[_.jsx("label",{children:"Start Date"}),_.jsx("input",{type:"date",required:!0,value:y.startDate,onChange:$=>E({...y,startDate:$.target.value})})]}),_.jsxs("div",{children:[_.jsx("label",{children:"Due Date"}),_.jsx("input",{type:"date",required:!0,value:y.dueDate,onChange:$=>E({...y,dueDate:$.target.value})})]})]}),_.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[_.jsx("button",{type:"button",onClick:()=>h(!1),className:"btn-secondary",style:{flex:1},children:"Cancel"}),_.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1},children:"Save Plan"})]})]})]}),_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[_.jsx(n1,{size:20,className:"text-secondary"}),_.jsx("h3",{style:{margin:0,color:"var(--color-text-secondary)"},children:"Your Plans"})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[s.length>0&&s.some($=>!$.completed)&&_.jsx("h4",{style:{margin:"1rem 0 0.5rem",color:"var(--color-primary)",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.25rem"},children:"Daily Commitments"}),s.filter($=>!$.completed).map($=>_.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--color-warning)"},children:[_.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[_.jsx("h3",{style:{margin:0},children:$.title}),_.jsx("span",{style:{fontSize:"0.75rem",background:"#fef3c7",color:"#d97706",padding:"0.1rem 0.4rem",borderRadius:"4px"},children:"Now"})]}),_.jsx("p",{style:{margin:"0 0 0.5rem",color:"var(--color-text-primary)"},children:$.smallStep})]})}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[_.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:["Duration: ",$.time,"m"]}),_.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>r(`/complete/${$.id}`),children:"Task Done"})]})]},$.id)),e.length>0&&_.jsx("h4",{style:{margin:"1.5rem 0 0.5rem",color:"#0284c7",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.25rem"},children:"Future Schedule"}),e.map($=>{const Y=new Date().setHours(0,0,0,0),Q=new Date($.startDate).setHours(0,0,0,0),fe=new Date($.dueDate).setHours(0,0,0,0),ie=Y>=Q&&Y<=fe;return $.completed?null:_.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--color-primary)"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[_.jsxs("div",{children:[_.jsx("h3",{style:{margin:"0 0 0.25rem"},children:$.name}),_.jsx("p",{style:{margin:"0 0 0.5rem",color:"var(--color-text-primary)"},children:$.workToComplete})]}),ie&&_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--color-primary)",fontSize:"0.8rem",fontWeight:"bold",background:"var(--color-bg-accent)",padding:"0.25rem 0.5rem",borderRadius:"var(--radius-md)"},children:[_.jsx(mv,{size:14}),"Active Today"]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[_.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[_.jsxs("span",{children:["Start: ",$.startDate]}),_.jsxs("span",{children:["Due: ",$.dueDate]})]}),_.jsx("button",{className:"btn-primary",style:{background:"var(--color-success)",fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>r(`/complete/${$.id}`),children:"Task Done"})]})]},$.id)}),s.length===0&&e.length===0&&_.jsx("p",{style:{textAlign:"center",padding:"2rem",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)"},children:"No plans yet. Clear mind, clear path."})]})]})]})})},Hx=()=>{const r=zn(),[e,t]=M.useState(30),[s,o]=M.useState(""),[l,h]=M.useState([]),[f,g]=M.useState(0),[y,E]=M.useState(0),[T,I]=M.useState(!1);M.useEffect(()=>{const B=$e(Ee.DISTRACTION_LOGS,[]),j=new Date().setHours(0,0,0,0),$=B.filter(x=>new Date(x.date).setHours(0,0,0,0)===j);h($);const Y=$e(Ee.TASKS,[]),Q=$e(Ee.SCHEDULED_TASKS,[]),fe=Y.filter(x=>!x.completed||!x.completedAt?!1:new Date(x.completedAt).setHours(0,0,0,0)===j),ie=Q.filter(x=>!x.completed||!x.completedAt?!1:new Date(x.completedAt).setHours(0,0,0,0)===j),me=fe.length+ie.length;g(me),E(me*10)},[]);const N=100-e,q=B=>{B.preventDefault();const j=$e(Ee.REFLECTIONS,[]),$={id:Date.now(),date:new Date().toISOString(),procrastinationScore:e,workScore:N,tomorrowGoal:s,distractionCount:l.length,distractionTime:l.reduce((Y,Q)=>Y+parseInt(Q.duration||0),0),tasksDoneCount:f,pointsScored:y};Ht(Ee.REFLECTIONS,[$,...j]),I(!0)};return T?_.jsx(bt,{children:_.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"3rem"},children:[_.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),_.jsx("h2",{children:"Reflection Saved"}),_.jsx("p",{children:"Rest well. Tomorrow is a fresh start."}),_.jsx("button",{className:"btn-primary",onClick:()=>r("/"),style:{marginTop:"2rem"},children:"Back Home"}),_.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"var(--color-bg-accent)",borderRadius:"var(--radius-lg)",textAlign:"left"},children:[_.jsx("h3",{style:{fontSize:"1.1rem",marginTop:0},children:"Target for Tomorrow:"}),_.jsx("p",{style:{fontSize:"1.2rem",color:"var(--color-primary)",fontWeight:600},children:s})]})]})}):_.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[_.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[_.jsx(ms,{size:18})," Back"]}),_.jsx("h2",{style:{margin:0},children:"End of Day Reflection"})]}),_.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Be honest. Data helps you improve."}),_.jsxs("form",{onSubmit:q,className:"card",children:[_.jsxs("div",{style:{marginBottom:"2rem"},children:[_.jsxs("label",{style:{display:"flex",justifyContent:"space-between"},children:[_.jsx("span",{children:"Procrastination Level"}),_.jsxs("span",{style:{fontWeight:"bold",color:"var(--color-warning)"},children:[e,"%"]})]}),_.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:e,onChange:B=>t(parseInt(B.target.value)),style:{width:"100%",accentColor:"var(--color-warning)"}}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[_.jsx("span",{children:"Focused"}),_.jsx("span",{children:"Distracted"})]})]}),_.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#f0fdf4",borderRadius:"var(--radius-md)",border:"1px solid #bbf7d0",textAlign:"center"},children:[_.jsx("div",{style:{fontSize:"0.9rem",color:"#166534",marginBottom:"0.25rem"},children:"Overall Work Score"}),_.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#15803d"},children:[N,"%"]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"2rem"},children:[_.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center",background:"var(--color-bg-secondary)"},children:[_.jsx(gv,{size:24,style:{color:"var(--color-success)",marginBottom:"0.5rem"}}),_.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:f}),_.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Tasks Done"})]}),_.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center",background:"var(--color-bg-secondary)"},children:[_.jsx(wv,{size:24,style:{color:"var(--color-warning)",marginBottom:"0.5rem"}}),_.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:y}),_.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Points Scored"})]})]}),_.jsxs("div",{style:{marginBottom:"2rem"},children:[_.jsxs("h3",{style:{fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.jsx(yv,{size:16})," Today's Distractions"]}),l.length===0?_.jsx("p",{style:{color:"var(--color-text-secondary)",fontStyle:"italic"},children:"No distractions logged today."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:l.map(B=>_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)"},children:[_.jsxs("span",{children:[B.app," ",_.jsxs("small",{style:{color:"var(--color-text-secondary)"},children:["(",B.reasons.join(", "),")"]})]}),_.jsxs("strong",{children:[B.duration,"m"]})]},B.id))})]}),_.jsxs("div",{style:{marginBottom:"2rem"},children:[_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.jsx(u1,{size:18})," Goal for Tomorrow"]}),_.jsx("input",{required:!0,value:s,onChange:B=>o(B.target.value),placeholder:"e.g. Finish the Math Chapter without phone"})]}),_.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save & Close Day"})]})]})})},Wx=()=>{const r=zn(),[e,t]=M.useState("initial"),[s,o]=M.useState([]),[l,h]=M.useState(""),[f,g]=M.useState(""),[y,E]=M.useState([]),[T,I]=M.useState(null),[N,q]=M.useState([]),[B,j]=M.useState("");M.useEffect(()=>{const ie=$e("sp_distraction_types",[]);o(ie)},[]);const $=()=>{if(!l)return;const ie=[...s,{id:Date.now(),name:l,reasons:y.length>0?y:["General"]}];Ht("sp_distraction_types",ie),o(ie),h(""),E([]),g(""),t("initial")},Y=()=>{f&&(E([...y,f]),g(""))},Q=ie=>{ie.preventDefault();const me=$e(Ee.DISTRACTION_LOGS,[]),x={id:Date.now(),app:T.name,reasons:N,duration:B,date:new Date().toISOString()};Ht(Ee.DISTRACTION_LOGS,[x,...me]),t("success")},fe=ie=>{N.includes(ie)?q(N.filter(me=>me!==ie)):q([...N,ie])};return e==="calm"?_.jsx(bt,{children:_.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"4rem"},children:[_.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),_.jsx("h2",{children:"Great Job!"}),_.jsx("p",{children:"Focusing on your improvement is the best gift you can give yourself."}),_.jsx("button",{className:"btn-primary",onClick:()=>t("initial"),style:{marginTop:"2rem"},children:"Back"})]})}):e==="success"?_.jsx(bt,{children:_.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"4rem"},children:[_.jsx("h2",{children:"Logged."}),_.jsx("p",{children:"Awareness is the first step. Use this data tomorrow."}),_.jsx("button",{className:"btn-primary",onClick:()=>t("initial"),style:{marginTop:"2rem"},children:"Done"})]})}):e==="config"?_.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[_.jsx("h2",{children:"Add Distraction"}),_.jsx("button",{onClick:()=>t("initial"),style:{background:"none",border:"none",cursor:"pointer"},children:_.jsx(v1,{})})]}),_.jsxs("div",{className:"card",children:[_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Distraction Name"}),_.jsx("input",{value:l,onChange:ie=>h(ie.target.value),placeholder:"e.g. YouTube Shorts"})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{children:"Possible Reasons"}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[_.jsx("input",{value:f,onChange:ie=>g(ie.target.value),placeholder:"e.g. Boredom"}),_.jsx("button",{type:"button",onClick:Y,className:"btn-primary",style:{padding:"0.5rem"},children:_.jsx(bd,{size:16})})]}),_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:y.map((ie,me)=>_.jsx("span",{style:{background:"#f1f5f9",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.85rem"},children:ie},me))})]}),_.jsx("button",{className:"btn-primary",onClick:$,style:{width:"100%"},children:"Save"})]})]})}):e==="logging"?_.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("button",{onClick:()=>t("initial"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginBottom:"1rem"},children:[_.jsx(ms,{size:18})," Back"]}),_.jsx("h2",{children:"Log Distraction"}),T?_.jsxs("form",{onSubmit:Q,className:"card",children:[_.jsx("h3",{style:{marginTop:0},children:T.name}),_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsx("label",{children:"Why did you check it? (Select all that apply)"}),_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:T.reasons.map((ie,me)=>_.jsx("button",{type:"button",onClick:()=>fe(ie),style:{padding:"0.5rem 1rem",borderRadius:"2rem",border:"1px solid var(--color-primary)",background:N.includes(ie)?"var(--color-primary)":"white",color:N.includes(ie)?"white":"var(--color-primary)",cursor:"pointer"},children:ie},me))})]}),_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsx("label",{children:"Time Spent (Minutes)"}),_.jsx("input",{type:"number",required:!0,value:B,onChange:ie=>j(ie.target.value)})]}),_.jsx("button",{type:"submit",className:"btn-primary",style:{width:"100%"},children:"Save Log"})]}):_.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[_.jsx("p",{children:"Which app did you use?"}),s.map(ie=>_.jsx("button",{className:"card",onClick:()=>I(ie),style:{textAlign:"left",cursor:"pointer",borderColor:"var(--color-primary)"},children:_.jsx("strong",{children:ie.name})},ie.id)),s.length===0&&_.jsx("p",{children:"No distractions configured. Go back and add some!"})]})]})}):_.jsx(bt,{children:_.jsxs("div",{className:"container",style:{textAlign:"center",paddingTop:"2rem"},children:[_.jsx("div",{style:{position:"absolute",left:"1rem",top:"5rem"},children:_.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500"},children:[_.jsx(ms,{size:18})," Back"]})}),_.jsx(_v,{size:64,style:{color:"var(--color-text-accent)",marginBottom:"1rem"}}),_.jsx("h2",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Distracted?"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[_.jsx("button",{className:"btn-primary",style:{padding:"1.5rem",fontSize:"1.25rem",background:"#ef4444"},onClick:()=>t("logging"),children:"Yes, I gave in."}),_.jsx("button",{className:"btn-primary",style:{padding:"1.5rem",fontSize:"1.25rem",background:"#10b981"},onClick:()=>t("calm"),children:"No, I'm focused."})]}),_.jsx("div",{style:{marginTop:"2rem"},children:_.jsxs("button",{onClick:()=>t("config"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"transparent",border:"1px dashed var(--color-text-secondary)",color:"var(--color-text-secondary)",cursor:"pointer",padding:"0.75rem 1.5rem",borderRadius:"var(--radius-full)",fontSize:"0.9rem",transition:"all 0.2s"},children:[_.jsx(bd,{size:16})," Add Distraction"]})})]})})},Pd=({data:r,dataKeys:e,colors:t,height:s=200,width:o="100%"})=>{if(!r||r.length===0)return _.jsx("div",{style:{height:s,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",background:"#f8fafc",borderRadius:"8px"},children:"No Data Available"});const l=500,h=200,f=20,g=Math.max(...r.map(I=>Math.max(...e.map(N=>Number(I[N]||0))))),y=g>0?g*1.1:10,E=I=>f+I/(r.length-1||1)*(l-2*f),T=I=>h-f-I/y*(h-2*f);return _.jsxs("div",{style:{width:o,overflow:"hidden"},children:[_.jsxs("svg",{viewBox:`0 0 ${l} ${h}`,style:{width:"100%",height:"auto",background:"#fff",borderRadius:"8px",border:"1px solid #f1f5f9"},children:[[0,.25,.5,.75,1].map(I=>_.jsx("line",{x1:f,y1:f+I*(h-2*f),x2:l-f,y2:f+I*(h-2*f),stroke:"#e2e8f0",strokeWidth:"1"},I)),e.map((I,N)=>{const q=r.map((B,j)=>`${E(j)},${T(Number(B[I]||0))}`).join(" ");return _.jsxs("g",{children:[_.jsx("polyline",{fill:"none",stroke:t[N],strokeWidth:"3",points:q,strokeLinecap:"round",strokeLinejoin:"round"}),r.map((B,j)=>_.jsx("circle",{cx:E(j),cy:T(Number(B[I]||0)),r:"3",fill:"#fff",stroke:t[N],strokeWidth:"2"},j))]},I)}),r.map((I,N)=>_.jsxs("text",{x:E(N),y:h-5,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:[new Date(I.date).getDate(),"/",new Date(I.date).getMonth()+1]},N))]}),_.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"0.5rem"},children:e.map((I,N)=>_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"#64748b"},children:[_.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:t[N]}}),I==="workScore"?"Work":I==="procrastinationScore"?"Procrastination":I==="pointsScored"?"Points":I==="distractionTime"?"Time Lost (m)":I]},I))})]})},qx=()=>{const r=zn(),[e,t]=M.useState([]);return M.useEffect(()=>{const o=[...$e(Ee.REFLECTIONS,[])].sort((l,h)=>new Date(l.date)-new Date(h.date));t(o)},[]),_.jsx(bt,{children:_.jsxs("div",{className:"container",children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem"},children:[_.jsxs("button",{onClick:()=>r("/"),style:{background:"var(--color-bg-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-primary)",padding:"0.5rem 1rem",borderRadius:"2rem",fontWeight:"500",marginRight:"1rem"},children:[_.jsx(ms,{size:18})," Back"]}),_.jsx("h2",{style:{flex:1,textAlign:"center",margin:0,paddingRight:"3rem"},children:"Progress Analysis"})]}),_.jsxs("div",{style:{display:"grid",gap:"2rem"},children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Work vs Procrastination (%)"}),_.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:["Aim to keep the ",_.jsx("span",{style:{color:"#22c55e",fontWeight:"bold"},children:"Green"})," line above the ",_.jsx("span",{style:{color:"#ef4444",fontWeight:"bold"},children:"Red"})," line."]}),_.jsx(Pd,{data:e,dataKeys:["workScore","procrastinationScore"],colors:["#22c55e","#ef4444"]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Focus Points Earned"}),_.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"Your daily rewards for completing tasks and building habits."}),_.jsx(Pd,{data:e,dataKeys:["pointsScored"],colors:["#a855f7"]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{style:{marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Time Distracted (Minutes)"}),_.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"Lower is better. Track your digital diet effectiveness."}),_.jsx(Pd,{data:e,dataKeys:["distractionTime"],colors:["#f97316"]})]})]})]})})},Kx=()=>{const r=zn(),[e,t]=M.useState(!1),[s,o]=M.useState(null),l=async()=>{t(!0),o(null);try{const f=(await fC(Tc,Vx)).user,g=Pw(Bw,"users",f.uid),y=await Px(g);if(y.exists()){const E=y.data();E.tasks&&Ht(Ee.TASKS,JSON.parse(E.tasks)),E.scheduled&&Ht(Ee.SCHEDULED_TASKS,JSON.parse(E.scheduled)),E.reflections&&Ht(Ee.REFLECTIONS,JSON.parse(E.reflections)),E.stats&&Ht(Ee.USER_STATS,JSON.parse(E.stats)),E.mood&&Ht(Ee.USER_MOOD,E.mood),console.log("Data synced from cloud!")}else{const E={email:f.email,displayName:f.displayName,createdAt:new Date().toISOString(),tasks:JSON.stringify($e(Ee.TASKS,[])),scheduled:JSON.stringify($e(Ee.SCHEDULED_TASKS,[])),reflections:JSON.stringify($e(Ee.REFLECTIONS,[])),stats:JSON.stringify($e(Ee.USER_STATS,{})),mood:$e(Ee.USER_MOOD,null)};await Uw(g,E),console.log("Local data backed up to cloud!")}r("/")}catch(h){console.error("Login Result Error:",h),o("Failed to sign in. Please try again.")}finally{t(!1)}};return _.jsx(bt,{children:_.jsx("div",{className:"container",style:{textAlign:"center",marginTop:"4rem"},children:_.jsxs("div",{className:"card",style:{maxWidth:"400px",margin:"0 auto"},children:[_.jsx("h2",{style:{marginBottom:"1rem"},children:"Backup Your Progress"}),_.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Sign in to save your tasks, streaks, and reflections to the cloud. Access them from any device."}),s&&_.jsx("div",{style:{color:"var(--color-danger)",marginBottom:"1rem",fontSize:"0.9rem"},children:s}),_.jsxs("button",{onClick:l,disabled:e,className:"btn-primary",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.75rem",padding:"0.75rem"},children:[e?_.jsx(i1,{className:"spin",size:20}):_.jsx(vv,{size:20}),e?"Signing In...":"Sign in with Google"]})]})})})};function Gx(){return _.jsx(CT,{children:_.jsxs(tT,{children:[_.jsx(Ln,{path:"/",element:_.jsx(jx,{})}),_.jsx(Ln,{path:"/analysis",element:_.jsx(qx,{})}),_.jsx(Ln,{path:"/signin",element:_.jsx(Kx,{})}),_.jsx(Ln,{path:"/mood",element:_.jsx(Fx,{})}),_.jsx(Ln,{path:"/tasks",element:_.jsx(Ux,{})}),_.jsx(Ln,{path:"/add-task",element:_.jsx(zx,{})}),_.jsx(Ln,{path:"/complete/:taskId",element:_.jsx(Bx,{})}),_.jsx(Ln,{path:"/schedule",element:_.jsx($x,{})}),_.jsx(Ln,{path:"/reflect",element:_.jsx(Hx,{})}),_.jsx(Ln,{path:"/limit",element:_.jsx(Wx,{})})]})})}r0.createRoot(document.getElementById("root")).render(_.jsx(M.StrictMode,{children:_.jsx(Gx,{})}));
